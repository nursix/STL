/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+
 requires NVD3.js

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,e){c!=Array.prototype&&c!=Object.prototype&&(c[a]=e.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var a=0;return $jscomp.iteratorPrototype(function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,a){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var e=0,g={next:function(){if(e<c.length){var t=e++;return{value:a(t,c[t]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(c,a,e,g){if(a){e=$jscomp.global;c=c.split(".");for(g=0;g<c.length-1;g++){var t=c[g];t in e||(e[t]={});e=e[t]}c=c[c.length-1];g=e[c];a=a(g);a!=g&&null!=a&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.findInternal=function(c,a,e){c instanceof String&&(c=String(c));for(var g=c.length,t=0;t<g;t++){var l=c[t];if(a.call(e,l,t,c))return{i:t,v:l}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
!function(){function c(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function a(b,d){return b<d?-1:b>d?1:b>=d?0:NaN}function e(b){return null===b?NaN:+b}function g(b){return!isNaN(b)}function t(b){return{left:function(d,f,k,m){3>arguments.length&&(k=0);4>arguments.length&&(m=d.length);for(;k<m;){var x=k+m>>>1;0>b(d[x],f)?k=x+1:m=x}return k},right:function(d,f,k,m){3>arguments.length&&(k=0);4>arguments.length&&(m=d.length);for(;k<m;){var x=k+m>>>1;0<b(d[x],
f)?m=x:k=x+1}return k}}}function l(b){return b.length}function n(b,d){for(var f in d)Object.defineProperty(b.prototype,f,{value:d[f],enumerable:!1})}function p(){this._=Object.create(null)}function h(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function u(b){return"\x00"===(b+="")[0]?b.slice(1):b}function w(b){return h(b)in this._}function J(b){return(b=h(b))in this._&&delete this._[b]}function C(){var b=[],d;for(d in this._)b.push(u(d));return b}function B(){var b=0,d;for(d in this._)++b;
return b}function G(){for(var b in this._)return!1;return!0}function E(){this._=Object.create(null)}function A(b){return b}function L(b,d,f){return function(){var k=f.apply(d,arguments);return k===d?b:k}}function M(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var f=0,k=Zd.length;f<k;++f){var m=Zd[f]+d;if(m in b)return m}}function I(){}function v(){}function F(b){function d(){for(var d=f,k=-1,a=d.length,T;++k<a;)(T=d[k].on)&&T.apply(this,arguments);return b}var f=[],k=new p;d.on=
function(d,x){var m=k.get(d),T;if(2>arguments.length)return m&&m.on;m&&(m.on=null,f=f.slice(0,T=f.indexOf(m)).concat(f.slice(T+1)),k.remove(d));x&&f.push(k.set(d,{on:x}));return b};return d}function U(){z.event.preventDefault()}function N(){for(var b=z.event,d;d=b.sourceEvent;)b=d;return b}function P(b){for(var d=new v,f=0,k=arguments.length;++f<k;)d[arguments[f]]=F(d);d.of=function(f,k){return function(m){try{var x=m.sourceEvent=z.event;m.target=b;z.event=m;d[m.type].apply(f,k)}finally{z.event=x}}};
return d}function R(b){Sb(b,la);return b}function r(b){return"function"===typeof b?b:function(){return Qc(b,this)}}function K(b){return"function"===typeof b?b:function(){return Rc(b,this)}}function Q(b,d){function f(){this.removeAttribute(b)}function k(){this.removeAttributeNS(b.space,b.local)}function m(){this.setAttribute(b,d)}function x(){this.setAttributeNS(b.space,b.local,d)}function a(){var f=d.apply(this,arguments);null==f?this.removeAttribute(b):this.setAttribute(b,f)}function T(){var f=d.apply(this,
arguments);null==f?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,f)}b=z.ns.qualify(b);return null==d?b.local?k:f:"function"===typeof d?b.local?T:a:b.local?x:m}function D(b){return new RegExp("(?:^|\\s+)"+z.requote(b)+"(?:\\s+|$)","g")}function q(b,d){function f(){for(var f=-1;++f<m;)b[f](this,d)}function k(){for(var f=-1,k=d.apply(this,arguments);++f<m;)b[f](this,k)}b=(b+"").trim().split(/^|\s+/).map(O);var m=b.length;return"function"===typeof d?k:f}function O(b){var d=
D(b);return function(f,k){if(m=f.classList)return k?m.add(b):m.remove(b);var m=f.getAttribute("class")||"";k?(d.lastIndex=0,d.test(m)||f.setAttribute("class",(m+" "+b).trim().replace(/\s+/g," "))):f.setAttribute("class",m.replace(d," ").trim().replace(/\s+/g," "))}}function y(b,d,f){function k(){this.style.removeProperty(b)}function m(){this.style.setProperty(b,d,f)}function x(){var k=d.apply(this,arguments);null==k?this.style.removeProperty(b):this.style.setProperty(b,k,f)}return null==d?k:"function"===
typeof d?x:m}function V(b,d){function f(){delete this[b]}function k(){this[b]=d}function m(){var f=d.apply(this,arguments);null==f?delete this[b]:this[b]=f}return null==d?f:"function"===typeof d?m:k}function aa(b){function d(){var d=this.ownerDocument,f=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===f&&"http://www.w3.org/1999/xhtml"===d.documentElement.namespaceURI?d.createElement(b):d.createElementNS(f,b)}function f(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=z.ns.qualify(b)).local?f:d}function H(){var b=this.parentNode;b&&b.removeChild(this)}function S(b){return function(){return Tb(this,b)}}function X(b){arguments.length||(b=a);return function(d,f){return d&&f?b(d.__data__,f.__data__):!d-!f}}function ka(b,d){for(var f=0,k=b.length;f<k;f++)for(var m=b[f],x=0,a=m.length,T;x<a;x++)(T=m[x])&&d(T,x,f);return b}function da(b){Sb(b,Ta);return b}function ma(b){var d,f;return function(k,m,x){k=b[x].update;var a=k.length;x!=f&&(f=x,d=0);for(m>=d&&
(d=m+1);!(m=k[d])&&++d<a;);return m}}function ua(b,d,f){function k(){var d=this[a];d&&(this.removeEventListener(b,d,d.$),delete this[a])}function m(){var m=Z(d,Qa(arguments));k.call(this);this.addEventListener(b,this[a]=m,m.$=f);m._=d}function x(){var d=new RegExp("^__on([^.]+)"+z.requote(b)+"$"),f,k;for(k in this)if(f=k.match(d)){var m=this[k];this.removeEventListener(f[1],m,m.$);delete this[k]}}var a="__on"+b,T=b.indexOf("."),Z=fa;0<T&&(b=b.slice(0,T));var c=Tc.get(b);c&&(b=c,Z=ia);return T?d?m:
k:d?I:x}function fa(b,d){return function(f){var k=z.event;z.event=f;d[0]=this.__data__;try{b.apply(this,d)}finally{z.event=k}}}function ia(b,d){var f=fa(b,d);return function(b){var d=b.relatedTarget;d&&(d===this||d.compareDocumentPosition(this)&8)||f.call(this,b)}}function oa(b){var d=".dragsuppress-"+ ++pg,f="click"+d,k=z.select(c(b)).on("touchmove"+d,U).on("dragstart"+d,U).on("selectstart"+d,U);null==eb&&(eb="onselectstart"in b?!1:M(b.style,"userSelect"));if(eb){var m=(b&&(b.ownerDocument||b.document||
b).documentElement).style;var x=m[eb];m[eb]="none"}return function(b){k.on(d,null);eb&&(m[eb]=x);if(b){var a=function(){k.on(f,null)};k.on(f,function(){U();a()},!0);setTimeout(a,0)}}}function ha(b,d){d.changedTouches&&(d=d.changedTouches[0]);var f=b.ownerSVGElement||b;if(f.createSVGPoint){var k=f.createSVGPoint();if(0>Uc&&(f=c(b),f.scrollX||f.scrollY)){var f=z.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),m=f[0][0].getScreenCTM();
Uc=!(m.f||m.e);f.remove()}Uc?(k.x=d.pageX,k.y=d.pageY):(k.x=d.clientX,k.y=d.clientY);k=k.matrixTransform(b.getScreenCTM().inverse());return[k.x,k.y]}k=b.getBoundingClientRect();return[d.clientX-k.left-b.clientLeft,d.clientY-k.top-b.clientTop]}function ja(){return z.event.changedTouches[0].identifier}function ra(b,d,f){return(d[0]-b[0])*(f[1]-b[1])-(d[1]-b[1])*(f[0]-b[0])}function ya(b){return 1<b?0:-1>b?ba:Math.acos(b)}function na(b){return 1<b?wa:-1>b?-wa:Math.asin(b)}function Ia(b){return((b=Math.exp(b))+
1/b)/2}function Ja(b){return(b=Math.sin(b/2))*b}function Ca(){}function Ba(b,d,f){return this instanceof Ba?void(this.h=+b,this.s=+d,this.l=+f):2>arguments.length?b instanceof Ba?new Ba(b.h,b.s,b.l):$d(""+b,ae,Ba):new Ba(b,d,f)}function za(b,d,f){function k(b){360<b?b-=360:0>b&&(b+=360);return 60>b?x+(m-x)*b/60:180>b?m:240>b?x+(m-x)*(240-b)/60:x}b=isNaN(b)?0:0>(b%=360)?b+360:b;d=isNaN(d)?0:0>d?0:1<d?1:d;f=0>f?0:1<f?1:f;var m=.5>=f?f*(1+d):f+d-f*d;var x=2*f-m;return new Ga(Math.round(255*k(b+120)),
Math.round(255*k(b)),Math.round(255*k(b-120)))}function sa(b,d,f){return this instanceof sa?void(this.h=+b,this.c=+d,this.l=+f):2>arguments.length?b instanceof sa?new sa(b.h,b.c,b.l):b instanceof Da?be(b.l,b.a,b.b):be((b=ce((b=z.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new sa(b,d,f)}function va(b,d,f){isNaN(b)&&(b=0);isNaN(d)&&(d=0);return new Da(f,Math.cos(b*=ca)*d,Math.sin(b)*d)}function Da(b,d,f){return this instanceof Da?void(this.l=+b,this.a=+d,this.b=+f):2>arguments.length?b instanceof Da?new Da(b.l,
b.a,b.b):b instanceof sa?va(b.h,b.c,b.l):ce((b=Ga(b)).r,b.g,b.b):new Da(b,d,f)}function Cb(b,d,f){b=(b+16)/116;f=b-f/200;d=Vc(b+d/500)*de;b=Vc(b)*ee;f=Vc(f)*fe;return new Ga(Wc(3.2404542*d-1.5371385*b-.4985314*f),Wc(-.969266*d+1.8760108*b+.041556*f),Wc(.0556434*d-.2040259*b+1.0572252*f))}function be(b,d,f){return 0<b?new sa(Math.atan2(f,d)*ta,Math.sqrt(d*d+f*f),b):new sa(NaN,NaN,b)}function Vc(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Xc(b){return.008856<b?Math.pow(b,1/3):7.787037*b+
4/29}function Wc(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Ga(b,d,f){return this instanceof Ga?void(this.r=~~b,this.g=~~d,this.b=~~f):2>arguments.length?b instanceof Ga?new Ga(b.r,b.g,b.b):$d(""+b,Ga,za):new Ga(b,d,f)}function Ub(b){return new Ga(b>>16,b>>8&255,b&255)+""}function pb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function $d(b,d,f){var k=0,m=0,x=0,a;if(a=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var T=a[2].split(",");
switch(a[1]){case "hsl":return f(parseFloat(T[0]),parseFloat(T[1])/100,parseFloat(T[2])/100);case "rgb":return d(Yc(T[0]),Yc(T[1]),Yc(T[2]))}}if(f=Vb.get(b))return d(f.r,f.g,f.b);null==b||"#"!==b.charAt(0)||isNaN(f=parseInt(b.slice(1),16))||(4===b.length?(k=(f&3840)>>4,k|=k>>4,m=f&240,m|=m>>4,x=f&15,x|=x<<4):7===b.length&&(k=(f&16711680)>>16,m=(f&65280)>>8,x=f&255));return d(k,m,x)}function ae(b,d,f){var k=Math.min(b/=255,d/=255,f/=255),m=Math.max(b,d,f),x=m-k,a=(m+k)/2;x?(k=.5>a?x/(m+k):x/(2-m-k),
b=60*(b==m?(d-f)/x+(d<f?6:0):d==m?(f-b)/x+2:(b-d)/x+4)):(b=NaN,k=0<a&&1>a?0:b);return new Ba(b,k,a)}function ce(b,d,f){b=Zc(b);d=Zc(d);f=Zc(f);var k=Xc((.4124564*b+.3575761*d+.1804375*f)/de),m=Xc((.2126729*b+.7151522*d+.072175*f)/ee);b=Xc((.0193339*b+.119192*d+.9503041*f)/fe);return Da(116*m-16,500*(k-m),200*(m-b))}function Zc(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Yc(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function pa(b){return"function"===
typeof b?b:function(){return b}}function $c(b){return function(d,f,k){2===arguments.length&&"function"===typeof f&&(k=f,f=null);return Wb(d,f,b,k)}}function Wb(b,d,f,k){function m(){var b=Z.status,d;if(d=!b)d=(d=Z.responseType)&&"text"!==d?Z.response:Z.responseText;if(d||200<=b&&300>b||304===b){try{var k=f.call(x,Z)}catch(og){a.error.call(x,og);return}a.load.call(x,k)}else a.error.call(x,Z)}var x={},a=z.dispatch("beforesend","progress","load","error"),T={},Z=new XMLHttpRequest,c=null;!this.XDomainRequest||
"withCredentials"in Z||!/^(http(s)?:)?\/\//.test(b)||(Z=new XDomainRequest);"onload"in Z?Z.onload=Z.onerror=m:Z.onreadystatechange=function(){3<Z.readyState&&m()};Z.onprogress=function(b){var d=z.event;z.event=b;try{a.progress.call(x,Z)}finally{z.event=d}};x.header=function(b,d){b=(b+"").toLowerCase();if(2>arguments.length)return T[b];null==d?delete T[b]:T[b]=d+"";return x};x.mimeType=function(b){if(!arguments.length)return d;d=null==b?null:b+"";return x};x.responseType=function(b){if(!arguments.length)return c;
c=b;return x};x.response=function(b){f=b;return x};["get","post"].forEach(function(b){x[b]=function(){return x.send.apply(x,[b].concat(Qa(arguments)))}});x.send=function(f,k,m){2===arguments.length&&"function"===typeof k&&(m=k,k=null);Z.open(f,b,!0);null==d||"accept"in T||(T.accept=d+",*/*");if(Z.setRequestHeader)for(var e in T)Z.setRequestHeader(e,T[e]);null!=d&&Z.overrideMimeType&&Z.overrideMimeType(d);null!=c&&(Z.responseType=c);if(null!=m)x.on("error",m).on("load",function(b){m(null,b)});a.beforesend.call(x,
Z);Z.send(null==k?null:k);return x};x.abort=function(){Z.abort();return x};z.rebind(x,a,"on");return null==k?x:x.get(qg(k))}function qg(b){return 1===b.length?function(d,f){b(null==d?f:null)}:b}function Xb(b,d,f){var k=arguments.length;2>k&&(d=0);3>k&&(f=Date.now());k={c:b,t:f+d,n:null};Yb?Yb.n=k:Zb=k;Yb=k;$b||(ac=clearTimeout(ac),$b=1,ge(ad));return k}function ad(){var b=he(),b=ie()-b;24<b?(isFinite(b)&&(clearTimeout(ac),ac=setTimeout(ad,b)),$b=0):($b=1,ge(ad))}function he(){for(var b=Date.now(),
d=Zb;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function ie(){for(var b,d=Zb,f=Infinity;d;)d.c?(d.t<f&&(f=d.t),d=(b=d).n):d=b?b.n=d.n:Zb=d.n;Yb=b;return f}function bd(b,d){return d-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function rg(b){var d=b.decimal,f=b.thousands,k=b.grouping,m=b.currency,x=k&&f?function(b,d){for(var m=b.length,x=[],a=0,T=k[0],c=0;0<m&&0<T;){c+T+1>d&&(T=Math.max(1,d-c));x.push(b.substring(m-=T,m+T));if((c+=T+1)>d)break;T=k[a=(a+1)%k.length]}return x.reverse().join(f)}:A;return function(b){b=
je.exec(b);var f=b[1]||" ",k=b[2]||">",a=b[3]||"-",c=b[4]||"",e=b[5],ga=+b[6],g=b[7],h=b[8],q=b[9],l=1,r="",n="",y=!1,t=!0;h&&(h=+h.substring(1));if(e||"0"===f&&"="===k)e=f="0",k="=";switch(q){case "n":g=!0;q="g";break;case "%":l=100;n="%";q="f";break;case "p":l=100;n="%";q="r";break;case "b":case "o":case "x":case "X":"#"===c&&(r="0"+q.toLowerCase());case "c":t=!1;case "d":y=!0;h=0;break;case "s":l=-1,q="r"}"$"===c&&(r=m[0],n=m[1]);"r"!=q||h||(q="g");if(null!=h)if("g"==q)h=Math.max(1,Math.min(21,
h));else if("e"==q||"f"==q)h=Math.max(0,Math.min(20,h));var q=sg.get(q)||tg,p=e&&g;return function(b){var m=n;if(y&&b%1)return"";var T=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===a?"":a;0>l?(m=z.formatPrefix(b,h),b=m.scale(b),m=m.symbol+n):b*=l;b=q(b,h);var c=b.lastIndexOf(".");if(0>c)if(c=t?b.lastIndexOf("e"):-1,0>c){var Z=b;b=""}else Z=b.substring(0,c),b=b.substring(c);else Z=b.substring(0,c),b=d+b.substring(c+1);!e&&g&&(Z=x(Z,Infinity));var c=r.length+Z.length+b.length+(p?0:T.length),W=c<ga?Array(c=ga-
c+1).join(f):"";p&&(Z=x(W+Z,W.length?ga-b.length:Infinity));T+=r;b=Z+b;return("<"===k?T+b+W:">"===k?W+T+b:"^"===k?W.substring(0,c>>=1)+T+b+W.substring(c):T+(p?b:W+b))+m}}}function tg(b){return b+""}function Ua(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function fb(b,d,f){function k(d){var f=b(d),k=x(f,1);return d-f<k-d?f:k}function m(f){d(f=b(new Ea(f-1)),1);return f}function x(b,f){d(b=new Ea(+b),f);return b}function a(b,k,x){b=m(b);var a=[];if(1<x)for(;b<k;)f(b)%
x||a.push(new Date(+b)),d(b,1);else for(;b<k;)a.push(new Date(+b)),d(b,1);return a}b.floor=b;b.round=k;b.ceil=m;b.offset=x;b.range=a;var T=b.utc=bc(b);T.floor=T;T.round=bc(k);T.ceil=bc(m);T.offset=bc(x);T.range=function(b,d,f){try{Ea=Ua;var k=new Ua;k._=b;return a(k,d,f)}finally{Ea=Date}};return b}function bc(b){return function(d,f){try{Ea=Ua;var k=new Ua;k._=d;return b(k,f)._}finally{Ea=Date}}}function ug(b){function d(b){function d(d){for(var f=[],m=-1,x=0,a,c;++m<k;)if(37===b.charCodeAt(m)){f.push(b.slice(x,
m));null!=(a=ke[x=b.charAt(++m)])&&(x=b.charAt(++m));if(c=v[x])x=c(d,null==a?"e"===x?" ":"0":a);f.push(x);x=m+1}f.push(b.slice(x,m));return f.join("")}var k=b.length;d.parse=function(d){var k={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(k,b,d,0)!=d.length)return null;"p"in k&&(k.H=k.H%12+12*k.p);d=null!=k.Z&&Ea!==Ua;var m=new (d?Ua:Ea);"j"in k?m.setFullYear(k.y,0,k.j):"W"in k||"U"in k?("w"in k||(k.w="W"in k?1:0),m.setFullYear(k.y,0,1),m.setFullYear(k.y,0,"W"in k?(k.w+6)%7+7*k.W-(m.getDay()+5)%7:k.w+
7*k.U-(m.getDay()+6)%7)):m.setFullYear(k.y,k.m,k.d);m.setHours(k.H+(k.Z/100|0),k.M+k.Z%100,k.S,k.L);return d?m._:m};d.toString=function(){return b};return d}function f(b,d,f,k){for(var m,x=0,a=d.length,c=f.length;x<a;){if(k>=c)return-1;m=d.charCodeAt(x++);if(37===m){if(m=d.charAt(x++),m=D[m in ke?d.charAt(x++):m],!m||0>(k=m(b,f,k)))return-1}else if(m!=f.charCodeAt(k++))return-1}return k}var k=b.dateTime,m=b.date,x=b.time,a=b.periods,T=b.days,c=b.shortDays,e=b.months,g=b.shortMonths;d.utc=function(b){function f(b){try{Ea=
Ua;var d=new Ea;d._=b;return k(d)}finally{Ea=Date}}var k=d(b);f.parse=function(b){try{Ea=Ua;var d=k.parse(b);return d&&d._}finally{Ea=Date}};f.toString=k.toString;return f};d.multi=d.utc.multi=vg;var h=z.map(),q=cc(T),l=dc(T),r=cc(c),n=dc(c),y=cc(e),t=dc(e),p=cc(g),H=dc(g);a.forEach(function(b,d){h.set(b.toLowerCase(),d)});var v={a:function(b){return c[b.getDay()]},A:function(b){return T[b.getDay()]},b:function(b){return g[b.getMonth()]},B:function(b){return e[b.getMonth()]},c:d(k),d:function(b,d){return Ha(b.getDate(),
d,2)},e:function(b,d){return Ha(b.getDate(),d,2)},H:function(b,d){return Ha(b.getHours(),d,2)},I:function(b,d){return Ha(b.getHours()%12||12,d,2)},j:function(b,d){return Ha(1+Y.dayOfYear(b),d,3)},L:function(b,d){return Ha(b.getMilliseconds(),d,3)},m:function(b,d){return Ha(b.getMonth()+1,d,2)},M:function(b,d){return Ha(b.getMinutes(),d,2)},p:function(b){return a[+(12<=b.getHours())]},S:function(b,d){return Ha(b.getSeconds(),d,2)},U:function(b,d){return Ha(Y.sundayOfYear(b),d,2)},w:function(b){return b.getDay()},
W:function(b,d){return Ha(Y.mondayOfYear(b),d,2)},x:d(m),X:d(x),y:function(b,d){return Ha(b.getFullYear()%100,d,2)},Y:function(b,d){return Ha(b.getFullYear()%1E4,d,4)},Z:wg,"%":function(){return"%"}},D={a:function(b,d,f){r.lastIndex=0;return(d=r.exec(d.slice(f)))?(b.w=n.get(d[0].toLowerCase()),f+d[0].length):-1},A:function(b,d,f){q.lastIndex=0;return(d=q.exec(d.slice(f)))?(b.w=l.get(d[0].toLowerCase()),f+d[0].length):-1},b:function(b,d,f){p.lastIndex=0;return(d=p.exec(d.slice(f)))?(b.m=H.get(d[0].toLowerCase()),
f+d[0].length):-1},B:function(b,d,f){y.lastIndex=0;return(d=y.exec(d.slice(f)))?(b.m=t.get(d[0].toLowerCase()),f+d[0].length):-1},c:function(b,d,k){return f(b,v.c.toString(),d,k)},d:le,e:le,H:me,I:me,j:xg,L:yg,m:zg,M:Ag,p:function(b,d,f){d=h.get(d.slice(f,f+=2).toLowerCase());return null==d?-1:(b.p=d,f)},S:Bg,U:Cg,w:Dg,W:Eg,x:function(b,d,k){return f(b,v.x.toString(),d,k)},X:function(b,d,k){return f(b,v.X.toString(),d,k)},y:Fg,Y:Gg,Z:Hg,"%":Ig};return d}function Ha(b,d,f){var k=0>b?"-":"";b=(k?-b:
b)+"";var m=b.length;return k+(m<f?Array(f-m+1).join(d)+b:b)}function cc(b){return new RegExp("^(?:"+b.map(z.requote).join("|")+")","i")}function dc(b){for(var d=new p,f=-1,k=b.length;++f<k;)d.set(b[f].toLowerCase(),f);return d}function Dg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+1)))?(b.w=+d[0],f+d[0].length):-1}function Cg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f)))?(b.U=+d[0],f+d[0].length):-1}function Eg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f)))?(b.W=+d[0],f+d[0].length):
-1}function Gg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+4)))?(b.y=+d[0],f+d[0].length):-1}function Fg(b,d,f){xa.lastIndex=0;if(d=xa.exec(d.slice(f,f+2))){var k=+d[0];b=(b.y=k+(68<k?1900:2E3),f+d[0].length)}else b=-1;return b}function Hg(b,d,f){return/^[+-]\d{4}$/.test(d=d.slice(f,f+5))?(b.Z=-d,f+5):-1}function zg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.m=d[0]-1,f+d[0].length):-1}function le(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.d=+d[0],f+d[0].length):
-1}function xg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+3)))?(b.j=+d[0],f+d[0].length):-1}function me(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.H=+d[0],f+d[0].length):-1}function Ag(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.M=+d[0],f+d[0].length):-1}function Bg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+2)))?(b.S=+d[0],f+d[0].length):-1}function yg(b,d,f){xa.lastIndex=0;return(d=xa.exec(d.slice(f,f+3)))?(b.L=+d[0],f+d[0].length):-1}function wg(b){var d=
b.getTimezoneOffset();b=0<d?"-":"+";var f=ea(d)/60|0,d=ea(d)%60;return b+Ha(f,"0",2)+Ha(d,"0",2)}function Ig(b,d,f){ne.lastIndex=0;return(b=ne.exec(d.slice(f,f+1)))?f+b[0].length:-1}function vg(b){for(var d=b.length,f=-1;++f<d;)b[f][0]=this(b[f][0]);return function(d){for(var f=0,k=b[f];!k[1](d);)k=b[++f];return k[0](d)}}function cd(){}function oe(b,d,f){var k=f.s=b+d,m=k-b;f.t=b-(k-m)+(d-m)}function ec(b,d){if(b&&pe.hasOwnProperty(b.type))pe[b.type](b,d)}function dd(b,d,f){var k=-1;f=b.length-f;
for(d.lineStart();++k<f;){var m=b[k];d.point(m[0],m[1],m[2])}d.lineEnd()}function qe(b,d){var f=-1,k=b.length;for(d.polygonStart();++f<k;)dd(b[f],d,1);d.polygonEnd()}function Jg(){function b(b,d){b*=ca;d=d*ca/2+ba/4;var f=b-k,a=0<=f?1:-1,f=a*f,c=Math.cos(d),T=Math.sin(d),e=x*T;gb.add(Math.atan2(e*a*Math.sin(f),m*c+e*Math.cos(f)));k=b;m=c;x=T}var d,f,k,m,x;Ka.point=function(a,c){Ka.point=b;k=(d=a)*ca;m=Math.cos(c=(f=c)*ca/2+ba/4);x=Math.sin(c)};Ka.lineEnd=function(){b(d,f)}}function hb(b){var d=b[0];
b=b[1];var f=Math.cos(b);return[f*Math.cos(d),f*Math.sin(d),Math.sin(b)]}function fc(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function qb(b,d){return[b[1]*d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function ed(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function gc(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function hc(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function ic(b){return[Math.atan2(b[1],b[0]),na(b[2])]}function jc(b,d){return 1E-6>ea(b[0]-d[0])&&1E-6>ea(b[1]-
d[1])}function fd(b,d){b*=ca;var f=Math.cos(d*=ca);Db(f*Math.cos(b),f*Math.sin(b),Math.sin(d))}function Db(b,d,f){++Eb;ib+=(b-ib)/Eb;jb+=(d-jb)/Eb;Va+=(f-Va)/Eb}function re(){function b(b,x){b*=ca;var m=Math.cos(x*=ca),a=m*Math.cos(b),m=m*Math.sin(b),c=Math.sin(x),e=Math.atan2(Math.sqrt((e=f*c-k*m)*e+(e=k*a-d*c)*e+(e=d*m-f*a)*e),d*a+f*m+k*c);kc+=e;Ya+=e*(d+(d=a));Za+=e*(f+(f=m));Ra+=e*(k+(k=c));Db(d,f,k)}var d,f,k;Na.point=function(m,x){m*=ca;var a=Math.cos(x*=ca);d=a*Math.cos(m);f=a*Math.sin(m);
k=Math.sin(x);Na.point=b;Db(d,f,k)}}function se(){Na.point=fd}function Kg(){function b(b,d){b*=ca;var f=Math.cos(d*=ca),a=f*Math.cos(b),f=f*Math.sin(b),c=Math.sin(d),T=m*c-x*f,e=x*a-k*c,ga=k*f-m*a,g=Math.sqrt(T*T+e*e+ga*ga),h=k*a+m*f+x*c,q=g&&-ya(h)/g,g=Math.atan2(g,h);rb+=q*T;sb+=q*e;$a+=q*ga;kc+=g;Ya+=g*(k+(k=a));Za+=g*(m+(m=f));Ra+=g*(x+(x=c));Db(k,m,x)}var d,f,k,m,x;Na.point=function(a,c){d=a;f=c;Na.point=b;a*=ca;var T=Math.cos(c*=ca);k=T*Math.cos(a);m=T*Math.sin(a);x=Math.sin(c);Db(k,m,x)};Na.lineEnd=
function(){b(d,f);Na.lineEnd=se;Na.point=fd}}function te(b,d){function f(f,m){return f=b(f,m),d(f[0],f[1])}b.invert&&d.invert&&(f.invert=function(f,m){return f=d.invert(f,m),f&&b.invert(f[0],f[1])});return f}function Fb(){return!0}function ue(b,d,f,k,m){var x=[],a=[];b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,f=b[0],k=b[d];if(jc(f,k)){m.lineStart();for(k=0;k<d;++k)m.point((f=b[k])[0],f[1]);m.lineEnd()}else d=new lc(f,b,null,!0),f=new lc(f,null,d,!1),d.o=f,x.push(d),a.push(f),d=new lc(k,
b,null,!1),f=new lc(k,null,d,!0),d.o=f,x.push(d),a.push(f)}});a.sort(d);ve(x);ve(a);if(x.length){b=0;d=f;for(f=a.length;b<f;++b)a[b].e=d=!d;d=x[0];for(var c,e;;){for(var W=d,g=!0;W.v;)if((W=W.n)===d)return;c=W.z;m.lineStart();do{W.v=W.o.v=!0;if(W.e){if(g)for(b=0,f=c.length;b<f;++b)m.point((e=c[b])[0],e[1]);else k(W.x,W.n.x,1,m);W=W.n}else{if(g)for(c=W.p.z,b=c.length-1;0<=b;--b)m.point((e=c[b])[0],e[1]);else k(W.x,W.p.x,-1,m);W=W.p}W=W.o;c=W.z;g=!g}while(!W.v);m.lineEnd()}}}function ve(b){if(d=b.length){for(var d,
f=0,k=b[0],m;++f<d;)k.n=m=b[f],m.p=k,k=m;k.n=m=b[0];m.p=k}}function lc(b,d,f,k){this.x=b;this.z=d;this.o=f;this.e=k;this.v=!1;this.n=this.p=null}function we(b,d,f,k){return function(m,x){function a(d,f){var k=m(d,f);b(d=k[0],f=k[1])&&x.point(d,f)}function c(b,d){var f=m(b,d);l.point(f[0],f[1])}function e(){n.point=c;l.lineStart()}function W(){n.point=a;l.lineEnd()}function g(b,d){D.push([b,d]);var f=m(b,d);p.point(f[0],f[1])}function h(){p.lineStart();D=[]}function q(){g(D[0][0],D[0][1]);p.lineEnd();
var b=p.clean(),d=t.buffer();var f=d.length;D.pop();H.push(D);D=null;if(f)if(b&1){b=d[0];f=b.length-1;var d=-1,k;if(0<f){v||(x.polygonStart(),v=!0);for(x.lineStart();++d<f;)x.point((k=b[d])[0],k[1]);x.lineEnd()}}else 1<f&&b&2&&d.push(d.pop().concat(d.shift())),y.push(d.filter(Lg))}var l=d(x),r=m.invert(k[0],k[1]),n={point:a,lineStart:e,lineEnd:W,polygonStart:function(){n.point=g;n.lineStart=h;n.lineEnd=q;y=[];H=[]},polygonEnd:function(){n.point=a;n.lineStart=e;n.lineEnd=W;y=z.merge(y);var b=r;var d=
H;var k=b[0],m=b[1],c=[Math.sin(k),-Math.cos(k),0],T=0,Z=0;gb.reset();for(var ga=0,g=d.length;ga<g;++ga){var h=d[ga],q=h.length;if(q)for(var qa=h[0],l=qa[0],b=qa[1]/2+ba/4,t=Math.sin(b),p=Math.cos(b),D=1;;){D===q&&(D=0);var b=h[D],Sc=b[0],O=b[1]/2+ba/4,Bb=Math.sin(O),O=Math.cos(O),u=Sc-l,S=0<=u?1:-1,F=S*u,X=F>ba,t=t*Bb;gb.add(Math.atan2(t*S*Math.sin(F),p*O+t*Math.cos(F)));T+=X?u+S*La:u;X^l>=k^Sc>=k&&(qa=qb(hb(qa),hb(b)),hc(qa),l=qb(c,qa),hc(l),l=(X^0<=u?-1:1)*na(l[2]),m>l||m===l&&(qa[0]||qa[1]))&&
(Z+=X^0<=u?1:-1);if(!D++)break;l=Sc;t=Bb;p=O;qa=b}}d=(-1E-6>T||1E-6>T&&-1E-6>gb)^Z&1;y.length?(v||(x.polygonStart(),v=!0),ue(y,Mg,d,f,x)):d&&(v||(x.polygonStart(),v=!0),x.lineStart(),f(null,null,1,x),x.lineEnd());v&&(x.polygonEnd(),v=!1);y=H=null},sphere:function(){x.polygonStart();x.lineStart();f(null,null,1,x);x.lineEnd();x.polygonEnd()}},y,t=xe(),p=d(t),v=!1,H,D;return n}}function Lg(b){return 1<b.length}function xe(){var b=[],d;return{lineStart:function(){b.push(d=[])},point:function(b,k){d.push([b,
k])},lineEnd:I,buffer:function(){var f=b;b=[];d=null;return f},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Mg(b,d){return(0>(b=b.x)[0]?b[1]-wa-1E-6:wa-b[1])-(0>(d=d.x)[0]?d[1]-wa-1E-6:wa-d[1])}function Ng(b){function d(b,d){return Math.cos(b)*Math.cos(d)>m}function f(b,d,f){var k=hb(b),x=hb(d),a=[1,0,0],x=qb(k,x),c=fc(x,x),k=x[0],T=c-k*k;if(!T)return!f&&b;c=m*c/T;T=-m*k/T;k=qb(a,x);a=gc(a,c);x=gc(x,T);ed(a,x);x=fc(a,k);c=fc(k,k);T=x*x-c*(fc(a,a)-1);if(!(0>T)){var e=
Math.sqrt(T),T=gc(k,(-x-e)/c);ed(T,a);T=ic(T);if(!f)return T;f=b[0];var Z=d[0];b=b[1];d=d[1];if(Z<f){var ga=f;f=Z;Z=ga}var W=Z-f,g=1E-6>ea(W-ba);!g&&d<b&&(ga=b,b=d,d=ga);if(g||1E-6>W?g?0<b+d^T[1]<(1E-6>ea(T[0]-f)?b:d):b<=T[1]&&T[1]<=d:W>ba^(f<=T[0]&&T[0]<=Z))return d=gc(k,(-x+e)/c),ed(d,a),[T,ic(d)]}}function k(d,f){var k=x?b:ba-b,m=0;d<-k?m|=1:d>k&&(m|=2);f<-k?m|=4:f>k&&(m|=8);return m}var m=Math.cos(b),x=0<m,a=1E-6<ea(m),c=gd(b,6*ca);return we(d,function(b){var m,c,T,e,Z;return{lineStart:function(){e=
T=!1;Z=1},point:function(ga,g){var W=[ga,g],h=d(ga,g),q=x?h?0:k(ga,g):h?k(ga+(0>ga?ba:-ba),g):0;!m&&(e=T=h)&&b.lineStart();if(h!==T){var l=f(m,W);if(jc(m,l)||jc(W,l))W[0]+=1E-6,W[1]+=1E-6,h=d(W[0],W[1])}if(h!==T)Z=0,h?(b.lineStart(),l=f(W,m),b.point(l[0],l[1])):(l=f(m,W),b.point(l[0],l[1]),b.lineEnd()),m=l;else if(a&&m&&x^h){var qa;q&c||!(qa=f(W,m,!0))||(Z=0,x?(b.lineStart(),b.point(qa[0][0],qa[0][1]),b.point(qa[1][0],qa[1][1]),b.lineEnd()):(b.point(qa[1][0],qa[1][1]),b.lineEnd(),b.lineStart(),b.point(qa[0][0],
qa[0][1])))}!h||m&&jc(m,W)||b.point(W[0],W[1]);m=W;T=h;c=q},lineEnd:function(){T&&b.lineEnd();m=null},clean:function(){return Z|(e&&T)<<1}}},c,x?[0,-b]:[-ba,b-ba])}function ye(b,d,f,k){return function(m){var x=m.a,a=m.b,c=x.x,x=x.y,e=0,W=1,g=a.x-c,a=a.y-x;var h=b-c;if(g||!(0<h)){h/=g;if(0>g){if(h<e)return;h<W&&(W=h)}else if(0<g){if(h>W)return;h>e&&(e=h)}h=f-c;if(g||!(0>h)){h/=g;if(0>g){if(h>W)return;h>e&&(e=h)}else if(0<g){if(h<e)return;h<W&&(W=h)}h=d-x;if(a||!(0<h)){h/=a;if(0>a){if(h<e)return;h<
W&&(W=h)}else if(0<a){if(h>W)return;h>e&&(e=h)}h=k-x;if(a||!(0>h)){h/=a;if(0>a){if(h>W)return;h>e&&(e=h)}else if(0<a){if(h<e)return;h<W&&(W=h)}0<e&&(m.a={x:c+e*g,y:x+e*a});1>W&&(m.b={x:c+W*g,y:x+W*a});return m}}}}}}function ze(b,d,f,k){function m(k,m){return 1E-6>ea(k[0]-b)?0<m?0:3:1E-6>ea(k[0]-f)?0<m?2:1:1E-6>ea(k[1]-d)?0<m?1:0:0<m?3:2}function x(b,d){return a(b.x,d.x)}function a(b,d){var f=m(b,1),k=m(d,1);return f!==k?f-k:0===f?d[1]-b[1]:1===f?b[0]-d[0]:2===f?b[1]-d[1]:d[0]-b[0]}return function(c){function e(x,
c,e,T){var Z=0,ga=0;if(null==x||(Z=m(x,e))!==(ga=m(c,e))||0>a(x,c)^0<e){do T.point(0===Z||3===Z?b:f,1<Z?k:d);while((Z=(Z+e+4)%4)!==ga)}else T.point(c[0],c[1])}function T(m,x){b<=m&&m<=f&&d<=x&&x<=k&&c.point(m,x)}function ga(m,x){m=Math.max(-1E9,Math.min(1E9,m));x=Math.max(-1E9,Math.min(1E9,x));var a=b<=m&&m<=f&&d<=x&&x<=k;r&&n.push([m,x]);if(u)t=m,p=x,D=a,u=!1,a&&(c.lineStart(),c.point(m,x));else if(a&&O)c.point(m,x);else{var e={a:{x:v,y:H},b:{x:m,y:x}};l(e)?(O||(c.lineStart(),c.point(e.a.x,e.a.y)),
c.point(e.b.x,e.b.y),a||c.lineEnd(),S=!1):a&&(c.lineStart(),c.point(m,x),S=!1)}v=m;H=x;O=a}var g=c,h=xe(),l=ye(b,d,f,k),q,r,n,y={point:T,lineStart:function(){y.point=ga;r&&r.push(n=[]);u=!0;O=!1;v=H=NaN},lineEnd:function(){q&&(ga(t,p),D&&O&&h.rejoin(),q.push(h.buffer()));y.point=T;O&&c.lineEnd()},polygonStart:function(){c=h;q=[];r=[];S=!0},polygonEnd:function(){c=g;q=z.merge(q);var d=[b,k];for(var f=0,m=r.length,a=d[1],T=0;T<m;++T)for(var Z=1,ga=r[T],W=ga.length,h=ga[0],l;Z<W;++Z)l=ga[Z],h[1]<=a?
l[1]>a&&0<ra(h,l,d)&&++f:l[1]<=a&&0>ra(h,l,d)&&--f,h=l;d=0!==f;f=S&&d;m=q.length;if(f||m)c.polygonStart(),f&&(c.lineStart(),e(null,null,1,c),c.lineEnd()),m&&ue(q,x,d,e,c),c.polygonEnd();q=r=n=null}},t,p,D,v,H,O,u,S;return y}}function hd(b){var d=0,f=ba/3,k=id(b);b=k(d,f);b.parallels=function(b){return arguments.length?k(d=b[0]*ba/180,f=b[1]*ba/180):[d/ba*180,f/ba*180]};return b}function Ae(b,d){function f(b,d){var f=Math.sqrt(x-2*m*Math.sin(d))/m;return[f*Math.sin(b*=m),a-f*Math.cos(b)]}var k=Math.sin(b),
m=(k+Math.sin(d))/2,x=1+k*(2*m-k),a=Math.sqrt(x)/m;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,na((x-(b*b+f*f)*m*m)/(2*m))]};return f}function Og(){function b(b,d){jd+=m*b-k*d;k=b;m=d}var d,f,k,m;ab.point=function(x,a){ab.point=b;d=k=x;f=m=a};ab.lineEnd=function(){b(d,f)}}function Pg(){function b(b,d){a.push("M",b,",",d,x)}function d(b,d){a.push("M",b,",",d);c.point=f}function f(b,d){a.push("L",b,",",d)}function k(){c.point=b}function m(){a.push("Z")}var x=Be(4.5),a=[],c={point:b,lineStart:function(){c.point=
d},lineEnd:k,polygonStart:function(){c.lineEnd=m},polygonEnd:function(){c.lineEnd=k;c.point=b},pointRadius:function(b){x=Be(b);return c},result:function(){if(a.length){var b=a.join("");a=[];return b}}};return c}function Be(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function kb(b,d){ib+=b;jb+=d;++Va}function Ce(){function b(b,m){var k=b-d,a=m-f,k=Math.sqrt(k*k+a*a);Ya+=k*(d+b)/2;Za+=k*(f+m)/2;Ra+=k;kb(d=b,f=m)}var d,f;Oa.point=function(k,m){Oa.point=b;kb(d=k,f=m)}}
function De(){Oa.point=kb}function Qg(){function b(b,d){var f=b-k,x=d-m,f=Math.sqrt(f*f+x*x);Ya+=f*(k+b)/2;Za+=f*(m+d)/2;Ra+=f;f=m*b-k*d;rb+=f*(k+b);sb+=f*(m+d);$a+=3*f;kb(k=b,m=d)}var d,f,k,m;Oa.point=function(x,a){Oa.point=b;kb(d=k=x,f=m=a)};Oa.lineEnd=function(){b(d,f)}}function Rg(b){function d(d,f){b.moveTo(d+a,f);b.arc(d,f,a,0,La)}function f(d,f){b.moveTo(d,f);c.point=k}function k(d,f){b.lineTo(d,f)}function m(){c.point=d}function x(){b.closePath()}var a=4.5,c={point:d,lineStart:function(){c.point=
f},lineEnd:m,polygonStart:function(){c.lineEnd=x},polygonEnd:function(){c.lineEnd=m;c.point=d},pointRadius:function(b){a=b;return c},result:I};return c}function Ee(b){function d(b){return(c?k:f)(b)}function f(d){return Fe(d,function(f,k){f=b(f,k);d.point(f[0],f[1])})}function k(d){function f(f,k){f=b(f,k);d.point(f[0],f[1])}function k(){y=NaN;H.point=x;d.lineStart()}function x(f,k){var x=hb([f,k]),a=b(f,k);m(y,t,n,p,v,D,y=a[0],t=a[1],n=f,p=x[0],v=x[1],D=x[2],c,d);d.point(y,t)}function a(){H.point=
f;d.lineEnd()}function e(){k();H.point=T;H.lineEnd=Z}function T(b,d){x(g=b,d);ga=y;h=t;l=p;q=v;r=D;H.point=x}function Z(){m(y,t,n,p,v,D,ga,h,g,l,q,r,c,d);H.lineEnd=a;a()}var g,ga,h,l,q,r,n,y,t,p,v,D,H={point:f,lineStart:k,lineEnd:a,polygonStart:function(){d.polygonStart();H.lineStart=e},polygonEnd:function(){d.polygonEnd();H.lineStart=k}};return H}function m(d,f,k,c,e,T,g,ga,h,l,q,r,n,y){var Z=g-d,W=ga-f,t=Z*Z+W*W;if(t>4*x&&n--){var qa=c+l,p=e+q,v=T+r,D=Math.sqrt(qa*qa+p*p+v*v),H=Math.asin(v/=D),
O=1E-6>ea(ea(v)-1)||1E-6>ea(k-h)?(k+h)/2:Math.atan2(p,qa),u=b(O,H),H=u[0],u=u[1],S=H-d,Bb=u-f,F=W*S-Z*Bb;if(F*F/t>x||.3<ea((Z*S+W*Bb)/t-.5)||c*l+e*q+T*r<a)m(d,f,k,c,e,T,H,u,O,qa/=D,p/=D,v,n,y),y.point(H,u),m(H,u,O,qa,p,v,g,ga,h,l,q,r,n,y)}}var x=.5,a=Math.cos(30*ca),c=16;d.precision=function(b){if(!arguments.length)return Math.sqrt(x);c=0<(x=b*b)&&16;return d};return d}function Sg(b){var d=Ee(function(d,k){return b([d*ta,k*ta])});return function(b){return Ge(d(b))}}function He(b){this.stream=b}function Fe(b,
d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function bb(b){return id(function(){return b})()}function id(b){function d(b){b=c(b[0]*ca,b[1]*ca);return[b[0]*g+p,v-b[1]*g]}function f(b){return(b=c.invert((b[0]-p)/g,(v-b[1])/g))&&[b[0]*ta,b[1]*ta]}function k(){c=te(a=kd(n,y,t),x);var b=x(q,r);p=h-b[0]*g;v=l+b[1]*g;return m()}function m(){S&&(S.valid=
!1,S=null);return d}var x,a,c,e=Ee(function(b,d){b=x(b,d);return[b[0]*g+p,v-b[1]*g]}),g=150,h=480,l=250,q=0,r=0,n=0,y=0,t=0,p,v,H=Ie,D=A,O=null,u=null,S;d.stream=function(b){S&&(S.valid=!1);S=Ge(H(a,e(D(b))));S.valid=!0;return S};d.clipAngle=function(b){if(!arguments.length)return O;H=null==b?(O=b,Ie):Ng((O=+b)*ca);return m()};d.clipExtent=function(b){if(!arguments.length)return u;D=(u=b)?ze(b[0][0],b[0][1],b[1][0],b[1][1]):A;return m()};d.scale=function(b){if(!arguments.length)return g;g=+b;return k()};
d.translate=function(b){if(!arguments.length)return[h,l];h=+b[0];l=+b[1];return k()};d.center=function(b){if(!arguments.length)return[q*ta,r*ta];q=b[0]%360*ca;r=b[1]%360*ca;return k()};d.rotate=function(b){if(!arguments.length)return[n*ta,y*ta,t*ta];n=b[0]%360*ca;y=b[1]%360*ca;t=2<b.length?b[2]%360*ca:0;return k()};z.rebind(d,e,"precision");return function(){x=b.apply(this,arguments);d.invert=x.invert&&f;return k()}}function Ge(b){return Fe(b,function(d,f){b.point(d*ca,f*ca)})}function Gb(b,d){return[b,
d]}function Je(b,d){return[b>ba?b-La:b<-ba?b+La:b,d]}function kd(b,d,f){return b?d||f?te(Ke(b),Le(d,f)):Ke(b):d||f?Le(d,f):Je}function Me(b){return function(d,f){return d+=b,[d>ba?d-La:d<-ba?d+La:d,f]}}function Ke(b){var d=Me(b);d.invert=Me(-b);return d}function Le(b,d){function f(b,d){var f=Math.cos(d),c=Math.cos(b)*f,f=Math.sin(b)*f,e=Math.sin(d),T=e*k+c*m;return[Math.atan2(f*x-T*a,c*k-e*m),na(T*x+f*a)]}var k=Math.cos(b),m=Math.sin(b),x=Math.cos(d),a=Math.sin(d);f.invert=function(b,d){var f=Math.cos(d),
c=Math.cos(b)*f,f=Math.sin(b)*f,e=Math.sin(d),T=e*x-f*a;return[Math.atan2(f*x+e*a,c*k+T*m),na(T*k-c*m)]};return f}function gd(b,d){var f=Math.cos(b),k=Math.sin(b);return function(m,x,a,c){var e=a*d;if(null!=m){if(m=Ne(f,m),x=Ne(f,x),0<a?m<x:m>x)m+=a*La}else m=b+a*La,x=b-.5*e;for(var T;0<a?m>x:m<x;m-=e)c.point((T=ic([f,-k*Math.cos(m),-k*Math.sin(m)]))[0],T[1])}}function Ne(b,d){var f=hb(d);f[0]-=b;hc(f);var k=ya(-f[1]);return((0>-f[2]?-k:k)+2*Math.PI-1E-6)%(2*Math.PI)}function Oe(b,d,f){var k=z.range(b,
d-1E-6,f).concat(d);return function(b){return k.map(function(d){return[b,d]})}}function Pe(b,d,f){var k=z.range(b,d-1E-6,f).concat(d);return function(b){return k.map(function(d){return[d,b]})}}function ld(b){return b.source}function md(b){return b.target}function Tg(b,d,f,k){var m=Math.cos(d),x=Math.sin(d),a=Math.cos(k),c=Math.sin(k),e=m*Math.cos(b),g=m*Math.sin(b),h=a*Math.cos(f),l=a*Math.sin(f),q=2*Math.asin(Math.sqrt(Ja(k-d)+m*a*Ja(f-b))),r=1/Math.sin(q);f=q?function(b){var d=Math.sin(b*=q)*r;
b=Math.sin(q-b)*r;var f=b*e+d*h,k=b*g+d*l;return[Math.atan2(k,f)*ta,Math.atan2(b*x+d*c,Math.sqrt(f*f+k*k))*ta]}:function(){return[b*ta,d*ta]};f.distance=q;return f}function Hb(b,d){function f(d,f){var k=Math.cos(f),m=b(Math.cos(d)*k);return[m*k*Math.sin(d),m*Math.sin(f)]}f.invert=function(b,f){var k=Math.sqrt(b*b+f*f),m=d(k),a=Math.sin(m);return[Math.atan2(b*a,k*Math.cos(m)),Math.asin(k&&f*a/k)]};return f}function Qe(b,d){function f(b,d){0<a?d<-wa+1E-6&&(d=-wa+1E-6):d>wa-1E-6&&(d=wa-1E-6);var f=a/
Math.pow(Math.tan(ba/4+d/2),m);return[f*Math.sin(m*b),a-f*Math.cos(m*b)]}var k=Math.cos(b),m=b===d?Math.sin(b):Math.log(k/Math.cos(d))/Math.log(Math.tan(ba/4+d/2)/Math.tan(ba/4+b/2)),a=k*Math.pow(Math.tan(ba/4+b/2),m)/m;if(!m)return mc;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,2*Math.atan(Math.pow(a/((0<m?1:0>m?-1:0)*Math.sqrt(b*b+f*f)),1/m))-wa]};return f}function Re(b,d){function f(b,d){var f=a-d;return[f*Math.sin(m*b),a-f*Math.cos(m*b)]}var k=Math.cos(b),m=b===d?Math.sin(b):(k-
Math.cos(d))/(d-b),a=k/m+b;if(1E-6>ea(m))return Gb;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,a-(0<m?1:0>m?-1:0)*Math.sqrt(b*b+f*f)]};return f}function mc(b,d){return[b,Math.log(Math.tan(ba/4+d/2))]}function Se(b){var d=bb(b),f=d.scale,k=d.translate,m=d.clipExtent,a;d.scale=function(){var b=f.apply(d,arguments);return b===d?a?d.clipExtent(null):d:b};d.translate=function(){var b=k.apply(d,arguments);return b===d?a?d.clipExtent(null):d:b};d.clipExtent=function(b){var x=m.apply(d,arguments);
if(x===d){if(a=null==b){var c=ba*f(),e=k();m([[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]])}}else a&&(x=null);return x};return d.clipExtent(null)}function nd(b,d){return[Math.log(Math.tan(ba/4+d/2)),-b]}function tb(b){return b[0]}function Ib(b){return b[1]}function Te(b){for(var d=b.length,f=[0,1],k=2,m=2;m<d;m++){for(;1<k&&0>=ra(b[f[k-2]],b[f[k-1]],b[m]);)--k;f[k++]=m}return f.slice(0,k)}function Ug(b,d){return b[0]-d[0]||b[1]-d[1]}function od(b,d,f){return(f[0]-d[0])*(b[1]-d[1])<(f[1]-d[1])*(b[0]-d[0])}function pd(b,
d,f,k){var m=b[0],a=f[0],c=d[0]-m,e=k[0]-a;b=b[1];f=f[1];d=d[1]-b;k=k[1]-f;a=(e*(b-f)-k*(m-a))/(k*c-e*d);return[m+a*c,b+a*d]}function Ue(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function Vg(){nc(this);this.edge=this.site=this.circle=null}function Ve(b){var d=We.pop()||new Vg;d.site=b;return d}function qd(b){ub(b);vb.remove(b);We.push(b);nc(b)}function Xe(b,d){var f=b.site,k=f.x,m=f.y,a=m-d;if(!a)return k;var c=b.P;if(!c)return-Infinity;var f=c.site,c=f.x,f=f.y,e=f-d;if(!e)return c;
var g=c-k,W=1/a-1/e,h=g/e;return W?(-h+Math.sqrt(h*h-2*W*(g*g/(-2*e)-f+e/2+m-a/2)))/W+k:(k+c)/2}function Ye(b){this.site=b;this.edges=[]}function Ze(b,d){return d.angle-b.angle}function Wg(){nc(this);this.x=this.y=this.arc=this.site=this.cy=null}function wb(b){var d=b.P,f=b.N;if(d&&f){var k=d.site,d=b.site,m=f.site;if(k!==m){var f=d.x,a=d.y,c=k.x-f,e=k.y-a,k=m.x-f,m=m.y-a,g=2*(c*m-e*k);if(!(-1E-12<=g)){var h=c*c+e*e,q=k*k+m*m,e=(m*h-e*q)/g,c=(c*q-k*h)/g,m=c+a,a=$e.pop()||new Wg;a.arc=b;a.site=d;a.x=
e+f;a.y=m+Math.sqrt(e*e+c*c);a.cy=m;b.circle=a;b=null;for(d=Jb._;d;)if(a.y<d.y||a.y===d.y&&a.x<=d.x)if(d.L)d=d.L;else{b=d.P;break}else if(d.R)d=d.R;else{b=d;break}Jb.insert(b,a);b||(rd=a)}}}}function ub(b){var d=b.circle;d&&(d.P||(rd=d.N),Jb.remove(d),$e.push(d),nc(d),b.circle=null)}function Xg(b,d){var f=b.b;if(f)return!0;var k=b.a,f=d[0][0],m=d[1][0],a=d[0][1],c=d[1][1],e=b.l,g=b.r,h=e.x,e=e.y,q=g.x,g=g.y,l=(h+q)/2;if(g===e){if(l<f||l>=m)return;if(h>q){if(!k)k={x:l,y:a};else if(k.y>=c)return;f=
{x:l,y:c}}else{if(!k)k={x:l,y:c};else if(k.y<a)return;f={x:l,y:a}}}else{var r=(h-q)/(g-e);l=(e+g)/2-r*l;if(-1>r||1<r)if(h>q){if(!k)k={x:(a-l)/r,y:a};else if(k.y>=c)return;f={x:(c-l)/r,y:c}}else{if(!k)k={x:(c-l)/r,y:c};else if(k.y<a)return;f={x:(a-l)/r,y:a}}else if(e<g){if(!k)k={x:f,y:r*f+l};else if(k.x>=m)return;f={x:m,y:r*m+l}}else{if(!k)k={x:m,y:r*m+l};else if(k.x<f)return;f={x:f,y:r*f+l}}}b.a=k;b.b=f;return!0}function af(b,d){this.l=b;this.r=d;this.a=this.b=null}function Kb(b,d,f,k){var m=new af(b,
d);xb.push(m);f&&oc(m,b,d,f);k&&oc(m,d,b,k);lb[b.i].edges.push(new pc(m,b,d));lb[d.i].edges.push(new pc(m,d,b));return m}function Yg(b,d,f){b=new af(b,null);b.a=d;b.b=f;xb.push(b);return b}function oc(b,d,f,k){b.a||b.b?b.l===f?b.b=k:b.a=k:(b.a=k,b.l=d,b.r=f)}function pc(b,d,f){var k=b.a,m=b.b;this.edge=b;this.site=d;this.angle=f?Math.atan2(f.y-d.y,f.x-d.x):b.l===d?Math.atan2(m.x-k.x,k.y-m.y):Math.atan2(k.x-m.x,m.y-k.y)}function sd(){this._=null}function nc(b){b.U=b.C=b.L=b.R=b.P=b.N=null}function Lb(b,
d){var f=d.R,k=d.U;k?k.L===d?k.L=f:k.R=f:b._=f;f.U=k;d.U=f;d.R=f.L;d.R&&(d.R.U=d);f.L=d}function Mb(b,d){var f=d.L,k=d.U;k?k.L===d?k.L=f:k.R=f:b._=f;f.U=k;d.U=f;d.L=f.R;d.L&&(d.L.U=d);f.R=d}function bf(b){for(;b.L;)b=b.L;return b}function td(b,d){var f=b.sort(Zg).pop(),k;xb=[];lb=Array(b.length);vb=new sd;for(Jb=new sd;;){var m=rd;if(f&&(!m||f.y<m.y||f.y===m.y&&f.x<m.x)){if(f.x!==k||f.y!==a){lb[f.i]=new Ye(f);var a=k=void 0;m=f;for(var c=m.x,e=m.y,g=vb._;g;){var h=Xe(g,e)-c;if(1E-6<h)g=g.L;else{var l=
g;var q=e;var r=l.N;r?q=Xe(r,q):(l=l.site,q=l.y===q?l.x:Infinity);q=c-q;if(1E-6<q){if(!g.R){a=g;break}g=g.R}else{-1E-6<h?(a=g.P,k=g):-1E-6<q?(a=g,k=g.N):a=k=g;break}}}h=Ve(m);vb.insert(a,h);if(a||k)if(a===k)ub(a),k=Ve(a.site),vb.insert(h,k),h.edge=k.edge=Kb(a.site,h.site),wb(a),wb(k);else if(k){ub(a);ub(k);c=a.site;g=c.x;q=c.y;var l=m.x-g,r=m.y-q,e=k.site,n=e.x-g,y=e.y-q,t=2*(l*y-r*n),p=l*l+r*r,v=n*n+y*y,g={x:(y*p-r*v)/t+g,y:(l*v-n*p)/t+q};oc(k.edge,c,e,g);h.edge=Kb(c,m,null,g);k.edge=Kb(m,e,null,
g);wb(a);wb(k)}else h.edge=Kb(a.site,h.site);k=f.x;a=f.y}f=b.pop()}else if(m){e=m.arc;m=e.circle;c=m.x;g=m.cy;m={x:c,y:g};l=e.P;q=e.N;h=[e];qd(e);for(e=l;e.circle&&1E-6>ea(c-e.circle.x)&&1E-6>ea(g-e.circle.cy);)l=e.P,h.unshift(e),qd(e),e=l;h.unshift(e);ub(e);for(l=q;l.circle&&1E-6>ea(c-l.circle.x)&&1E-6>ea(g-l.circle.cy);)q=l.N,h.push(l),qd(l),l=q;h.push(l);ub(l);g=h.length;for(c=1;c<g;++c)l=h[c],e=h[c-1],oc(l.edge,e.site,l.site,m);e=h[0];l=h[g-1];l.edge=Kb(e.site,l.site,null,m);wb(e);wb(l)}else break}if(d){f=
xb;k=ye(d[0][0],d[0][1],d[1][0],d[1][1]);for(a=f.length;a--;)if(m=f[a],!Xg(m,d)||!k(m)||1E-6>ea(m.a.x-m.b.x)&&1E-6>ea(m.a.y-m.b.y))m.a=m.b=null,f.splice(a,1);f=d[0][0];k=d[1][0];a=d[0][1];m=d[1][1];g=lb;for(q=g.length;q--;)if((l=g[q])&&l.prepare())for(n=l.edges,y=n.length,r=0;r<y;)if(t=n[r].end(),c=t.x,e=t.y,p=n[++r%y].start(),h=p.x,p=p.y,1E-6<ea(c-h)||1E-6<ea(e-p))n.splice(r,0,new pc(Yg(l.site,t,1E-6>ea(c-f)&&1E-6<m-e?{x:f,y:1E-6>ea(h-f)?p:m}:1E-6>ea(e-m)&&1E-6<k-c?{x:1E-6>ea(p-m)?h:k,y:m}:1E-6>
ea(c-k)&&1E-6<e-a?{x:k,y:1E-6>ea(h-k)?p:a}:1E-6>ea(e-a)&&1E-6<c-f?{x:1E-6>ea(p-a)?h:f,y:a}:null),l.site,null)),++y}f={cells:lb,edges:xb};vb=Jb=xb=lb=null;return f}function Zg(b,d){return d.y-b.y||d.x-b.x}function $g(b){return b.x}function ah(b){return b.y}function cf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Nb(b,d,f,k,m,a){if(!b(d,f,k,m,a)){var c=.5*(f+m),x=.5*(k+a);d=d.nodes;d[0]&&Nb(b,d[0],f,k,c,x);d[1]&&Nb(b,d[1],c,k,m,x);d[2]&&Nb(b,d[2],f,x,c,a);d[3]&&Nb(b,d[3],c,x,m,a)}}function bh(b,
d,f,k,m,a,c){var x=Infinity,e;(function qa(b,g,T,h,l){var Z;if(!(g>a||T>c||h<k||l<m)){if(Z=b.point){var q=d-b.x,ga=f-b.y,q=q*q+ga*ga;q<x&&(q=Math.sqrt(x=q),k=d-q,m=f-q,a=d+q,c=f+q,e=Z)}Z=b.nodes;for(var q=.5*(g+h),ga=.5*(T+l),r=(f>=ga)<<1|d>=q,n=r+4;r<n;++r)if(b=Z[r&3])switch(r&3){case 0:qa(b,g,T,q,ga);break;case 1:qa(b,q,T,h,ga);break;case 2:qa(b,g,ga,q,l);break;case 3:qa(b,q,ga,h,l)}}})(b,k,m,a,c);return e}function ud(b,d){b=z.rgb(b);d=z.rgb(d);var f=b.r,k=b.g,m=b.b,a=d.r-f,c=d.g-k,e=d.b-m;return function(b){return"#"+
pb(Math.round(f+a*b))+pb(Math.round(k+c*b))+pb(Math.round(m+e*b))}}function df(b,d){var f={},k={},m;for(m in b)m in d?f[m]=mb(b[m],d[m]):k[m]=b[m];for(m in d)m in b||(k[m]=d[m]);return function(b){for(m in f)k[m]=f[m](b);return k}}function Wa(b,d){b=+b;d=+d;return function(f){return b*(1-f)+d*f}}function ef(b,d){var f=vd.lastIndex=wd.lastIndex=0,k,m,a,c=-1,e=[],g=[];b+="";for(d+="";(k=vd.exec(b))&&(m=wd.exec(d));)(a=m.index)>f&&(a=d.slice(f,a),e[c]?e[c]+=a:e[++c]=a),(k=k[0])===(m=m[0])?e[c]?e[c]+=
m:e[++c]=m:(e[++c]=null,g.push({i:c,x:Wa(k,m)})),f=wd.lastIndex;f<d.length&&(a=d.slice(f),e[c]?e[c]+=a:e[++c]=a);return 2>e.length?g[0]?(d=g[0].x,function(b){return d(b)+""}):function(){return d}:(d=g.length,function(b){for(var f=0,k;f<d;++f)e[(k=g[f]).i]=k.x(b);return e.join("")})}function mb(b,d){for(var f=z.interpolators.length,k;0<=--f&&!(k=z.interpolators[f](b,d)););return k}function qc(b,d){var f=[],k=[],m=b.length,a=d.length,c=Math.min(b.length,d.length),e;for(e=0;e<c;++e)f.push(mb(b[e],d[e]));
for(;e<m;++e)k[e]=b[e];for(;e<a;++e)k[e]=d[e];return function(b){for(e=0;e<c;++e)k[e]=f[e](b);return k}}function ch(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function ff(b){return function(d){return 1-b(1-d)}}function gf(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function dh(b){return b*b}function eh(b){return b*b*b}function fh(b){if(0>=b)return 0;if(1<=b)return 1;var d=b*b,f=d*b;return 4*(.5>b?f:3*(b-d)+f-.75)}function gh(b){return 1-Math.cos(b*wa)}function hh(b){return Math.pow(2,
10*(b-1))}function ih(b){return 1-Math.sqrt(1-b*b)}function jh(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function hf(b,d){d-=b;return function(f){return Math.round(b+d*f)}}function jf(b){var d=[b.a,b.b],f=[b.c,b.d],k=kf(d),m=d[0]*f[0]+d[1]*f[1],a=-m;f[0]+=a*d[0];f[1]+=a*d[1];a=kf(f)||0;d[0]*f[1]<f[0]*d[1]&&(d[0]*=-1,d[1]*=-1,k*=-1,m*=-1);this.rotate=(k?Math.atan2(d[1],d[0]):Math.atan2(-f[0],f[1]))*ta;
this.translate=[b.e,b.f];this.scale=[k,a];this.skew=a?Math.atan2(m,a)*ta:0}function kf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);d&&(b[0]/=d,b[1]/=d);return d}function yb(b){return b.length?b.pop()+",":""}function kh(b,d,f,k){b[0]!==d[0]||b[1]!==d[1]?(f=f.push("translate(",null,",",null,")"),k.push({i:f-4,x:Wa(b[0],d[0])},{i:f-2,x:Wa(b[1],d[1])})):(d[0]||d[1])&&f.push("translate("+d+")")}function lh(b,d,f,k){b!==d?(180<b-d?d+=360:180<d-b&&(b+=360),k.push({i:f.push(yb(f)+"rotate(",null,")")-2,x:Wa(b,
d)})):d&&f.push(yb(f)+"rotate("+d+")")}function mh(b,d,f,k){b!==d?k.push({i:f.push(yb(f)+"skewX(",null,")")-2,x:Wa(b,d)}):d&&f.push(yb(f)+"skewX("+d+")")}function nh(b,d,f,k){b[0]!==d[0]||b[1]!==d[1]?(f=f.push(yb(f)+"scale(",null,",",null,")"),k.push({i:f-4,x:Wa(b[0],d[0])},{i:f-2,x:Wa(b[1],d[1])})):1===d[0]&&1===d[1]||f.push(yb(f)+"scale("+d+")")}function lf(b,d){var f=[],k=[];b=z.transform(b);d=z.transform(d);kh(b.translate,d.translate,f,k);lh(b.rotate,d.rotate,f,k);mh(b.skew,d.skew,f,k);nh(b.scale,
d.scale,f,k);b=d=null;return function(b){for(var d=-1,m=k.length,a;++d<m;)f[(a=k[d]).i]=a.x(b);return f.join("")}}function oh(b,d){d=(d-=b=+b)||1/d;return function(f){return(f-b)/d}}function ph(b,d){d=(d-=b=+b)||1/d;return function(f){return Math.max(0,Math.min(1,(f-b)/d))}}function qh(b){var d=b.source;b=b.target;var f=b;if(d===f)var k=d;else{k=mf(d);for(var f=mf(f),m=k.pop(),a=f.pop(),c=null;m===a;)c=m,m=k.pop(),a=f.pop();k=c}for(f=[d];d!==k;)d=d.parent,f.push(d);for(d=f.length;b!==k;)f.splice(d,
0,b),b=b.parent;return f}function mf(b){for(var d=[],f=b.parent;null!=f;)d.push(b),b=f,f=f.parent;d.push(b);return d}function rh(b){b.fixed|=2}function sh(b){b.fixed&=-7}function th(b){b.fixed|=4;b.px=b.x;b.py=b.y}function uh(b){b.fixed&=-5}function nf(b,d,f){var k=0,m=0;b.charge=0;if(!b.leaf)for(var a=b.nodes,c=a.length,e=-1,g;++e<c;)g=a[e],null!=g&&(nf(g,d,f),b.charge+=g.charge,k+=g.charge*g.cx,m+=g.charge*g.cy);b.point&&(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),d*=f[b.point.index],
b.charge+=b.pointCharge=d,k+=d*b.point.x,m+=d*b.point.y);b.cx=k/b.charge;b.cy=m/b.charge}function Ob(b,d){z.rebind(b,d,"sort","children","value");b.nodes=b;b.links=vh;return b}function Pb(b,d){for(var f,k,m=[b];null!=(b=m.pop());)if(d(b),(f=b.children)&&(k=f.length))for(;0<=--k;)m.push(f[k])}function Sa(b,d){for(var f,k,m=[b],a=[];null!=(b=m.pop());)if(a.push(b),(f=b.children)&&(k=f.length))for(var c=-1;++c<k;)m.push(f[c]);for(;null!=(b=a.pop());)d(b)}function wh(b){return b.children}function xh(b){return b.value}
function yh(b,d){return d.value-b.value}function vh(b){return z.merge(b.map(function(b){return(b.children||[]).map(function(d){return{source:b,target:d}})}))}function zh(b){return b.x}function Ah(b){return b.y}function Bh(b,d,f){b.y0=d;b.y=f}function xd(b){return z.range(b.length)}function yd(b){var d=-1;b=b[0].length;for(var f=[];++d<b;)f[d]=0;return f}function Ch(b){for(var d=1,f=0,k=b[0][1],m,a=b.length;d<a;++d)(m=b[d][1])>k&&(f=d,k=m);return f}function Dh(b){return b.reduce(Eh,0)}function Eh(b,
d){return b+d[1]}function Fh(b,d){return of(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function of(b,d){for(var f=-1,k=+b[0],m=(b[1]-k)/d,a=[];++f<=d;)a[f]=m*f+k;return a}function Gh(b){return[z.min(b),z.max(b)]}function Hh(b,d){return b.value-d.value}function zd(b,d){var f=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=f;f._pack_prev=d}function pf(b,d){b._pack_next=d;d._pack_prev=b}function qf(b,d){var f=d.x-b.x,k=d.y-b.y,m=b.r+d.r;return.999*m*m>f*f+k*k}function rf(b){function d(b){k=
Math.min(b.x-b.r,k);m=Math.max(b.x+b.r,m);a=Math.min(b.y-b.r,a);c=Math.max(b.y+b.r,c)}if((f=b.children)&&(l=f.length)){var f,k=Infinity,m=-Infinity,a=Infinity,c=-Infinity,e,g,h,l;f.forEach(Ih);var q=f[0];q.x=-q.r;q.y=0;d(q);if(1<l){var r=f[1];r.x=r.r;r.y=0;d(r);if(2<l){var n=f[2];sf(q,r,n);d(n);zd(q,n);q._pack_prev=n;zd(n,r);r=q._pack_next;for(e=3;e<l;e++){sf(q,r,n=f[e]);var y=0,t=1,p=1;for(g=r._pack_next;g!==r;g=g._pack_next,t++)if(qf(g,n)){y=1;break}if(1==y)for(h=q._pack_prev;h!==g._pack_prev&&
!qf(h,n);h=h._pack_prev,p++);y?(t<p||t==p&&r.r<q.r?pf(q,r=g):pf(q=h,r),e--):(zd(q,n),r=n,d(n))}}}q=(k+m)/2;r=(a+c)/2;for(e=g=0;e<l;e++)n=f[e],n.x-=q,n.y-=r,g=Math.max(g,n.r+Math.sqrt(n.x*n.x+n.y*n.y));b.r=g;f.forEach(Jh)}}function Ih(b){b._pack_next=b._pack_prev=b}function Jh(b){delete b._pack_next;delete b._pack_prev}function tf(b,d,f,k){var m=b.children;b.x=d+=k*b.x;b.y=f+=k*b.y;b.r*=k;if(m){b=-1;for(var a=m.length;++b<a;)tf(m[b],d,f,k)}}function sf(b,d,f){var k=b.r+f.r,m=d.x-b.x,a=d.y-b.y;if(k&&
(m||a)){var c=d.r+f.r,e=m*m+a*a,c=c*c,k=k*k;d=.5+(k-c)/(2*e);c=Math.sqrt(Math.max(0,2*c*(k+e)-(k-=e)*k-c*c))/(2*e);f.x=b.x+d*m+c*a;f.y=b.y+d*a-c*m}else f.x=b.x+k,f.y=b.y}function uf(b,d){return b.parent==d.parent?1:2}function Ad(b){var d=b.children;return d.length?d[0]:b.t}function Bd(b){var d=b.children,f;return(f=d.length)?d[f-1]:b.t}function Kh(b){return 1+z.max(b,function(b){return b.y})}function Lh(b){return b.reduce(function(b,f){return b+f.x},0)/b.length}function vf(b){var d=b.children;return d&&
d.length?vf(d[0]):b}function wf(b){var d=b.children,f;return d&&(f=d.length)?wf(d[f-1]):b}function Cd(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function xf(b,d){var f=b.x+d[3],k=b.y+d[0],m=b.dx-d[1]-d[3],a=b.dy-d[0]-d[2];0>m&&(f+=m/2,m=0);0>a&&(k+=a/2,a=0);return{x:f,y:k,dx:m,dy:a}}function zb(b){var d=b[0];b=b[b.length-1];return d<b?[d,b]:[b,d]}function rc(b){return b.rangeExtent?b.rangeExtent():zb(b.range())}function Mh(b,d,f,k){var m=f(b[0],b[1]),a=k(d[0],d[1]);return function(b){return a(m(b))}}
function sc(b,d){var f=0,k=b.length-1,m=b[f],a=b[k];if(a<m){var c=f;f=k;k=c;c=m;m=a;a=c}b[f]=d.floor(m);b[k]=d.ceil(a);return b}function yf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Nh}function Oh(b,d,f,k){var m=[],a=[],c=0,e=Math.min(b.length,d.length)-1;b[e]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());for(;++c<=e;)m.push(f(b[c-1],b[c])),a.push(k(d[c-1],d[c]));return function(d){var f=z.bisect(b,d,1,e)-1;return a[f](m[f](d))}}function zf(b,
d,f,k){function m(){var m=2<Math.min(b.length,d.length)?Oh:Mh,x=k?ph:oh;c=m(b,d,x,f);e=m(d,b,x,mb);return a}function a(b){return c(b)}var c,e;a.invert=function(b){return e(b)};a.domain=function(d){if(!arguments.length)return b;b=d.map(Number);return m()};a.range=function(b){if(!arguments.length)return d;d=b;return m()};a.rangeRound=function(b){return a.range(b).interpolate(hf)};a.clamp=function(b){if(!arguments.length)return k;k=b;return m()};a.interpolate=function(b){if(!arguments.length)return f;
f=b;return m()};a.ticks=function(d){return z.range.apply(z,cb(b,d))};a.tickFormat=function(d,f){return Dd(b,d,f)};a.nice=function(d){Af(b,d);return m()};a.copy=function(){return zf(b,d,f,k)};return m()}function Ed(b,d){return z.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Af(b,d){sc(b,yf(cb(b,d)[2]));sc(b,yf(cb(b,d)[2]));return b}function cb(b,d){null==d&&(d=10);var f=zb(b),k=f[1]-f[0],m=Math.pow(10,Math.floor(Math.log(k/d)/Math.LN10)),k=d/k*m;.15>=k?m*=10:.35>=k?m*=5:.75>=k&&(m*=
2);f[0]=Math.ceil(f[0]/m)*m;f[1]=Math.floor(f[1]/m)*m+.5*m;f[2]=m;return f}function Dd(b,d,f){b=cb(b,d);if(f){d=je.exec(f);d.shift();if("s"===d[8]){var k=z.formatPrefix(Math.max(ea(b[0]),ea(b[1])));d[7]||(d[7]="."+tc(k.scale(b[2])));d[8]="f";f=z.format(d.join(""));return function(b){return f(k.scale(b))+k.symbol}}d[7]||(d[7]="."+Ph(d[8],b));f=d.join("")}else f=",."+tc(b[2])+"f";return z.format(f)}function tc(b){return-Math.floor(Math.log(b)/Math.LN10+.01)}function Ph(b,d){var f=tc(d[2]);return b in
Qh?Math.abs(f-tc(Math.max(ea(d[0]),ea(d[1]))))+ +("e"!==b):f-2*("%"===b)}function Bf(b,d,f,k){function m(b){return(f?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function a(b){return f?Math.pow(d,b):-Math.pow(d,-b)}function c(d){return b(m(d))}c.invert=function(d){return a(b.invert(d))};c.domain=function(d){if(!arguments.length)return k;f=0<=d[0];b.domain((k=d.map(Number)).map(m));return c};c.base=function(f){if(!arguments.length)return d;d=+f;b.domain(k.map(m));return c};c.nice=function(){var d=
sc(k.map(m),f?Math:Rh);b.domain(d);k=d.map(a);return c};c.ticks=function(){var b=zb(k),c=[],e=b[0],b=b[1],x=Math.floor(m(e)),g=Math.ceil(m(b)),h=d%1?2:d;if(isFinite(g-x)){if(f){for(;x<g;x++)for(var l=1;l<h;l++)c.push(a(x)*l);c.push(a(x))}else for(c.push(a(x));x++<g;)for(l=h-1;0<l;l--)c.push(a(x)*l);for(x=0;c[x]<e;x++);for(g=c.length;c[g-1]>b;g--);c=c.slice(x,g)}return c};c.tickFormat=function(b,f){if(!arguments.length)return Cf;2>arguments.length?f=Cf:"function"!==typeof f&&(f=z.format(f));var k=
Math.max(1,d*b/c.ticks().length);return function(b){var c=b/a(Math.round(m(b)));c*d<d-.5&&(c*=d);return c<=k?f(b):""}};c.copy=function(){return Bf(b.copy(),d,f,k)};return Ed(c,b)}function Df(b,d,f){function k(d){return b(m(d))}var m=uc(d),a=uc(1/d);k.invert=function(d){return a(b.invert(d))};k.domain=function(d){if(!arguments.length)return f;b.domain((f=d.map(Number)).map(m));return k};k.ticks=function(b){return z.range.apply(z,cb(f,b))};k.tickFormat=function(b,d){return Dd(f,b,d)};k.nice=function(b){return k.domain(Af(f,
b))};k.exponent=function(c){if(!arguments.length)return d;m=uc(d=c);a=uc(1/d);b.domain(f.map(m));return k};k.copy=function(){return Df(b.copy(),d,f)};return Ed(k,b)}function uc(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function Ef(b,d){function f(f){return c[((a.get(f)||("range"===d.t?a.set(f,b.push(f)):NaN))-1)%c.length]}function k(d,f){return z.range(b.length).map(function(b){return d+f*b})}var a,c,e;f.domain=function(k){if(!arguments.length)return b;b=[];a=new p;for(var m=
-1,c=k.length,e;++m<c;)a.has(e=k[m])||a.set(e,b.push(e));return f[d.t].apply(f,d.a)};f.range=function(b){if(!arguments.length)return c;c=b;e=0;d={t:"range",a:arguments};return f};f.rangePoints=function(a,m){2>arguments.length&&(m=0);var x=a[0],g=a[1],g=2>b.length?(x=(x+g)/2,0):(g-x)/(b.length-1+m);c=k(x+g*m/2,g);e=0;d={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(a,m){2>arguments.length&&(m=0);var x=a[0],g=a[1],h=2>b.length?(x=g=Math.round((x+g)/2),0):(g-x)/(b.length-1+m)|0;
c=k(x+Math.round(h*m/2+(g-x-(b.length-1+m)*h)/2),h);e=0;d={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(a,m,x){2>arguments.length&&(m=0);3>arguments.length&&(x=m);var g=a[1]<a[0],h=a[g-0],l=(a[1-g]-h)/(b.length-m+2*x);c=k(h+l*x,l);g&&c.reverse();e=l*(1-m);d={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(a,m,x){2>arguments.length&&(m=0);3>arguments.length&&(x=m);var g=a[1]<a[0],h=a[g-0],l=a[1-g],q=Math.floor((l-h)/(b.length-m+2*x));c=k(h+Math.round((l-h-(b.length-
m)*q)/2),q);g&&c.reverse();e=Math.round(q*(1-m));d={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return e};f.rangeExtent=function(){return zb(d.a[0])};f.copy=function(){return Ef(b,d)};return f.domain(b)}function Ff(b,d){function f(){var f=0,a=d.length;for(m=[];++f<a;)m[f-1]=z.quantile(b,f/a);return k}function k(b){if(!isNaN(b=+b))return d[z.bisect(m,b)]}var m;k.domain=function(d){if(!arguments.length)return b;b=d.map(e).filter(g).sort(a);return f()};k.range=function(b){if(!arguments.length)return d;
d=b;return f()};k.quantiles=function(){return m};k.invertExtent=function(f){f=d.indexOf(f);return 0>f?[NaN,NaN]:[0<f?m[f-1]:b[0],f<m.length?m[f]:b[b.length-1]]};k.copy=function(){return Ff(b,d)};return f()}function Gf(b,d,f){function k(d){return f[Math.max(0,Math.min(e,Math.floor(c*(d-b))))]}function a(){c=f.length/(d-b);e=f.length-1;return k}var c,e;k.domain=function(f){if(!arguments.length)return[b,d];b=+f[0];d=+f[f.length-1];return a()};k.range=function(b){if(!arguments.length)return f;f=b;return a()};
k.invertExtent=function(d){d=f.indexOf(d);d=0>d?NaN:d/c+b;return[d,d+1/c]};k.copy=function(){return Gf(b,d,f)};return a()}function Hf(b,d){function f(f){if(f<=f)return d[z.bisect(b,f)]}f.domain=function(d){if(!arguments.length)return b;b=d;return f};f.range=function(b){if(!arguments.length)return d;d=b;return f};f.invertExtent=function(f){f=d.indexOf(f);return[b[f-1],b[f]]};f.copy=function(){return Hf(b,d)};return f}function If(b){function d(b){return+b}d.invert=d;d.domain=d.range=function(f){if(!arguments.length)return b;
b=f.map(d);return d};d.ticks=function(d){return z.range.apply(z,cb(b,d))};d.tickFormat=function(d,k){return Dd(b,d,k)};d.copy=function(){return If(b)};return d}function Sh(){return 0}function Th(b){return b.innerRadius}function Uh(b){return b.outerRadius}function Jf(b){return b.startAngle}function Kf(b){return b.endAngle}function Vh(b){return b&&b.padAngle}function vc(b,d,f,k){return 0<(b-f)*d-(d-k)*b?0:1}function wc(b,d,f,k,a){var m=b[0]-d[0],c=b[1]-d[1];a=(a?k:-k)/Math.sqrt(m*m+c*c);var c=a*c,m=
-a*m,e=b[0]+c,g=b[1]+m,h=d[0]+c,l=d[1]+m;b=(e+h)/2;d=(g+l)/2;a=h-e;var q=l-g,r=a*a+q*q;k=f-k;var l=e*l-h*g,n=(0>q?-1:1)*Math.sqrt(Math.max(0,k*k*r-l*l)),e=(l*q-a*n)/r,g=(-l*a-q*n)/r,h=(l*q+a*n)/r;a=(-l*a+q*n)/r;q=e-b;r=g-d;b=h-b;d=a-d;q*q+r*r>b*b+d*d&&(e=h,g=a);return[[e-c,g-m],[e*f/k,g*f/k]]}function Lf(b){function d(d){function m(){e.push("M",c(b(x),g))}for(var e=[],x=[],h=-1,l=d.length,q,r=pa(f),n=pa(k);++h<l;)a.call(this,q=d[h],h)?x.push([+r.call(this,q,h),+n.call(this,q,h)]):x.length&&(m(),x=
[]);x.length&&m();return e.length?e.join(""):null}var f=tb,k=Ib,a=Fb,c=Pa,e=c.key,g=.7;d.x=function(b){if(!arguments.length)return f;f=b;return d};d.y=function(b){if(!arguments.length)return k;k=b;return d};d.defined=function(b){if(!arguments.length)return a;a=b;return d};d.interpolate=function(b){if(!arguments.length)return e;e="function"===typeof b?c=b:(c=Fd.get(b)||Pa).key;return d};d.tension=function(b){if(!arguments.length)return g;g=b;return d};return d}function Pa(b){return 1<b.length?b.join("L"):
b+"Z"}function Mf(b){return b.join("L")+"Z"}function Gd(b){for(var d=0,f=b.length,k=b[0],a=[k[0],",",k[1]];++d<f;)a.push("V",(k=b[d])[1],"H",k[0]);return a.join("")}function Hd(b){for(var d=0,f=b.length,k=b[0],a=[k[0],",",k[1]];++d<f;)a.push("H",(k=b[d])[0],"V",k[1]);return a.join("")}function xc(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return Pa(b);var f=b.length!=d.length,k="",a=b[0],c=b[1],e=d[0],g=e,h=1;f&&(k+="Q"+(c[0]-2*e[0]/3)+","+(c[1]-2*e[1]/3)+","+c[0]+","+c[1],a=b[1],
h=2);if(1<d.length)for(g=d[1],c=b[h],h++,k+="C"+(a[0]+e[0])+","+(a[1]+e[1])+","+(c[0]-g[0])+","+(c[1]-g[1])+","+c[0]+","+c[1],a=2;a<d.length;a++,h++)c=b[h],g=d[a],k+="S"+(c[0]-g[0])+","+(c[1]-g[1])+","+c[0]+","+c[1];f&&(f=b[h],k+="Q"+(c[0]+2*g[0]/3)+","+(c[1]+2*g[1]/3)+","+f[0]+","+f[1]);return k}function Id(b,d){for(var f=[],k=(1-d)/2,a,c=b[0],e=b[1],g=1,h=b.length;++g<h;)a=c,c=e,e=b[g],f.push([k*(e[0]-a[0]),k*(e[1]-a[1])]);return f}function Nf(b){if(3>b.length)return Pa(b);var d=1,f=b.length,k=
b[0],a=k[0],c=k[1],e=[a,a,a,(k=b[1])[0]],g=[c,c,c,k[1]],a=[a,",",c,"L",Ma(db,e),",",Ma(db,g)];for(b.push(b[f-1]);++d<=f;)k=b[d],e.shift(),e.push(k[0]),g.shift(),g.push(k[1]),Jd(a,e,g);b.pop();a.push("L",k);return a.join("")}function Ma(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function Jd(b,d,f){b.push("C",Ma(Of,d),",",Ma(Of,f),",",Ma(Pf,d),",",Ma(Pf,f),",",Ma(db,d),",",Ma(db,f))}function Kd(b,d){return(d[1]-b[1])/(d[0]-b[0])}function Qf(b){for(var d,f=-1,k=b.length,a,c;++f<k;)d=b[f],a=
d[0],c=d[1]-wa,d[0]=a*Math.cos(c),d[1]=a*Math.sin(c);return b}function Rf(b){function d(d){function m(){x.push("M",g(b(n),r),q,l(b(h.reverse()),r),"Z")}for(var x=[],h=[],n=[],y=-1,T=d.length,t,W=pa(f),p=pa(a),v=f===k?function(){return D}:pa(k),H=a===c?function(){return Z}:pa(c),D,Z;++y<T;)e.call(this,t=d[y],y)?(h.push([D=+W.call(this,t,y),Z=+p.call(this,t,y)]),n.push([+v.call(this,t,y),+H.call(this,t,y)])):h.length&&(m(),h=[],n=[]);h.length&&m();return x.length?x.join(""):null}var f=tb,k=tb,a=0,c=
Ib,e=Fb,g=Pa,h=g.key,l=g,q="L",r=.7;d.x=function(b){if(!arguments.length)return k;f=k=b;return d};d.x0=function(b){if(!arguments.length)return f;f=b;return d};d.x1=function(b){if(!arguments.length)return k;k=b;return d};d.y=function(b){if(!arguments.length)return c;a=c=b;return d};d.y0=function(b){if(!arguments.length)return a;a=b;return d};d.y1=function(b){if(!arguments.length)return c;c=b;return d};d.defined=function(b){if(!arguments.length)return e;e=b;return d};d.interpolate=function(b){if(!arguments.length)return h;
h="function"===typeof b?g=b:(g=Fd.get(b)||Pa).key;l=g.reverse||g;q=g.closed?"M":"L";return d};d.tension=function(b){if(!arguments.length)return r;r=b;return d};return d}function Wh(b){return b.radius}function Sf(b){return[b.x,b.y]}function Xh(b){return function(){var d=b.apply(this,arguments),f=d[0],d=d[1]-wa;return[f*Math.cos(d),f*Math.sin(d)]}}function Yh(){return 64}function Zh(){return"circle"}function Tf(b){b=Math.sqrt(b/ba);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+
"Z"}function Uf(b){return function(){var d,f,k;(d=this[b])&&(k=d[f=d.active])&&(k.timer.c=null,k.timer.t=NaN,--d.count?delete d[f]:delete this[b],d.active+=.5,k.event&&k.event.interrupt.call(this,this.__data__,k.index))}}function Qb(b,d,f){Sb(b,Aa);b.namespace=d;b.id=f;return b}function Ld(b,d,f,k){var a=b.id,c=b.namespace;return ka(b,"function"===typeof f?function(b,m,e){b[c][a].tween.set(d,k(f.call(b,b.__data__,m,e)))}:(f=k(f),function(b){b[c][a].tween.set(d,f)}))}function $h(b){null==b&&(b="");
return function(){this.textContent=b}}function Md(b){return null==b?"__transition__":"__transition_"+b+"__"}function yc(b,d,f,k,a){function c(b){var d=h.delay;y.t=d+n;if(d<=b)return m(b-d);y.c=m}function m(f){var a=g.active,c=g[a];c&&(c.timer.c=null,c.timer.t=NaN,--g.count,delete g[a],c.event&&c.event.interrupt.call(b,b.__data__,c.index));for(var m in g)+m<k&&(a=g[m],a.timer.c=null,a.timer.t=NaN,--g.count,delete g[m]);y.c=e;Xb(function(){y.c&&e(f||1)&&(y.c=null,y.t=NaN);return 1},0,n);g.active=k;
h.event&&h.event.start.call(b,b.__data__,d);r=[];h.tween.forEach(function(f,k){(k=k.call(b,b.__data__,d))&&r.push(k)});q=h.ease;l=h.duration}function e(a){a/=l;for(var c=q(a),m=r.length;0<m;)r[--m].call(b,c);if(1<=a)return h.event&&h.event.end.call(b,b.__data__,d),--g.count?delete g[k]:delete b[f],1}var g=b[f]||(b[f]={active:0,count:0}),h=g[k],l,q,r;if(!h){var n=a.time;var y=Xb(c,0,n);h=g[k]={tween:new p,time:n,timer:y,delay:a.delay,duration:a.duration,ease:a.ease,index:d};a=null;++g.count}}function ai(b,
d,f){b.attr("transform",function(b){var k=d(b);return"translate("+(isFinite(k)?k:f(b))+",0)"})}function bi(b,d,f){b.attr("transform",function(b){var k=d(b);return"translate(0,"+(isFinite(k)?k:f(b))+")"})}function Nd(b){return b.toISOString()}function Od(b,d,f){function k(d){return b(d)}function a(b,f){var k=(b[1]-b[0])/f,a=z.bisect(zc,k);return a==zc.length?[d.year,cb(b.map(function(b){return b/31536E6}),f)[2]]:a?d[k/zc[a-1]<zc[a]/k?a-1:a]:[ci,cb(b,f)[2]]}k.invert=function(d){return nb(b.invert(d))};
k.domain=function(d){if(!arguments.length)return b.domain().map(nb);b.domain(d);return k};k.nice=function(b,d){function f(f){return!isNaN(f)&&!b.range(f,nb(+f+1),d).length}var c=k.domain(),m=zb(c);if(m=null==b?a(m,10):"number"===typeof b&&a(m,b))b=m[0],d=m[1];return k.domain(sc(c,1<d?{floor:function(d){for(;f(d=b.floor(d));)d=nb(d-1);return d},ceil:function(d){for(;f(d=b.ceil(d));)d=nb(+d+1);return d}}:b))};k.ticks=function(b,d){var f=zb(k.domain()),c=null==b?a(f,10):"number"===typeof b?a(f,b):!b.range&&
[{range:b},d];c&&(b=c[0],d=c[1]);return b.range(f[0],nb(+f[1]+1),1>d?1:d)};k.tickFormat=function(){return f};k.copy=function(){return Od(b.copy(),d,f)};return Ed(k,b)}function nb(b){return new Date(b)}function di(b){return JSON.parse(b.responseText)}function ei(b){var d=Fa.createRange();d.selectNode(Fa.body);return d.createContextualFragment(b.responseText)}var z={version:"3.5.17"},Vf=[].slice,Qa=function(b){return Vf.call(b)},Fa=this.document;if(Fa)try{Qa(Fa.documentElement.childNodes)[0].nodeType}catch(b){Qa=
function(b){for(var d=b.length,k=Array(d);d--;)k[d]=b[d];return k}}Date.now||(Date.now=function(){return+new Date});if(Fa)try{Fa.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var Ac=this.Element.prototype,fi=Ac.setAttribute,gi=Ac.setAttributeNS,Wf=this.CSSStyleDeclaration.prototype,hi=Wf.setProperty;Ac.setAttribute=function(b,f){fi.call(this,b,f+"")};Ac.setAttributeNS=function(b,f,k){gi.call(this,b,f,k+"")};Wf.setProperty=function(b,f,k){hi.call(this,b,f+"",k)}}z.ascending=a;z.descending=
function(b,d){return d<b?-1:d>b?1:d>=b?0:NaN};z.min=function(b,d){var f=-1,k=b.length,a;if(1===arguments.length){for(;++f<k;)if(null!=(a=b[f])&&a>=a){var c=a;break}for(;++f<k;)null!=(a=b[f])&&c>a&&(c=a)}else{for(;++f<k;)if(null!=(a=d.call(b,b[f],f))&&a>=a){c=a;break}for(;++f<k;)null!=(a=d.call(b,b[f],f))&&c>a&&(c=a)}return c};z.max=function(b,d){var f=-1,k=b.length,a;if(1===arguments.length){for(;++f<k;)if(null!=(a=b[f])&&a>=a){var c=a;break}for(;++f<k;)null!=(a=b[f])&&a>c&&(c=a)}else{for(;++f<k;)if(null!=
(a=d.call(b,b[f],f))&&a>=a){c=a;break}for(;++f<k;)null!=(a=d.call(b,b[f],f))&&a>c&&(c=a)}return c};z.extent=function(b,d){var f=-1,a=b.length,c,e;if(1===arguments.length){for(;++f<a;)if(null!=(c=b[f])&&c>=c){var g=e=c;break}for(;++f<a;)null!=(c=b[f])&&(g>c&&(g=c),e<c&&(e=c))}else{for(;++f<a;)if(null!=(c=d.call(b,b[f],f))&&c>=c){g=e=c;break}for(;++f<a;)null!=(c=d.call(b,b[f],f))&&(g>c&&(g=c),e<c&&(e=c))}return[g,e]};z.sum=function(b,d){var f=0,a=b.length,c,e=-1;if(1===arguments.length)for(;++e<a;)isNaN(c=
+b[e])||(f+=c);else for(;++e<a;)isNaN(c=+d.call(b,b[e],e))||(f+=c);return f};z.mean=function(b,d){var f=0,a=b.length,c,g=-1,h=a;if(1===arguments.length)for(;++g<a;)isNaN(c=e(b[g]))?--h:f+=c;else for(;++g<a;)isNaN(c=e(d.call(b,b[g],g)))?--h:f+=c;if(h)return f/h};z.quantile=function(b,d){var f=(b.length-1)*d+1,a=Math.floor(f),c=+b[a-1];return(f-=a)?c+f*(b[a]-c):c};z.median=function(b,d){var f=[],k=b.length,c,g=-1;if(1===arguments.length)for(;++g<k;)isNaN(c=e(b[g]))||f.push(c);else for(;++g<k;)isNaN(c=
e(d.call(b,b[g],g)))||f.push(c);if(f.length)return z.quantile(f.sort(a),.5)};z.variance=function(b,d){var f=b.length,a=0,c,g=0,h=-1,l=0;if(1===arguments.length)for(;++h<f;){if(!isNaN(c=e(b[h]))){var q=c-a;a+=q/++l;g+=q*(c-a)}}else for(;++h<f;)isNaN(c=e(d.call(b,b[h],h)))||(q=c-a,a+=q/++l,g+=q*(c-a));if(1<l)return g/(l-1)};z.deviation=function(){var b=z.variance.apply(this,arguments);return b?Math.sqrt(b):b};var Xf=t(a);z.bisectLeft=Xf.left;z.bisect=z.bisectRight=Xf.right;z.bisector=function(b){return t(1===
b.length?function(d,f){return a(b(d),f)}:b)};z.shuffle=function(b,d,f){3>(a=arguments.length)&&(f=b.length,2>a&&(d=0));for(var a=f-d,c,e;a;)e=Math.random()*a--|0,c=b[a+d],b[a+d]=b[e+d],b[e+d]=c;return b};z.permute=function(b,d){for(var f=d.length,a=Array(f);f--;)a[f]=b[d[f]];return a};z.pairs=function(b){for(var d=0,f=b.length-1,a=b[0],c=Array(0>f?0:f);d<f;)c[d]=[a,a=b[++d]];return c};z.transpose=function(b){if(!(e=b.length))return[];for(var d=-1,f=z.min(b,l),a=Array(f);++d<f;)for(var c=-1,e,g=a[d]=
Array(e);++c<e;)g[c]=b[c][d];return a};z.zip=function(){return z.transpose(arguments)};z.keys=function(b){var d=[],f;for(f in b)d.push(f);return d};z.values=function(b){var d=[],f;for(f in b)d.push(b[f]);return d};z.entries=function(b){var d=[],f;for(f in b)d.push({key:f,value:b[f]});return d};z.merge=function(b){var d=b.length;var f=-1;for(var a=0,c,e;++f<d;)a+=b[f].length;for(c=Array(a);0<=--d;)for(e=b[d],f=e.length;0<=--f;)c[--a]=e[f];return c};var ea=Math.abs;z.range=function(b,d,f){3>arguments.length&&
(f=1,2>arguments.length&&(d=b,b=0));if(Infinity===(d-b)/f)throw Error("infinite range");var a=[];var c=ea(f);for(var e=1;c*e%1;)e*=10;c=e;var e=-1,g;b*=c;d*=c;f*=c;if(0>f)for(;(g=b+f*++e)>d;)a.push(g/c);else for(;(g=b+f*++e)<d;)a.push(g/c);return a};z.map=function(b,d){var f=new p;if(b instanceof p)b.forEach(function(b,d){f.set(b,d)});else if(Array.isArray(b)){var a=-1,c=b.length,e;if(1===arguments.length)for(;++a<c;)f.set(a,b[a]);else for(;++a<c;)f.set(d.call(b,e=b[a],a),e)}else for(a in b)f.set(a,
b[a]);return f};n(p,{has:w,get:function(b){return this._[h(b)]},set:function(b,d){return this._[h(b)]=d},remove:J,keys:C,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},entries:function(){var b=[],d;for(d in this._)b.push({key:u(d),value:this._[d]});return b},size:B,empty:G,forEach:function(b){for(var d in this._)b.call(this,u(d),this._[d])}});z.nest=function(){function b(d,c,k){if(k>=a.length)return g?g.call(f,c):e?c.sort(e):c;for(var m=-1,h=c.length,x=a[k++],l,q,r=new p,
n;++m<h;)(n=r.get(l=x(q=c[m])))?n.push(q):r.set(l,[q]);d?(q=d(),c=function(f,a){q.set(f,b(d,a,k))}):(q={},c=function(f,a){q[f]=b(d,a,k)});r.forEach(c);return q}function d(b,f){if(f>=a.length)return b;var k=[],e=c[f++];b.forEach(function(b,a){k.push({key:b,values:d(a,f)})});return e?k.sort(function(b,d){return e(b.key,d.key)}):k}var f={},a=[],c=[],e,g;f.map=function(d,f){return b(f,d,0)};f.entries=function(f){return d(b(z.map,f,0),0)};f.key=function(b){a.push(b);return f};f.sortKeys=function(b){c[a.length-
1]=b;return f};f.sortValues=function(b){e=b;return f};f.rollup=function(b){g=b;return f};return f};z.set=function(b){var d=new E;if(b)for(var f=0,a=b.length;f<a;++f)d.add(b[f]);return d};n(E,{has:w,add:function(b){this._[h(b+="")]=!0;return b},remove:J,values:C,size:B,empty:G,forEach:function(b){for(var d in this._)b.call(this,u(d))}});z.behavior={};z.rebind=function(b,d){for(var f=1,a=arguments.length,c;++f<a;)b[c=arguments[f]]=L(b,d,d[c]);return b};var Zd="webkit ms moz Moz o O".split(" ");z.dispatch=
function(){for(var b=new v,d=-1,f=arguments.length;++d<f;)b[arguments[d]]=F(b);return b};v.prototype.on=function(b,d){var f=b.indexOf("."),a="";0<=f&&(a=b.slice(f+1),b=b.slice(0,f));if(b)return 2>arguments.length?this[b].on(a):this[b].on(a,d);if(2===arguments.length){if(null==d)for(b in this)if(this.hasOwnProperty(b))this[b].on(a,null);return this}};z.event=null;z.requote=function(b){return b.replace(ii,"\\$&")};var ii=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Sb={}.__proto__?function(b,d){b.__proto__=d}:
function(b,d){for(var f in d)b[f]=d[f]},Qc=function(b,d){return d.querySelector(b)},Rc=function(b,d){return d.querySelectorAll(b)},Tb=function(b,d){var f=b.matches||b[M(b,"matchesSelector")];Tb=function(b,d){return f.call(b,d)};return Tb(b,d)};"function"===typeof Sizzle&&(Qc=function(b,d){return Sizzle(b,d)[0]||null},Rc=Sizzle,Tb=Sizzle.matchesSelector);z.selection=function(){return z.select(Fa.documentElement)};var la=z.selection.prototype=[];la.select=function(b){var d=[],f,a,c,e;b=r(b);for(var g=
-1,h=this.length;++g<h;){d.push(f=[]);f.parentNode=(c=this[g]).parentNode;for(var l=-1,q=c.length;++l<q;)(e=c[l])?(f.push(a=b.call(e,e.__data__,l,g)),a&&"__data__"in e&&(a.__data__=e.__data__)):f.push(null)}return R(d)};la.selectAll=function(b){var d=[],f,a;b=K(b);for(var c=-1,e=this.length;++c<e;)for(var g=this[c],h=-1,l=g.length;++h<l;)if(a=g[h])d.push(f=Qa(b.call(a,a.__data__,h,c))),f.parentNode=a;return R(d)};var Pd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",
xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};z.ns={prefix:Pd,qualify:function(b){var d=b.indexOf(":"),f=b;0<=d&&"xmlns"!==(f=b.slice(0,d))&&(b=b.slice(d+1));return Pd.hasOwnProperty(f)?{space:Pd[f],local:b}:b}};la.attr=function(b,d){if(2>arguments.length){if("string"===typeof b){var f=this.node();b=z.ns.qualify(b);return b.local?f.getAttributeNS(b.space,b.local):f.getAttribute(b)}for(d in b)this.each(Q(d,b[d]));return this}return this.each(Q(b,d))};la.classed=
function(b,d){if(2>arguments.length){if("string"===typeof b){var f=this.node(),a=(b=(b+"").trim().split(/^|\s+/)).length,c=-1;if(d=f.classList)for(;++c<a;){if(!d.contains(b[c]))return!1}else for(d=f.getAttribute("class");++c<a;)if(!D(b[c]).test(d))return!1;return!0}for(d in b)this.each(q(d,b[d]));return this}return this.each(q(b,d))};la.style=function(b,d,f){var a=arguments.length;if(3>a){if("string"!==typeof b){2>a&&(d="");for(f in b)this.each(y(f,b[f],d));return this}if(2>a)return a=this.node(),
c(a).getComputedStyle(a,null).getPropertyValue(b);f=""}return this.each(y(b,d,f))};la.property=function(b,d){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(d in b)this.each(V(d,b[d]));return this}return this.each(V(b,d))};la.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};la.html=function(b){return arguments.length?
this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};la.append=function(b){b=aa(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};la.insert=function(b,d){b=aa(b);d=r(d);return this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,arguments)||null)})};la.remove=function(){return this.each(H)};la.data=
function(b,d){function f(b,f){var a,c=b.length,k=f.length,e=Math.min(c,k),m=Array(k),g=Array(k),x=Array(c),r,n;if(d){var e=new p,y=Array(c),t;for(a=-1;++a<c;)if(r=b[a])e.has(t=d.call(r,r.__data__,a))?x[a]=r:e.set(t,r),y[a]=t;for(a=-1;++a<k;)(r=e.get(t=d.call(f,n=f[a],a)))?!0!==r&&(m[a]=r,r.__data__=n):g[a]={__data__:n},e.set(t,!0);for(a=-1;++a<c;)a in y&&!0!==e.get(y[a])&&(x[a]=b[a])}else{for(a=-1;++a<e;)r=b[a],n=f[a],r?(r.__data__=n,m[a]=r):g[a]={__data__:n};for(;a<k;++a)g[a]={__data__:f[a]};for(;a<
c;++a)x[a]=b[a]}g.update=m;g.parentNode=m.parentNode=x.parentNode=b.parentNode;h.push(g);l.push(m);q.push(x)}var a=-1,c=this.length,e,g;if(!arguments.length){for(b=Array(c=(e=this[0]).length);++a<c;)if(g=e[a])b[a]=g.__data__;return b}var h=da([]),l=R([]),q=R([]);if("function"===typeof b)for(;++a<c;)f(e=this[a],b.call(e,e.parentNode.__data__,a));else for(;++a<c;)f(e=this[a],b);l.enter=function(){return h};l.exit=function(){return q};return l};la.datum=function(b){return arguments.length?this.property("__data__",
b):this.property("__data__")};la.filter=function(b){var d=[],f,a,c;"function"!==typeof b&&(b=S(b));for(var e=0,g=this.length;e<g;e++){d.push(f=[]);f.parentNode=(a=this[e]).parentNode;for(var h=0,l=a.length;h<l;h++)(c=a[h])&&b.call(c,c.__data__,h,e)&&f.push(c)}return R(d)};la.order=function(){for(var b=-1,d=this.length;++b<d;)for(var f=this[b],a=f.length-1,c=f[a],e;0<=--a;)if(e=f[a])c&&c!==e.nextSibling&&c.parentNode.insertBefore(e,c),c=e;return this};la.sort=function(b){b=X.apply(this,arguments);
for(var d=-1,f=this.length;++d<f;)this[d].sort(b);return this.order()};la.each=function(b){return ka(this,function(d,f,a){b.call(d,d.__data__,f,a)})};la.call=function(b){var d=Qa(arguments);b.apply(d[0]=this,d);return this};la.empty=function(){return!this.node()};la.node=function(){for(var b=0,d=this.length;b<d;b++)for(var f=this[b],a=0,c=f.length;a<c;a++){var e=f[a];if(e)return e}return null};la.size=function(){var b=0;ka(this,function(){++b});return b};var Ta=[];z.selection.enter=da;z.selection.enter.prototype=
Ta;Ta.append=la.append;Ta.empty=la.empty;Ta.node=la.node;Ta.call=la.call;Ta.size=la.size;Ta.select=function(b){for(var d=[],f,a,c,e,g,h=-1,l=this.length;++h<l;){c=(e=this[h]).update;d.push(f=[]);f.parentNode=e.parentNode;for(var q=-1,r=e.length;++q<r;)(g=e[q])?(f.push(c[q]=a=b.call(e.parentNode,g.__data__,q,h)),a.__data__=g.__data__):f.push(null)}return R(d)};Ta.insert=function(b,d){2>arguments.length&&(d=ma(this));return la.insert.call(this,b,d)};z.select=function(b){if("string"===typeof b){var d=
[Qc(b,Fa)];d.parentNode=Fa.documentElement}else d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return R([d])};z.selectAll=function(b){"string"===typeof b?(b=Qa(Rc(b,Fa)),b.parentNode=Fa.documentElement):(b=Qa(b),b.parentNode=null);return R([b])};la.on=function(b,d,f){var a=arguments.length;if(3>a){if("string"!==typeof b){2>a&&(d=!1);for(f in b)this.each(ua(f,b[f],d));return this}if(2>a)return(a=this.node()["__on"+b])&&a._;f=!1}return this.each(ua(b,d,f))};var Tc=z.map({mouseenter:"mouseover",
mouseleave:"mouseout"});Fa&&Tc.forEach(function(b){"on"+b in Fa&&Tc.remove(b)});var eb,pg=0;z.mouse=function(b){return ha(b,N())};var Uc=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;z.touch=function(b,d,f){3>arguments.length&&(f=d,d=N().changedTouches);if(d)for(var a=0,c=d.length,e;a<c;++a)if((e=d[a]).identifier===f)return ha(b,e)};z.behavior.drag=function(){function b(){this.on("mousedown.drag",e).on("touchstart.drag",g)}function d(b,d,c,k,e){return function(){var m=z.event.target.correspondingElement||
z.event.target,g=this.parentNode,h=f.of(this,arguments),l=0,q=b(),x=".drag"+(null==q?"":"-"+q),r=z.select(c(m)).on(k+x,function(){var b=d(g,q);if(b){var f=b[0]-y[0];var a=b[1]-y[1];l|=f|a;y=b;h({type:"drag",x:b[0]+t[0],y:b[1]+t[1],dx:f,dy:a})}}).on(e+x,function(){d(g,q)&&(r.on(k+x,null).on(e+x,null),n(l),h({type:"dragend"}))}),n=oa(m),y=d(g,q);if(a){var t=a.apply(this,arguments);t=[t.x-y[0],t.y-y[1]]}else t=[0,0];h({type:"dragstart"})}}var f=P(b,"drag","dragstart","dragend"),a=null,e=d(I,z.mouse,
c,"mousemove","mouseup"),g=d(ja,z.touch,A,"touchmove","touchend");b.origin=function(d){if(!arguments.length)return a;a=d;return b};return z.rebind(b,f,"on")};z.touches=function(b,d){2>arguments.length&&(d=N().touches);return d?Qa(d).map(function(d){var f=ha(b,d);f.identifier=d.identifier;return f}):[]};var ba=Math.PI,La=2*ba,ji=La-1E-6,wa=ba/2,ca=ba/180,ta=180/ba,Rb=Math.SQRT2;z.interpolateZoom=function(b,d){var f=b[0],a=b[1],c=b[2],e=d[2],g=d[0]-f,h=d[1]-a,l=g*g+h*h;if(1E-12>l){var q=Math.log(e/
c)/Rb;var r=function(b){return[f+b*g,a+b*h,c*Math.exp(Rb*b*q)]}}else{var n=Math.sqrt(l);r=(e*e-c*c+4*l)/(4*c*n);var e=(e*e-c*c-4*l)/(4*e*n),y=Math.log(Math.sqrt(r*r+1)-r);q=(Math.log(Math.sqrt(e*e+1)-e)-y)/Rb;r=function(b){b*=q;var d=Ia(y),k=c/(2*n),e=Rb*b+y;var m=((e=Math.exp(2*e))-1)/(e+1);var l=y,e=((l=Math.exp(l))-1/l)/2,k=k*(d*m-e);return[f+k*g,a+k*h,c*d/Ia(Rb*b+y)]}}r.duration=1E3*q;return r};z.behavior.zoom=function(){function b(b){b.on("mousedown.zoom",r).on(Qd+".zoom",y).on("dblclick.zoom",
t).on("touchstart.zoom",n)}function d(b){return[(b[0]-p.x)/p.k,(b[1]-p.y)/p.k]}function f(b){p.k=Math.max(u[0],Math.min(u[1],b))}function a(b,d){d=[d[0]*p.k+p.x,d[1]*p.k+p.y];p.x+=b[0]-d[0];p.y+=b[1]-d[1]}function e(d,c,k,e){d.__chart__={x:p.x,y:p.y,k:p.k};f(Math.pow(2,e));a(H=c,k);d=z.select(d);0<S&&(d=d.transition().duration(S));d.call(b.event)}function g(){K&&K.domain(E.range().map(function(b){return(b-p.x)/p.k}).map(E.invert));aa&&aa.domain(I.range().map(function(b){return(b-p.y)/p.k}).map(I.invert))}
function h(b){F++||b({type:"zoomstart"})}function l(b){g();b({type:"zoom",scale:p.k,translate:[p.x,p.y]})}function q(b){--F||(b({type:"zoomend"}),H=null)}function r(){var b=this,f=w.of(b,arguments),k=0,e=z.select(c(b)).on("mousemove.zoom",function(){k=1;a(z.mouse(b),m);l(f)}).on("mouseup.zoom",function(){e.on("mousemove.zoom",null).on("mouseup.zoom",null);g(k);q(f)}),m=d(z.mouse(b)),g=oa(b);Bc.call(b);h(f)}function n(){function b(){var b=z.touches(g);v=p.k;b.forEach(function(b){b.identifier in y&&
(y[b.identifier]=d(b))});return b}function c(){var d=z.event.target;z.select(d).on(D,k).on(W,m);O.push(d);d=z.event.changedTouches;for(var f=0,a=d.length;f<a;++f)y[d[f].identifier]=null;f=b();a=Date.now();1===f.length?(500>a-A&&(d=f[0],e(g,d,y[d.identifier],Math.floor(Math.log(p.k)/Math.LN2)+1),U()),A=a):1<f.length&&(d=f[0],a=f[1],f=d[0]-a[0],d=d[1]-a[1],t=f*f+d*d)}function k(){var b=z.touches(g),d;Bc.call(g);for(var c=0,k=b.length;c<k;++c,d=null){var e=b[c];if(d=y[e.identifier]){if(h)break;var m=
e;var h=d}}if(d){var q=(q=e[0]-m[0])*q+(q=e[1]-m[1])*q,b=t&&Math.sqrt(q/t);m=[(m[0]+e[0])/2,(m[1]+e[1])/2];h=[(h[0]+d[0])/2,(h[1]+d[1])/2];f(b*v)}A=null;a(m,h);l(x)}function m(){if(z.event.touches.length){for(var d=z.event.changedTouches,f=0,a=d.length;f<a;++f)delete y[d[f].identifier];for(var c in y)return void b()}z.selectAll(O).on(H,null);T.on("mousedown.zoom",r).on("touchstart.zoom",n);u();q(x)}var g=this,x=w.of(g,arguments),y={},t=0,v,H=".zoom-"+z.event.changedTouches[0].identifier,D="touchmove"+
H,W="touchend"+H,O=[],T=z.select(g),u=oa(g);c();h(x);T.on("mousedown.zoom",null).on("touchstart.zoom",c)}function y(){var b=w.of(this,arguments);X?clearTimeout(X):(Bc.call(this),v=d(H=D||z.mouse(this)),h(b));X=setTimeout(function(){X=null;q(b)},50);U();f(Math.pow(2,.002*Cc())*p.k);a(H,v);l(b)}function t(){var b=z.mouse(this),f=Math.log(p.k)/Math.LN2;e(this,b,d(b),z.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)}var p={x:0,y:0,k:1},v,H,D,O=[960,500],u=Yf,S=250,F=0,X,A,w=P(b,"zoomstart","zoom","zoomend"),
E,K,I,aa;Qd||(Qd="onwheel"in Fa?(Cc=function(){return-z.event.deltaY*(z.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Fa?(Cc=function(){return z.event.wheelDelta},"mousewheel"):(Cc=function(){return-z.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=w.of(this,arguments),d=p;ob?z.select(this).transition().each("start.zoom",function(){p=this.__chart__||{x:0,y:0,k:1};h(b)}).tween("zoom:zoom",function(){var f=O[0],a=O[1],c=H?H[0]:f/2,k=H?H[1]:a/2,e=z.interpolateZoom([(c-
p.x)/p.k,(k-p.y)/p.k,f/p.k],[(c-d.x)/d.k,(k-d.y)/d.k,f/d.k]);return function(d){d=e(d);var a=f/d[2];this.__chart__=p={x:c-d[0]*a,y:k-d[1]*a,k:a};l(b)}}).each("interrupt.zoom",function(){q(b)}).each("end.zoom",function(){q(b)}):(this.__chart__=p,h(b),l(b),q(b))})};b.translate=function(d){if(!arguments.length)return[p.x,p.y];p={x:+d[0],y:+d[1],k:p.k};g();return b};b.scale=function(d){if(!arguments.length)return p.k;p={x:p.x,y:p.y,k:null};f(+d);g();return b};b.scaleExtent=function(d){if(!arguments.length)return u;
u=null==d?Yf:[+d[0],+d[1]];return b};b.center=function(d){if(!arguments.length)return D;D=d&&[+d[0],+d[1]];return b};b.size=function(d){if(!arguments.length)return O;O=d&&[+d[0],+d[1]];return b};b.duration=function(d){if(!arguments.length)return S;S=+d;return b};b.x=function(d){if(!arguments.length)return K;K=d;E=d.copy();p={x:0,y:0,k:1};return b};b.y=function(d){if(!arguments.length)return aa;aa=d;I=d.copy();p={x:0,y:0,k:1};return b};return z.rebind(b,w,"on")};var Yf=[0,Infinity],Cc,Qd;z.color=Ca;
Ca.prototype.toString=function(){return this.rgb()+""};z.hsl=Ba;var Rd=Ba.prototype=new Ca;Rd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ba(this.h,this.s,this.l/b)};Rd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ba(this.h,this.s,b*this.l)};Rd.rgb=function(){return za(this.h,this.s,this.l)};z.hcl=sa;var Sd=sa.prototype=new Ca;Sd.brighter=function(b){return new sa(this.h,this.c,Math.min(100,this.l+Dc*(arguments.length?b:1)))};Sd.darker=function(b){return new sa(this.h,
this.c,Math.max(0,this.l-Dc*(arguments.length?b:1)))};Sd.rgb=function(){return va(this.h,this.c,this.l).rgb()};z.lab=Da;var Dc=18,de=.95047,ee=1,fe=1.08883,Td=Da.prototype=new Ca;Td.brighter=function(b){return new Da(Math.min(100,this.l+Dc*(arguments.length?b:1)),this.a,this.b)};Td.darker=function(b){return new Da(Math.max(0,this.l-Dc*(arguments.length?b:1)),this.a,this.b)};Td.rgb=function(){return Cb(this.l,this.a,this.b)};z.rgb=Ga;var Ec=Ga.prototype=new Ca;Ec.brighter=function(b){b=Math.pow(.7,
arguments.length?b:1);var d=this.r,f=this.g,a=this.b;if(!d&&!f&&!a)return new Ga(30,30,30);d&&30>d&&(d=30);f&&30>f&&(f=30);a&&30>a&&(a=30);return new Ga(Math.min(255,d/b),Math.min(255,f/b),Math.min(255,a/b))};Ec.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ga(b*this.r,b*this.g,b*this.b)};Ec.hsl=function(){return ae(this.r,this.g,this.b)};Ec.toString=function(){return"#"+pb(this.r)+pb(this.g)+pb(this.b)};var Vb=z.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,
azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,
darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,
ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,
mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,
peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,
wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Vb.forEach(function(b,d){Vb.set(b,new Ga(d>>16,d>>8&255,d&255))});z.functor=pa;z.xhr=$c(A);z.dsv=function(b,d){function f(b,f,k){3>arguments.length&&(k=f,f=null);var e=Wb(b,d,null==f?a:c(f),k);e.row=function(b){return arguments.length?e.response(null==(f=b)?a:c(b)):f};return e}function a(b){return f.parse(b.responseText)}function c(b){return function(d){return f.parse(d.responseText,b)}}function e(d){return d.map(g).join(b)}
function g(b){return h.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var h=new RegExp('["'+b+"\n]"),l=b.charCodeAt(0);f.parse=function(b,d){var a;return f.parseRows(b,function(b,f){if(a)return a(b,f-1);var c=new Function("d","return {"+b.map(function(b,d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");a=d?function(b,f){return d(c(b),f)}:c})};f.parseRows=function(b,d){function f(){var d;if(m>=e)return c;if(q)return q=!1,a;var f=m;if(34===b.charCodeAt(f)){for(d=f;d++<e;)if(34===b.charCodeAt(d)){if(34!==
b.charCodeAt(d+1))break;++d}m=d+2;var k=b.charCodeAt(d+1);13===k?(q=!0,10===b.charCodeAt(d+2)&&++m):10===k&&(q=!0);return b.slice(f+1,d).replace(/""/g,'"')}for(;m<e;){k=b.charCodeAt(m++);d=1;if(10===k)q=!0;else if(13===k)q=!0,10===b.charCodeAt(m)&&(++m,++d);else if(k!==l)continue;return b.slice(f,m-d)}return b.slice(f)}for(var a={},c={},k=[],e=b.length,m=0,g=0,h,q;(h=f())!==c;){for(var x=[];h!==a&&h!==c;)x.push(h),h=f();d&&null==(x=d(x,g++))||k.push(x)}return k};f.format=function(d){if(Array.isArray(d[0]))return f.formatRows(d);
var a=new E,c=[];d.forEach(function(b){for(var d in b)a.has(d)||c.push(a.add(d))});return[c.map(g).join(b)].concat(d.map(function(d){return c.map(function(b){return g(d[b])}).join(b)})).join("\n")};f.formatRows=function(b){return b.map(e).join("\n")};return f};z.csv=z.dsv(",","text/csv");z.tsv=z.dsv("\t","text/tab-separated-values");var Zb,Yb,$b,ac,ge=this[M(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};z.timer=function(){Xb.apply(this,arguments)};z.timer.flush=function(){he();ie()};
z.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var f=Math.pow(10,3*ea(8-d));return{scale:8<d?function(b){return b/f}:function(b){return b*f},symbol:b}});z.formatPrefix=function(b,d){var f=0;if(b=+b)0>b&&(b*=-1),d&&(b=z.round(b,bd(b,d))),f=1+Math.floor(1E-12+Math.log(b)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3)));return ki[8+f/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,
sg=z.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,d){return b.toPrecision(d)},e:function(b,d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=z.round(b,bd(b,d))).toFixed(Math.max(0,Math.min(20,bd(b*(1+1E-15),d))))}}),Y=z.time={},Ea=Date;Ua.prototype={getDate:function(){return this._.getUTCDate()},
getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Xa.setUTCDate.apply(this._,
arguments)},setDay:function(){Xa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Xa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Xa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Xa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Xa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Xa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Xa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Xa.setTime.apply(this._,arguments)}};
var Xa=Date.prototype;Y.year=fb(function(b){b=Y.day(b);b.setMonth(0,1);return b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});Y.years=Y.year.range;Y.years.utc=Y.year.utc.range;Y.day=fb(function(b){var d=new Ea(2E3,0);d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-1});Y.days=Y.day.range;Y.days.utc=Y.day.utc.range;Y.dayOfYear=function(b){var d=Y.year(b);return Math.floor((b-
d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var f=Y[b]=fb(function(b){(b=Y.day(b)).setDate(b.getDate()-(b.getDay()+d)%7);return b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var f=Y.year(b).getDay();return Math.floor((Y.dayOfYear(b)+(f+d)%7)/7)-(f!==d)});Y[b+"s"]=f.range;Y[b+"s"].utc=f.utc.range;Y[b+"OfYear"]=function(b){var f=Y.year(b).getDay();return Math.floor((Y.dayOfYear(b)+
(f+d)%7)/7)}});Y.week=Y.sunday;Y.weeks=Y.sunday.range;Y.weeks.utc=Y.sunday.utc.range;Y.weekOfYear=Y.sundayOfYear;var ke={"-":"",_:" ",0:"0"},xa=/^\s*\d+/,ne=/^%/;z.locale=function(b){return{numberFormat:rg(b),timeFormat:ug(b)}};var Zf=z.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});z.format=Zf.numberFormat;z.geo={};cd.prototype={s:0,t:0,add:function(b){oe(b,this.t,Fc);oe(Fc.s,this.s,this);this.s?this.t+=Fc.t:this.s=Fc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Fc=new cd;z.geo.stream=function(b,d){if(b&&$f.hasOwnProperty(b.type))$f[b.type](b,d);else ec(b,d)};var $f=
{Feature:function(b,d){ec(b.geometry,d)},FeatureCollection:function(b,d){for(var f=b.features,a=-1,c=f.length;++a<c;)ec(f[a].geometry,d)}},pe={Sphere:function(b,d){d.sphere()},Point:function(b,d){b=b.coordinates;d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)b=f[a],d.point(b[0],b[1],b[2])},LineString:function(b,d){dd(b.coordinates,d,0)},MultiLineString:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)dd(f[a],d,0)},Polygon:function(b,d){qe(b.coordinates,
d)},MultiPolygon:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)qe(f[a],d)},GeometryCollection:function(b,d){for(var f=b.geometries,a=-1,c=f.length;++a<c;)ec(f[a],d)}};z.geo.area=function(b){Gc=0;z.geo.stream(b,Ka);return Gc};var Gc,gb=new cd,Ka={sphere:function(){Gc+=4*ba},point:I,lineStart:I,lineEnd:I,polygonStart:function(){gb.reset();Ka.lineStart=Jg},polygonEnd:function(){var b=2*gb;Gc+=0>b?4*ba+b:b;Ka.lineStart=Ka.lineEnd=Ka.point=I}};z.geo.bounds=function(){function b(b,d){u.push(S=
[r=b,y=b]);d<n&&(n=d);d>p&&(p=d)}function d(d,f){var a=hb([d*ca,f*ca]);if(D){var c=qb(D,a);var k=[c[1],-c[0],0];k=qb(k,c);hc(k);k=ic(k);var e=d-t;c=0<e?1:-1;var m=k[0]*ta*c,e=180<ea(e);e^(c*t<m&&m<c*d)?(k=k[1]*ta,k>p&&(p=k)):(m=(m+360)%360-180,e^(c*t<m&&m<c*d))?(k=-k[1]*ta,k<n&&(n=k)):(f<n&&(n=f),f>p&&(p=f));e?d<t?h(r,d)>h(r,y)&&(y=d):h(d,y)>h(r,y)&&(r=d):y>=r?(d<r&&(r=d),d>y&&(y=d)):d>t?h(r,d)>h(r,y)&&(y=d):h(d,y)>h(r,y)&&(r=d)}else b(d,f);D=a;t=d}function f(){F.point=d}function a(){S[0]=r;S[1]=
y;F.point=b;D=null}function c(b,f){if(D){var a=b-t;O+=180<ea(a)?a+(0<a?360:-360):a}else H=b,v=f;Ka.point(b,f);d(b,f)}function e(){Ka.lineStart()}function g(){c(H,v);Ka.lineEnd();1E-6<ea(O)&&(r=-(y=180));S[0]=r;S[1]=y;D=null}function h(b,d){return 0>(d-=b)?d+360:d}function q(b,d){return b[0]-d[0]}function l(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var r,n,y,p,t,H,v,D,O,u,S,F={point:b,lineStart:f,lineEnd:a,polygonStart:function(){F.point=c;F.lineStart=e;F.lineEnd=g;O=0;Ka.polygonStart()},
polygonEnd:function(){Ka.polygonEnd();F.point=b;F.lineStart=f;F.lineEnd=a;0>gb?(r=-(y=180),n=-(p=90)):1E-6<O?p=90:-1E-6>O&&(n=-90);S[0]=r;S[1]=y}};return function(b){p=y=-(r=n=Infinity);u=[];z.geo.stream(b,F);if(b=u.length){u.sort(q);for(var d=1,f=u[0],a,c=[f];d<b;++d)a=u[d],l(a[0],f)||l(a[1],f)?(h(f[0],a[1])>h(f[0],f[1])&&(f[1]=a[1]),h(a[0],f[1])>h(f[0],f[1])&&(f[0]=a[0])):c.push(f=a);var k=-Infinity,e;b=c.length-1;d=0;for(f=c[b];d<=b;f=a,++d)a=c[d],(e=h(f[1],a[0]))>k&&(k=e,r=a[0],y=f[1])}u=S=null;
return Infinity===r||Infinity===n?[[NaN,NaN],[NaN,NaN]]:[[r,n],[y,p]]}}();z.geo.centroid=function(b){Eb=kc=ib=jb=Va=Ya=Za=Ra=rb=sb=$a=0;z.geo.stream(b,Na);b=rb;var d=sb,f=$a,a=b*b+d*d+f*f;return 1E-12>a&&(b=Ya,d=Za,f=Ra,1E-6>kc&&(b=ib,d=jb,f=Va),a=b*b+d*d+f*f,1E-12>a)?[NaN,NaN]:[Math.atan2(d,b)*ta,na(f/Math.sqrt(a))*ta]};var Eb,kc,ib,jb,Va,Ya,Za,Ra,rb,sb,$a,Na={sphere:I,point:fd,lineStart:re,lineEnd:se,polygonStart:function(){Na.lineStart=Kg},polygonEnd:function(){Na.lineStart=re}},Ie=we(Fb,function(b){var d=
NaN,f=NaN,a=NaN,c;return{lineStart:function(){b.lineStart();c=1},point:function(k,e){var m=0<k?ba:-ba,g=ea(k-d);if(1E-6>ea(g-ba))b.point(d,f=0<(f+e)/2?wa:-wa),b.point(a,f),b.lineEnd(),b.lineStart(),b.point(m,f),b.point(k,f),c=0;else if(a!==m&&g>=ba){1E-6>ea(d-a)&&(d-=1E-6*a);1E-6>ea(k-m)&&(k-=1E-6*m);var g=d,h=f,q=k,l,x,r=Math.sin(g-q);f=1E-6<ea(r)?Math.atan((Math.sin(h)*(x=Math.cos(e))*Math.sin(q)-Math.sin(e)*(l=Math.cos(h))*Math.sin(g))/(l*x*r)):(h+e)/2;b.point(a,f);b.lineEnd();b.lineStart();b.point(m,
f);c=0}b.point(d=k,f=e);a=m},lineEnd:function(){b.lineEnd();d=f=NaN},clean:function(){return 2-c}}},function(b,d,f,a){null==b?(f*=wa,a.point(-ba,f),a.point(0,f),a.point(ba,f),a.point(ba,0),a.point(ba,-f),a.point(0,-f),a.point(-ba,-f),a.point(-ba,0),a.point(-ba,f)):1E-6<ea(b[0]-d[0])?(b=b[0]<d[0]?ba:-ba,f=f*b/2,a.point(-b,f),a.point(0,f),a.point(b,f)):a.point(d[0],d[1])},[-ba,-ba/2]);z.geo.clipExtent=function(){var b,d,f,a,c,e,g={stream:function(b){c&&(c.valid=!1);c=e(b);c.valid=!0;return c},extent:function(k){if(!arguments.length)return[[b,
d],[f,a]];e=ze(b=+k[0][0],d=+k[0][1],f=+k[1][0],a=+k[1][1]);c&&(c.valid=!1,c=null);return g}};return g.extent([[0,0],[960,500]])};(z.geo.conicEqualArea=function(){return hd(Ae)}).raw=Ae;z.geo.albers=function(){return z.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};z.geo.albersUsa=function(){function b(b){var d=b[0];b=b[1];c=null;(g(d,b),c)||(h(d,b),c)||q(d,b);return c}var d=z.geo.albers(),f=z.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,
65]),a=z.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,e={point:function(b,d){c=[b,d]}},g,h,q;b.invert=function(b){var c=d.scale(),e=d.translate(),k=(b[0]-e[0])/c,c=(b[1]-e[1])/c;return(.12<=c&&.234>c&&-.425<=k&&-.214>k?f:.166<=c&&.234>c&&-.214<=k&&-.115>k?a:d).invert(b)};b.stream=function(b){var c=d.stream(b),e=f.stream(b),k=a.stream(b);return{point:function(b,d){c.point(b,d);e.point(b,d);k.point(b,d)},sphere:function(){c.sphere();e.sphere();k.sphere()},lineStart:function(){c.lineStart();
e.lineStart();k.lineStart()},lineEnd:function(){c.lineEnd();e.lineEnd();k.lineEnd()},polygonStart:function(){c.polygonStart();e.polygonStart();k.polygonStart()},polygonEnd:function(){c.polygonEnd();e.polygonEnd();k.polygonEnd()}}};b.precision=function(c){if(!arguments.length)return d.precision();d.precision(c);f.precision(c);a.precision(c);return b};b.scale=function(c){if(!arguments.length)return d.scale();d.scale(c);f.scale(.35*c);a.scale(c);return b.translate(d.translate())};b.translate=function(c){if(!arguments.length)return d.translate();
var k=d.scale(),m=+c[0],l=+c[1];g=d.translate(c).clipExtent([[m-.455*k,l-.238*k],[m+.455*k,l+.238*k]]).stream(e).point;h=f.translate([m-.307*k,l+.201*k]).clipExtent([[m-.425*k+1E-6,l+.12*k+1E-6],[m-.214*k-1E-6,l+.234*k-1E-6]]).stream(e).point;q=a.translate([m-.205*k,l+.212*k]).clipExtent([[m-.214*k+1E-6,l+.166*k+1E-6],[m-.115*k-1E-6,l+.234*k-1E-6]]).stream(e).point;return b};return b.scale(1070)};var Ud,jd,ab={point:I,lineStart:I,lineEnd:I,polygonStart:function(){jd=0;ab.lineStart=Og},polygonEnd:function(){ab.lineStart=
ab.lineEnd=ab.point=I;Ud+=ea(jd/2)}},Hc,Ic,Jc,Kc,li={point:function(b,d){b<Hc&&(Hc=b);b>Jc&&(Jc=b);d<Ic&&(Ic=d);d>Kc&&(Kc=d)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I},Oa={point:kb,lineStart:Ce,lineEnd:De,polygonStart:function(){Oa.lineStart=Qg},polygonEnd:function(){Oa.point=kb;Oa.lineStart=Ce;Oa.lineEnd=De}};z.geo.path=function(){function b(b){b&&("function"===typeof f&&g.pointRadius(+f.apply(this,arguments)),h&&h.valid||(h=e(g)),z.geo.stream(b,h));return g.result()}function d(){h=null;
return b}var f=4.5,a,c,e,g,h;b.area=function(b){Ud=0;z.geo.stream(b,e(ab));return Ud};b.centroid=function(b){ib=jb=Va=Ya=Za=Ra=rb=sb=$a=0;z.geo.stream(b,e(Oa));return $a?[rb/$a,sb/$a]:Ra?[Ya/Ra,Za/Ra]:Va?[ib/Va,jb/Va]:[NaN,NaN]};b.bounds=function(b){Jc=Kc=-(Hc=Ic=Infinity);z.geo.stream(b,e(li));return[[Hc,Ic],[Jc,Kc]]};b.projection=function(b){if(!arguments.length)return a;e=(a=b)?b.stream||Sg(b):A;return d()};b.context=function(b){if(!arguments.length)return c;g=null==(c=b)?new Pg:new Rg(b);"function"!==
typeof f&&g.pointRadius(f);return d()};b.pointRadius=function(d){if(!arguments.length)return f;f="function"===typeof d?d:(g.pointRadius(+d),+d);return b};return b.projection(z.geo.albersUsa()).context(null)};z.geo.transform=function(b){return{stream:function(d){d=new He(d);for(var f in b)d[f]=b[f];return d}}};He.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},
polygonEnd:function(){this.stream.polygonEnd()}};z.geo.projection=bb;z.geo.projectionMutator=id;(z.geo.equirectangular=function(){return bb(Gb)}).raw=Gb.invert=Gb;z.geo.rotation=function(b){function d(d){d=b(d[0]*ca,d[1]*ca);return d[0]*=ta,d[1]*=ta,d}b=kd(b[0]%360*ca,b[1]*ca,2<b.length?b[2]*ca:0);d.invert=function(d){d=b.invert(d[0]*ca,d[1]*ca);return d[0]*=ta,d[1]*=ta,d};return d};Je.invert=Gb;z.geo.circle=function(){function b(){var b="function"===typeof d?d.apply(this,arguments):d,f=kd(-b[0]*
ca,-b[1]*ca,0).invert,a=[];c(null,null,1,{point:function(b,d){a.push(b=f(b,d));b[0]*=ta;b[1]*=ta}});return{type:"Polygon",coordinates:[a]}}var d=[0,0],f,a=6,c;b.origin=function(f){if(!arguments.length)return d;d=f;return b};b.angle=function(d){if(!arguments.length)return f;c=gd((f=+d)*ca,a*ca);return b};b.precision=function(d){if(!arguments.length)return a;c=gd(f*ca,(a=+d)*ca);return b};return b.angle(90)};z.geo.distance=function(b,d){var f=(d[0]-b[0])*ca,a=b[1]*ca,c=d[1]*ca,e=Math.cos(f),g=Math.sin(a),
a=Math.cos(a),h=Math.sin(c),c=Math.cos(c),l;return Math.atan2(Math.sqrt((l=c*Math.sin(f))*l+(l=a*h-g*c*e)*l),g*h+a*c*e)};z.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return z.range(Math.ceil(e/y)*y,c,y).map(v).concat(z.range(Math.ceil(q/p)*p,l,p).map(D)).concat(z.range(Math.ceil(a/r)*r,f,r).filter(function(b){return 1E-6<ea(b%y)}).map(t)).concat(z.range(Math.ceil(h/n)*n,g,n).filter(function(b){return 1E-6<ea(b%p)}).map(H))}var f,a,c,e,g,h,l,q,
r=10,n=r,y=90,p=360,t,H,v,D,O=2.5;b.lines=function(){return d().map(function(b){return{type:"LineString",coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[v(e).concat(D(l).slice(1),v(c).reverse().slice(1),D(q).reverse().slice(1))]}};b.extent=function(d){return arguments.length?b.majorExtent(d).minorExtent(d):b.minorExtent()};b.majorExtent=function(d){if(!arguments.length)return[[e,q],[c,l]];e=+d[0][0];c=+d[1][0];q=+d[0][1];l=+d[1][1];e>c&&(d=e,e=c,c=d);q>l&&(d=q,q=l,l=d);return b.precision(O)};
b.minorExtent=function(d){if(!arguments.length)return[[a,h],[f,g]];a=+d[0][0];f=+d[1][0];h=+d[0][1];g=+d[1][1];a>f&&(d=a,a=f,f=d);h>g&&(d=h,h=g,g=d);return b.precision(O)};b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()};b.majorStep=function(d){if(!arguments.length)return[y,p];y=+d[0];p=+d[1];return b};b.minorStep=function(d){if(!arguments.length)return[r,n];r=+d[0];n=+d[1];return b};b.precision=function(d){if(!arguments.length)return O;O=+d;t=Oe(h,g,90);H=Pe(a,
f,O);v=Oe(q,l,90);D=Pe(e,c,O);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};z.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[f||d.apply(this,arguments),c||a.apply(this,arguments)]}}var d=ld,f,a=md,c;b.distance=function(){return z.geo.distance(f||d.apply(this,arguments),c||a.apply(this,arguments))};b.source=function(a){if(!arguments.length)return d;d=a;f="function"===typeof a?null:a;return b};b.target=
function(d){if(!arguments.length)return a;a=d;c="function"===typeof d?null:d;return b};b.precision=function(){return arguments.length?b:0};return b};z.geo.interpolate=function(b,d){return Tg(b[0]*ca,b[1]*ca,d[0]*ca,d[1]*ca)};z.geo.length=function(b){Vd=0;z.geo.stream(b,Ab);return Vd};var Vd,Ab={sphere:I,point:I,lineStart:function(){function b(b,c){var e=Math.sin(c*=ca),k=Math.cos(c),m=ea((b*=ca)-d),g=Math.cos(m);Vd+=Math.atan2(Math.sqrt((m=k*Math.sin(m))*m+(m=a*e-f*k*g)*m),f*e+a*k*g);d=b;f=e;a=k}
var d,f,a;Ab.point=function(c,e){d=c*ca;f=Math.sin(e*=ca);a=Math.cos(e);Ab.point=b};Ab.lineEnd=function(){Ab.point=Ab.lineEnd=I}},lineEnd:I,polygonStart:I,polygonEnd:I},ag=Hb(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(z.geo.azimuthalEqualArea=function(){return bb(ag)}).raw=ag;var bg=Hb(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},A);(z.geo.azimuthalEquidistant=function(){return bb(bg)}).raw=bg;(z.geo.conicConformal=function(){return hd(Qe)}).raw=Qe;(z.geo.conicEquidistant=
function(){return hd(Re)}).raw=Re;var cg=Hb(function(b){return 1/b},Math.atan);(z.geo.gnomonic=function(){return bb(cg)}).raw=cg;mc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-wa]};(z.geo.mercator=function(){return Se(mc)}).raw=mc;var dg=Hb(function(){return 1},Math.asin);(z.geo.orthographic=function(){return bb(dg)}).raw=dg;var eg=Hb(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(z.geo.stereographic=function(){return bb(eg)}).raw=eg;nd.invert=function(b,d){return[-d,
2*Math.atan(Math.exp(b))-wa]};(z.geo.transverseMercator=function(){var b=Se(nd),d=b.center,f=b.rotate;b.center=function(b){return b?d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return b?f([b[0],b[1],2<b.length?b[2]+90:90]):(b=f(),[b[0],b[1],b[2]-90])};return f([0,0,90])}).raw=nd;z.geom={};z.geom.hull=function(b){function d(b){if(3>b.length)return[];var d=pa(f),c=pa(a),e,k=b.length,m=[],g=[];for(e=0;e<k;e++)m.push([+d.call(this,b[e],e),+c.call(this,b[e],e),e]);m.sort(Ug);for(e=0;e<k;e++)g.push([m[e][0],
-m[e][1]]);var d=Te(m),g=Te(g),c=g[0]===d[0],k=g[g.length-1]===d[d.length-1],h=[];for(e=d.length-1;0<=e;--e)h.push(b[m[d[e]][2]]);for(e=+c;e<g.length-k;++e)h.push(b[m[g[e]][2]]);return h}var f=tb,a=Ib;if(arguments.length)return d(b);d.x=function(b){return arguments.length?(f=b,d):f};d.y=function(b){return arguments.length?(a=b,d):a};return d};z.geom.polygon=function(b){Sb(b,Lc);return b};var Lc=z.geom.polygon.prototype=[];Lc.area=function(){for(var b=-1,d=this.length,f,a=this[d-1],c=0;++b<d;)f=a,
a=this[b],c+=f[1]*a[0]-f[0]*a[1];return.5*c};Lc.centroid=function(b){var d=-1,f=this.length,a=0,c=0,e=this[f-1];for(arguments.length||(b=-1/(6*this.area()));++d<f;){var g=e;e=this[d];var h=g[0]*e[1]-e[0]*g[1];a+=(g[0]+e[0])*h;c+=(g[1]+e[1])*h}return[a*b,c*b]};Lc.clip=function(b){for(var d,f=Ue(b),a=-1,c=this.length-Ue(this),e,g,h=this[c-1],l,q,r;++a<c;){d=b.slice();b.length=0;l=this[a];q=d[(g=d.length-f)-1];for(e=-1;++e<g;)r=d[e],od(r,h,l)?(od(q,h,l)||b.push(pd(q,r,h,l)),b.push(r)):od(q,h,l)&&b.push(pd(q,
r,h,l)),q=r;f&&b.push(b[0]);h=l}return b};var xb,lb,vb,We=[],rd,Jb,$e=[];Ye.prototype.prepare=function(){for(var b=this.edges,d=b.length,f;d--;)f=b[d].edge,f.b&&f.a||b.splice(d,1);b.sort(Ze);return b.length};pc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};sd.prototype={insert:function(b,d){var f;if(b){d.P=b;if(d.N=b.N)b.N.P=d;b.N=d;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;var a=b}else this._?
(b=bf(this._),d.P=null,d.N=b,b.P=b.L=d,a=b):(d.P=d.N=null,this._=d,a=null);d.L=d.R=null;d.U=a;d.C=!0;for(b=d;a&&a.C;){var c=a.U;a===c.L?(f=c.R)&&f.C?(a.C=f.C=!1,c.C=!0,b=c):(b===a.R&&(Lb(this,a),b=a,a=b.U),a.C=!1,c.C=!0,Mb(this,c)):(f=c.L)&&f.C?(a.C=f.C=!1,c.C=!0,b=c):(b===a.L&&(Mb(this,a),b=a,a=b.U),a.C=!1,c.C=!0,Lb(this,c));a=b.U}this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d=b.U,f=b.L,a=b.R;var c=f?a?bf(a):f:a;d?d.L===b?d.L=c:d.R=c:this._=c;if(f&&a){var e=
c.C;c.C=b.C;c.L=f;f.U=c;c!==a?(d=c.U,c.U=b.U,b=c.R,d.L=b,c.R=a,a.U=c):(c.U=d,d=c,b=c.R)}else e=b.C,b=c;b&&(b.U=d);if(!e)if(b&&b.C)b.C=!1;else{do{if(b===this._)break;if(b===d.L){if(b=d.R,b.C&&(b.C=!1,d.C=!0,Lb(this,d),b=d.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Mb(this,b),b=d.R);b.C=d.C;d.C=b.R.C=!1;Lb(this,d);b=this._;break}}else if(b=d.L,b.C&&(b.C=!1,d.C=!0,Mb(this,d),b=d.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Lb(this,b),b=d.L);b.C=d.C;d.C=b.L.C=!1;Mb(this,d);b=this._;
break}b.C=!0;b=d;d=d.U}while(!b.C);b&&(b.C=!1)}}};z.geom.voronoi=function(b){function d(b){var d=Array(b.length),a=h[0][0],c=h[0][1],e=h[1][0],k=h[1][1];td(f(b),h).cells.forEach(function(f,g){var m=f.edges,h=f.site;(d[g]=m.length?m.map(function(b){b=b.start();return[b.x,b.y]}):h.x>=a&&h.x<=e&&h.y>=c&&h.y<=k?[[a,k],[e,k],[e,c],[a,c]]:[]).point=b[g]});return d}function f(b){return b.map(function(b,d){return{x:1E-6*Math.round(e(b,d)/1E-6),y:1E-6*Math.round(g(b,d)/1E-6),i:d}})}var a=tb,c=Ib,e=a,g=c,h=
Mc;if(b)return d(b);d.links=function(b){return td(f(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],target:b[d.r.i]}})};d.triangles=function(b){var d=[];td(f(b)).cells.forEach(function(f,a){for(var c=f.site,e=f.edges.sort(Ze),k=-1,g=e.length,m,h=e[g-1].edge,h=h.l===c?h.r:h.l;++k<g;)m=h,h=e[k].edge,h=h.l===c?h.r:h.l,a<m.i&&a<h.i&&0>(c.x-h.x)*(m.y-c.y)-(c.x-m.x)*(h.y-c.y)&&d.push([b[a],b[m.i],b[h.i]])});return d};d.x=function(b){return arguments.length?(e=pa(a=
b),d):a};d.y=function(b){return arguments.length?(g=pa(c=b),d):c};d.clipExtent=function(b){if(!arguments.length)return h===Mc?null:h;h=null==b?Mc:b;return d};d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):h===Mc?null:h&&h[1]};return d};var Mc=[[-1E6,-1E6],[1E6,1E6]];z.geom.delaunay=function(b){return z.geom.voronoi().triangles(b)};z.geom.quadtree=function(b,d,f,a,c){function e(b){function e(b,d,f,a,c,e,k,g){if(!isNaN(f)&&!isNaN(a))if(b.leaf){var m=b.x,l=b.y;if(null!=m){if(!(.01>
ea(m-f)+ea(l-a))){var q=b.point;b.x=b.y=b.point=null;h(b,q,m,l,c,e,k,g)}h(b,d,f,a,c,e,k,g)}else b.x=f,b.y=a,b.point=d}else h(b,d,f,a,c,e,k,g)}function h(b,d,f,a,c,k,g,m){var h=.5*(c+g),l=.5*(k+m),q=f>=h,r=a>=l,n=r<<1|q;b.leaf=!1;b=b.nodes[n]||(b.nodes[n]=cf());q?c=h:g=h;r?k=l:m=l;e(b,d,f,a,c,k,g,m)}var l=pa(k),q=pa(g),r;if(null!=d){var n=d;var y=f;var x=a;var p=c}else{x=p=-(n=y=Infinity);var t=[];var v=[];var H=b.length;if(m)for(r=0;r<H;++r){var D=b[r];D.x<n&&(n=D.x);D.y<y&&(y=D.y);D.x>x&&(x=D.x);
D.y>p&&(p=D.y);t.push(D.x);v.push(D.y)}else for(r=0;r<H;++r){var O=+l(D=b[r],r);D=+q(D,r);O<n&&(n=O);D<y&&(y=D);O>x&&(x=O);D>p&&(p=D);t.push(O);v.push(D)}}O=x-n;D=p-y;O>D?p=y+O:x=n+D;var u=cf();u.add=function(b){e(u,b,+l(b,++r),+q(b,r),n,y,x,p)};u.visit=function(b){Nb(b,u,n,y,x,p)};u.find=function(b){return bh(u,b[0],b[1],n,y,x,p)};r=-1;if(null==d){for(;++r<H;)e(u,b[r],t[r],v[r],n,y,x,p);--r}else b.forEach(u.add);t=v=b=D=null;return u}var k=tb,g=Ib,m;if(m=arguments.length)return k=$g,g=ah,3===m&&
(c=f,a=d,f=d=0),e(b);e.x=function(b){return arguments.length?(k=b,e):k};e.y=function(b){return arguments.length?(g=b,e):g};e.extent=function(b){if(!arguments.length)return null==d?null:[[d,f],[a,c]];null==b?d=f=a=c=null:(d=+b[0][0],f=+b[0][1],a=+b[1][0],c=+b[1][1]);return e};e.size=function(b){if(!arguments.length)return null==d?null:[a-d,c-f];null==b?d=f=a=c=null:(d=f=0,a=+b[0],c=+b[1]);return e};return e};z.interpolateRgb=ud;z.interpolateObject=df;z.interpolateNumber=Wa;z.interpolateString=ef;var vd=
/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wd=new RegExp(vd.source,"g");z.interpolate=mb;z.interpolators=[function(b,d){var f=typeof d;return("string"===f?Vb.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?ud:ef:d instanceof Ca?ud:Array.isArray(d)?qc:"object"===f&&isNaN(d)?df:Wa)(b,d)}];z.interpolateArray=qc;var fg=function(){return A},mi=z.map({linear:fg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return dh},cubic:function(){return eh},sin:function(){return gh},
exp:function(){return hh},circle:function(){return ih},elastic:function(b,d){2>arguments.length&&(d=.45);if(arguments.length)var f=d/La*Math.asin(1/b);else b=1,f=d/4;return function(a){return 1+b*Math.pow(2,-10*a)*Math.sin((a-f)*La/d)}},back:function(b){b||(b=1.70158);return function(d){return d*d*((b+1)*d-b)}},bounce:function(){return jh}}),ni=z.map({"in":A,out:ff,"in-out":gf,"out-in":function(b){return gf(ff(b))}});z.ease=function(b){var d=b.indexOf("-"),f=0<=d?b.slice(0,d):b,d=0<=d?b.slice(d+1):
"in",f=mi.get(f)||fg,d=ni.get(d)||A;return ch(d(f.apply(null,Vf.call(arguments,1))))};z.interpolateHcl=function(b,d){b=z.hcl(b);d=z.hcl(d);var f=b.h,a=b.c,c=b.l,e=d.h-f,g=d.c-a,h=d.l-c;isNaN(g)&&(g=0,a=isNaN(a)?d.c:a);isNaN(e)?(e=0,f=isNaN(f)?d.h:f):180<e?e-=360:-180>e&&(e+=360);return function(b){return va(f+e*b,a+g*b,c+h*b)+""}};z.interpolateHsl=function(b,d){b=z.hsl(b);d=z.hsl(d);var f=b.h,a=b.s,c=b.l,e=d.h-f,g=d.s-a,h=d.l-c;isNaN(g)&&(g=0,a=isNaN(a)?d.s:a);isNaN(e)?(e=0,f=isNaN(f)?d.h:f):180<
e?e-=360:-180>e&&(e+=360);return function(b){return za(f+e*b,a+g*b,c+h*b)+""}};z.interpolateLab=function(b,d){b=z.lab(b);d=z.lab(d);var f=b.l,a=b.a,c=b.b,e=d.l-f,g=d.a-a,h=d.b-c;return function(b){return Cb(f+e*b,a+g*b,c+h*b)+""}};z.interpolateRound=hf;z.transform=function(b){var d=Fa.createElementNS(z.ns.prefix.svg,"g");return(z.transform=function(b){if(null!=b){d.setAttribute("transform",b);var f=d.transform.baseVal.consolidate()}return new jf(f?f.matrix:oi)})(b)};jf.prototype.toString=function(){return"translate("+
this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};z.interpolateTransform=lf;z.layout={};z.layout.bundle=function(){return function(b){for(var d=[],f=-1,a=b.length;++f<a;)d.push(qh(b[f]));return d}};z.layout.chord=function(){function b(){var b={},f=[],k=z.range(g),m=[],n,y;a=[];c=[];var p=0;for(n=-1;++n<g;){var x=0;for(y=-1;++y<g;)x+=e[n][y];f.push(x);m.push(z.range(g));p+=x}l&&k.sort(function(b,d){return l(f[b],f[d])});q&&m.forEach(function(b,
d){b.sort(function(b,f){return q(e[d][b],e[d][f])})});p=(La-h*g)/p;x=0;for(n=-1;++n<g;){var t=x;for(y=-1;++y<g;){var D=k[n];var v=m[D][y],H=e[D][v],O=x,u=x+=H*p;b[D+"-"+v]={index:D,subindex:v,startAngle:O,endAngle:u,value:H}}c[D]={index:D,startAngle:t,endAngle:x,value:f[D]};x+=h}for(n=-1;++n<g;)for(y=n-1;++y<g;)D=b[n+"-"+y],k=b[y+"-"+n],(D.value||k.value)&&a.push(D.value<k.value?{source:k,target:D}:{source:D,target:k});r&&d()}function d(){a.sort(function(b,d){return r((b.source.value+b.target.value)/
2,(d.source.value+d.target.value)/2)})}var f={},a,c,e,g,h=0,l,q,r;f.matrix=function(b){if(!arguments.length)return e;g=(e=b)&&e.length;a=c=null;return f};f.padding=function(b){if(!arguments.length)return h;h=b;a=c=null;return f};f.sortGroups=function(b){if(!arguments.length)return l;l=b;a=c=null;return f};f.sortSubgroups=function(b){if(!arguments.length)return q;q=b;a=null;return f};f.sortChords=function(b){if(!arguments.length)return r;r=b;a&&d();return f};f.chords=function(){a||b();return a};f.groups=
function(){c||b();return c};return f};z.layout.force=function(){function b(b){return function(d,f,a,c){if(d.point!==b){var e=d.cx-b.x;a=d.cy-b.y;c-=f;f=e*e+a*a;if(c*c/t<f)return f<y&&(f=d.charge/f,b.px-=e*f,b.py-=a*f),!0;d.point&&f&&f<y&&(f=d.pointCharge/f,b.px-=e*f,b.py-=a*f)}return!d.charge}}function d(b){b.px=z.event.x;b.py=z.event.y;f.resume()}var f={},a=z.dispatch("start","tick","end"),c,e=[1,1],g,h,l=.9,q=pi,r=qi,n=-30,y=ri,p=.1,t=.64,D=[],v=[],H,O,u;f.tick=function(){if(.005>(h*=.99))return c=
null,a.end({type:"end",alpha:h=0}),!0;var d=D.length,f=v.length,k,g;for(k=0;k<f;++k){var m=v[k];var q=m.source;var r=m.target;var y=r.x-q.x;var t=r.y-q.y;if(g=y*y+t*t)g=h*O[k]*((g=Math.sqrt(g))-H[k])/g,y*=g,t*=g,r.x-=y*(g=q.weight+r.weight?q.weight/(q.weight+r.weight):.5),r.y-=t*g,q.x+=y*(g=1-g),q.y+=t*g}if(g=h*p)if(y=e[0]/2,t=e[1]/2,k=-1,g)for(;++k<d;)m=D[k],m.x+=(y-m.x)*g,m.y+=(t-m.y)*g;if(n)for(nf(f=z.geom.quadtree(D),h,u),k=-1;++k<d;)(m=D[k]).fixed||f.visit(b(m));for(k=-1;++k<d;)m=D[k],m.fixed?
(m.x=m.px,m.y=m.py):(m.x-=(m.px-(m.px=m.x))*l,m.y-=(m.py-(m.py=m.y))*l);a.tick({type:"tick",alpha:h})};f.nodes=function(b){if(!arguments.length)return D;D=b;return f};f.links=function(b){if(!arguments.length)return v;v=b;return f};f.size=function(b){if(!arguments.length)return e;e=b;return f};f.linkDistance=function(b){if(!arguments.length)return q;q="function"===typeof b?b:+b;return f};f.distance=f.linkDistance;f.linkStrength=function(b){if(!arguments.length)return r;r="function"===typeof b?b:+b;
return f};f.friction=function(b){if(!arguments.length)return l;l=+b;return f};f.charge=function(b){if(!arguments.length)return n;n="function"===typeof b?b:+b;return f};f.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(y);y=b*b;return f};f.gravity=function(b){if(!arguments.length)return p;p=+b;return f};f.theta=function(b){if(!arguments.length)return Math.sqrt(t);t=b*b;return f};f.alpha=function(b){if(!arguments.length)return h;b=+b;h?0<b?h=b:(c.c=null,c.t=NaN,c=null,a.end({type:"end",
alpha:h=0})):0<b&&(a.start({type:"start",alpha:h=b}),c=Xb(f.tick));return f};f.start=function(){function b(b,f){if(!m){m=Array(a);for(k=0;k<a;++k)m[k]=[];for(k=0;k<c;++k){var e=v[k];m[e.source.index].push(e.target);m[e.target.index].push(e.source)}}for(var e=m[d],k=-1,g=e.length,h;++k<g;)if(!isNaN(h=e[k][b]))return h;return Math.random()*f}var d,a=D.length,c=v.length,k=e[0],g=e[1],m,h;for(d=0;d<a;++d)(h=D[d]).index=d,h.weight=0;for(d=0;d<c;++d)h=v[d],"number"==typeof h.source&&(h.source=D[h.source]),
"number"==typeof h.target&&(h.target=D[h.target]),++h.source.weight,++h.target.weight;for(d=0;d<a;++d)h=D[d],isNaN(h.x)&&(h.x=b("x",k)),isNaN(h.y)&&(h.y=b("y",g)),isNaN(h.px)&&(h.px=h.x),isNaN(h.py)&&(h.py=h.y);H=[];if("function"===typeof q)for(d=0;d<c;++d)H[d]=+q.call(this,v[d],d);else for(d=0;d<c;++d)H[d]=q;O=[];if("function"===typeof r)for(d=0;d<c;++d)O[d]=+r.call(this,v[d],d);else for(d=0;d<c;++d)O[d]=r;u=[];if("function"===typeof n)for(d=0;d<a;++d)u[d]=+n.call(this,D[d],d);else for(d=0;d<a;++d)u[d]=
n;return f.resume()};f.resume=function(){return f.alpha(.1)};f.stop=function(){return f.alpha(0)};f.drag=function(){g||(g=z.behavior.drag().origin(A).on("dragstart.force",rh).on("drag.force",d).on("dragend.force",sh));if(!arguments.length)return g;this.on("mouseover.force",th).on("mouseout.force",uh).call(g)};return z.rebind(f,a,"on")};var pi=20,qi=1,ri=Infinity;z.layout.hierarchy=function(){function b(c){var e,k,g=[c],m=[],h;for(c.depth=0;null!=(h=g.pop());)if(m.push(h),(e=f.call(b,h,h.depth))&&
(k=e.length)){for(var l;0<=--k;)g.push(l=e[k]),l.parent=h,l.depth=h.depth+1;a&&(h.value=0);h.children=e}else a&&(h.value=+a.call(b,h,h.depth)||0),delete h.children;Sa(c,function(b){var f,c;d&&(f=b.children)&&f.sort(d);a&&(c=b.parent)&&(c.value+=b.value)});return m}var d=yh,f=wh,a=xh;b.sort=function(f){if(!arguments.length)return d;d=f;return b};b.children=function(d){if(!arguments.length)return f;f=d;return b};b.value=function(d){if(!arguments.length)return a;a=d;return b};b.revalue=function(d){a&&
(Pb(d,function(b){b.children&&(b.value=0)}),Sa(d,function(d){var f;d.children||(d.value=+a.call(b,d,d.depth)||0);if(f=d.parent)f.value+=d.value}));return d};return b};z.layout.partition=function(){function b(d,f,a,c){var e,k=d.children;d.x=f;d.y=d.depth*c;d.dx=a;d.dy=c;if(k&&(e=k.length)){var g=-1,m;for(a=d.value?a/d.value:0;++g<e;)b(m=k[g],f,d=m.value*a,c),f+=d}}function d(b){var f;b=b.children;var a=0;if(b&&(f=b.length))for(var c=-1;++c<f;)a=Math.max(a,d(b[c]));return 1+a}function f(f,e){var k=
a.call(this,f,e);b(k[0],0,c[0],c[1]/d(k[0]));return k}var a=z.layout.hierarchy(),c=[1,1];f.size=function(b){if(!arguments.length)return c;c=b;return f};return Ob(f,a)};z.layout.pie=function(){function b(k){var g=k.length,m=k.map(function(f,a){return+d.call(b,f,a)}),h=+("function"===typeof a?a.apply(this,arguments):a),l=("function"===typeof c?c.apply(this,arguments):c)-h,q=Math.min(Math.abs(l)/g,+("function"===typeof e?e.apply(this,arguments):e)),r=q*(0>l?-1:1),n=z.sum(m),y=n?(l-g*r)/n:0,g=z.range(g),
p=[],t;null!=f&&g.sort(f===gg?function(b,d){return m[d]-m[b]}:function(b,d){return f(k[b],k[d])});g.forEach(function(b){p[b]={data:k[b],value:t=m[b],startAngle:h,endAngle:h+=t*y+r,padAngle:q}});return p}var d=Number,f=gg,a=0,c=La,e=0;b.value=function(f){if(!arguments.length)return d;d=f;return b};b.sort=function(d){if(!arguments.length)return f;f=d;return b};b.startAngle=function(d){if(!arguments.length)return a;a=d;return b};b.endAngle=function(d){if(!arguments.length)return c;c=d;return b};b.padAngle=
function(d){if(!arguments.length)return e;e=d;return b};return b};var gg={};z.layout.stack=function(){function b(k,m){if(!(n=k.length))return k;var h=k.map(function(f,a){return d.call(b,f,a)}),l=h.map(function(d){return d.map(function(d,f){return[e.call(b,d,f),g.call(b,d,f)]})}),q=f.call(b,l,m),h=z.permute(h,q),l=z.permute(l,q),q=a.call(b,l,m),r=h[0].length,n,y,p,t;for(p=0;p<r;++p)for(c.call(b,h[0][p],t=q[p],l[0][p][1]),y=1;y<n;++y)c.call(b,h[y][p],t+=l[y-1][p][1],l[y][p][1]);return k}var d=A,f=xd,
a=yd,c=Bh,e=zh,g=Ah;b.values=function(f){if(!arguments.length)return d;d=f;return b};b.order=function(d){if(!arguments.length)return f;f="function"===typeof d?d:si.get(d)||xd;return b};b.offset=function(d){if(!arguments.length)return a;a="function"===typeof d?d:ti.get(d)||yd;return b};b.x=function(d){if(!arguments.length)return e;e=d;return b};b.y=function(d){if(!arguments.length)return g;g=d;return b};b.out=function(d){if(!arguments.length)return c;c=d;return b};return b};var si=z.map({"inside-out":function(b){var d=
b.length,f=b.map(Ch),a=b.map(Dh),c=z.range(d).sort(function(b,d){return f[b]-f[d]}),e=0,g=0,h=[],l=[];for(b=0;b<d;++b){var q=c[b];e<g?(e+=a[q],h.push(q)):(g+=a[q],l.push(q))}return l.reverse().concat(h)},reverse:function(b){return z.range(b.length).reverse()},"default":xd}),ti=z.map({silhouette:function(b){var d=b.length,f=b[0].length,a=[],c=0,e,g,h,l=[];for(g=0;g<f;++g){for(h=e=0;e<d;e++)h+=b[e][g][1];h>c&&(c=h);a.push(h)}for(g=0;g<f;++g)l[g]=(c-a[g])/2;return l},wiggle:function(b){var d=b.length,
f=b[0],a=f.length,c,e,g,h,l,q,r,n=[];n[0]=q=r=0;for(e=1;e<a;++e){for(g=c=0;c<d;++c)g+=b[c][e][1];var y=c=0;for(l=f[e][0]-f[e-1][0];c<d;++c){var p=0;for(h=(b[c][e][1]-b[c][e-1][1])/(2*l);p<c;++p)h+=(b[p][e][1]-b[p][e-1][1])/l;y+=h*b[c][e][1]}n[e]=q-=g?y/g*l:0;q<r&&(r=q)}for(e=0;e<a;++e)n[e]-=r;return n},expand:function(b){var d=b.length,f=b[0].length,a=1/d,c,e,g,h=[];for(e=0;e<f;++e){for(g=c=0;c<d;c++)g+=b[c][e][1];if(g)for(c=0;c<d;c++)b[c][e][1]/=g;else for(c=0;c<d;c++)b[c][e][1]=a}for(e=0;e<f;++e)h[e]=
0;return h},zero:yd});z.layout.histogram=function(){function b(b,e){var k=[],g=b.map(f,this),h=a.call(this,g,e),m=c.call(this,h,g,e);e=-1;for(var l=g.length,q=m.length-1,r=d?1:1/l;++e<q;){var n=k[e]=[];n.dx=m[e+1]-(n.x=m[e]);n.y=0}if(0<q)for(e=-1;++e<l;)n=g[e],n>=h[0]&&n<=h[1]&&(n=k[z.bisect(m,n,1,q)-1],n.y+=r,n.push(b[e]));return k}var d=!0,f=Number,a=Gh,c=Fh;b.value=function(d){if(!arguments.length)return f;f=d;return b};b.range=function(d){if(!arguments.length)return a;a=pa(d);return b};b.bins=
function(d){if(!arguments.length)return c;c="number"===typeof d?function(b){return of(b,d)}:pa(d);return b};b.frequency=function(f){if(!arguments.length)return d;d=!!f;return b};return b};z.layout.pack=function(){function b(b,e){var k=d.call(this,b,e),g=k[0],h=a[0],m=a[1],l=null==c?Math.sqrt:"function"===typeof c?c:function(){return c};g.x=g.y=0;Sa(g,function(b){b.r=+l(b.value)});Sa(g,rf);if(f){var q=f*(c?1:Math.max(2*g.r/h,2*g.r/m))/2;Sa(g,function(b){b.r+=q});Sa(g,rf);Sa(g,function(b){b.r-=q})}tf(g,
h/2,m/2,c?1:1/Math.max(2*g.r/h,2*g.r/m));return k}var d=z.layout.hierarchy().sort(Hh),f=0,a=[1,1],c;b.size=function(d){if(!arguments.length)return a;a=d;return b};b.radius=function(d){if(!arguments.length)return c;c=null==d||"function"===typeof d?d:+d;return b};b.padding=function(d){if(!arguments.length)return f;f=+d;return b};return Ob(b,d)};z.layout.tree=function(){function b(b,k){var m=e.call(this,b,k),q=m[0],r=d(q);Sa(r,f);r.parent.m=-r.z;Pb(r,a);if(l)Pb(q,c);else{var n=q,y=q,p=q;Pb(q,function(b){b.x<
n.x&&(n=b);b.x>y.x&&(y=b);b.depth>p.depth&&(p=b)});var t=g(n,y)/2-n.x,D=h[0]/(y.x+g(y,n)/2+t),v=h[1]/(p.depth||1);Pb(q,function(b){b.x=(b.x+t)*D;b.y=b.depth*v})}return m}function d(b){b={A:null,children:[b]};for(var d=[b],f;null!=(f=d.pop());)for(var a=f.children,c,e=0,g=a.length;e<g;++e)d.push((a[e]=c={_:a[e],parent:f,children:(c=a[e].children)&&c.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:e}).a=c);return b.children[0]}function f(b){var d=b.children,f=b.parent.children,a=b.i?f[b.i-1]:null;
if(d.length){for(var c=0,e=0,k=b.children,h=k.length,m;0<=--h;)m=k[h],m.z+=c,m.m+=c,c+=m.s+(e+=m.c);d=(d[0].z+d[d.length-1].z)/2;a?(b.z=a.z+g(b._,a._),b.m=b.z-d):b.z=d}else a&&(b.z=a.z+g(b._,a._));d=b.parent;f=b.parent.A||f[0];if(a){e=c=b;k=c.parent.children[0];h=c.m;m=e.m;for(var l=a.m,q=k.m,r;a=Bd(a),c=Ad(c),a&&c;){k=Ad(k);e=Bd(e);e.a=b;r=a.z+l-c.z-h+g(a._,c._);if(0<r){var n=a.a.parent===b.parent?a.a:f,y=b,p=r,t=p/(y.i-n.i);y.c-=t;y.s+=p;n.c+=t;y.z+=p;y.m+=p;h+=r;m+=r}l+=a.m;h+=c.m;q+=k.m;m+=e.m}a&&
!Bd(e)&&(e.t=a,e.m+=l-m);c&&!Ad(k)&&(k.t=c,k.m+=h-q,f=b)}d.A=f}function a(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function c(b){b.x*=h[0];b.y=b.depth*h[1]}var e=z.layout.hierarchy().sort(null).value(null),g=uf,h=[1,1],l=null;b.separation=function(d){if(!arguments.length)return g;g=d;return b};b.size=function(d){if(!arguments.length)return l?null:h;l=null==(h=d)?c:null;return b};b.nodeSize=function(d){if(!arguments.length)return l?h:null;l=null==(h=d)?null:c;return b};return Ob(b,e)};z.layout.cluster=
function(){function b(b,e){var g=d.call(this,b,e),k=g[0],h,m=0;Sa(k,function(b){var d=b.children;d&&d.length?(b.x=Lh(d),b.y=Kh(d)):(b.x=h?m+=f(b,h):0,b.y=0,h=b)});var l=vf(k),q=wf(k),r=l.x-f(l,q)/2,n=q.x+f(q,l)/2;Sa(k,c?function(b){b.x=(b.x-k.x)*a[0];b.y=(k.y-b.y)*a[1]}:function(b){b.x=(b.x-r)/(n-r)*a[0];b.y=(1-(k.y?b.y/k.y:1))*a[1]});return g}var d=z.layout.hierarchy().sort(null).value(null),f=uf,a=[1,1],c=!1;b.separation=function(d){if(!arguments.length)return f;f=d;return b};b.size=function(d){if(!arguments.length)return c?
null:a;c=null==(a=d);return b};b.nodeSize=function(d){if(!arguments.length)return c?a:null;c=null!=(a=d);return b};return Ob(b,d)};z.layout.treemap=function(){function b(b,d){for(var f=-1,a=b.length,c,e;++f<a;)e=(c=b[f]).value*(0>d?0:d),c.area=isNaN(e)||0>=e?0:e}function d(f){var c=f.children;if(c&&c.length){var e=q(f),g=[],k=c.slice(),h=Infinity,m,l="slice"===y?e.dx:"dice"===y?e.dy:"slice-dice"===y?f.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);b(k,e.dx*e.dy/f.value);for(g.area=0;0<(f=k.length);){g.push(f=
k[f-1]);g.area+=f.area;if(!(f="squarify"!==y)){f=l;for(var r=g.area,n=0,t=Infinity,D=-1,v=g.length;++D<v;)if(m=g[D].area)m<t&&(t=m),m>n&&(n=m);r*=r;f*=f;f=(m=r?Math.max(f*n*p/r,r/(f*t*p)):Infinity)<=h}f?(k.pop(),h=m):(g.area-=g.pop().area,a(g,l,e,!1),l=Math.min(e.dx,e.dy),g.length=g.area=0,h=Infinity)}g.length&&(a(g,l,e,!0),g.length=g.area=0);c.forEach(d)}}function f(d){var c=d.children;if(c&&c.length){var e=q(d),g=c.slice(),k=[];b(g,e.dx*e.dy/d.value);for(k.area=0;d=g.pop();)k.push(d),k.area+=d.area,
null!=d.z&&(a(k,d.z?e.dx:e.dy,e,!g.length),k.length=k.area=0);c.forEach(f)}}function a(b,d,f,a){var c=-1,e=b.length,k=f.x,h=f.y,m=d?g(b.area/d):0;if(d==f.dx){if(a||m>f.dy)m=f.dy;for(;++c<e;){var l=b[c];l.x=k;l.y=h;l.dy=m;k+=l.dx=Math.min(f.x+f.dx-k,m?g(l.area/m):0)}l.z=!0;l.dx+=f.x+f.dx-k;f.y+=m;f.dy-=m}else{if(a||m>f.dx)m=f.dx;for(;++c<e;)l=b[c],l.x=k,l.y=h,l.dx=m,h+=l.dy=Math.min(f.y+f.dy-h,m?g(l.area/m):0);l.z=!1;l.dy+=f.y+f.dy-h;f.x+=m;f.dx-=m}}function c(a){a=n||e(a);var c=a[0];c.x=c.y=0;c.value?
(c.dx=h[0],c.dy=h[1]):c.dx=c.dy=0;n&&e.revalue(c);b([c],c.dx*c.dy/c.value);(n?f:d)(c);r&&(n=a);return a}var e=z.layout.hierarchy(),g=Math.round,h=[1,1],l=null,q=Cd,r=!1,n,y="squarify",p=.5*(1+Math.sqrt(5));c.size=function(b){if(!arguments.length)return h;h=b;return c};c.padding=function(b){function d(d){var f=b.call(c,d,d.depth);return null==f?Cd(d):xf(d,"number"===typeof f?[f,f,f,f]:f)}function f(d){return xf(d,b)}if(!arguments.length)return l;var a;q=null==(l=b)?Cd:"function"===(a=typeof b)?d:"number"===
a?(b=[b,b,b,b],f):f;return c};c.round=function(b){if(!arguments.length)return g!=Number;g=b?Math.round:Number;return c};c.sticky=function(b){if(!arguments.length)return r;r=b;n=null;return c};c.ratio=function(b){if(!arguments.length)return p;p=b;return c};c.mode=function(b){if(!arguments.length)return y;y=b+"";return c};return Ob(c,e)};z.random={normal:function(b,d){var f=arguments.length;2>f&&(d=1);1>f&&(b=0);return function(){do{var f=2*Math.random()-1;var a=2*Math.random()-1;a=f*f+a*a}while(!a||
1<a);return b+d*f*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var b=z.random.normal.apply(z,arguments);return function(){return Math.exp(b())}},bates:function(b){var d=z.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,f=0;f<b;f++)d+=Math.random();return d}}};z.scale={};var Nh={floor:A,ceil:A};z.scale.linear=function(){return zf([0,1],[0,1],mb,!1)};var Qh={s:1,g:1,p:1,r:1,e:1};z.scale.log=function(){return Bf(z.scale.linear().domain([0,
1]),10,!0,[1,10])};var Cf=z.format(".0e"),Rh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};z.scale.pow=function(){return Df(z.scale.linear(),1,[0,1])};z.scale.sqrt=function(){return z.scale.pow().exponent(.5)};z.scale.ordinal=function(){return Ef([],{t:"range",a:[[]]})};z.scale.category10=function(){return z.scale.ordinal().range(ui)};z.scale.category20=function(){return z.scale.ordinal().range(vi)};z.scale.category20b=function(){return z.scale.ordinal().range(wi)};
z.scale.category20c=function(){return z.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ub),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ub),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,
10834324,13528509,14589654].map(Ub),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ub);z.scale.quantile=function(){return Ff([],[])};z.scale.quantize=function(){return Gf(0,1,[0,1])};z.scale.threshold=function(){return Hf([.5],[0,1])};z.scale.identity=function(){return If([0,1])};z.svg={};z.svg.arc=function(){function b(){var b=Math.max(0,+f.apply(this,arguments)),
k=Math.max(0,+a.apply(this,arguments)),m=g.apply(this,arguments)-wa,q=h.apply(this,arguments)-wa,r=Math.abs(q-m),n=m>q?0:1;if(k<b){var y=k;k=b;b=y}if(r>=ji)return d(k,n)+(b?d(b,1-n):"")+"Z";var p,t=0,D=0,v=[];if(p=(+l.apply(this,arguments)||0)/2){var H=e===Nc?Math.sqrt(b*b+k*k):+e.apply(this,arguments);n||(D*=-1);k&&(D=na(H/k*Math.sin(p)));b&&(t=na(H/b*Math.sin(p)))}if(k){H=k*Math.cos(m+D);p=k*Math.sin(m+D);var O=k*Math.cos(q-D);var u=k*Math.sin(q-D);var x=Math.abs(q-m-2*D)<=ba?0:1;D&&vc(H,p,O,u)===
n^x&&(O=(m+q)/2,H=k*Math.cos(O),p=k*Math.sin(O),O=u=null)}else H=p=0;if(b){D=b*Math.cos(q-t);var S=b*Math.sin(q-t);var F=b*Math.cos(m+t);var X=b*Math.sin(m+t);var z=Math.abs(m-q+2*t)<=ba?0:1;t&&vc(D,S,F,X)===1-n^z&&(F=(m+q)/2,D=b*Math.cos(F),S=b*Math.sin(F),F=X=null)}else D=S=0;1E-6<r&&.001<(y=Math.min(Math.abs(k-b)/2,+c.apply(this,arguments)))?(z=b<k^n?0:1,x=m=y,r<ba&&(r=null==F?[D,S]:null==O?[H,p]:pd([H,p],[F,X],[O,u],[D,S]),x=H-r[0],m=p-r[1],q=O-r[0],t=u-r[1],m=1/Math.sin(Math.acos((x*q+m*t)/(Math.sqrt(x*
x+m*m)*Math.sqrt(q*q+t*t)))/2),r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),x=Math.min(y,(b-r)/(m-1)),m=Math.min(y,(k-r)/(m+1))),null!=O?(r=wc(null==F?[D,S]:[F,X],[H,p],k,m,n),q=wc([O,u],[D,S],k,m,n),y===m?v.push("M",r[0],"A",m,",",m," 0 0,",z," ",r[1],"A",k,",",k," 0 ",1-n^vc(r[1][0],r[1][1],q[1][0],q[1][1]),",",n," ",q[1],"A",m,",",m," 0 0,",z," ",q[0]):v.push("M",r[0],"A",m,",",m," 0 1,",z," ",q[0])):v.push("M",H,",",p),null!=F?(k=wc([H,p],[F,X],b,-x,n),O=wc([D,S],null==O?[H,p]:[O,u],b,-x,n),y===x?v.push("L",
O[0],"A",x,",",x," 0 0,",z," ",O[1],"A",b,",",b," 0 ",n^vc(O[1][0],O[1][1],k[1][0],k[1][1]),",",1-n," ",k[1],"A",x,",",x," 0 0,",z," ",k[0]):v.push("L",O[0],"A",x,",",x," 0 0,",z," ",k[0])):v.push("L",D,",",S)):(v.push("M",H,",",p),null!=O&&v.push("A",k,",",k," 0 ",x,",",n," ",O,",",u),v.push("L",D,",",S),null!=F&&v.push("A",b,",",b," 0 ",z,",",1-n," ",F,",",X));v.push("Z");return v.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var f=Th,a=Uh,c=
Sh,e=Nc,g=Jf,h=Kf,l=Vh;b.innerRadius=function(d){if(!arguments.length)return f;f=pa(d);return b};b.outerRadius=function(d){if(!arguments.length)return a;a=pa(d);return b};b.cornerRadius=function(d){if(!arguments.length)return c;c=pa(d);return b};b.padRadius=function(d){if(!arguments.length)return e;e=d==Nc?Nc:pa(d);return b};b.startAngle=function(d){if(!arguments.length)return g;g=pa(d);return b};b.endAngle=function(d){if(!arguments.length)return h;h=pa(d);return b};b.padAngle=function(d){if(!arguments.length)return l;
l=pa(d);return b};b.centroid=function(){var b=(+f.apply(this,arguments)+ +a.apply(this,arguments))/2,d=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-wa;return[Math.cos(d)*b,Math.sin(d)*b]};return b};var Nc="auto";z.svg.line=function(){return Lf(A)};var Fd=z.map({linear:Pa,"linear-closed":Mf,step:function(b){for(var d=0,f=b.length,a=b[0],c=[a[0],",",a[1]];++d<f;)c.push("H",(a[0]+(a=b[d])[0])/2,"V",a[1]);1<f&&c.push("H",a[0]);return c.join("")},"step-before":Gd,"step-after":Hd,basis:Nf,"basis-open":function(b){if(4>
b.length)return Pa(b);for(var d=[],f=-1,a=b.length,c,e=[0],g=[0];3>++f;)c=b[f],e.push(c[0]),g.push(c[1]);d.push(Ma(db,e)+","+Ma(db,g));for(--f;++f<a;)c=b[f],e.shift(),e.push(c[0]),g.shift(),g.push(c[1]),Jd(d,e,g);return d.join("")},"basis-closed":function(b){for(var d,f=-1,a=b.length,c=a+4,e,g=[],h=[];4>++f;)e=b[f%a],g.push(e[0]),h.push(e[1]);d=[Ma(db,g),",",Ma(db,h)];for(--f;++f<c;)e=b[f%a],g.shift(),g.push(e[0]),h.shift(),h.push(e[1]),Jd(d,g,h);return d.join("")},bundle:function(b,d){var f=b.length-
1;if(f)for(var a=b[0][0],c=b[0][1],e=b[f][0]-a,g=b[f][1]-c,h=-1,l,q;++h<=f;)l=b[h],q=h/f,l[0]=d*l[0]+(1-d)*(a+q*e),l[1]=d*l[1]+(1-d)*(c+q*g);return Nf(b)},cardinal:function(b,d){return 3>b.length?Pa(b):b[0]+xc(b,Id(b,d))},"cardinal-open":function(b,d){return 4>b.length?Pa(b):b[1]+xc(b.slice(1,-1),Id(b,d))},"cardinal-closed":function(b,d){return 3>b.length?Mf(b):b[0]+xc((b.push(b[0]),b),Id([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=Pa(b);else{var d=b[0],f=[],a;var c=
0;var e=b.length-1;var g=[];var h=b[1];for(a=g[0]=Kd(b[0],h);++c<e;)g[c]=(a+(a=Kd(h,h=b[c+1])))/2;g[c]=a;for(var l=-1,q=b.length-1;++l<q;)c=Kd(b[l],b[l+1]),1E-6>ea(c)?g[l]=g[l+1]=0:(e=g[l]/c,h=g[l+1]/c,a=e*e+h*h,9<a&&(a=3*c/Math.sqrt(a),g[l]=a*e,g[l+1]=a*h));for(l=-1;++l<=q;)a=(b[Math.min(q,l+1)][0]-b[Math.max(0,l-1)][0])/(6*(1+g[l]*g[l])),f.push([a||0,g[l]*a||0]);b=d+xc(b,f)}return b}});Fd.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],db=[0,1/6,
2/3,1/6];z.svg.line.radial=function(){var b=Lf(Qf);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Gd.reverse=Hd;Hd.reverse=Gd;z.svg.area=function(){return Rf(A)};z.svg.area.radial=function(){var b=Rf(Qf);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};z.svg.chord=function(){function b(b,e){var g=d(this,a,b,e),k=d(this,c,b,e);return"M"+g.p0+f(g.r,g.p1,g.a1-g.a0)+
(g.a0==k.a0&&g.a1==k.a1?"Q 0,0 "+g.p0:"Q 0,0 "+k.p0+f(k.r,k.p1,k.a1-k.a0)+("Q 0,0 "+g.p0))+"Z"}function d(b,d,f,a){var c=d.call(b,f,a);d=e.call(b,c,a);f=g.call(b,c,a)-wa;b=h.call(b,c,a)-wa;return{r:d,a0:f,a1:b,p0:[d*Math.cos(f),d*Math.sin(f)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function f(b,d,f){return"A"+b+","+b+" 0 "+ +(f>ba)+",1 "+d}var a=ld,c=md,e=Wh,g=Jf,h=Kf;b.radius=function(d){if(!arguments.length)return e;e=pa(d);return b};b.source=function(d){if(!arguments.length)return a;a=pa(d);return b};
b.target=function(d){if(!arguments.length)return c;c=pa(d);return b};b.startAngle=function(d){if(!arguments.length)return g;g=pa(d);return b};b.endAngle=function(d){if(!arguments.length)return h;h=pa(d);return b};return b};z.svg.diagonal=function(){function b(b,c){var e=d.call(this,b,c),g=f.call(this,b,c),k=(e.y+g.y)/2,e=[e,{x:e.x,y:k},{x:g.x,y:k},g],e=e.map(a);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var d=ld,f=md,a=Sf;b.source=function(f){if(!arguments.length)return d;d=pa(f);return b};b.target=
function(d){if(!arguments.length)return f;f=pa(d);return b};b.projection=function(d){if(!arguments.length)return a;a=d;return b};return b};z.svg.diagonal.radial=function(){var b=z.svg.diagonal(),d=Sf,f=b.projection;b.projection=function(b){return arguments.length?f(Xh(d=b)):d};return b};z.svg.symbol=function(){function b(b,a){return(hg.get(d.call(this,b,a))||Tf)(f.call(this,b,a))}var d=Zh,f=Yh;b.type=function(f){if(!arguments.length)return d;d=pa(f);return b};b.size=function(d){if(!arguments.length)return f;
f=pa(d);return b};return b};var hg=z.map({circle:Tf,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*ig));var d=b*ig;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Oc);var d=b*Oc/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=
Math.sqrt(b/Oc);var d=b*Oc/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});z.svg.symbolTypes=hg.keys();var Oc=Math.sqrt(3),ig=Math.tan(30*ca);la.transition=function(b){var d=ob||++jg;b=Md(b);for(var f=[],a,c,e=Pc||{time:Date.now(),ease:fh,delay:0,duration:250},g=-1,h=this.length;++g<h;){f.push(a=[]);for(var l=this[g],q=-1,r=l.length;++q<r;)(c=l[q])&&yc(c,q,b,d,e),a.push(c)}return Qb(f,b,d)};la.interrupt=function(b){return this.each(null==b?Bc:Uf(Md(b)))};var Bc=Uf(Md()),Aa=[],jg=0,ob,Pc;Aa.call=
la.call;Aa.empty=la.empty;Aa.node=la.node;Aa.size=la.size;z.transition=function(b,d){return b&&b.transition?ob?b.transition(d):b:z.selection().transition(b)};z.transition.prototype=Aa;Aa.select=function(b){var d=this.id,f=this.namespace,a=[],c,e,g;b=r(b);for(var h=-1,l=this.length;++h<l;){a.push(c=[]);for(var q=this[h],n=-1,y=q.length;++n<y;)(g=q[n])&&(e=b.call(g,g.__data__,n,h))?("__data__"in g&&(e.__data__=g.__data__),yc(e,n,f,d,g[f][d]),c.push(e)):c.push(null)}return Qb(a,f,d)};Aa.selectAll=function(b){var d=
this.id,f=this.namespace,a=[],c,e;b=K(b);for(var g=-1,h=this.length;++g<h;)for(var l=this[g],q=-1,r=l.length;++q<r;)if(c=l[q]){var n=c[f][d];var y=b.call(c,c.__data__,q,g);a.push(c=[]);for(var p=-1,t=y.length;++p<t;)(e=y[p])&&yc(e,p,f,d,n),c.push(e)}return Qb(a,f,d)};Aa.filter=function(b){var d=[],a,c;"function"!==typeof b&&(b=S(b));for(var e=0,g=this.length;e<g;e++){d.push(a=[]);var h=this[e];for(var l=0,q=h.length;l<q;l++)(c=h[l])&&b.call(c,c.__data__,l,e)&&a.push(c)}return Qb(d,this.namespace,
this.id)};Aa.tween=function(b,d){var a=this.id,c=this.namespace;return 2>arguments.length?this.node()[c][a].tween.get(b):ka(this,null==d?function(d){d[c][a].tween.remove(b)}:function(f){f[c][a].tween.set(b,d)})};Aa.attr=function(b,d){function a(){this.removeAttribute(l)}function c(){this.removeAttributeNS(l.space,l.local)}function e(b){return null==b?a:(b+="",function(){var d=this.getAttribute(l),a;return d!==b&&(a=h(d,b),function(b){this.setAttribute(l,a(b))})})}function g(b){return null==b?c:(b+=
"",function(){var d=this.getAttributeNS(l.space,l.local),a;return d!==b&&(a=h(d,b),function(b){this.setAttributeNS(l.space,l.local,a(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var h="transform"==b?lf:mb,l=z.ns.qualify(b);return Ld(this,"attr."+b,d,l.local?g:e)};Aa.attrTween=function(b,d){function a(b,a){var f=d.call(this,b,a,this.getAttribute(e));return f&&function(b){this.setAttribute(e,f(b))}}function c(b,a){var f=d.call(this,b,a,this.getAttributeNS(e.space,e.local));
return f&&function(b){this.setAttributeNS(e.space,e.local,f(b))}}var e=z.ns.qualify(b);return this.tween("attr."+b,e.local?c:a)};Aa.style=function(b,d,a){function f(){this.style.removeProperty(b)}var e=arguments.length;if(3>e){if("string"!==typeof b){2>e&&(d="");for(a in b)this.style(a,b[a],d);return this}a=""}return Ld(this,"style."+b,d,function(d){return null==d?f:(d+="",function(){var f=c(this).getComputedStyle(this,null).getPropertyValue(b),e;return f!==d&&(e=mb(f,d),function(d){this.style.setProperty(b,
e(d),a)})})})};Aa.styleTween=function(b,d,a){3>arguments.length&&(a="");return this.tween("style."+b,function(f,e){var g=d.call(this,f,e,c(this).getComputedStyle(this,null).getPropertyValue(b));return g&&function(d){this.style.setProperty(b,g(d),a)}})};Aa.text=function(b){return Ld(this,"text",b,$h)};Aa.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};Aa.ease=function(b){var d=this.id,a=this.namespace;
if(1>arguments.length)return this.node()[a][d].ease;"function"!==typeof b&&(b=z.ease.apply(z,arguments));return ka(this,function(f){f[a][d].ease=b})};Aa.delay=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].delay:ka(this,"function"===typeof b?function(f,c,e){f[a][d].delay=+b.call(f,f.__data__,c,e)}:(b=+b,function(f){f[a][d].delay=b}))};Aa.duration=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].duration:ka(this,"function"===
typeof b?function(f,c,e){f[a][d].duration=Math.max(1,b.call(f,f.__data__,c,e))}:(b=Math.max(1,b),function(f){f[a][d].duration=b}))};Aa.each=function(b,d){var a=this.id,c=this.namespace;if(2>arguments.length){var e=Pc,g=ob;try{ob=a,ka(this,function(d,f,e){Pc=d[c][a];b.call(d,d.__data__,f,e)})}finally{Pc=e,ob=g}}else ka(this,function(f){f=f[c][a];(f.event||(f.event=z.dispatch("start","end","interrupt"))).on(b,d)});return this};Aa.transition=function(){for(var b=this.id,d=++jg,a=this.namespace,c=[],
e,g,h,l,q=0,r=this.length;q<r;q++){c.push(e=[]);g=this[q];for(var n=0,y=g.length;n<y;n++){if(h=g[n])l=h[a][b],yc(h,n,a,d,{time:l.time,ease:l.ease,delay:l.delay+l.duration,duration:l.duration});e.push(h)}}return Qb(c,a,d)};z.svg.axis=function(){function b(b){b.each(function(){var b=z.select(this),f=this.__chart__||d,k=this.__chart__=d.copy(),m=null==l?k.ticks?k.ticks.apply(k,h):k.domain():l,r=null==q?k.tickFormat?k.tickFormat.apply(k,h):A:q,n=b.selectAll(".tick").data(m,k),m=n.enter().insert("g",".domain").attr("class",
"tick").style("opacity",1E-6),y=z.transition(n.exit()).style("opacity",1E-6).remove(),p=z.transition(n.order()).style("opacity",1),t=Math.max(c,0)+g,D=rc(k),b=b.selectAll(".domain").data([0]),b=(b.enter().append("path").attr("class","domain"),z.transition(b));m.append("line");m.append("text");var v=m.select("line"),H=p.select("line"),n=n.select("text").text(r),O=m.select("text"),u=p.select("text"),S="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a){r=ai;var F="x";var X="y";var x="x2";var w="y2";
n.attr("dy",0>S?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+D[0]+","+S*e+"V0H"+D[1]+"V"+S*e)}else r=bi,F="y",X="x",x="y2",w="x2",n.attr("dy",".32em").style("text-anchor",0>S?"end":"start"),b.attr("d","M"+S*e+","+D[0]+"H0V"+D[1]+"H"+S*e);v.attr(w,S*c);O.attr(X,S*t);H.attr(x,0).attr(w,S*c);u.attr(F,0).attr(X,S*t);if(k.rangeBand)var K=k,E=K.rangeBand()/2,f=k=function(b){return K(b)+E};else f.rangeBand?f=k:y.call(r,k,f);m.call(r,f,k);p.call(r,k,k)})}var d=z.scale.linear(),a=kg,c=6,e=6,
g=3,h=[10],l=null,q;b.scale=function(a){if(!arguments.length)return d;d=a;return b};b.orient=function(d){if(!arguments.length)return a;a=d in yi?d+"":kg;return b};b.ticks=function(){if(!arguments.length)return h;h=Qa(arguments);return b};b.tickValues=function(d){if(!arguments.length)return l;l=d;return b};b.tickFormat=function(d){if(!arguments.length)return q;q=d;return b};b.tickSize=function(d){var a=arguments.length;if(!a)return c;c=+d;e=+arguments[a-1];return b};b.innerTickSize=function(d){if(!arguments.length)return c;
c=+d;return b};b.outerTickSize=function(d){if(!arguments.length)return e;e=+d;return b};b.tickPadding=function(d){if(!arguments.length)return g;g=+d;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var kg="bottom",yi={top:1,right:1,bottom:1,left:1};z.svg.brush=function(){function b(f){f.each(function(){var f=z.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),c=f.selectAll(".background").data([0]);
c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var k=f.selectAll(".resize").data(v,A);k.exit().remove();k.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return zi[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",
6).attr("height",6).style("visibility","hidden");k.style("display",b.empty()?"none":null);f=z.transition(f);c=z.transition(c);l&&(k=rc(l),c.attr("x",k[0]).attr("width",k[1]-k[0]),a(f));q&&(k=rc(q),c.attr("y",k[0]).attr("height",k[1]-k[0]),e(f));d(f)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+r[+/e$/.test(b)]+","+n[+/^s/.test(b)]+")"})}function a(b){b.select(".extent").attr("x",r[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function e(b){b.select(".extent").attr("y",
n[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",n[1]-n[0])}function g(){function f(){var b=z.mouse(m),f=!1;I&&(b[0]+=I[0],b[1]+=I[1]);X||(z.event.altKey?(w||(w=[(r[0]+r[1])/2,(n[0]+n[1])/2]),A[0]=r[+(b[0]<w[0])],A[1]=n[+(b[1]<w[1])]):w=null);S&&g(b,l,0)&&(a(O),f=!0);F&&g(b,q,1)&&(e(O),f=!0);f&&(d(O),H({type:"brush",mode:X?"move":"resize"}))}function g(b,d,a){var f=rc(d);d=f[0];var c=f[1],f=A[a],e=a?n:r,g=e[1]-e[0];X&&(d-=f,c-=g+f);b=(a?D:t)?Math.max(d,Math.min(c,b[a])):b[a];X?d=(b+=f)+
g:(w&&(f=Math.max(d,Math.min(c,2*w[a]-b))),f<b?(d=b,b=f):d=f);if(e[0]!=b||e[1]!=d)return a?p=null:y=null,e[0]=b,e[1]=d,!0}function k(){f();O.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);z.select("body").style("cursor",null);K.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);x();H({type:"brushend"})}var m=this,v=z.select(z.event.target),H=h.of(m,arguments),
O=z.select(m),u=v.datum(),S=!/^(n|s)$/.test(u)&&l,F=!/^(e|w)$/.test(u)&&q,X=v.classed("extent"),x=oa(m),w,A=z.mouse(m),K=z.select(c(m)).on("keydown.brush",function(){32==z.event.keyCode&&(X||(w=null,A[0]-=r[1],A[1]-=n[1],X=2),U())}).on("keyup.brush",function(){32==z.event.keyCode&&2==X&&(A[0]+=r[1],A[1]+=n[1],X=0,U())});if(z.event.changedTouches)K.on("touchmove.brush",f).on("touchend.brush",k);else K.on("mousemove.brush",f).on("mouseup.brush",k);O.interrupt().selectAll("*").interrupt();if(X)A[0]=
r[0]-A[0],A[1]=n[0]-A[1];else if(u){var E=+/w$/.test(u),u=+/^n/.test(u);var I=[r[1-E]-A[0],n[1-u]-A[1]];A[0]=r[E];A[1]=n[u]}else z.event.altKey&&(w=A.slice());O.style("pointer-events","none").selectAll(".resize").style("display",null);z.select("body").style("cursor",v.style("cursor"));H({type:"brushstart"});f()}var h=P(b,"brushstart","brush","brushend"),l=null,q=null,r=[0,0],n=[0,0],y,p,t=!0,D=!0,v=Wd[0];b.event=function(b){b.each(function(){var b=h.of(this,arguments),d={x:r,y:n,i:y,j:p},a=this.__chart__||
d;this.__chart__=d;ob?z.select(this).transition().each("start.brush",function(){y=a.i;p=a.j;r=a.x;n=a.y;b({type:"brushstart"})}).tween("brush:brush",function(){var a=qc(r,d.x),f=qc(n,d.y);y=p=null;return function(c){r=d.x=a(c);n=d.y=f(c);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=d.i;p=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(d){if(!arguments.length)return l;l=d;v=
Wd[!l<<1|!q];return b};b.y=function(d){if(!arguments.length)return q;q=d;v=Wd[!l<<1|!q];return b};b.clamp=function(d){if(!arguments.length)return l&&q?[t,D]:l?t:q?D:null;l&&q?(t=!!d[0],D=!!d[1]):l?t=!!d:q&&(D=!!d);return b};b.extent=function(d){if(!arguments.length){if(l)if(y){var a=y[0];var f=y[1]}else if(a=r[0],f=r[1],l.invert&&(a=l.invert(a),f=l.invert(f)),f<a){var c=a;a=f;f=c}if(q)if(p){var e=p[0];var g=p[1]}else e=n[0],g=n[1],q.invert&&(e=q.invert(e),g=q.invert(g)),g<e&&(c=e,e=g,g=c);return l&&
q?[[a,e],[f,g]]:l?[a,f]:q&&[e,g]}l&&(a=d[0],f=d[1],q&&(a=a[0],f=f[0]),y=[a,f],l.invert&&(a=l(a),f=l(f)),f<a&&(c=a,a=f,f=c),a!=r[0]||f!=r[1])&&(r=[a,f]);q&&(e=d[0],g=d[1],l&&(e=e[1],g=g[1]),p=[e,g],q.invert&&(e=q(e),g=q(g)),g<e&&(c=e,e=g,g=c),e!=n[0]||g!=n[1])&&(n=[e,g]);return b};b.clear=function(){b.empty()||(r=[0,0],n=[0,0],y=p=null);return b};b.empty=function(){return!!l&&r[0]==r[1]||!!q&&n[0]==n[1]};return z.rebind(b,h,"on")};var zi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",
ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Xd=Y.format=Zf.timeFormat,lg=Xd.utc,mg=lg("%Y-%m-%dT%H:%M:%S.%LZ");Xd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nd:mg;Nd.parse=function(b){b=new Date(b);return isNaN(b)?null:b};Nd.toString=mg.toString;Y.second=fb(function(b){return new Ea(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});Y.seconds=
Y.second.range;Y.seconds.utc=Y.second.utc.range;Y.minute=fb(function(b){return new Ea(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+6E4*Math.floor(d))},function(b){return b.getMinutes()});Y.minutes=Y.minute.range;Y.minutes.utc=Y.minute.utc.range;Y.hour=fb(function(b){var d=b.getTimezoneOffset()/60;return new Ea(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});Y.hours=Y.hour.range;Y.hours.utc=Y.hour.utc.range;Y.month=
fb(function(b){b=Y.day(b);b.setDate(1);return b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});Y.months=Y.month.range;Y.months.utc=Y.month.utc.range;var zc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Yd=[[Y.second,1],[Y.second,5],[Y.second,15],[Y.second,30],[Y.minute,1],[Y.minute,5],[Y.minute,15],[Y.minute,30],[Y.hour,1],[Y.hour,3],[Y.hour,6],[Y.hour,12],[Y.day,1],[Y.day,2],[Y.week,1],[Y.month,1],[Y.month,3],[Y.year,
1]],Ai=Xd.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",Fb]]),ci={range:function(b,d,a){return z.range(Math.ceil(b/a)*a,+d,a).map(nb)},floor:A,ceil:A};Yd.year=Y.year;Y.scale=function(){return Od(z.scale.linear(),Yd,
Ai)};var ng=Yd.map(function(b){return[b[0].utc,b[1]]}),Bi=lg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Fb]]);ng.year=Y.year.utc;Y.scale.utc=function(){return Od(z.scale.linear(),ng,Bi)};
z.text=$c(function(b){return b.responseText});z.json=function(b,d){return Wb(b,"application/json",di,d)};z.html=function(b,d){return Wb(b,"text/html",ei,d)};z.xml=$c(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=z,define(z)):"object"===typeof module&&module.exports?module.exports=z:this.d3=z}();
(function(){var c={dev:!1};c.tooltip=c.tooltip||{};c.utils=c.utils||{};c.models=c.models||{};c.charts={};c.logs={};c.dom={};c.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),g=this,t=function(){},l=function(){return g.apply(this instanceof t&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};
t.prototype=this.prototype;l.prototype=new t;return l});c.dev&&(c.dispatch.on("render_start",function(a){c.logs.startTime=+new Date}),c.dispatch.on("render_end",function(a){c.logs.endTime=+new Date;c.logs.totalTime=c.logs.endTime-c.logs.startTime;c.log("total",c.logs.totalTime)}));c.log=function(){c.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):c.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,
console).apply(console,arguments);return arguments[arguments.length-1]};c.deprecated=function(a,c){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",c||"")};c.render=function(a){a=a||1;c.render.active=!0;c.dispatch.render_start();var e=function(){for(var g,t,l=0;l<a&&(t=c.render.queue[l]);l++)g=t.generate(),typeof t.callback==typeof Function&&t.callback(g);c.render.queue.splice(0,l);c.render.queue.length?setTimeout(e):(c.dispatch.render_end(),c.render.active=!1)};setTimeout(e)};
c.render.active=!1;c.render.queue=[];c.addGraph=function(a,e){typeof a===typeof Function&&(a={generate:a,callback:e});c.render.queue.push(a);c.render.active||c.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=c);"undefined"!==typeof window&&(window.nv=c);c.dom.write=function(a){return void 0!==window.fastdom?fastdom.write(a):a()};c.dom.read=function(a){return void 0!==window.fastdom?fastdom.read(a):a()};c.interactiveGuideline=function(){function a(J){J.each(function(C){function B(){var c=
d3.mouse(this),g=c[0],c=c[1],h=!0,t=!1;w&&(g=d3.event.offsetX,c=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(h=!1),d3.event.target.className.baseVal.match("nv-legend")&&(t=!0));h&&(g-=l.left,c-=l.top);0>g||0>c||g>E||c>A||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||t?w&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(e.nvPointerEventsClass))||(p.elementMouseout({mouseX:g,
mouseY:c}),a.renderGuideLine(null),e.hidden(!0)):(e.hidden(!1),h=n.invert(g),p.elementMousemove({mouseX:g,mouseY:c,pointXValue:h}),"dblclick"===d3.event.type&&p.elementDblclick({mouseX:g,mouseY:c,pointXValue:h}),"click"===d3.event.type&&p.elementClick({mouseX:g,mouseY:c,pointXValue:h}))}var J=d3.select(this),E=g||960,A=t||400,L=J.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([C]);L.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");
u&&(u.on("touchmove",B).on("mousemove",B,!0).on("mouseout",B,!0).on("dblclick",B).on("click",B),a.guideLine=null,a.renderGuideLine=function(e){h&&(a.guideLine&&a.guideLine.attr("x1")===e||c.dom.write(function(){var a=L.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[c.utils.NaNtoZero(e)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",A).attr("y2",0);a.exit().remove()}))})})}var e=c.models.tooltip();
e.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var g=null,t=null,l={left:0,top:0},n=d3.scale.linear(),p=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),h=!0,u=null,w="ActiveXObject"in window;a.dispatch=p;a.tooltip=e;a.margin=function(c){if(!arguments.length)return l;l.top="undefined"!=typeof c.top?c.top:l.top;l.left="undefined"!=typeof c.left?c.left:l.left;return a};a.width=function(c){if(!arguments.length)return g;g=c;return a};a.height=function(c){if(!arguments.length)return t;
t=c;return a};a.xScale=function(c){if(!arguments.length)return n;n=c;return a};a.showGuideLine=function(c){if(!arguments.length)return h;h=c;return a};a.svgContainer=function(c){if(!arguments.length)return u;u=c;return a};return a};c.interactiveBisect=function(a,c,g){if(!(a instanceof Array))return null;var e="function"!==typeof g?function(a){return a.x}:g;g=d3.bisector(function(a,c){return e(a)-c}).left;g=d3.max([0,g(a,c)-1]);var l=e(a[g]);"undefined"===typeof l&&(l=g);if(l===c)return g;var n=d3.min([g+
1,a.length-1]);a=e(a[n]);"undefined"===typeof a&&(a=n);return Math.abs(a-c)>=Math.abs(l-c)?g:n};c.nearestValueIndex=function(a,c,g){var e=Infinity,l=null;a.forEach(function(a,p){var h=Math.abs(c-a);null!=a&&h<=e&&h<g&&(e=h,l=p)});return l};(function(){c.models.tooltip=function(){function a(){if(u){var a=d3.select(u);"svg"!==a.node().tagName&&(a=a.select("svg"));var c=a.node()?a.attr("viewBox"):null;c&&(c=c.split(" "),a=parseInt(a.style("width"),10)/c[2],G.left*=a,G.top*=a)}}function e(){if(A){a:{if(g&&
g.series){if(g.series instanceof Array){var l=!!g.series.length;break a}if(g.series instanceof Object){g.series=[g.series];l=!0;break a}}l=!1}if(l){a();var t=G.left,F=null!==p?p:G.top;c.dom.write(function(){C||(C=d3.select(u?u:document.body).append("div").attr("class","nvtooltip "+(h?h:"xy-tooltip")).attr("id",v),C.style("top",0).style("left",0),C.style("opacity",0),C.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0),C.classed("nv-pointer-events-none",!0),B=C.node());var a=P(g);
a&&(B.innerHTML=a);u&&I?c.dom.read(function(){var a=u.getElementsByTagName("svg")[0],c=0,e=0;if(a){a=a.getBoundingClientRect();c=u.getBoundingClientRect();e=a.top;if(0>e)var g=u.getBoundingClientRect(),e=Math.abs(e)>g.height?0:e;e=Math.abs(e-c.top);c=Math.abs(a.left-c.left)}t+=u.offsetLeft+c-2*u.scrollLeft;F+=u.offsetTop+e-2*u.scrollTop;n&&0<n&&(F=Math.floor(F/n)*n);R([t,F])}):R([t,F])});return e}}}var g=null,t="w",l=25,n=0,p=null,h=null,u=null,w=!0,J=400,C=null,B=null,G={left:null,top:null},E={left:0,
top:0},A=!0,L=100,M=!0,I=!1,v="nvtooltip-"+Math.floor(1E5*Math.random()),F=function(a,c){return a},U=function(a){return a},N=function(a,c){return a},P=function(a){if(null===a)return"";var c=d3.select(document.createElement("table"));M&&c.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(U(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",
function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});e.append("td").classed("key",!0).html(function(a,c){return N(a.key,c)});e.append("td").classed("value",!0).html(function(a,c){return F(a.value,c)});e.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});c=c.node().outerHTML;
void 0!==a.footer&&(c+="<div class='footer'>"+a.footer+"</div>");return c},R=function(a){B&&c.dom.read(function(){var e=parseInt(B.offsetHeight,10),g=parseInt(B.offsetWidth,10),h=c.utils.windowSize().width,q=c.utils.windowSize().height,r=window.pageYOffset,n=window.pageXOffset,q=window.innerWidth>=document.body.scrollWidth?q:q-16,h=window.innerHeight>=document.body.scrollHeight?h:h-16,p=function(a){var c=u;do isNaN(a.offsetTop)||(c+=a.offsetTop),a=a.offsetParent;while(a);return c},v=function(a){var c=
H;do isNaN(a.offsetLeft)||(c+=a.offsetLeft),a=a.offsetParent;while(a);return c};switch(t){case "e":var H=a[0]-g-l;var u=a[1]-e/2;v=v(B);p=p(B);v<n&&(H=a[0]+l>n?a[0]+l:n-v+H);p<r&&(u=r-p+u);p+e>r+q&&(u=r+q-p+u-e);break;case "w":H=a[0]+l;u=a[1]-e/2;v=v(B);p=p(B);v+g>h&&(H=a[0]-g-l);p<r&&(u=r+5);p+e>r+q&&(u=r+q-p+u-e);break;case "n":H=a[0]-g/2-5;u=a[1]+l;v=v(B);p=p(B);v<n&&(H=n+5);v+g>h&&(H=H-g/2+5);p+e>r+q&&(u=r+q-p+u-e);break;case "s":H=a[0]-g/2;u=a[1]-e-l;v=v(B);p=p(B);v<n&&(H=n+5);v+g>h&&(H=H-g/
2+5);r>p&&(u=r);break;case "none":H=a[0],u=a[1]-l,v=v(B),p=p(B)}H-=E.left;u-=E.top;var g=B.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft,e="translate("+H+"px, "+u+"px)",F=d3.interpolateString("translate("+(g.left+n)+"px, "+(g.top+r)+"px)",e),r=.1>C.style("opacity");w?C.transition().delay(J).duration(0).style("opacity",0):C.interrupt().transition().duration(r?0:L).styleTween("transform",function(a){return F},
"important").style("-webkit-transform",e).style("opacity",1)})};e.nvPointerEventsClass="nv-pointer-events-none";e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},{duration:{get:function(){return L},set:function(a){L=a}},gravity:{get:function(){return t},set:function(a){t=a}},distance:{get:function(){return l},set:function(a){l=a}},snapDistance:{get:function(){return n},set:function(a){n=a}},classes:{get:function(){return h},set:function(a){h=a}},chartContainer:{get:function(){return u},
set:function(a){u=a}},fixedTop:{get:function(){return p},set:function(a){p=a}},enabled:{get:function(){return A},set:function(a){A=a}},hideDelay:{get:function(){return J},set:function(a){J=a}},contentGenerator:{get:function(){return P},set:function(a){P=a}},valueFormatter:{get:function(){return F},set:function(a){F=a}},headerFormatter:{get:function(){return U},set:function(a){U=a}},keyFormatter:{get:function(){return N},set:function(a){N=a}},headerEnabled:{get:function(){return M},set:function(a){M=
a}},_isInteractiveLayer:{get:function(){return I},set:function(a){I=!!a}},position:{get:function(){return G},set:function(a){G.left=void 0!==a.left?a.left:G.left;G.top=void 0!==a.top?a.top:G.top}},offset:{get:function(){return E},set:function(a){E.left=void 0!==a.left?a.left:E.left;E.top=void 0!==a.top?a.top:E.top}},hidden:{get:function(){return w},set:function(a){w!=a&&(w=!!a,e())}},data:{get:function(){return g},set:function(a){a.point&&(a.value=a.point.x,a.series=a.series||{},a.series.value=a.point.y,
a.series.color=a.point.color||a.series.color);g=a}},tooltipElem:{get:function(){return B},set:function(a){}},id:{get:function(){return v},set:function(a){}}});c.utils.initOptions(e);return e}})();c.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight)return a.width=window.innerWidth,a.height=window.innerHeight,a;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)return a.width=document.documentElement.offsetWidth,
a.height=document.documentElement.offsetHeight,a;document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);return a};c.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):c.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};c.utils.getColor=function(a){if(void 0===a)return c.utils.defaultColor();if(Array.isArray(a)){var e=d3.scale.ordinal().range(a);
return function(a,c){return a.color||e(void 0===c?a:c)}}return a};c.utils.defaultColor=function(){return c.utils.getColor(d3.scale.category20().range())};c.utils.customTheme=function(a,c,g){c=c||function(a){return a.key};g=g||d3.scale.category20().range();var e=g.length;return function(l,n){var p=c(l);if("function"===typeof a[p])return a[p]();if(void 0!==a[p])return a[p];e||(e=g.length);--e;return g[e]}};c.utils.pjax=function(a,e){var g=function(g){d3.html(g,function(g){var l=d3.select(e).node();
l.parentNode.replaceChild(d3.select(g).select(e).node(),l);c.utils.pjax(a,e)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href);g(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&g(d3.event.state)})};c.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var c=parseInt(a.style("font-size").replace("px",""),10);return a.text().length*c*.5}return 0};c.utils.NaNtoZero=
function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a||-Infinity===a?0:a};d3.selection.prototype.watchTransition=function(a){var c=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,c)};c.utils.renderWatch=function(a,e){if(!(this instanceof c.utils.renderWatch))return new c.utils.renderWatch(a,e);var g=void 0!==e?e:250,t=[],l=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=!1;(function(a){a.dispatch.on("renderEnd",function(c){a.__rendered=
!0;l.renderEnd("model")})})(a);0>t.indexOf(a)&&t.push(a)});return this};this.reset=function(a){void 0!==a&&(g=a);t=[]};this.transition=function(a,c,e){c=1<arguments.length?[].slice.call(arguments,1):[];e=1<c.length?c.pop():void 0!==g?g:250;a.__rendered=!1;0>t.indexOf(a)&&t.push(a);if(0===e)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var h=0;return a.transition().duration(e).each(function(){++h}).each("end",
function(e,g){0===--h&&(a.__rendered=!0,l.renderEnd.apply(this,c))})};this.renderEnd=function(){t.every(function(a){return a.__rendered})&&(t.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}};c.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(e){for(var g in e){var t=a[g]instanceof Array,l="object"===typeof e[g];"object"===typeof a[g]&&!t&&l?c.utils.deepExtend(a[g],e[g]):a[g]=e[g]}})};c.utils.state=function(){if(!(this instanceof
c.utils.state))return new c.utils.state;var a={},e=function(){},g=function(){return{}},t=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){e(a,!0)});this.getter=function(a){g=a;return this};this.setter=function(a,c){c||(c=function(){});e=function(e,g){a(e);g&&c()};return this};this.init=function(a){t=t||{};c.utils.deepExtend(t,a)};this.update=function(){t&&(e(t,!1),t=null);var c=g();if(JSON.stringify(c)===JSON.stringify(a))c=!1;else{for(var n in c)void 0===a[n]&&(a[n]=
{}),a[n]=c[n];c=!0}c&&this.dispatch.change(a)}};c.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,c){if("function"===typeof this[a])this[a](c)}.bind(this));return this};c.utils.calcTicksX=function(a,e){for(var g=1,t=0;t<e.length;t+=1)var l=e[t]&&e[t].values?e[t].values.length:0,g=l>g?l:g;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",g);a=a>g?a=g-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.calcTicksY=function(a,e){for(var g=
1,t=0;t<e.length;t+=1)for(var l=e[t]&&e[t].values?e[t].values:[],n,p=0;p<l.length;p+=1)n=l[p]&&l[p].value?l[p].value:0,g=n>g?n:g;c.log("Requested number of ticks: ",a);c.log("Calculated max values to be: ",g);a=a>g?a=g-1:a;a=Math.floor(1>a?1:a);c.log("Calculating tick count as: ",a);return a};c.utils.initOption=function(a,c){a._calls&&a._calls[c]?a[c]=a._calls[c]:(a[c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]=!0;a._options[c]=e;return a},a["_"+c]=function(e){if(!arguments.length)return a._options[c];
a._overrides[c]||(a._options[c]=e);return a})};c.utils.initOptions=function(a){a._overrides=a._overrides||{};var e=Object.getOwnPropertyNames(a._options||{}),g=Object.getOwnPropertyNames(a._calls||{}),e=e.concat(g),t;for(t in e)c.utils.initOption(a,e[t])};c.utils.inheritOptionsD3=function(a,c,g){a._d3options=g.concat(a._d3options||[]);g.unshift(c);g.unshift(a);d3.rebind.apply(this,g)};c.utils.arrayUnique=function(a){return a.sort().filter(function(c,g){return!g||c!=a[g-1]})};c.utils.symbolMap=d3.map();
c.utils.symbol=function(){function a(a,l){var n=e.call(this,a,l),p=g.call(this,a,l);return-1!==d3.svg.symbolTypes.indexOf(n)?d3.svg.symbol().type(n).size(p)():c.utils.symbolMap.get(n)(p)}var e,g=64;a.type=function(c){if(!arguments.length)return e;e=d3.functor(c);return a};a.size=function(c){if(!arguments.length)return g;g=d3.functor(c);return a};return a};c.utils.inheritOptions=function(a,e){var g=Object.getOwnPropertyNames(e._options||{}),t=Object.getOwnPropertyNames(e._calls||{}),l=e._inherited||
[],n=e._d3options||[],p=g.concat(t).concat(l).concat(n);p.unshift(e);p.unshift(a);d3.rebind.apply(this,p);a._inherited=c.utils.arrayUnique(g.concat(t).concat(l).concat(g).concat(a._inherited||[]));a._d3options=c.utils.arrayUnique(n.concat(a._d3options||[]))};c.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})};c.utils.sanitizeHeight=function(a,c){return a||parseInt(c.style("height"),10)||400};c.utils.sanitizeWidth=function(a,c){return a||parseInt(c.style("width"),10)||960};c.utils.availableHeight=
function(a,e,g){return c.utils.sanitizeHeight(a,e)-g.top-g.bottom};c.utils.availableWidth=function(a,e,g){return c.utils.sanitizeWidth(a,e)-g.left-g.right};c.utils.noData=function(a,e){var g=a.options(),t=g.margin(),l=g.noData(),l=null==l?["No Data Available."]:[l],n=c.utils.availableHeight(g.height(),e,t),g=c.utils.availableWidth(g.width(),e,t),g=t.left+g/2,t=t.top+n/2;e.selectAll("g").remove();l=e.selectAll(".nv-noData").data(l);l.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle");l.attr("x",g).attr("y",t).text(function(a){return a})};c.models.axis=function(){function a(n){M.reset();n.each(function(a){var n=d3.select(this);c.utils.initSVG(n);a=n.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");n=a.select("g");null!==B?e.ticks(B):"top"!=e.orient()&&"bottom"!=e.orient()||e.ticks(Math.abs(g.range()[1]-g.range()[0])/100);n.watchTransition(M,"axis").call(e);L=L||e.scale();var v=
e.tickFormat();null==v&&(v=L.tickFormat());var A=n.selectAll("text.nv-axislabel").data([p||null]);A.exit().remove();switch(e.orient()){case "top":A.enter().append("text").attr("class","nv-axislabel");var E=2>g.range().length?0:2===g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);A.attr("text-anchor","middle").attr("y",0).attr("x",E/2);if(h){var I=a.selectAll("g.nv-axisMaxMin").data(g.domain());I.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",
0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");I.exit().remove();I.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g(a))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-e.tickPadding()).attr("text-anchor","middle").text(function(a,c){var e=v(a);return(""+e).match("NaN")?"":e});I.watchTransition(M,"min-max top").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g.range()[e])+",0)"})}break;case "bottom":I=G+36;var r=30,K=0,Q=n.selectAll("g").select("text"),
D="";u%360&&(Q.each(function(a,c){var e=this.getBoundingClientRect(),g=e.width;K=e.height;g>r&&(r=g)}),D="rotate("+u+" 0,"+(K/2+e.tickPadding())+")",I=Math.abs(Math.sin(u*Math.PI/180)),I=(I?I*r:r)+30,Q.attr("transform",D).style("text-anchor",0<u%360?"start":"end"));A.enter().append("text").attr("class","nv-axislabel");E=2>g.range().length?0:2===g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);A.attr("text-anchor","middle").attr("y",I).attr("x",E/2);h&&(I=a.selectAll("g.nv-axisMaxMin").data([g.domain()[0],
g.domain()[g.domain().length-1]]),I.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),I.exit().remove(),I.attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g(a)+(C?g.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",e.tickPadding()).attr("transform",D).style("text-anchor",u?0<u%360?"start":"end":"middle").text(function(a,c){var e=v(a);return(""+e).match("NaN")?"":
e}),I.watchTransition(M,"min-max bottom").attr("transform",function(a,e){return"translate("+c.utils.NaNtoZero(g(a)+(C?g.rangeBand()/2:0))+",0)"}));J&&Q.attr("transform",function(a,c){return"translate(0,"+(0==c%2?"0":"12")+")"});break;case "right":A.enter().append("text").attr("class","nv-axislabel");A.style("text-anchor",w?"middle":"begin").attr("transform",w?"rotate(90)":"").attr("y",w?-Math.max(t.right,l)+12:-10).attr("x",w?d3.max(g.range())/2:e.tickPadding());h&&(I=a.selectAll("g.nv-axisMaxMin").data(g.domain()),
I.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),I.exit().remove(),I.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(g(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",e.tickPadding()).style("text-anchor","start").text(function(a,c){var e=v(a);return(""+e).match("NaN")?"":e}),I.watchTransition(M,"min-max right").attr("transform",function(a,
e){return"translate(0,"+c.utils.NaNtoZero(g.range()[e])+")"}).select("text").style("opacity",1));break;case "left":A.enter().append("text").attr("class","nv-axislabel"),A.style("text-anchor",w?"middle":"end").attr("transform",w?"rotate(-90)":"").attr("y",w?-Math.max(t.left,l)+25-(G||0):-10).attr("x",w?-d3.max(g.range())/2:-e.tickPadding()),h&&(I=a.selectAll("g.nv-axisMaxMin").data(g.domain()),I.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":
"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),I.exit().remove(),I.attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(L(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-e.tickPadding()).attr("text-anchor","end").text(function(a,c){var e=v(a);return(""+e).match("NaN")?"":e}),I.watchTransition(M,"min-max right").attr("transform",function(a,e){return"translate(0,"+c.utils.NaNtoZero(g.range()[e])+")"}).select("text").style("opacity",1))}A.text(function(a){return a});
!h||"left"!==e.orient()&&"right"!==e.orient()||(n.selectAll("g").each(function(a,c){d3.select(this).select("text").attr("opacity",1);if(g(a)<g.range()[1]+10||g(a)>g.range()[0]-10)(1E-10<a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),g.domain()[0]==g.domain()[1]&&0==g.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,c){return c?0:1}));if(h&&("top"===e.orient()||"bottom"===e.orient())){var q=[];a.selectAll("g.nv-axisMaxMin").each(function(a,
c){try{c?q.push(g(a)-this.getBoundingClientRect().width-4):q.push(g(a)+this.getBoundingClientRect().width+4)}catch(V){c?q.push(g(a)-4):q.push(g(a)+4)}});n.selectAll("g").each(function(a,c){if(g(a)<q[0]||g(a)>q[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}n.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a)/1E6)&&void 0!==a}).classed("zero",!0);L=g.copy()});M.renderEnd("axis immediate");return a}var e=d3.svg.axis(),g=d3.scale.linear(),
t={top:0,right:0,bottom:0,left:0},l=75,n=60,p=null,h=!0,u=0,w=!0,J=!1,C=!1,B=null,G=0,E=250,A=d3.dispatch("renderEnd");e.scale(g).orient("bottom").tickFormat(function(a){return a});var L,M=c.utils.renderWatch(A,E);a.axis=e;a.dispatch=A;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return G},set:function(a){G=a}},staggerLabels:{get:function(){return J},set:function(a){J=a}},rotateLabels:{get:function(){return u},set:function(a){u=a}},rotateYLabel:{get:function(){return w},
set:function(a){w=a}},showMaxMin:{get:function(){return h},set:function(a){h=a}},axisLabel:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return n},set:function(a){n=a}},ticks:{get:function(){return B},set:function(a){B=a}},width:{get:function(){return l},set:function(a){l=a}},margin:{get:function(){return t},set:function(a){t.top=void 0!==a.top?a.top:t.top;t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}},
duration:{get:function(){return E},set:function(a){E=a;M.reset(E)}},scale:{get:function(){return g},set:function(h){g=h;e.scale(g);C="function"===typeof g.rangeBands;c.utils.inheritOptionsD3(a,g,["domain","range","rangeBand","rangeBands"])}}});c.utils.initOptions(a);c.utils.inheritOptionsD3(a,e,"orient tickValues tickSubdivide tickSize tickPadding tickFormat".split(" "));c.utils.inheritOptionsD3(a,g,["domain","range","rangeBand","rangeBands"]);return a};c.models.boxPlot=function(){function a(l){v.reset();
l.each(function(a){var l=g-e.left-e.right,u=t-e.top-e.bottom;J=d3.select(this);c.utils.initSVG(J);n.domain(C||a.map(function(a,c){return h(a,c)})).rangeBands(G||[0,l],.1);l=[];if(!B)var l=d3.min(a.map(function(a){var c=[];c.push(a.values.Q1);a.values.hasOwnProperty("whisker_low")&&null!==a.values.whisker_low&&c.push(a.values.whisker_low);a.values.hasOwnProperty("outliers")&&null!==a.values.outliers&&(c=c.concat(a.values.outliers));return d3.min(c)})),F=d3.max(a.map(function(a){var c=[];c.push(a.values.Q3);
a.values.hasOwnProperty("whisker_high")&&null!==a.values.whisker_high&&c.push(a.values.whisker_high);a.values.hasOwnProperty("outliers")&&null!==a.values.outliers&&(c=c.concat(a.values.outliers));return d3.max(c)})),l=[l,F];p.domain(B||l);p.range(E||[u,0]);I=I||p.copy().range([p(0),p(0)]);u=J.selectAll("g.nv-wrap").data([a]);u.enter().append("g").attr("class","nvd3 nv-wrap");u.attr("transform","translate("+e.left+","+e.top+")");var r=u.selectAll(".nv-boxplot").data(function(a){return a}),K=r.enter().append("g").style("stroke-opacity",
1E-6).style("fill-opacity",1E-6);r.attr("class","nv-boxplot").attr("transform",function(a,c,e){return"translate("+(n(h(a,c))+.05*n.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover});r.watchTransition(v,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(c,e){return e*L/a.length}).attr("transform",function(a,c){return"translate("+(n(h(a,c))+.05*n.rangeBand())+", 0)"});r.exit().remove();K.each(function(a,c){var e=d3.select(this);["low","high"].forEach(function(g){a.values.hasOwnProperty("whisker_"+
g)&&null!==a.values["whisker_"+g]&&(e.append("line").style("stroke",a.color?a.color:w(a,c)).attr("class","nv-boxplot-whisker nv-boxplot-"+g),e.append("line").style("stroke",a.color?a.color:w(a,c)).attr("class","nv-boxplot-tick nv-boxplot-"+g))})});u=r.selectAll(".nv-boxplot-outlier").data(function(a){return a.values.hasOwnProperty("outliers")&&null!==a.values.outliers?a.values.outliers:[]});u.enter().append("circle").style("fill",function(a,c,e){return w(a,e)}).style("stroke",function(a,c,e){return w(a,
e)}).on("mouseover",function(a,c,e){d3.select(this).classed("hover",!0);A.elementMouseover({series:{key:a,color:w(a,e)},e:d3.event})}).on("mouseout",function(a,c,e){d3.select(this).classed("hover",!1);A.elementMouseout({series:{key:a,color:w(a,e)},e:d3.event})}).on("mousemove",function(a,c){A.elementMousemove({e:d3.event})});u.attr("class","nv-boxplot-outlier");u.watchTransition(v,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*n.rangeBand()).attr("cy",function(a,c,e){return p(a)}).attr("r","3");
u.exit().remove();var Q=function(){return null===M?.9*n.rangeBand():Math.min(75,.9*n.rangeBand())},D=function(){return.45*n.rangeBand()-Q()/2},q=function(){return.45*n.rangeBand()+Q()/2};["low","high"].forEach(function(a){var c="low"===a?"Q1":"Q3";r.select("line.nv-boxplot-whisker.nv-boxplot-"+a).watchTransition(v,"nv-boxplot: boxplots").attr("x1",.45*n.rangeBand()).attr("y1",function(c,e){return p(c.values["whisker_"+a])}).attr("x2",.45*n.rangeBand()).attr("y2",function(a,e){return p(a.values[c])});
r.select("line.nv-boxplot-tick.nv-boxplot-"+a).watchTransition(v,"nv-boxplot: boxplots").attr("x1",D).attr("y1",function(c,e){return p(c.values["whisker_"+a])}).attr("x2",q).attr("y2",function(c,e){return p(c.values["whisker_"+a])})});["low","high"].forEach(function(a){K.selectAll(".nv-boxplot-"+a).on("mouseover",function(c,e,g){d3.select(this).classed("hover",!0);A.elementMouseover({series:{key:c.values["whisker_"+a],color:w(c,g)},e:d3.event})}).on("mouseout",function(c,e,g){d3.select(this).classed("hover",
!1);A.elementMouseout({series:{key:c.values["whisker_"+a],color:w(c,g)},e:d3.event})}).on("mousemove",function(a,c){A.elementMousemove({e:d3.event})})});K.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,c){d3.select(this).classed("hover",!0);A.elementMouseover({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||w(a,c)},{key:"Q2",value:a.values.Q2,color:a.color||w(a,c)},{key:"Q1",value:a.values.Q1,color:a.color||w(a,c)}],data:a,index:c,e:d3.event})}).on("mouseout",
function(a,c){d3.select(this).classed("hover",!1);A.elementMouseout({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||w(a,c)},{key:"Q2",value:a.values.Q2,color:a.color||w(a,c)},{key:"Q1",value:a.values.Q1,color:a.color||w(a,c)}],data:a,index:c,e:d3.event})}).on("mousemove",function(a,c){A.elementMousemove({e:d3.event})});r.select("rect.nv-boxplot-box").watchTransition(v,"nv-boxplot: boxes").attr("y",function(a,c){return p(a.values.Q3)}).attr("width",Q).attr("x",D).attr("height",
function(a,c){return Math.abs(p(a.values.Q3)-p(a.values.Q1))||1}).style("fill",function(a,c){return a.color||w(a,c)}).style("stroke",function(a,c){return a.color||w(a,c)});K.append("line").attr("class","nv-boxplot-median");r.select("line.nv-boxplot-median").watchTransition(v,"nv-boxplot: boxplots line").attr("x1",D).attr("y1",function(a,c){return p(a.values.Q2)}).attr("x2",q).attr("y2",function(a,c){return p(a.values.Q2)});n.copy();I=p.copy()});v.renderEnd("nv-boxplot immediate");return a}var e={top:0,
right:0,bottom:0,left:0},g=960,t=500,l=Math.floor(1E4*Math.random()),n=d3.scale.ordinal(),p=d3.scale.linear(),h=function(a){return a.x},u=function(a){return a.y},w=c.utils.defaultColor(),J=null,C,B,G,E,A=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),L=250,M=null,I,v=c.utils.renderWatch(A,L);a.dispatch=A;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=
a}},maxBoxWidth:{get:function(){return M},set:function(a){M=a}},x:{get:function(){return h},set:function(a){h=a}},y:{get:function(){return u},set:function(a){u=a}},xScale:{get:function(){return n},set:function(a){n=a}},yScale:{get:function(){return p},set:function(a){p=a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return B},set:function(a){B=a}},xRange:{get:function(){return G},set:function(a){G=a}},yRange:{get:function(){return E},set:function(a){E=a}},id:{get:function(){return l},
set:function(a){l=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return w},set:function(a){w=c.utils.getColor(a)}},duration:{get:function(){return L},set:function(a){L=a;v.reset(L)}}});c.utils.initOptions(a);return a};c.models.boxPlotChart=function(){function a(h){I.reset();I.models(e);u&&I.models(g);w&&I.models(t);
h.each(function(h){var v=d3.select(this);c.utils.initSVG(v);var F=(n||parseInt(v.style("width"))||960)-l.left-l.right,I=(p||parseInt(v.style("height"))||400)-l.top-l.bottom;a.update=function(){L.beforeUpdate();v.transition().duration(M).call(a)};a.container=this;if(h&&h.length&&h.filter(function(a){return a.values.hasOwnProperty("Q1")&&a.values.hasOwnProperty("Q2")&&a.values.hasOwnProperty("Q3")}).length)v.selectAll(".nv-noData").remove();else return h=v.selectAll(".nv-noData").data([A]),h.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),h.attr("x",l.left+F/2).attr("y",l.top+I/2).text(function(a){return a}),a;G=e.xScale();E=e.yScale().clamp(!0);var B=v.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([h]),r=B.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),K=r.append("defs"),B=B.select("g");r.append("g").attr("class","nv-x nv-axis");r.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");r.append("g").attr("class",
"nv-barsWrap");B.attr("transform","translate("+l.left+","+l.top+")");J&&B.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)");e.width(F).height(I);B.select(".nv-barsWrap").datum(h.filter(function(a){return!a.disabled})).transition().call(e);K.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");B.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",G.rangeBand()*(C?2:1)).attr("height",16).attr("x",-G.rangeBand()/(C?1:2));u&&(g.scale(G).ticks(c.utils.calcTicksX(F/100,
h)).tickSize(-I,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")"),B.select(".nv-x.nv-axis").call(g),h=B.select(".nv-x.nv-axis").selectAll("g"),C&&h.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));w&&(t.scale(E).ticks(Math.floor(I/36)).tickSize(-F,0),B.select(".nv-y.nv-axis").call(t));B.select(".nv-zeroLine line").attr("x1",0).attr("x2",F).attr("y1",E(0)).attr("y2",E(0))});I.renderEnd("nv-boxplot chart immediate");return a}
var e=c.models.boxPlot(),g=c.models.axis(),t=c.models.axis(),l={top:15,right:10,bottom:50,left:60},n=null,p=null,h=c.utils.getColor(),u=!0,w=!0,J=!1,C=!1,B=c.models.tooltip(),G,E,A="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),M=250;g.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});t.orient(J?"right":"left").tickFormat(d3.format(",.1f"));B.duration(0);var I=c.utils.renderWatch(L,M);e.dispatch.on("elementMouseover.tooltip",function(a){B.data(a).hidden(!1)});
e.dispatch.on("elementMouseout.tooltip",function(a){B.data(a).hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){B.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=L;a.boxplot=e;a.xAxis=g;a.yAxis=t;a.tooltip=B;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return p},set:function(a){p=a}},staggerLabels:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return u},
set:function(a){u=a}},showYAxis:{get:function(){return w},set:function(a){w=a}},tooltips:{get:function(){return tooltips},set:function(a){tooltips=a}},tooltipContent:{get:function(){return B},set:function(a){B=a}},noData:{get:function(){return A},set:function(a){A=a}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return M},
set:function(a){M=a;I.reset(M);e.duration(M);g.duration(M);t.duration(M)}},color:{get:function(){return h},set:function(a){h=c.utils.getColor(a);e.color(h)}},rightAlignYAxis:{get:function(){return J},set:function(a){J=a;t.orient(a?"right":"left")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.bullet=function(){function a(g){g.each(function(a,g){var A=u-e.left-e.right,E=w-e.top-e.bottom;J=d3.select(this);c.utils.initSVG(J);var v=l.call(this,a,g).slice().sort(d3.descending),
F=n.call(this,a,g).slice().sort(d3.descending),C=p.call(this,a,g).slice().sort(d3.descending),N=(a.rangeLabels?a.rangeLabels:[]).slice(),P=(a.markerLabels?a.markerLabels:[]).slice(),L=(a.measureLabels?a.measureLabels:[]).slice(),r=d3.scale.linear().domain(d3.extent(d3.merge([h,v]))).range(t?[A,0]:[0,A]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(r.range());this.__chart__=r;var K=d3.min(v),Q=d3.max(v),D=v[1],v=J.selectAll("g.nv-wrap.nv-bullet").data([a]),A=v.enter().append("g").attr("class",
"nvd3 nv-wrap nv-bullet").append("g"),q=v.select("g");A.append("rect").attr("class","nv-range nv-rangeMax");A.append("rect").attr("class","nv-range nv-rangeAvg");A.append("rect").attr("class","nv-range nv-rangeMin");A.append("rect").attr("class","nv-measure");v.attr("transform","translate("+e.left+","+e.top+")");var O=function(a){return Math.abs(r(a)-r(0))},y=function(a){return 0>a?r(a):r(0)};q.select("rect.nv-rangeMax").attr("height",E).attr("width",O(0<Q?Q:K)).attr("x",y(0<Q?Q:K)).datum(0<Q?Q:K);
q.select("rect.nv-rangeAvg").attr("height",E).attr("width",O(D)).attr("x",y(D)).datum(D);q.select("rect.nv-rangeMin").attr("height",E).attr("width",O(Q)).attr("x",y(Q)).attr("width",O(0<Q?K:Q)).attr("x",y(0<Q?K:Q)).datum(0<Q?K:Q);q.select("rect.nv-measure").style("fill",B).attr("height",E/3).attr("y",E/3).attr("width",0>C?r(0)-r(C[0]):r(C[0])-r(0)).attr("x",y(C)).on("mouseover",function(){G.elementMouseover({value:C[0],label:L[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){G.elementMousemove({value:C[0],
label:L[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){G.elementMouseout({value:C[0],label:L[0]||"Current",color:d3.select(this).style("fill")})});K=E/6;F=F.map(function(a,c){return{value:a,label:P[c]}});A.selectAll("path.nv-markerTriangle").data(F).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(a){return"translate("+r(a.value)+","+E/2+")"}).attr("d","M0,"+K+"L"+K+","+-K+" "+-K+","+-K+"Z").on("mouseover",function(a){G.elementMouseover({value:a.value,
label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[r(a.value),E/2]})}).on("mousemove",function(a){G.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){G.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});v.selectAll(".nv-range").on("mouseover",function(a,c){G.elementMouseover({value:a,label:N[c]||(c?1==c?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})}).on("mousemove",
function(){G.elementMousemove({value:C[0],label:L[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){G.elementMouseout({value:a,label:N[c]||(c?1==c?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})})});return a}var e={top:0,right:0,bottom:0,left:0},g="left",t=!1,l=function(a){return a.ranges},n=function(a){return a.markers?a.markers:[0]},p=function(a){return a.measures},h=[0],u=380,w=30,J=null,C=null,B=c.utils.getColor(["#1f77b4"]),G=d3.dispatch("elementMouseover",
"elementMouseout","elementMousemove");a.dispatch=G;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return l},set:function(a){l=a}},markers:{get:function(){return n},set:function(a){n=a}},measures:{get:function(){return p},set:function(a){p=a}},forceX:{get:function(){return h},set:function(a){h=a}},width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return w},set:function(a){w=a}},tickFormat:{get:function(){return C},set:function(a){C=
a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},orient:{get:function(){return g},set:function(a){g=a;t="right"==g||"bottom"==g}},color:{get:function(){return B},set:function(a){B=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.bulletChart=function(){function a(g){g.each(function(t,A){var E=d3.select(this);c.utils.initSVG(E);
var v=c.utils.availableWidth(w,E,n),F=J-n.top-n.bottom;a.update=function(){a(g)};a.container=this;if(t&&p.call(this,t,A))E.selectAll(".nv-noData").remove();else return c.utils.noData(a,E),a;var G=p.call(this,t,A).slice().sort(d3.descending),N=h.call(this,t,A).slice().sort(d3.descending),P=u.call(this,t,A).slice().sort(d3.descending),L=E.selectAll("g.nv-wrap.nv-bulletChart").data([t]),r=L.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),E=L.select("g");r.append("g").attr("class",
"nv-bulletWrap");r.append("g").attr("class","nv-titles");L.attr("transform","translate("+n.left+","+n.top+")");var K=d3.scale.linear().domain([0,Math.max(G[0],N[0],P[0])]).range(l?[v,0]:[0,v]),Q=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(K.range());this.__chart__=K;G=r.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(J-n.top-n.bottom)/2+")");G.append("text").attr("class","nv-title").text(function(a){return a.title});G.append("text").attr("class",
"nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});e.width(v).height(F);G=E.select(".nv-bulletWrap");d3.transition(G).call(e);var D=C||K.tickFormat(v/100),v=E.selectAll("g.nv-tick").data(K.ticks(B?B:v/50),function(a){return this.textContent||D(a)}),E=v.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+Q(a)+",0)"}).style("opacity",1E-6);E.append("line").attr("y1",F).attr("y2",7*F/6);E.append("text").attr("text-anchor","middle").attr("dy",
"1em").attr("y",7*F/6).text(D);E=d3.transition(v).attr("transform",function(a){return"translate("+K(a)+",0)"}).style("opacity",1);E.select("line").attr("y1",F).attr("y2",7*F/6);E.select("text").attr("y",7*F/6);d3.transition(v.exit()).attr("transform",function(a){return"translate("+K(a)+",0)"}).style("opacity",1E-6).remove()});d3.timer.flush();return a}var e=c.models.bullet(),g=c.models.tooltip(),t="left",l=!1,n={top:5,right:40,bottom:20,left:120},p=function(a){return a.ranges},h=function(a){return a.markers?
a.markers:[0]},u=function(a){return a.measures},w=null,J=55,C=null,B=null,G=null,E=d3.dispatch("tooltipShow","tooltipHide");g.duration(0).headerEnabled(!1);e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};g.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){g.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){g.position({top:d3.event.pageY,left:d3.event.pageX})()});a.bullet=e;a.dispatch=E;a.tooltip=g;a.options=
c.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return p},set:function(a){p=a}},markers:{get:function(){return h},set:function(a){h=a}},measures:{get:function(){return u},set:function(a){u=a}},width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return J},set:function(a){J=a}},tickFormat:{get:function(){return C},set:function(a){C=a}},ticks:{get:function(){return B},set:function(a){B=a}},noData:{get:function(){return G},set:function(a){G=a}},
tooltips:{get:function(){return g.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");g.enabled(!!a)}},tooltipContent:{get:function(){return g.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");g.contentGenerator(a)}},margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==
a.left?a.left:n.left}},orient:{get:function(){return t},set:function(a){t=a;l="right"==t||"bottom"==t}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.candlestickBar=function(){function a(r){r.each(function(a){n=d3.select(this);var r=c.utils.availableWidth(g,n,e),D=c.utils.availableHeight(t,n,e);c.utils.initSVG(n);var q=r/a[0].values.length*.45;p.domain(F||d3.extent(a[0].values.map(u).concat(E)));L?p.range(N||[.5*r/a[0].values.length,r*(a[0].values.length-.5)/a[0].values.length]):
p.range(N||[5+q/2,r-q/2-5]);h.domain(U||[d3.min(a[0].values.map(G).concat(A)),d3.max(a[0].values.map(B).concat(A))]).range(P||[D,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]);var v=a.enter().append("g").attr("class",
"nvd3 nv-wrap nv-candlestickBar"),y=v.append("defs"),v=v.append("g"),K=a.select("g");v.append("g").attr("class","nv-ticks");a.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){R.chartClick({data:a,index:c,pos:d3.event,id:l})});y.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");a.select("#nv-chart-clip-path-"+l+" rect").attr("width",r).attr("height",D);K.attr("clip-path",M?"url(#nv-chart-clip-path-"+l+")":"");r=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});
r.exit().remove();r=r.enter().append("g").attr("class",function(a,c,e){return(J(a,c)>C(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});r.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,c){return"translate("+p(u(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return h(B(a,c))}).attr("x2",0).attr("y2",function(a,c){return h(G(a,c))});r.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,c){return"translate("+(p(u(a,
c))-q/2)+","+(h(w(a,c))-(J(a,c)>C(a,c)?h(C(a,c))-h(J(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",q).attr("height",function(a,c){var e=J(a,c),g=C(a,c);return e>g?h(g)-h(e):h(e)-h(g)});n.selectAll(".nv-candlestick-lines").transition().attr("transform",function(a,c){return"translate("+p(u(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return h(B(a,c))}).attr("x2",0).attr("y2",function(a,c){return h(G(a,c))});n.selectAll(".nv-candlestick-rects").transition().attr("transform",function(a,c){return"translate("+
(p(u(a,c))-q/2)+","+(h(w(a,c))-(J(a,c)>C(a,c)?h(C(a,c))-h(J(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",q).attr("height",function(a,c){var e=J(a,c),g=C(a,c);return e>g?h(g)-h(e):h(e)-h(g)})});return a}var e={top:0,right:0,bottom:0,left:0},g=null,t=null,l=Math.floor(1E4*Math.random()),n,p=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},J=function(a){return a.open},C=function(a){return a.close},B=function(a){return a.high},G=function(a){return a.low},
E=[],A=[],L=!1,M=!0,I=c.utils.defaultColor(),v=!1,F,U,N,P,R=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();n.select(".nv-candlestickBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){n.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)};a.dispatch=R;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return F},set:function(a){F=a}},yDomain:{get:function(){return U},set:function(a){U=a}},xRange:{get:function(){return N},set:function(a){N=a}},yRange:{get:function(){return P},set:function(a){P=a}},forceX:{get:function(){return E},
set:function(a){E=a}},forceY:{get:function(){return A},set:function(a){A=a}},padData:{get:function(){return L},set:function(a){L=a}},clipEdge:{get:function(){return M},set:function(a){M=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return v},set:function(a){v=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},open:{get:function(){return J()},set:function(a){J=a}},close:{get:function(){return C()},set:function(a){C=
a}},high:{get:function(){return B},set:function(a){B=a}},low:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return I},set:function(a){I=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.cumulativeLineChart=function(){function a(q){V.reset();V.models(g);E&&V.models(t);
A&&V.models(l);q.each(function(q){function r(){na.data([y]);var c=a.duration();a.duration(0);a.update();a.duration(c)}var u=d3.select(this);c.utils.initSVG(u);u.classed("nv-chart-"+N,!0);var S=this,X=c.utils.availableWidth(C,u,w),V=c.utils.availableHeight(B,u,w);a.update=function(){0===D?u.call(a):u.transition().duration(D).call(a)};a.container=this;P.setter(H(q),a.update).getter(aa(q)).update();P.disabled=q.map(function(a){return!!a.disabled});if(!R)for(ka in R={},P)R[ka]=P[ka]instanceof Array?P[ka].slice(0):
P[ka];var ka=d3.behavior.drag().on("dragstart",function(c,e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,c){y.x=d3.event.x;y.i=Math.round(O.invert(y.x));r()}).on("dragend",function(c,e){d3.select(a.container).style("cursor","auto");P.index=y.i;Q.stateChange(P)});if(q&&q.length&&q.filter(function(a){return a.values.length}).length)u.selectAll(".nv-noData").remove();else return c.utils.noData(a,u),a;F=g.xScale();U=g.yScale();if(v)g.yDomain(null);else{var ha=q.filter(function(a){return!a.disabled}).map(function(a,
c){var e=d3.extent(a.values,g.y());-.95>e[0]&&(e[0]=-.95);return[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),ha=[d3.min(ha,function(a){return a[0]}),d3.max(ha,function(a){return a[1]})];g.yDomain(ha)}O.domain([0,q[0].values.length-1]).range([0,X]).clamp(!0);q=e(y.i,q);var ja=I?"none":"all",ra=u.selectAll("g.nv-wrap.nv-cumulativeLine").data([q]),ya=ra.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ha=ra.select("g");ya.append("g").attr("class","nv-interactive");ya.append("g").attr("class",
"nv-x nv-axis").style("pointer-events","none");ya.append("g").attr("class","nv-y nv-axis");ya.append("g").attr("class","nv-background");ya.append("g").attr("class","nv-linesWrap").style("pointer-events",ja);ya.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ya.append("g").attr("class","nv-legendWrap");ya.append("g").attr("class","nv-controlsWrap");G&&(n.width(X),ha.select(".nv-legendWrap").datum(q).call(n),w.top!=n.height()&&(w.top=n.height(),V=c.utils.availableHeight(B,
u,w)),ha.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")"));M&&(ja=[{key:"Re-scale y-axis",disabled:!v}],p.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ha.select(".nv-controlsWrap").datum(ja).attr("transform","translate(0,"+-w.top+")").call(p));ra.attr("transform","translate("+w.left+","+w.top+")");L&&ha.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)");ja=q.filter(function(a){return a.tempDisabled});ra.select(".tempDisabled").remove();
ja.length&&ra.append("text").attr("class","tempDisabled").attr("x",X/2).attr("y","-.71em").style("text-anchor","end").text(ja.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");I&&(h.width(X).height(V).margin({left:w.left,top:w.top}).svgContainer(u).xScale(F),ra.select(".nv-interactive").call(h));ya.select(".nv-background").append("rect");ha.select(".nv-background rect").attr("width",X).attr("height",V);g.y(function(a){return a.display.y}).width(X).height(V).color(q.map(function(a,
c){return a.color||J(a,c)}).filter(function(a,c){return!q[c].disabled&&!q[c].tempDisabled}));ra=ha.select(".nv-linesWrap").datum(q.filter(function(a){return!a.disabled&&!a.tempDisabled}));ra.call(g);q.forEach(function(a,c){a.seriesIndex=c});ya=q.filter(function(a){return!a.disabled&&!!K(a)});ya=ha.select(".nv-avgLinesWrap").selectAll("line").data(ya,function(a){return a.key});ja=function(a){a=U(K(a));return 0>a?0:a>V?V:a};ya.enter().append("line").style("stroke-width",2).style("stroke-dasharray",
"10,10").style("stroke",function(a,c){return g.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",X).attr("y1",ja).attr("y2",ja);ya.style("stroke-opacity",function(a){a=U(K(a));return 0>a||a>V?0:1}).attr("x1",0).attr("x2",X).attr("y1",ja).attr("y2",ja);ya.exit().remove();var na=ra.selectAll(".nv-indexLine").data([y]);na.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ka);na.attr("transform",
function(a){return"translate("+O(a.i)+",0)"}).attr("height",V);E&&(t.scale(F)._ticks(c.utils.calcTicksX(X/70,q)).tickSize(-V,0),ha.select(".nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")"),ha.select(".nv-x.nv-axis").call(t));A&&(l.scale(U)._ticks(c.utils.calcTicksY(V/36,q)).tickSize(-X,0),ha.select(".nv-y.nv-axis").call(l));ha.select(".nv-background rect").on("click",function(){y.x=d3.mouse(this)[0];y.i=Math.round(O.invert(y.x));P.index=y.i;Q.stateChange(P);r()});g.dispatch.on("elementClick",
function(a){y.i=a.pointIndex;y.x=O(y.i);P.index=y.i;Q.stateChange(P);r()});p.dispatch.on("legendClick",function(c,e){c.disabled=!c.disabled;v=!c.disabled;P.rescaleY=v;Q.stateChange(P);a.update()});n.dispatch.on("stateChange",function(c){for(var e in c)P[e]=c[e];Q.stateChange(P);a.update()});h.dispatch.on("elementMousemove",function(e){g.clearHighlights();var n,r,p,y=[];q.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,l){r=c.interactiveBisect(h.values,e.pointXValue,a.x());
g.highlightPoint(l,r,!0);var q=h.values[r];"undefined"!==typeof q&&("undefined"===typeof n&&(n=q),"undefined"===typeof p&&(p=a.xScale()(a.x()(q,r))),y.push({key:h.key,value:a.y()(q,r),color:J(h,h.seriesIndex)}))});if(2<y.length){var D=a.yScale().invert(e.mouseY),v=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),D=c.nearestValueIndex(y.map(function(a){return a.value}),D,v);null!==D&&(y[D].highlight=!0)}D=t.tickFormat()(a.x()(n,r),r);h.tooltip.position({left:p+w.left,top:e.mouseY+w.top}).chartContainer(S.parentNode).valueFormatter(function(a,
c){return l.tickFormat()(a)}).data({value:D,series:y})();h.renderGuideLine(p)});h.dispatch.on("elementMouseout",function(a){g.clearHighlights()});Q.on("changeState",function(c){"undefined"!==typeof c.disabled&&(q.forEach(function(a,e){a.disabled=c.disabled[e]}),P.disabled=c.disabled);"undefined"!==typeof c.index&&(y.i=c.index,y.x=O(y.i),P.index=c.index,na.data([y]));"undefined"!==typeof c.rescaleY&&(v=c.rescaleY);a.update()})});V.renderEnd("cumulativeLineChart immediate");return a}function e(a,c){S||
(S=g.y());return c.map(function(c,e){if(!c.values)return c;var g=c.values[a];if(null==g)return c;var h=S(g,a);if(-.95>h&&!q)return c.tempDisabled=!0,c;c.tempDisabled=!1;c.values=c.values.map(function(a,c){a.display={y:(S(a,c)-h)/(1+h)};return a});return c})}var g=c.models.line(),t=c.models.axis(),l=c.models.axis(),n=c.models.legend(),p=c.models.legend(),h=c.interactiveGuideline(),u=c.models.tooltip(),w={top:30,right:30,bottom:50,left:60},J=c.utils.defaultColor(),C=null,B=null,G=!0,E=!0,A=!0,L=!1,
M=!0,I=!1,v=!0,F,U,N=g.id(),P=c.utils.state(),R=null,r=null,K=function(a){return a.average},Q=d3.dispatch("stateChange","changeState","renderEnd"),D=250,q=!1;P.index=0;P.rescaleY=v;t.orient("bottom").tickPadding(7);l.orient(L?"right":"left");u.valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return t.tickFormat()(a,c)});p.updateState(!1);var O=d3.scale.linear(),y={i:0,x:0},V=c.utils.renderWatch(Q,D),aa=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),
index:y.i,rescaleY:v}}},H=function(a){return function(c){void 0!==c.index&&(y.i=c.index);void 0!==c.rescaleY&&(v=c.rescaleY);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};g.dispatch.on("elementMouseover.tooltip",function(c){var e={x:a.x()(c.point),y:a.y()(c.point),color:c.point.color};c.point=e;u.data(c).position(c.pos).hidden(!1)});g.dispatch.on("elementMouseout.tooltip",function(a){u.hidden(!0)});var S=null;a.dispatch=Q;a.lines=g;a.legend=n;a.controls=p;a.xAxis=t;a.yAxis=
l;a.interactiveLayer=h;a.state=P;a.tooltip=u;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return C},set:function(a){C=a}},height:{get:function(){return B},set:function(a){B=a}},rescaleY:{get:function(){return v},set:function(a){v=a}},showControls:{get:function(){return M},set:function(a){M=a}},showLegend:{get:function(){return G},set:function(a){G=a}},average:{get:function(){return K},set:function(a){K=a}},defaultState:{get:function(){return R},set:function(a){R=
a}},noData:{get:function(){return r},set:function(a){r=a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},noErrorCheck:{get:function(){return q},set:function(a){q=a}},tooltips:{get:function(){return u.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");u.enabled(!!a)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");
u.contentGenerator(a)}},margin:{get:function(){return w},set:function(a){w.top=void 0!==a.top?a.top:w.top;w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},color:{get:function(){return J},set:function(a){J=c.utils.getColor(a);n.color(J)}},useInteractiveGuideline:{get:function(){return I},set:function(c){I=c;!0===c&&(a.interactive(!1),a.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return L},set:function(a){L=a;l.orient(a?
"right":"left")}},duration:{get:function(){return D},set:function(a){D=a;g.duration(D);t.duration(D);l.duration(D);V.reset(D)}}});c.utils.inheritOptions(a,g);c.utils.initOptions(a);return a};c.models.discreteBar=function(){function a(l){N.reset();l.each(function(a){var l=g-e.left-e.right,F=t-e.top-e.bottom;n=d3.select(this);c.utils.initSVG(n);a.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var Q=E&&A?[]:a.map(function(a){return a.values.map(function(a,c){return{x:u(a,c),y:w(a,
c),y0:a.y0}})});p.domain(E||d3.merge(Q).map(function(a){return a.x})).rangeBands(L||[0,l],.1);h.domain(A||d3.extent(d3.merge(Q).map(function(a){return a.y}).concat(J)));B?h.range(M||[F-(0>h.domain()[0]?12:0),0<h.domain()[1]?12:0]):h.range(M||[F,0]);U=U||h.copy().range([h(0),h(0)]);l=n.selectAll("g.nv-wrap.nv-discretebar").data([a]);F=l.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");l.select("g");F.append("g").attr("class","nv-groups");l.attr("transform","translate("+e.left+
","+e.top+")");l=l.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});l.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);l.exit().watchTransition(N,"discreteBar: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();l.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});l.watchTransition(N,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",
.75);l=l.selectAll("g.nv-bar").data(function(a){return a.values});l.exit().remove();F=l.enter().append("g").attr("transform",function(a,c,e){return"translate("+(p(u(a,c))+.05*p.rangeBand())+", "+h(0)+")"}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);I.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);I.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,
c){I.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){I.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){I.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});F.append("rect").attr("height",0).attr("width",.9*p.rangeBand()/a.length);B?(F.append("text").attr("text-anchor","middle"),l.select("text").text(function(a,c){return G(w(a,
c))}).watchTransition(N,"discreteBar: bars text").attr("x",.9*p.rangeBand()/2).attr("y",function(a,c){return 0>w(a,c)?h(w(a,c))-h(0)+12:-4})):l.selectAll("text").remove();l.attr("class",function(a,c){return 0>w(a,c)?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,c){return a.color||C(a,c)}).style("stroke",function(a,c){return a.color||C(a,c)}).select("rect").attr("class",v).watchTransition(N,"discreteBar: bars rect").attr("width",.9*p.rangeBand()/a.length);l.watchTransition(N,"discreteBar: bars").attr("transform",
function(a,c){var e=p(u(a,c))+.05*p.rangeBand(),g=0>w(a,c)?h(0):1>h(0)-h(w(a,c))?h(0)-1:h(w(a,c));return"translate("+e+", "+g+")"}).select("rect").attr("height",function(a,c){return Math.max(Math.abs(h(w(a,c))-h(A&&A[0]||0))||1)});p.copy();U=h.copy()});N.renderEnd("discreteBar immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,t=500,l=Math.floor(1E4*Math.random()),n,p=d3.scale.ordinal(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},J=[0],C=c.utils.defaultColor(),
B=!1,G=d3.format(",.2f"),E,A,L,M,I=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),v="discreteBar",F=250,U,N=c.utils.renderWatch(I,F);a.dispatch=I;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},forceY:{get:function(){return J},set:function(a){J=a}},showValues:{get:function(){return B},set:function(a){B=
a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return E},set:function(a){E=a}},yDomain:{get:function(){return A},set:function(a){A=a}},xRange:{get:function(){return L},set:function(a){L=a}},yRange:{get:function(){return M},set:function(a){M=a}},valueFormat:{get:function(){return G},set:function(a){G=a}},id:{get:function(){return l},
set:function(a){l=a}},rectClass:{get:function(){return v},set:function(a){v=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a)}},duration:{get:function(){return F},set:function(a){F=a;N.reset(F)}}});c.utils.initOptions(a);return a};c.models.discreteBarChart=function(){function a(l){I.reset();
I.models(e);w&&I.models(g);J&&I.models(t);l.each(function(l){var v=d3.select(this);c.utils.initSVG(v);var u=c.utils.availableWidth(p,v,n),F=c.utils.availableHeight(h,v,n);a.update=function(){L.beforeUpdate();v.transition().duration(M).call(a)};a.container=this;if(l&&l.length&&l.filter(function(a){return a.values.length}).length)v.selectAll(".nv-noData").remove();else return c.utils.noData(a,v),a;G=e.xScale();E=e.yScale().clamp(!0);var A=v.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([l]),r=
A.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),I=r.append("defs"),A=A.select("g");r.append("g").attr("class","nv-x nv-axis");r.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");r.append("g").attr("class","nv-barsWrap");A.attr("transform","translate("+n.left+","+n.top+")");C&&A.select(".nv-y.nv-axis").attr("transform","translate("+u+",0)");e.width(u).height(F);A.select(".nv-barsWrap").datum(l.filter(function(a){return!a.disabled})).transition().call(e);
I.append("clipPath").attr("id","nv-x-label-clip-"+e.id()).append("rect");A.select("#nv-x-label-clip-"+e.id()+" rect").attr("width",G.rangeBand()*(B?2:1)).attr("height",16).attr("x",-G.rangeBand()/(B?1:2));w&&(g.scale(G)._ticks(c.utils.calcTicksX(u/100,l)).tickSize(-F,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+(E.range()[0]+(e.showValues()&&0>E.domain()[0]?16:0))+")"),A.select(".nv-x.nv-axis").call(g),r=A.select(".nv-x.nv-axis").selectAll("g"),B&&r.selectAll("text").attr("transform",
function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));J&&(t.scale(E)._ticks(c.utils.calcTicksY(F/36,l)).tickSize(-u,0),A.select(".nv-y.nv-axis").call(t));A.select(".nv-zeroLine line").attr("x1",0).attr("x2",u).attr("y1",E(0)).attr("y2",E(0))});I.renderEnd("discreteBar chart immediate");return a}var e=c.models.discreteBar(),g=c.models.axis(),t=c.models.axis(),l=c.models.tooltip(),n={top:15,right:10,bottom:50,left:60},p=null,h=null,u=c.utils.getColor(),w=!0,J=!0,C=!1,B=!1,G,E,A=null,L=d3.dispatch("beforeUpdate",
"renderEnd"),M=250;g.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});t.orient(C?"right":"left").tickFormat(d3.format(",.1f"));l.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return t.tickFormat()(a,c)}).keyFormatter(function(a,c){return g.tickFormat()(a,c)});var I=c.utils.renderWatch(L,M);e.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};l.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});
e.dispatch.on("elementMousemove.tooltip",function(a){l.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=L;a.discretebar=e;a.xAxis=g;a.yAxis=t;a.tooltip=l;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return h},set:function(a){h=a}},staggerLabels:{get:function(){return B},set:function(a){B=a}},showXAxis:{get:function(){return w},set:function(a){w=a}},showYAxis:{get:function(){return J},
set:function(a){J=a}},noData:{get:function(){return A},set:function(a){A=a}},tooltips:{get:function(){return l.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");l.enabled(!!a)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");l.contentGenerator(a)}},margin:{get:function(){return n},set:function(a){n.top=void 0!==a.top?a.top:n.top;n.right=void 0!==a.right?
a.right:n.right;n.bottom=void 0!==a.bottom?a.bottom:n.bottom;n.left=void 0!==a.left?a.left:n.left}},duration:{get:function(){return M},set:function(a){M=a;I.reset(M);e.duration(M);g.duration(M);t.duration(M)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a);e.color(u)}},rightAlignYAxis:{get:function(){return C},set:function(a){C=a;t.orient(a?"right":"left")}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.distribution=function(){function a(g){C.reset();
g.each(function(a){var g="x"==l?"y":"x",u=d3.select(this);c.utils.initSVG(u);J=J||h;a=u.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");u=a.select("g");a.attr("transform","translate("+e.left+","+e.top+")");a=u.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,c){return"nv-dist nv-series-"+c}).style("stroke",function(a,c){return p(a,c)});u=a.selectAll("line.nv-dist"+
l).data(function(a){return a.values});u.enter().append("line").attr(l+"1",function(a,c){return J(n(a,c))}).attr(l+"2",function(a,c){return J(n(a,c))});C.transition(a.exit().selectAll("line.nv-dist"+l),"dist exit").attr(l+"1",function(a,c){return h(n(a,c))}).attr(l+"2",function(a,c){return h(n(a,c))}).style("stroke-opacity",0).remove();u.attr("class",function(a,c){return"nv-dist"+l+" nv-dist"+l+"-"+c}).attr(g+"1",0).attr(g+"2",t);C.transition(u,"dist").attr(l+"1",function(a,c){return h(n(a,c))}).attr(l+
"2",function(a,c){return h(n(a,c))});J=h.copy()});C.renderEnd("distribution immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=400,t=8,l="x",n=function(a){return a[l]},p=c.utils.defaultColor(),h=d3.scale.linear(),u=250,w=d3.dispatch("renderEnd"),J,C=c.utils.renderWatch(w,u);a.options=c.utils.optionsFunc.bind(a);a.dispatch=w;a.margin=function(c){if(!arguments.length)return e;e.top="undefined"!=typeof c.top?c.top:e.top;e.right="undefined"!=typeof c.right?c.right:e.right;e.bottom="undefined"!=
typeof c.bottom?c.bottom:e.bottom;e.left="undefined"!=typeof c.left?c.left:e.left;return a};a.width=function(c){if(!arguments.length)return g;g=c;return a};a.axis=function(c){if(!arguments.length)return l;l=c;return a};a.size=function(c){if(!arguments.length)return t;t=c;return a};a.getData=function(c){if(!arguments.length)return n;n=d3.functor(c);return a};a.scale=function(c){if(!arguments.length)return h;h=c;return a};a.color=function(e){if(!arguments.length)return p;p=c.utils.getColor(e);return a};
a.duration=function(c){if(!arguments.length)return u;u=c;C.reset(u);return a};return a};c.models.furiousLegend=function(){function a(E){function A(a,c){if("furious"!=G)return"#000";if(C)return a.disengaged?n(a,c):"#fff";if(!C)return a.disabled?n(a,c):"#fff"}function L(a,c){return C&&"furious"==G?a.disengaged?"#fff":n(a,c):a.disabled?"#fff":n(a,c)}E.each(function(a){var E=g-e.left-e.right,v=d3.select(this);c.utils.initSVG(v);v=v.selectAll("g.nv-legend").data([a]);v.enter().append("g").attr("class",
"nvd3 nv-legend").append("g");a=v.select("g");v.attr("transform","translate("+e.left+","+e.top+")");var F=a.selectAll(".nv-series").data(function(a){return"furious"!=G?a:a.filter(function(a){return C?!0:!a.disengaged})}),v=F.enter().append("g").attr("class","nv-series");if("classic"==G){v.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var U=F.select("circle")}else"furious"==G&&(v.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",
3).attr("ry",3),U=F.select("rect"),v.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),F.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",A(a,c))}));v.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",
".32em").attr("dx","8");var N=F.select("text.nv-legend-text");F.on("mouseover",function(a,c){B.legendMouseover(a,c)}).on("mouseout",function(a,c){B.legendMouseout(a,c)}).on("click",function(a,c){B.legendClick(a,c);var e=F.data();w&&("classic"==G?J?(e.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==G&&(C?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:
a.userDisabled,a.disabled=a.disengaged||a.userDisabled):C||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),B.stateChange({disabled:e.map(function(a){return!!a.disabled}),disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=G||!C)if(B.legendDblclick(a,c),w){var e=F.data();e.forEach(function(a){a.disabled=!0;"furious"==
G&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==G&&(a.userDisabled=a.disabled);B.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});F.classed("nv-disabled",function(a){return a.userDisabled});F.exit().remove();N.attr("fill",A).text(l);switch(G){case "furious":var P=23;break;case "classic":P=20}if(p){var M=[];F.each(function(a,e){var g=d3.select(this).select("text");try{var l=g.node().getComputedTextLength();if(0>=l)throw Error();}catch(ka){l=c.utils.calcApproxTextWidth(g)}M.push(l+
h)});for(var r=0,K=0,v=[];K<E&&r<M.length;)v[r]=M[r],K+=M[r++];for(0===r&&(r=1);K>E&&1<r;){v=[];r--;for(K=0;K<M.length;K++)M[K]>(v[K%r]||0)&&(v[K%r]=M[K]);K=v.reduce(function(a,c,e,g){return a+c})}for(var Q=[],D=E=0;E<r;E++)Q[E]=D,D+=v[E];F.attr("transform",function(a,c){return"translate("+Q[c%r]+","+(5+Math.floor(c/r)*P)+")"});u?a.attr("transform","translate("+(g-e.right-K)+","+e.top+")"):a.attr("transform","translate(0,"+e.top+")");t=e.top+e.bottom+Math.ceil(M.length/r)*P}else{var q=5,O=5,y=0,V;
F.attr("transform",function(a,c){var l=d3.select(this).select("text").node().getComputedTextLength()+h;V=O;g<e.left+e.right+V+l&&(O=V=5,q+=P);O+=l;O>y&&(y=O);return"translate("+V+","+q+")"});a.attr("transform","translate("+(g-e.right-y)+","+e.top+")");t=e.top+e.bottom+q+15}"furious"==G&&U.attr("width",function(a,c){return N[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);U.style("fill",L).style("stroke",function(a,c){return a.color||n(a,c)})});return a}var e={top:5,
right:0,bottom:5,left:0},g=400,t=20,l=function(a){return a.key},n=c.utils.getColor(),p=!0,h=28,u=!0,w=!0,J=!1,C=!1,B=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),G="classic";a.dispatch=B;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},key:{get:function(){return l},set:function(a){l=a}},align:{get:function(){return p},set:function(a){p=
a}},rightAlign:{get:function(){return u},set:function(a){u=a}},padding:{get:function(){return h},set:function(a){h=a}},updateState:{get:function(){return w},set:function(a){w=a}},radioButtonMode:{get:function(){return J},set:function(a){J=a}},expanded:{get:function(){return C},set:function(a){C=a}},vers:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?
a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return n},set:function(a){n=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBar=function(){function a(N){N.each(function(a){U.reset();n=d3.select(this);var N=c.utils.availableWidth(g,n,e),r=c.utils.availableHeight(t,n,e);c.utils.initSVG(n);p.domain(A||d3.extent(a[0].values.map(u).concat(J)));B?p.range(M||[.5*N/a[0].values.length,N*(a[0].values.length-.5)/a[0].values.length]):p.range(M||[0,N]);
h.domain(L||d3.extent(a[0].values.map(w).concat(C))).range(I||[r,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var K=n.selectAll("g.nv-wrap.nv-historicalBar-"+l).data([a[0].values]),Q=K.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+l),D=Q.append("defs"),
Q=Q.append("g"),q=K.select("g");Q.append("g").attr("class","nv-bars");K.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){v.chartClick({data:a,index:c,pos:d3.event,id:l})});D.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");K.select("#nv-chart-clip-path-"+l+" rect").attr("width",N).attr("height",r);q.attr("clip-path",G?"url(#nv-chart-clip-path-"+l+")":"");r=K.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,c){return u(a,
c)});r.exit().remove();r.enter().append("rect").attr("x",0).attr("y",function(a,e){return c.utils.NaNtoZero(h(Math.max(0,w(a,e))))}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.abs(h(w(a,e))-h(0)))}).attr("transform",function(c,e){return"translate("+(p(u(c,e))-N/a[0].values.length*.45)+",0)"}).on("mouseover",function(a,c){F&&(d3.select(this).classed("hover",!0),v.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,c){F&&(d3.select(this).classed("hover",
!1),v.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,c){F&&v.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){F&&(v.elementClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(a,c){F&&(v.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});r.attr("fill",function(a,c){return E(a,c)}).attr("class",
function(a,c,e){return(0>w(a,c)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+c}).watchTransition(U,"bars").attr("transform",function(c,e){return"translate("+(p(u(c,e))-N/a[0].values.length*.45)+",0)"}).attr("width",N/a[0].values.length*.9);r.watchTransition(U,"bars").attr("y",function(a,e){var g=0>w(a,e)?h(0):1>h(0)-h(w(a,e))?h(0)-1:h(w(a,e));return c.utils.NaNtoZero(g)}).attr("height",function(a,e){return c.utils.NaNtoZero(Math.max(Math.abs(h(w(a,e))-h(0)),1))})});U.renderEnd("historicalBar immediate");
return a}var e={top:0,right:0,bottom:0,left:0},g=null,t=null,l=Math.floor(1E4*Math.random()),n=null,p=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},J=[],C=[0],B=!1,G=!0,E=c.utils.defaultColor(),A,L,M,I,v=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),F=!0,U=c.utils.renderWatch(v,0);a.highlightPoint=function(a,c){n.select(".nv-bars .nv-bar-0-"+a).classed("hover",c)};a.clearHighlights=
function(){n.select(".nv-bars .nv-bar.hover").classed("hover",!1)};a.dispatch=v;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},forceX:{get:function(){return J},set:function(a){J=a}},forceY:{get:function(){return C},set:function(a){C=a}},padData:{get:function(){return B},set:function(a){B=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=
a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return A},set:function(a){A=a}},yDomain:{get:function(){return L},set:function(a){L=a}},xRange:{get:function(){return M},set:function(a){M=a}},yRange:{get:function(){return I},set:function(a){I=a}},clipEdge:{get:function(){return G},set:function(a){G=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return F},set:function(a){F=a}},
margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return E},set:function(a){E=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.historicalBarChart=function(a){function e(a){a.each(function(h){R.reset();R.models(g);G&&R.models(t);E&&R.models(l);var r=d3.select(this),D=this;c.utils.initSVG(r);var q=c.utils.availableWidth(J,
r,u),O=c.utils.availableHeight(C,r,u);e.update=function(){r.transition().duration(P).call(e)};e.container=this;v.disabled=h.map(function(a){return!!a.disabled});if(!F)for(K in F={},v)F[K]=v[K]instanceof Array?v[K].slice(0):v[K];if(h&&h.length&&h.filter(function(a){return a.values.length}).length)r.selectAll(".nv-noData").remove();else return c.utils.noData(e,r),e;M=g.xScale();I=g.yScale();var y=r.selectAll("g.nv-wrap.nv-historicalBarChart").data([h]);var K=y.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var aa=y.select("g");K.append("g").attr("class","nv-x nv-axis");K.append("g").attr("class","nv-y nv-axis");K.append("g").attr("class","nv-barsWrap");K.append("g").attr("class","nv-legendWrap");K.append("g").attr("class","nv-interactive");B&&(n.width(q),aa.select(".nv-legendWrap").datum(h).call(n),u.top!=n.height()&&(u.top=n.height(),O=c.utils.availableHeight(C,r,u)),y.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")"));y.attr("transform","translate("+u.left+","+u.top+")");A&&aa.select(".nv-y.nv-axis").attr("transform",
"translate("+q+",0)");L&&(p.width(q).height(O).margin({left:u.left,top:u.top}).svgContainer(r).xScale(M),y.select(".nv-interactive").call(p));g.width(q).height(O).color(h.map(function(a,c){return a.color||w(a,c)}).filter(function(a,c){return!h[c].disabled}));aa.select(".nv-barsWrap").datum(h.filter(function(a){return!a.disabled})).transition().call(g);G&&(t.scale(M)._ticks(c.utils.calcTicksX(q/100,h)).tickSize(-O,0),aa.select(".nv-x.nv-axis").attr("transform","translate(0,"+I.range()[0]+")"),aa.select(".nv-x.nv-axis").transition().call(t));
E&&(l.scale(I)._ticks(c.utils.calcTicksY(O/36,h)).tickSize(-q,0),aa.select(".nv-y.nv-axis").transition().call(l));p.dispatch.on("elementMousemove",function(a){g.clearHighlights();var q,n,r,y=[];h.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,l){n=c.interactiveBisect(h.values,a.pointXValue,e.x());g.highlightPoint(n,!0);var p=h.values[n];void 0!==p&&(void 0===q&&(q=p),void 0===r&&(r=e.xScale()(e.x()(p,n))),y.push({key:h.key,value:e.y()(p,n),color:w(h,h.seriesIndex),data:h.values[n]}))});
var v=t.tickFormat()(e.x()(q,n));p.tooltip.position({left:r+u.left,top:a.mouseY+u.top}).chartContainer(D.parentNode).valueFormatter(function(a,c){return l.tickFormat()(a)}).data({value:v,index:n,series:y})();p.renderGuideLine(r)});p.dispatch.on("elementMouseout",function(a){N.tooltipHide();g.clearHighlights()});n.dispatch.on("legendClick",function(c,g){c.disabled=!c.disabled;h.filter(function(a){return!a.disabled}).length||h.map(function(a){a.disabled=!1;y.selectAll(".nv-series").classed("disabled",
!1);return a});v.disabled=h.map(function(a){return!!a.disabled});N.stateChange(v);a.transition().call(e)});n.dispatch.on("legendDblclick",function(a){h.forEach(function(a){a.disabled=!0});a.disabled=!1;v.disabled=h.map(function(a){return!!a.disabled});N.stateChange(v);e.update()});N.on("changeState",function(a){"undefined"!==typeof a.disabled&&(h.forEach(function(c,e){c.disabled=a.disabled[e]}),v.disabled=a.disabled);e.update()})});R.renderEnd("historicalBarChart immediate");return e}var g=a||c.models.historicalBar(),
t=c.models.axis(),l=c.models.axis(),n=c.models.legend(),p=c.interactiveGuideline(),h=c.models.tooltip(),u={top:30,right:90,bottom:50,left:90},w=c.utils.defaultColor(),J=null,C=null,B=!1,G=!0,E=!0,A=!1,L=!1,M,I,v={},F=null,U=null,N=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),P=250;t.orient("bottom").tickPadding(7);l.orient(A?"right":"left");h.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return t.tickFormat()(a,
c)});var R=c.utils.renderWatch(N,0);g.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:e.x()(a.data),value:e.y()(a.data),color:a.color};h.data(a).hidden(!1)});g.dispatch.on("elementMouseout.tooltip",function(a){h.hidden(!0)});g.dispatch.on("elementMousemove.tooltip",function(a){h.position({top:d3.event.pageY,left:d3.event.pageX})()});e.dispatch=N;e.bars=g;e.legend=n;e.xAxis=t;e.yAxis=l;e.interactiveLayer=p;e.tooltip=h;e.options=c.utils.optionsFunc.bind(e);e._options=Object.create({},
{width:{get:function(){return J},set:function(a){J=a}},height:{get:function(){return C},set:function(a){C=a}},showLegend:{get:function(){return B},set:function(a){B=a}},showXAxis:{get:function(){return G},set:function(a){G=a}},showYAxis:{get:function(){return E},set:function(a){E=a}},defaultState:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return U},set:function(a){U=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");
h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");h.contentGenerator(a)}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},color:{get:function(){return w},set:function(a){w=c.utils.getColor(a);n.color(w);g.color(w)}},duration:{get:function(){return P},
set:function(a){P=a;R.reset(P);l.duration(P);t.duration(P)}},rightAlignYAxis:{get:function(){return A},set:function(a){A=a;l.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return L},set:function(a){L=a;!0===a&&e.interactive(!1)}}});c.utils.inheritOptions(e,g);c.utils.initOptions(e);return e};c.models.ohlcBarChart=function(){var a=c.models.historicalBarChart(c.models.ohlcBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;
return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.candlestickBarChart=function(){var a=c.models.historicalBarChart(c.models.candlestickBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=
c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};c.models.legend=function(){function a(E){function A(a,c){if("furious"!=G)return"#000";if(C)return a.disengaged?"#000":
"#fff";if(!C)return a.color||(a.color=n(a,c)),a.disabled?a.color:"#fff"}function L(a,c){return C&&"furious"==G?a.disengaged?"#eee":a.color||n(a,c):a.color||n(a,c)}function M(a,c){return C&&"furious"==G?1:a.disabled?0:1}E.each(function(a){var n=g-e.left-e.right,F=d3.select(this);c.utils.initSVG(F);var E=F.selectAll("g.nv-legend").data([a]);a=E.enter().append("g").attr("class","nvd3 nv-legend").append("g");F=E.select("g");E.attr("transform","translate("+e.left+","+e.top+")");var I=F.selectAll(".nv-series").data(function(a){return"furious"!=
G?a:a.filter(function(a){return C?!0:!a.disengaged})}),E=I.enter().append("g").attr("class","nv-series");switch(G){case "furious":var P=23;break;case "classic":P=20}if("classic"==G){E.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var R=I.select("circle")}else"furious"==G&&(E.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),R=I.select(".nv-legend-symbol"),E.append("g").attr("class","nv-check-box").property("innerHTML",
'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),I.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",A(a,c))}));E.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var r=I.select("text.nv-legend-text");I.on("mouseover",function(a,c){B.legendMouseover(a,
c)}).on("mouseout",function(a,c){B.legendMouseout(a,c)}).on("click",function(a,c){B.legendClick(a,c);var e=I.data();w&&("classic"==G?J?(e.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==G&&(C?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):C||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&
e.forEach(function(a){a.disabled=a.userDisabled=!1}))),B.stateChange({disabled:e.map(function(a){return!!a.disabled}),disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=G||!C)if(B.legendDblclick(a,c),w){var e=I.data();e.forEach(function(a){a.disabled=!0;"furious"==G&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==G&&(a.userDisabled=a.disabled);B.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});I.classed("nv-disabled",function(a){return a.userDisabled});
I.exit().remove();r.attr("fill",A).text(l);var K=0;if(p){var Q=[];I.each(function(a,e){var g=d3.select(this).select("text");try{var l=g.node().getComputedTextLength();if(0>=l)throw Error();}catch(ma){l=c.utils.calcApproxTextWidth(g)}Q.push(l+h)});for(var D=0,E=[],K=0;K<n&&D<Q.length;)E[D]=Q[D],K+=Q[D++];for(0===D&&(D=1);K>n&&1<D;){E=[];D--;for(var q=0;q<Q.length;q++)Q[q]>(E[q%D]||0)&&(E[q%D]=Q[q]);K=E.reduce(function(a,c,e,g){return a+c})}for(var O=[],q=n=0;n<D;n++)O[n]=q,q+=E[n];I.attr("transform",
function(a,c){return"translate("+O[c%D]+","+(5+Math.floor(c/D)*P)+")"});u?F.attr("transform","translate("+(g-e.right-K)+","+e.top+")"):F.attr("transform","translate(0,"+e.top+")");t=e.top+e.bottom+Math.ceil(Q.length/D)*P}else{var y=5,V=5,aa=0,H;I.attr("transform",function(a,c){var l=d3.select(this).select("text").node().getComputedTextLength()+h;H=V;g<e.left+e.right+H+l&&(V=H=5,y+=P);V+=l;V>aa&&(aa=V);K<H+aa&&(K=H+aa);return"translate("+H+","+y+")"});F.attr("transform","translate("+(g-e.right-aa)+
","+e.top+")");t=e.top+e.bottom+y+15}"furious"==G&&(R.attr("width",function(a,c){return r[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),F.select(".nv-legend-bg").transition().duration(300).attr("x",-P).attr("width",K+P-12).attr("height",t+10).attr("y",-e.top-10).attr("opacity",C?1:0));R.style("fill",L).style("fill-opacity",M).style("stroke",L)});return a}var e={top:5,
right:0,bottom:5,left:0},g=400,t=20,l=function(a){return a.key},n=c.utils.getColor(),p=!0,h=32,u=!0,w=!0,J=!1,C=!1,B=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),G="classic";a.dispatch=B;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},key:{get:function(){return l},set:function(a){l=a}},align:{get:function(){return p},set:function(a){p=
a}},rightAlign:{get:function(){return u},set:function(a){u=a}},padding:{get:function(){return h},set:function(a){h=a}},updateState:{get:function(){return w},set:function(a){w=a}},radioButtonMode:{get:function(){return J},set:function(a){J=a}},expanded:{get:function(){return C},set:function(a){C=a}},vers:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?
a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return n},set:function(a){n=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.line=function(){function a(F){v.reset();v.models(e);F.each(function(a){n=d3.select(this);var F=c.utils.availableWidth(t,n,g),A=c.utils.availableHeight(l,n,g);c.utils.initSVG(n);B=e.xScale();G=e.yScale();M=M||B;I=I||G;a=n.selectAll("g.nv-wrap.nv-line").data([a]);var L=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),r=
L.append("defs"),K=L.append("g"),L=a.select("g");K.append("g").attr("class","nv-groups");K.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+g.left+","+g.top+")");e.width(F).height(A);K=a.select(".nv-scatterWrap");K.call(e);r.append("clipPath").attr("id","nv-edge-clip-"+e.id()).append("rect");a.select("#nv-edge-clip-"+e.id()+" rect").attr("width",F).attr("height",0<A?A:0);L.attr("clip-path",C?"url(#nv-edge-clip-"+e.id()+")":"");K.attr("clip-path",C?"url(#nv-edge-clip-"+e.id()+
")":"");F=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});F.enter().append("g").style("stroke-opacity",1E-6).style("stroke-width",function(a){return a.strokeWidth||1.5}).style("fill-opacity",1E-6);F.exit().remove();F.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return p(a,c)}).style("stroke",function(a,c){return p(a,c)});F.watchTransition(v,"line: groups").style("stroke-opacity",
1).style("fill-opacity",function(a){return a.fillOpacity||.5});A=F.selectAll("path.nv-area").data(function(a){return J(a)?[a]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(E).defined(w).x(function(a,e){return c.utils.NaNtoZero(M(h(a,e)))}).y0(function(a,e){return c.utils.NaNtoZero(I(u(a,e)))}).y1(function(a,c){return I(0>=G.domain()[0]?0<=G.domain()[1]?0:G.domain()[1]:G.domain()[0])}).apply(this,[a.values])});F.exit().selectAll("path.nv-area").remove();
A.watchTransition(v,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(E).defined(w).x(function(a,e){return c.utils.NaNtoZero(B(h(a,e)))}).y0(function(a,e){return c.utils.NaNtoZero(G(u(a,e)))}).y1(function(a,c){return G(0>=G.domain()[0]?0<=G.domain()[1]?0:G.domain()[1]:G.domain()[0])}).apply(this,[a.values])});F=F.selectAll("path.nv-line").data(function(a){return[a.values]});F.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(E).defined(w).x(function(a,
e){return c.utils.NaNtoZero(M(h(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(I(u(a,e)))}));F.watchTransition(v,"line: linePaths").attr("d",d3.svg.line().interpolate(E).defined(w).x(function(a,e){return c.utils.NaNtoZero(B(h(a,e)))}).y(function(a,e){return c.utils.NaNtoZero(G(u(a,e)))}));M=B.copy();I=G.copy()});v.renderEnd("line immediate");return a}var e=c.models.scatter(),g={top:0,right:0,bottom:0,left:0},t=960,l=500,n=null,p=c.utils.defaultColor(),h=function(a){return a.x},u=function(a){return a.y},
w=function(a,c){return!isNaN(u(a,c))&&null!==u(a,c)},J=function(a){return a.area},C=!1,B,G,E="linear",A=250,L=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");e.pointSize(16).pointDomain([16,256]);var M,I,v=c.utils.renderWatch(L,A);a.dispatch=L;a.scatter=e;e.dispatch.on("elementClick",function(){L.elementClick.apply(this,arguments)});e.dispatch.on("elementMouseover",function(){L.elementMouseover.apply(this,arguments)});e.dispatch.on("elementMouseout",function(){L.elementMouseout.apply(this,
arguments)});a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return l},set:function(a){l=a}},defined:{get:function(){return w},set:function(a){w=a}},interpolate:{get:function(){return E},set:function(a){E=a}},clipEdge:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==
a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}},duration:{get:function(){return A},set:function(a){A=a;v.reset(A);e.duration(A)}},isArea:{get:function(){return J},set:function(a){J=d3.functor(a)}},x:{get:function(){return h},set:function(a){h=a;e.x(a)}},y:{get:function(){return u},set:function(a){u=a;e.y(a)}},color:{get:function(){return p},set:function(a){p=c.utils.getColor(a);e.color(p)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineChart=function(){function a(p){P.reset();
P.models(e);B&&P.models(g);G&&P.models(t);p.each(function(p){var D=d3.select(this),q=this;c.utils.initSVG(D);var F=c.utils.availableWidth(w,D,h),y=c.utils.availableHeight(J,D,h);a.update=function(){0===N?D.call(a):D.transition().duration(N).call(a)};a.container=this;I.setter(r(p),a.update).getter(R(p)).update();I.disabled=p.map(function(a){return!!a.disabled});if(!v)for(K in v={},I)v[K]=I[K]instanceof Array?I[K].slice(0):I[K];if(p&&p.length&&p.filter(function(a){return a.values.length}).length)D.selectAll(".nv-noData").remove();
else return c.utils.noData(a,D),a;L=e.xScale();M=e.yScale();var K=D.selectAll("g.nv-wrap.nv-lineChart").data([p]);var aa=K.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),H=K.select("g");aa.append("rect").style("opacity",0);aa.append("g").attr("class","nv-x nv-axis");aa.append("g").attr("class","nv-y nv-axis");aa.append("g").attr("class","nv-linesWrap");aa.append("g").attr("class","nv-legendWrap");aa.append("g").attr("class","nv-interactive");H.select("rect").attr("width",
F).attr("height",0<y?y:0);C&&(l.width(F),H.select(".nv-legendWrap").datum(p).call(l),h.top!=l.height()&&(h.top=l.height(),y=c.utils.availableHeight(J,D,h)),K.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")"));K.attr("transform","translate("+h.left+","+h.top+")");E&&H.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)");A&&(n.width(F).height(y).margin({left:h.left,top:h.top}).svgContainer(D).xScale(L),K.select(".nv-interactive").call(n));e.width(F).height(y).color(p.map(function(a,
c){return a.color||u(a,c)}).filter(function(a,c){return!p[c].disabled}));H.select(".nv-linesWrap").datum(p.filter(function(a){return!a.disabled})).call(e);B&&(g.scale(L)._ticks(c.utils.calcTicksX(F/100,p)).tickSize(-y,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")"),H.select(".nv-x.nv-axis").call(g));G&&(t.scale(M)._ticks(c.utils.calcTicksY(y/36,p)).tickSize(-F,0),H.select(".nv-y.nv-axis").call(t));l.dispatch.on("stateChange",function(c){for(var e in c)I[e]=c[e];U.stateChange(I);
a.update()});n.dispatch.on("elementMousemove",function(l){e.clearHighlights();var r,y,D,v=[];p.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,h){y=c.interactiveBisect(g.values,l.pointXValue,a.x());var q=g.values[y],n=a.y()(q,y);null!=n&&e.highlightPoint(h,y,!0);void 0!==q&&(void 0===r&&(r=q),void 0===D&&(D=a.xScale()(a.x()(q,y))),v.push({key:g.key,value:n,color:u(g,g.seriesIndex)}))});if(2<v.length){var H=a.yScale().invert(l.mouseY),w=.03*Math.abs(a.yScale().domain()[0]-
a.yScale().domain()[1]),H=c.nearestValueIndex(v.map(function(a){return a.value}),H,w);null!==H&&(v[H].highlight=!0)}H=g.tickFormat()(a.x()(r,y));n.tooltip.position({left:l.mouseX+h.left,top:l.mouseY+h.top}).chartContainer(q.parentNode).valueFormatter(function(a,c){return null==a?"N/A":t.tickFormat()(a)}).data({value:H,index:y,series:v})();n.renderGuideLine(D)});n.dispatch.on("elementClick",function(g){var h,l=[];p.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(e){var q=
c.interactiveBisect(e.values,g.pointXValue,a.x()),n=e.values[q];if("undefined"!==typeof n){"undefined"===typeof h&&(h=a.xScale()(a.x()(n,q)));var p=a.yScale()(a.y()(n,q));l.push({point:n,pointIndex:q,pos:[h,p],seriesIndex:e.seriesIndex,series:e})}});e.dispatch.elementClick(l)});n.dispatch.on("elementMouseout",function(a){e.clearHighlights()});U.on("changeState",function(c){"undefined"!==typeof c.disabled&&p.length===c.disabled.length&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),I.disabled=
c.disabled);a.update()})});P.renderEnd("lineChart immediate");return a}var e=c.models.line(),g=c.models.axis(),t=c.models.axis(),l=c.models.legend(),n=c.interactiveGuideline(),p=c.models.tooltip(),h={top:30,right:20,bottom:50,left:60},u=c.utils.defaultColor(),w=null,J=null,C=!0,B=!0,G=!0,E=!1,A=!1,L,M,I=c.utils.state(),v=null,F=null,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),N=250;g.orient("bottom").tickPadding(7);t.orient(E?"right":"left");p.valueFormatter(function(a,
c){return t.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});var P=c.utils.renderWatch(U,N),R=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},r=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){p.data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){p.hidden(!0)});a.dispatch=U;a.lines=e;a.legend=
l;a.xAxis=g;a.yAxis=t;a.interactiveLayer=n;a.tooltip=p;a.dispatch=U;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return J},set:function(a){J=a}},showLegend:{get:function(){return C},set:function(a){C=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return G},set:function(a){G=a}},defaultState:{get:function(){return v},set:function(a){v=a}},noData:{get:function(){return F},
set:function(a){F=a}},tooltips:{get:function(){return p.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");p.enabled(!!a)}},tooltipContent:{get:function(){return p.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");p.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;
h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return N},set:function(a){N=a;P.reset(N);e.duration(N);g.duration(N);t.duration(N)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a);l.color(u);e.color(u)}},rightAlignYAxis:{get:function(){return E},set:function(a){E=a;t.orient(E?"right":"left")}},useInteractiveGuideline:{get:function(){return A},set:function(a){if(A=a)e.interactive(!1),e.useVoronoi(!1)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};
c.models.linePlusBarChart=function(){function a(H){H.each(function(H){function G(){B.empty()||B.extent(Q);Cb.data([B.empty()?q.domain():Q]).each(function(a,c){var e=q(a[0])-q.range()[0],g=q.range()[1]-q(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",q(a[1])).attr("width",0>g?0:g)})}function ha(){Q=B.empty()?null:B.extent();K=B.empty()?q.domain():B.extent();S.brush({extent:K,brush:B});G();t.width(na).height(Ia).color(H.map(function(a,c){return a.color||
F(a,c)}).filter(function(a,c){return!H[c].disabled&&H[c].bar}));e.width(na).height(Ia).color(H.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!H[c].disabled&&!H[c].bar}));var a=va.select(".nv-focus .nv-barsWrap").datum(Ca.length?Ca.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return t.x()(a,c)>=K[0]&&t.x()(a,c)<=K[1]})}}):[{values:[]}]),g=va.select(".nv-focus .nv-linesWrap").datum(Ba[0].disabled?[{values:[]}]:Ba.map(function(a,c){return{area:a.area,
fillOpacity:a.fillOpacity,key:a.key,values:a.values.filter(function(a,c){return e.x()(a,c)>=K[0]&&e.x()(a,c)<=K[1]})}}));D=Ca.length?t.xScale():e.xScale();n.scale(D)._ticks(c.utils.calcTicksX(na/100,H)).tickSize(-Ia,0);n.domain([Math.ceil(K[0]),Math.floor(K[1])]);va.select(".nv-x.nv-axis").transition().duration(X).call(n);a.transition().duration(X).call(t);g.transition().duration(X).call(e);va.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O.range()[0]+")");h.scale(O)._ticks(c.utils.calcTicksY(Ia/
36,H)).tickSize(-na,0);u.scale(y)._ticks(c.utils.calcTicksY(Ia/36,H)).tickSize(Ca.length?0:-na,0);va.select(".nv-focus .nv-y1.nv-axis").style("opacity",Ca.length?1:0);va.select(".nv-focus .nv-y2.nv-axis").style("opacity",Ba.length&&!Ba[0].disabled?1:0).attr("transform","translate("+D.range()[1]+",0)");va.select(".nv-focus .nv-y1.nv-axis").transition().duration(X).call(h);va.select(".nv-focus .nv-y2.nv-axis").transition().duration(X).call(u)}var oa=d3.select(this);c.utils.initSVG(oa);var na=c.utils.availableWidth(L,
oa,E),Ia=c.utils.availableHeight(M,oa,E)-(N?r:0),Ja=r-A.top-A.bottom;a.update=function(){oa.transition().duration(X).call(a)};a.container=this;ka.setter(ia(H),a.update).getter(fa(H)).update();ka.disabled=H.map(function(a){return!!a.disabled});if(!da)for(za in da={},ka)da[za]=ka[za]instanceof Array?ka[za].slice(0):ka[za];if(H&&H.length&&H.filter(function(a){return a.values.length}).length)oa.selectAll(".nv-noData").remove();else return c.utils.noData(a,oa),a;var Ca=H.filter(function(a){return!a.disabled&&
a.bar}),Ba=H.filter(function(a){return!a.bar});D=t.xScale();q=p.scale();O=t.yScale();y=e.yScale();V=l.yScale();aa=g.yScale();var za=H.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,c){return{x:I(a,c),y:v(a,c)}})});var sa=H.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,c){return{x:I(a,c),y:v(a,c)}})});D.range([0,na]);q.domain(d3.extent(d3.merge(za.concat(sa)),function(a){return a.x})).range([0,na]);za=oa.selectAll("g.nv-wrap.nv-linePlusBar").data([H]);
var sa=za.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),va=za.select("g");sa.append("g").attr("class","nv-legendWrap");var Da=sa.append("g").attr("class","nv-focus");Da.append("g").attr("class","nv-x nv-axis");Da.append("g").attr("class","nv-y1 nv-axis");Da.append("g").attr("class","nv-y2 nv-axis");Da.append("g").attr("class","nv-barsWrap");Da.append("g").attr("class","nv-linesWrap");sa=sa.append("g").attr("class","nv-context");sa.append("g").attr("class","nv-x nv-axis");
sa.append("g").attr("class","nv-y1 nv-axis");sa.append("g").attr("class","nv-y2 nv-axis");sa.append("g").attr("class","nv-barsWrap");sa.append("g").attr("class","nv-linesWrap");sa.append("g").attr("class","nv-brushBackground");sa.append("g").attr("class","nv-x nv-brush");U&&(sa=C.align()?na/2:na,Da=C.align()?sa:0,C.width(sa),va.select(".nv-legendWrap").datum(H.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?ma:ua);return a})).call(C),E.top!=C.height()&&
(E.top=C.height(),Ia=c.utils.availableHeight(M,oa,E)-r),va.select(".nv-legendWrap").attr("transform","translate("+Da+","+-E.top+")"));za.attr("transform","translate("+E.left+","+E.top+")");va.select(".nv-context").style("display",N?"initial":"none");l.width(na).height(Ja).color(H.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!H[c].disabled&&H[c].bar}));g.width(na).height(Ja).color(H.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!H[c].disabled&&!H[c].bar}));
za=va.select(".nv-context .nv-barsWrap").datum(Ca.length?Ca:[{values:[]}]);sa=va.select(".nv-context .nv-linesWrap").datum(Ba[0].disabled?[{values:[]}]:Ba);va.select(".nv-context").attr("transform","translate(0,"+(Ia+E.bottom+A.top)+")");za.transition().call(l);sa.transition().call(g);R&&(p._ticks(c.utils.calcTicksX(na/100,H)).tickSize(-Ja,0),va.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+V.range()[0]+")"),va.select(".nv-context .nv-x.nv-axis").transition().call(p));P&&(w.scale(V)._ticks(Ja/
36).tickSize(-na,0),J.scale(aa)._ticks(Ja/36).tickSize(Ca.length?0:-na,0),va.select(".nv-context .nv-y3.nv-axis").style("opacity",Ca.length?1:0).attr("transform","translate(0,"+q.range()[0]+")"),va.select(".nv-context .nv-y2.nv-axis").style("opacity",Ba.length?1:0).attr("transform","translate("+q.range()[1]+",0)"),va.select(".nv-context .nv-y1.nv-axis").transition().call(w),va.select(".nv-context .nv-y2.nv-axis").transition().call(J));B.x(q).on("brush",ha);Q&&B.extent(Q);var Cb=va.select(".nv-brushBackground").selectAll("g").data([Q||
B.extent()]);za=Cb.enter().append("g");za.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Ja);za.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Ja);za=va.select(".nv-x.nv-brush").call(B);za.selectAll("rect").attr("height",Ja);za.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=Ja/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+
"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});C.dispatch.on("stateChange",function(c){for(var e in c)ka[e]=c[e];S.stateChange(ka);a.update()});S.on("changeState",function(c){"undefined"!==typeof c.disabled&&(H.forEach(function(a,e){a.disabled=c.disabled[e]}),ka.disabled=c.disabled);a.update()});ha()});return a}var e=c.models.line(),g=c.models.line(),t=c.models.historicalBar(),l=c.models.historicalBar(),n=c.models.axis(),p=c.models.axis(),h=c.models.axis(),u=c.models.axis(),w=c.models.axis(),J=c.models.axis(),
C=c.models.legend(),B=d3.svg.brush(),G=c.models.tooltip(),E={top:30,right:30,bottom:30,left:60},A={top:0,right:30,bottom:20,left:60},L=null,M=null,I=function(a){return a.x},v=function(a){return a.y},F=c.utils.defaultColor(),U=!0,N=!0,P=!1,R=!0,r=50,K,Q=null,D,q,O,y,V,aa,H=null,S=d3.dispatch("brush","stateChange","changeState"),X=0,ka=c.utils.state(),da=null,ma=" (left axis)",ua=" (right axis)";e.clipEdge(!0);g.interactive(!1);n.orient("bottom").tickPadding(5);h.orient("left");u.orient("right");p.orient("bottom").tickPadding(5);
w.orient("left");J.orient("right");G.headerEnabled(!0).headerFormatter(function(a,c){return n.tickFormat()(a,c)});var fa=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},ia=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){G.duration(100).valueFormatter(function(a,c){return u.tickFormat()(a,c)}).data(a).position(a.pos).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",
function(a){G.hidden(!0)});t.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={value:a.y()(c.data),color:c.color};G.duration(0).valueFormatter(function(a,c){return h.tickFormat()(a,c)}).data(c).hidden(!1)});t.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)});t.dispatch.on("elementMousemove.tooltip",function(a){G.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=S;a.legend=C;a.lines=e;a.lines2=g;a.bars=t;a.bars2=l;a.xAxis=n;a.x2Axis=p;
a.y1Axis=h;a.y2Axis=u;a.y3Axis=w;a.y4Axis=J;a.tooltip=G;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return L},set:function(a){L=a}},height:{get:function(){return M},set:function(a){M=a}},showLegend:{get:function(){return U},set:function(a){U=a}},brushExtent:{get:function(){return Q},set:function(a){Q=a}},noData:{get:function(){return H},set:function(a){H=a}},focusEnable:{get:function(){return N},set:function(a){N=a}},focusHeight:{get:function(){return r},
set:function(a){r=a}},focusShowAxisX:{get:function(){return R},set:function(a){R=a}},focusShowAxisY:{get:function(){return P},set:function(a){P=a}},legendLeftAxisHint:{get:function(){return ma},set:function(a){ma=a}},legendRightAxisHint:{get:function(){return ua},set:function(a){ua=a}},tooltips:{get:function(){return G.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");G.enabled(!!a)}},tooltipContent:{get:function(){return G.contentGenerator()},set:function(a){c.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");G.contentGenerator(a)}},margin:{get:function(){return E},set:function(a){E.top=void 0!==a.top?a.top:E.top;E.right=void 0!==a.right?a.right:E.right;E.bottom=void 0!==a.bottom?a.bottom:E.bottom;E.left=void 0!==a.left?a.left:E.left}},duration:{get:function(){return X},set:function(a){X=a}},color:{get:function(){return F},set:function(a){F=c.utils.getColor(a);C.color(F)}},x:{get:function(){return I},set:function(a){I=a;e.x(a);g.x(a);t.x(a);l.x(a)}},y:{get:function(){return v},
set:function(a){v=a;e.y(a);g.y(a);t.y(a);l.y(a)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.lineWithFocusChart=function(){function a(y){y.each(function(y){function w(){u.empty()||u.extent(P);ha.data([u.empty()?F.domain():P]).each(function(a,c){var e=F(a[0])-I.range()[0],g=V-F(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",F(a[1])).attr("width",0>g?0:g)})}function H(){P=u.empty()?null:u.extent();var a=u.empty()?F.domain():
u.extent();1>=Math.abs(a[0]-a[1])||(r.brush({extent:a,brush:u}),w(),ia.select(".nv-focus .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}).map(function(c,g){return{key:c.key,area:c.area,values:c.values.filter(function(c,g){return e.x()(c,g)>=a[0]&&e.x()(c,g)<=a[1]})}})).transition().duration(K).call(e),ia.select(".nv-focus .nv-x.nv-axis").transition().duration(K).call(t),ia.select(".nv-focus .nv-y.nv-axis").transition().duration(K).call(l))}var S=d3.select(this),X=this;c.utils.initSVG(S);
var V=c.utils.availableWidth(E,S,C),da=c.utils.availableHeight(A,S,C)-L,ma=L-B.top-B.bottom;a.update=function(){S.transition().duration(K).call(a)};a.container=this;Q.setter(O(y),a.update).getter(q(y)).update();Q.disabled=y.map(function(a){return!!a.disabled});if(!D)for(R in D={},Q)D[R]=Q[R]instanceof Array?Q[R].slice(0):Q[R];if(y&&y.length&&y.filter(function(a){return a.values.length}).length)S.selectAll(".nv-noData").remove();else return c.utils.noData(a,S),a;I=e.xScale();v=e.yScale();F=g.xScale();
U=g.yScale();var R=S.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([y]);var fa=R.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),ia=R.select("g");fa.append("g").attr("class","nv-legendWrap");var oa=fa.append("g").attr("class","nv-focus");oa.append("g").attr("class","nv-x nv-axis");oa.append("g").attr("class","nv-y nv-axis");oa.append("g").attr("class","nv-linesWrap");oa.append("g").attr("class","nv-interactive");fa=fa.append("g").attr("class","nv-context");fa.append("g").attr("class",
"nv-x nv-axis");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-linesWrap");fa.append("g").attr("class","nv-brushBackground");fa.append("g").attr("class","nv-x nv-brush");N&&(h.width(V),ia.select(".nv-legendWrap").datum(y).call(h),C.top!=h.height()&&(C.top=h.height(),da=c.utils.availableHeight(A,S,C)-L),ia.select(".nv-legendWrap").attr("transform","translate(0,"+-C.top+")"));R.attr("transform","translate("+C.left+","+C.top+")");M&&(J.width(V).height(da).margin({left:C.left,
top:C.top}).svgContainer(S).xScale(I),R.select(".nv-interactive").call(J));e.width(V).height(da).color(y.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!y[c].disabled}));g.defined(e.defined()).width(V).height(ma).color(y.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!y[c].disabled}));ia.select(".nv-context").attr("transform","translate(0,"+(da+C.bottom+B.top)+")");R=ia.select(".nv-context .nv-linesWrap").datum(y.filter(function(a){return!a.disabled}));
d3.transition(R).call(g);t.scale(I)._ticks(c.utils.calcTicksX(V/100,y)).tickSize(-da,0);l.scale(v)._ticks(c.utils.calcTicksY(da/36,y)).tickSize(-V,0);ia.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+da+")");u.x(F).on("brush",function(){H()});P&&u.extent(P);var ha=ia.select(".nv-brushBackground").selectAll("g").data([P||u.extent()]),da=ha.enter().append("g");da.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",ma);da.append("rect").attr("class","right").attr("x",
0).attr("y",0).attr("height",ma);da=ia.select(".nv-x.nv-brush").call(u);da.selectAll("rect").attr("height",ma);da.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=ma/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});H();n.scale(F)._ticks(c.utils.calcTicksX(V/100,y)).tickSize(-ma,0);ia.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+
U.range()[0]+")");d3.transition(ia.select(".nv-context .nv-x.nv-axis")).call(n);p.scale(U)._ticks(c.utils.calcTicksY(ma/36,y)).tickSize(-V,0);d3.transition(ia.select(".nv-context .nv-y.nv-axis")).call(p);ia.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")");h.dispatch.on("stateChange",function(c){for(var e in c)Q[e]=c[e];r.stateChange(Q);a.update()});J.dispatch.on("elementMousemove",function(g){e.clearHighlights();var h,q,n,p=[];y.filter(function(a,c){a.seriesIndex=
c;return!a.disabled}).forEach(function(l,r){var t=u.empty()?F.domain():u.extent(),y=l.values.filter(function(a,c){return e.x()(a,c)>=t[0]&&e.x()(a,c)<=t[1]});q=c.interactiveBisect(y,g.pointXValue,e.x());y=y[q];null!=a.y()(y,q)&&e.highlightPoint(r,q,!0);void 0!==y&&(void 0===h&&(h=y),void 0===n&&(n=a.xScale()(a.x()(y,q))),p.push({key:l.key,value:a.y()(y,q),color:G(l,l.seriesIndex)}))});if(2<p.length){var r=a.yScale().invert(g.mouseY),D=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),r=
c.nearestValueIndex(p.map(function(a){return a.value}),r,D);null!==r&&(p[r].highlight=!0)}r=t.tickFormat()(a.x()(h,q));J.tooltip.position({left:g.mouseX+C.left,top:g.mouseY+C.top}).chartContainer(X.parentNode).valueFormatter(function(a,c){return null==a?"N/A":l.tickFormat()(a)}).data({value:r,index:q,series:p})();J.renderGuideLine(n)});J.dispatch.on("elementMouseout",function(a){e.clearHighlights()});r.on("changeState",function(c){"undefined"!==typeof c.disabled&&y.forEach(function(a,e){a.disabled=
c.disabled[e]});a.update()})});return a}var e=c.models.line(),g=c.models.line(),t=c.models.axis(),l=c.models.axis(),n=c.models.axis(),p=c.models.axis(),h=c.models.legend(),u=d3.svg.brush(),w=c.models.tooltip(),J=c.interactiveGuideline(),C={top:30,right:30,bottom:30,left:60},B={top:0,right:30,bottom:20,left:60},G=c.utils.defaultColor(),E=null,A=null,L=50,M=!1,I,v,F,U,N=!0,P=null,R=null,r=d3.dispatch("brush","stateChange","changeState"),K=250,Q=c.utils.state(),D=null;e.clipEdge(!0).duration(0);g.interactive(!1);
t.orient("bottom").tickPadding(5);l.orient("left");n.orient("bottom").tickPadding(5);p.orient("left");w.valueFormatter(function(a,c){return l.tickFormat()(a,c)}).headerFormatter(function(a,c){return t.tickFormat()(a,c)});var q=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},O=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(a){w.data(a).position(a.pos).hidden(!1)});
e.dispatch.on("elementMouseout.tooltip",function(a){w.hidden(!0)});a.dispatch=r;a.legend=h;a.lines=e;a.lines2=g;a.xAxis=t;a.yAxis=l;a.x2Axis=n;a.y2Axis=p;a.interactiveLayer=J;a.tooltip=w;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return E},set:function(a){E=a}},height:{get:function(){return A},set:function(a){A=a}},focusHeight:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return N},set:function(a){N=a}},brushExtent:{get:function(){return P},
set:function(a){P=a}},defaultState:{get:function(){return D},set:function(a){D=a}},noData:{get:function(){return R},set:function(a){R=a}},tooltips:{get:function(){return w.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");w.enabled(!!a)}},tooltipContent:{get:function(){return w.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");w.contentGenerator(a)}},margin:{get:function(){return C},set:function(a){C.top=
void 0!==a.top?a.top:C.top;C.right=void 0!==a.right?a.right:C.right;C.bottom=void 0!==a.bottom?a.bottom:C.bottom;C.left=void 0!==a.left?a.left:C.left}},color:{get:function(){return G},set:function(a){G=c.utils.getColor(a);h.color(G)}},interpolate:{get:function(){return e.interpolate()},set:function(a){e.interpolate(a);g.interpolate(a)}},xTickFormat:{get:function(){return t.tickFormat()},set:function(a){t.tickFormat(a);n.tickFormat(a)}},yTickFormat:{get:function(){return l.tickFormat()},set:function(a){l.tickFormat(a);
p.tickFormat(a)}},duration:{get:function(){return K},set:function(a){K=a;l.duration(K);p.duration(K);t.duration(K);n.duration(K)}},x:{get:function(){return e.x()},set:function(a){e.x(a);g.x(a)}},y:{get:function(){return e.y()},set:function(a){e.y(a);g.y(a)}},useInteractiveGuideline:{get:function(){return M},set:function(a){if(M=a)e.interactive(!1),e.useVoronoi(!1)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiBar=function(){function a(D){K.reset();D.each(function(a){var q=
g-e.left-e.right,y=t-e.top-e.bottom;h=d3.select(this);c.utils.initSVG(h);var D=0;A&&a.length&&(A=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);if(B){var aa=d3.layout.stack().offset(G).values(function(a){return a.values}).y(w)(!a.length&&A?A:a);aa.forEach(function(c,e){c.nonStackable?(a[e].nonStackableSeries=D++,aa[e]=a[e]):0<e&&aa[e-1].nonStackable&&aa[e].values.map(function(a,c){a.y0-=aa[e-1].values[c].y;a.y1=a.y0+a.y})});a=aa}a.forEach(function(a,c){a.values.forEach(function(e){e.series=
c;e.key=a.key})});B&&a[0].values.map(function(c,e){var g=0,h=0;a.map(function(c,l){if(!a[l].nonStackable){var q=c.values[e];q.size=Math.abs(q.y);0>q.y?(q.y1=h,h-=q.size):(q.y1=q.size+g,g+=q.size)}})});var H=v&&F?[]:a.map(function(a,c){return a.values.map(function(a,e){return{x:u(a,e),y:w(a,e),y0:a.y0,y1:a.y1,idx:c}})});l.domain(v||d3.merge(H).map(function(a){return a.x})).rangeBands(U||[0,q],P);n.domain(F||d3.extent(d3.merge(H).map(function(c){var e=c.y;B&&!a[c.idx].nonStackable&&(e=0<c.y?c.y1:c.y1+
c.y);return e}).concat(J))).range(N||[y,0]);l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1]));n.domain()[0]===n.domain()[1]&&(n.domain()[0]?n.domain([n.domain()[0]+.01*n.domain()[0],n.domain()[1]-.01*n.domain()[1]]):n.domain([-1,1]));r=r||n;var H=h.selectAll("g.nv-wrap.nv-multibar").data([a]),S=H.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),X=S.append("defs"),S=S.append("g"),ka=H.select("g");
S.append("g").attr("class","nv-groups");H.attr("transform","translate("+e.left+","+e.top+")");X.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect");H.select("#nv-edge-clip-"+p+" rect").attr("width",q).attr("height",y);ka.attr("clip-path",C?"url(#nv-edge-clip-"+p+")":"");q=H.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});q.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);y=K.transition(q.exit().selectAll("rect.nv-bar"),
"multibarExit",Math.min(100,I)).attr("y",function(c,e,g){e=r(0)||0;B&&a[c.series]&&!a[c.series].nonStackable&&(e=r(c.y0));return e}).attr("height",0).remove();y.delay&&y.delay(function(a,c){return I/(Q+1)*c-c});q.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return E(a,c)}).style("stroke",function(a,c){return E(a,c)});q.style("stroke-opacity",1).style("fill-opacity",.75);q=q.selectAll("rect.nv-bar").data(function(c){return A&&
!a.length?A.values:c.values});q.exit().remove();q.enter().append("rect").attr("class",function(a,c){return 0>w(a,c)?"nv-bar negative":"nv-bar positive"}).attr("x",function(c,e,g){return B&&!a[g].nonStackable?0:g*l.rangeBand()/a.length}).attr("y",function(c,e,g){return r(B&&!a[g].nonStackable?c.y0:0)||0}).attr("height",0).attr("width",function(c,e,g){return l.rangeBand()/(B&&!a[g].nonStackable?1:a.length)}).attr("transform",function(a,c){return"translate("+l(u(a,c))+",0)"});q.style("fill",function(a,
c,e){return E(a,e,c)}).style("stroke",function(a,c,e){return E(a,e,c)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);R.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);R.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){R.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){R.elementClick({data:a,
index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){R.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});q.attr("class",function(a,c){return 0>w(a,c)?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,c){return"translate("+l(u(a,c))+",0)"});L&&(M||(M=a.map(function(){return!0})),q.style("fill",function(a,c,e){return d3.rgb(L(a,c)).darker(M.map(function(a,c){return c}).filter(function(a,
c){return!M[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(L(a,c)).darker(M.map(function(a,c){return c}).filter(function(a,c){return!M[c]})[e]).toString()}));q=q.watchTransition(K,"multibar",Math.min(250,I)).delay(function(c,e){return e*I/a[0].values.length});B?q.attr("y",function(c,e,g){return a[g].nonStackable?0>w(c,e)?n(0):-1>n(0)-n(w(c,e))?n(0)-1:n(w(c,e))||0:n(c.y1)}).attr("height",function(c,e,g){return a[g].nonStackable?Math.max(Math.abs(n(w(c,e))-n(0)),1)||0:Math.max(Math.abs(n(c.y+
c.y0)-n(c.y0)),1)}).attr("x",function(c,e,g){e=0;a[g].nonStackable&&(e=c.series*l.rangeBand()/a.length,a.length!==D&&(e=a[g].nonStackableSeries*l.rangeBand()/(2*D)));return e}).attr("width",function(c,e,g){return a[g].nonStackable?(c=l.rangeBand()/D,a.length!==D&&(c=l.rangeBand()/(2*D)),c):l.rangeBand()}):q.attr("x",function(c,e){return c.series*l.rangeBand()/a.length}).attr("width",l.rangeBand()/a.length).attr("y",function(a,c){return 0>w(a,c)?n(0):1>n(0)-n(w(a,c))?n(0)-1:n(w(a,c))||0}).attr("height",
function(a,c){return Math.max(Math.abs(n(w(a,c))-n(0)),1)||0});l.copy();r=n.copy();a[0]&&a[0].values&&(Q=a[0].values.length)});K.renderEnd("multibar immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,t=500,l=d3.scale.ordinal(),n=d3.scale.linear(),p=Math.floor(1E4*Math.random()),h=null,u=function(a){return a.x},w=function(a){return a.y},J=[0],C=!0,B=!1,G="zero",E=c.utils.defaultColor(),A=!1,L=null,M,I=500,v,F,U,N,P=.1,R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover",
"elementMouseout","elementMousemove","renderEnd"),r,K=c.utils.renderWatch(R,I),Q=0;a.dispatch=R;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},xScale:{get:function(){return l},set:function(a){l=a}},yScale:{get:function(){return n},set:function(a){n=a}},xDomain:{get:function(){return v},
set:function(a){v=a}},yDomain:{get:function(){return F},set:function(a){F=a}},xRange:{get:function(){return U},set:function(a){U=a}},yRange:{get:function(){return N},set:function(a){N=a}},forceY:{get:function(){return J},set:function(a){J=a}},stacked:{get:function(){return B},set:function(a){B=a}},stackOffset:{get:function(){return G},set:function(a){G=a}},clipEdge:{get:function(){return C},set:function(a){C=a}},disabled:{get:function(){return M},set:function(a){M=a}},id:{get:function(){return p},
set:function(a){p=a}},hideable:{get:function(){return A},set:function(a){A=a}},groupSpacing:{get:function(){return P},set:function(a){P=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return I},set:function(a){I=a;K.reset(I)}},color:{get:function(){return E},set:function(a){E=c.utils.getColor(a)}},barColor:{get:function(){return L},
set:function(a){L=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarChart=function(){function a(p){Q.reset();Q.models(e);E&&Q.models(g);A&&Q.models(t);p.each(function(p){var y=d3.select(this);c.utils.initSVG(y);var H=c.utils.availableWidth(u,y,h),S=c.utils.availableHeight(w,y,h);a.update=function(){0===K?y.call(a):y.transition().duration(K).call(a)};a.container=this;N.setter(O(p),a.update).getter(q(p)).update();N.disabled=p.map(function(a){return!!a.disabled});if(!P)for(V in P=
{},N)P[V]=N[V]instanceof Array?N[V].slice(0):N[V];if(p&&p.length&&p.filter(function(a){return a.values.length}).length)y.selectAll(".nv-noData").remove();else return c.utils.noData(a,y),a;F=e.xScale();U=e.yScale();var X=y.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([p]),Q=X.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");var V=X.select("g");Q.append("g").attr("class","nv-x nv-axis");Q.append("g").attr("class","nv-y nv-axis");Q.append("g").attr("class","nv-barsWrap");
Q.append("g").attr("class","nv-legendWrap");Q.append("g").attr("class","nv-controlsWrap");G&&(l.width(H-(C?180:0)),V.select(".nv-legendWrap").datum(p).call(l),h.top!=l.height()&&(h.top=l.height(),S=c.utils.availableHeight(w,y,h)),V.select(".nv-legendWrap").attr("transform","translate("+(C?180:0)+","+-h.top+")"));if(C){var R=[{key:B.grouped||"Grouped",disabled:e.stacked()},{key:B.stacked||"Stacked",disabled:!e.stacked()}];n.width(C?180:0).color(["#444","#444","#444"]);V.select(".nv-controlsWrap").datum(R).attr("transform",
"translate(0,"+-h.top+")").call(n)}X.attr("transform","translate("+h.left+","+h.top+")");L&&V.select(".nv-y.nv-axis").attr("transform","translate("+H+",0)");e.disabled(p.map(function(a){return a.disabled})).width(H).height(S).color(p.map(function(a,c){return a.color||J(a,c)}).filter(function(a,c){return!p[c].disabled}));V.select(".nv-barsWrap").datum(p.filter(function(a){return!a.disabled})).call(e);if(E){g.scale(F)._ticks(c.utils.calcTicksX(H/100,p)).tickSize(-S,0);V.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+U.range()[0]+")");V.select(".nv-x.nv-axis").call(g);X=V.select(".nv-x.nv-axis > g").selectAll("g");X.selectAll("line, text").style("opacity",1);if(I){X.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?5:17)+")"});var ua=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;V.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,c){return"translate(0,"+(0===c||0!==ua%2?17:5)+")"})}M&&X.filter(function(a,c){return 0!==c%Math.ceil(p[0].values.length/
(H/100))}).selectAll("text, line").style("opacity",0);v&&X.selectAll(".tick text").attr("transform","rotate("+v+" 0,0)").style("text-anchor",0<v?"start":"end");V.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}A&&(t.scale(U)._ticks(c.utils.calcTicksY(S/36,p)).tickSize(-H,0),V.select(".nv-y.nv-axis").call(t));l.dispatch.on("stateChange",function(c){for(var e in c)N[e]=c[e];r.stateChange(N);a.update()});n.dispatch.on("legendClick",function(c,g){if(c.disabled){R=R.map(function(a){a.disabled=
!0;return a});c.disabled=!1;switch(c.key){case "Grouped":case B.grouped:e.stacked(!1);break;case "Stacked":case B.stacked:e.stacked(!0)}N.stacked=e.stacked();r.stateChange(N);a.update()}});r.on("changeState",function(c){"undefined"!==typeof c.disabled&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),N.disabled=c.disabled);"undefined"!==typeof c.stacked&&(e.stacked(c.stacked),D=N.stacked=c.stacked);a.update()})});Q.renderEnd("multibarchart immediate");return a}var e=c.models.multiBar(),g=c.models.axis(),
t=c.models.axis(),l=c.models.legend(),n=c.models.legend(),p=c.models.tooltip(),h={top:30,right:20,bottom:50,left:60},u=null,w=null,J=c.utils.defaultColor(),C=!0,B={},G=!0,E=!0,A=!0,L=!1,M=!0,I=!1,v=0,F,U,N=c.utils.state(),P=null,R=null,r=d3.dispatch("stateChange","changeState","renderEnd"),K=250;N.stacked=!1;e.stacked(!1);g.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a});t.orient(L?"right":"left").tickFormat(d3.format(",.1f"));p.duration(0).valueFormatter(function(a,
c){return t.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});n.updateState(!1);var Q=c.utils.renderWatch(r),D=!1,q=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:D}}},O=function(a){return function(c){void 0!==c.stacked&&(D=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};
p.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){p.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){p.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=r;a.multibar=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=t;a.state=N;a.tooltip=p;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return w},set:function(a){w=a}},showLegend:{get:function(){return G},
set:function(a){G=a}},showControls:{get:function(){return C},set:function(a){C=a}},controlLabels:{get:function(){return B},set:function(a){B=a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},defaultState:{get:function(){return P},set:function(a){P=a}},noData:{get:function(){return R},set:function(a){R=a}},reduceXTicks:{get:function(){return M},set:function(a){M=a}},rotateLabels:{get:function(){return v},set:function(a){v=a}},staggerLabels:{get:function(){return I},
set:function(a){I=a}},tooltips:{get:function(){return p.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");p.enabled(!!a)}},tooltipContent:{get:function(){return p.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");p.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;
h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return K},set:function(a){K=a;e.duration(K);g.duration(K);t.duration(K);Q.reset(K)}},color:{get:function(){return J},set:function(a){J=c.utils.getColor(a);l.color(J)}},rightAlignYAxis:{get:function(){return L},set:function(a){L=a;t.orient(L?"right":"left")}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);l.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);
return a};c.models.multiBarHorizontal=function(){function a(l){Q.reset();l.each(function(a){var l=g-e.left-e.right,q=t-e.top-e.bottom;n=d3.select(this);c.utils.initSVG(n);A&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(w)(a));a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});A&&a[0].values.map(function(c,e){var g=0,h=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=h-a.size,h-=a.size):(a.y1=g,g+=a.size)})});var D=F&&U?[]:
a.map(function(a){return a.values.map(function(a,c){return{x:u(a,c),y:w(a,c),y0:a.y0,y1:a.y1}})});p.domain(F||d3.merge(D).map(function(a){return a.x})).rangeBands(N||[0,q],I);h.domain(U||d3.extent(d3.merge(D).map(function(a){return A?0<a.y?a.y1+a.y:a.y1:a.y}).concat(C)));L&&!A?h.range(P||[0>h.domain()[0]?M:0,l-(0<h.domain()[1]?M:0)]):h.range(P||[0,l]);K=K||d3.scale.linear().domain(h.domain()).range([h(0),h(0)]);l=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);q=l.enter().append("g").attr("class",
"nvd3 nv-wrap nv-multibarHorizontal");q.append("defs");q=q.append("g");l.select("g");q.append("g").attr("class","nv-groups");l.attr("transform","translate("+e.left+","+e.top+")");l=l.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});l.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);l.exit().watchTransition(Q,"multibarhorizontal: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();l.attr("class",function(a,
c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return B(a,c)}).style("stroke",function(a,c){return B(a,c)});l.watchTransition(Q,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);l=l.selectAll("g.nv-bar").data(function(a){return a.values});l.exit().remove();q=l.enter().append("g").attr("transform",function(c,e,g){return"translate("+K(A?c.y0:0)+","+(A?0:g*p.rangeBand()/a.length+p(u(c,e)))+")"});q.append("rect").attr("width",
0).attr("height",p.rangeBand()/(A?1:a.length));l.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);r.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);r.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){r.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){r.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",
function(a,c){r.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){r.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});J(a[0],0)&&(q.append("polyline"),l.select("polyline").attr("fill","none").attr("points",function(c,e){var g=J(c,e),l=.8*p.rangeBand()/(2*(A?1:a.length)),g=g.length?g:[-Math.abs(g),Math.abs(g)],g=g.map(function(a){return h(a)-h(0)});return[[g[0],-l],[g[0],l],[g[0],
0],[g[1],0],[g[1],-l],[g[1],l]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(c,e){var g=p.rangeBand()/(2*(A?1:a.length));return"translate("+(0>w(c,e)?0:h(w(c,e))-h(0))+", "+g+")"}));q.append("text");L&&!A?(l.select("text").attr("text-anchor",function(a,c){return 0>w(a,c)?"end":"start"}).attr("y",p.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,c){var e=v(w(a,c)),g=J(a,c);return void 0===g?e:g.length?e+"+"+v(Math.abs(g[1]))+"-"+v(Math.abs(g[0])):e+"\u00b1"+
v(Math.abs(g))}),l.watchTransition(Q,"multibarhorizontal: bars").select("text").attr("x",function(a,c){return 0>w(a,c)?-4:h(w(a,c))-h(0)+4})):l.selectAll("text").text("");l.selectAll("text.nv-bar-label").text("");l.attr("class",function(a,c){return 0>w(a,c)?"nv-bar negative":"nv-bar positive"});G&&(E||(E=a.map(function(){return!0})),l.style("fill",function(a,c,e){return d3.rgb(G(a,c)).darker(E.map(function(a,c){return c}).filter(function(a,c){return!E[c]})[e]).toString()}).style("stroke",function(a,
c,e){return d3.rgb(G(a,c)).darker(E.map(function(a,c){return c}).filter(function(a,c){return!E[c]})[e]).toString()}));A?l.watchTransition(Q,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+h(a.y1)+","+p(u(a,c))+")"}).select("rect").attr("width",function(a,c){return Math.abs(h(w(a,c)+a.y0)-h(a.y0))}).attr("height",p.rangeBand()):l.watchTransition(Q,"multibarhorizontal: bars").attr("transform",function(c,e){return"translate("+(0>w(c,e)?h(w(c,e)):h(0))+","+(c.series*p.rangeBand()/
a.length+p(u(c,e)))+")"}).select("rect").attr("height",p.rangeBand()/a.length).attr("width",function(a,c){return Math.max(Math.abs(h(w(a,c))-h(0)),1)});p.copy();K=h.copy()});Q.renderEnd("multibarHorizontal immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=960,t=500,l=Math.floor(1E4*Math.random()),n=null,p=d3.scale.ordinal(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},J=function(a){return a.yErr},C=[0],B=c.utils.defaultColor(),G=null,E,A=!1,L=!1,M=60,I=.1,v=d3.format(",.2f"),
F,U,N,P,R=250,r=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),K,Q=c.utils.renderWatch(r,R);a.dispatch=r;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},yErr:{get:function(){return J},set:function(a){J=
a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return F},set:function(a){F=a}},yDomain:{get:function(){return U},set:function(a){U=a}},xRange:{get:function(){return N},set:function(a){N=a}},yRange:{get:function(){return P},set:function(a){P=a}},forceY:{get:function(){return C},set:function(a){C=a}},stacked:{get:function(){return A},set:function(a){A=a}},showValues:{get:function(){return L},set:function(a){L=
a}},disabled:{get:function(){return E},set:function(a){E=a}},id:{get:function(){return l},set:function(a){l=a}},valueFormat:{get:function(){return v},set:function(a){v=a}},valuePadding:{get:function(){return M},set:function(a){M=a}},groupSpacing:{get:function(){return I},set:function(a){I=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},
duration:{get:function(){return R},set:function(a){R=a;Q.reset(R)}},color:{get:function(){return B},set:function(a){B=c.utils.getColor(a)}},barColor:{get:function(){return G},set:function(a){G=a?c.utils.getColor(a):null}}});c.utils.initOptions(a);return a};c.models.multiBarHorizontalChart=function(){function a(p){K.reset();K.models(e);E&&K.models(g);A&&K.models(t);p.each(function(p){var q=d3.select(this);c.utils.initSVG(q);var D=c.utils.availableWidth(u,q,h),y=c.utils.availableHeight(w,q,h);a.update=
function(){q.transition().duration(P).call(a)};a.container=this;L=e.stacked();v.setter(r(p),a.update).getter(R(p)).update();v.disabled=p.map(function(a){return!!a.disabled});if(!F)for(K in F={},v)F[K]=v[K]instanceof Array?v[K].slice(0):v[K];if(p&&p.length&&p.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return c.utils.noData(a,q),a;M=e.xScale();I=e.yScale();var K=q.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([p]);var Q=K.enter().append("g").attr("class",
"nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),H=K.select("g");Q.append("g").attr("class","nv-x nv-axis");Q.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");Q.append("g").attr("class","nv-barsWrap");Q.append("g").attr("class","nv-legendWrap");Q.append("g").attr("class","nv-controlsWrap");G&&(l.width(D-(C?180:0)),H.select(".nv-legendWrap").datum(p).call(l),h.top!=l.height()&&(h.top=l.height(),y=c.utils.availableHeight(w,q,h)),H.select(".nv-legendWrap").attr("transform",
"translate("+(C?180:0)+","+-h.top+")"));if(C){var S=[{key:B.grouped||"Grouped",disabled:e.stacked()},{key:B.stacked||"Stacked",disabled:!e.stacked()}];n.width(C?180:0).color(["#444","#444","#444"]);H.select(".nv-controlsWrap").datum(S).attr("transform","translate(0,"+-h.top+")").call(n)}K.attr("transform","translate("+h.left+","+h.top+")");e.disabled(p.map(function(a){return a.disabled})).width(D).height(y).color(p.map(function(a,c){return a.color||J(a,c)}).filter(function(a,c){return!p[c].disabled}));
H.select(".nv-barsWrap").datum(p.filter(function(a){return!a.disabled})).transition().call(e);E&&(g.scale(M)._ticks(c.utils.calcTicksX(y/24,p)).tickSize(-D,0),H.select(".nv-x.nv-axis").call(g),H.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));A&&(t.scale(I)._ticks(c.utils.calcTicksY(D/100,p)).tickSize(-y,0),H.select(".nv-y.nv-axis").attr("transform","translate(0,"+y+")"),H.select(".nv-y.nv-axis").call(t));H.select(".nv-zeroLine line").attr("x1",I(0)).attr("x2",I(0)).attr("y1",0).attr("y2",
-y);l.dispatch.on("stateChange",function(c){for(var e in c)v[e]=c[e];N.stateChange(v);a.update()});n.dispatch.on("legendClick",function(c,g){if(c.disabled){S=S.map(function(a){a.disabled=!0;return a});c.disabled=!1;switch(c.key){case "Grouped":e.stacked(!1);break;case "Stacked":e.stacked(!0)}v.stacked=e.stacked();N.stateChange(v);L=e.stacked();a.update()}});N.on("changeState",function(c){"undefined"!==typeof c.disabled&&(p.forEach(function(a,e){a.disabled=c.disabled[e]}),v.disabled=c.disabled);"undefined"!==
typeof c.stacked&&(e.stacked(c.stacked),L=v.stacked=c.stacked);a.update()})});K.renderEnd("multibar horizontal chart immediate");return a}var e=c.models.multiBarHorizontal(),g=c.models.axis(),t=c.models.axis(),l=c.models.legend().height(30),n=c.models.legend().height(30),p=c.models.tooltip(),h={top:30,right:20,bottom:50,left:60},u=null,w=null,J=c.utils.defaultColor(),C=!0,B={},G=!0,E=!0,A=!0,L=!1,M,I,v=c.utils.state(),F=null,U=null,N=d3.dispatch("stateChange","changeState","renderEnd"),P=250;v.stacked=
!1;e.stacked(L);g.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a});t.orient("bottom").tickFormat(d3.format(",.1f"));p.duration(0).valueFormatter(function(a,c){return t.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});n.updateState(!1);var R=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:L}}},r=function(a){return function(c){void 0!==c.stacked&&(L=c.stacked);void 0!==c.active&&a.forEach(function(a,
e){a.disabled=!c.active[e]})}},K=c.utils.renderWatch(N,P);e.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};p.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){p.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){p.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=N;a.multibar=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=t;a.state=v;a.tooltip=p;a.options=c.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return w},set:function(a){w=a}},showLegend:{get:function(){return G},set:function(a){G=a}},showControls:{get:function(){return C},set:function(a){C=a}},controlLabels:{get:function(){return B},set:function(a){B=a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},defaultState:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return U},
set:function(a){U=a}},tooltips:{get:function(){return p.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");p.enabled(!!a)}},tooltipContent:{get:function(){return p.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");p.contentGenerator(a)}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;
h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return P},set:function(a){P=a;K.reset(P);e.duration(P);g.duration(P);t.duration(P)}},color:{get:function(){return J},set:function(a){J=c.utils.getColor(a);l.color(J)}},barColor:{get:function(){return e.barColor},set:function(a){e.barColor(a);l.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.multiChart=function(){function a(p){p.each(function(q){function p(a){var c=
2===q[a.seriesIndex].yAxis?R:P;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color};K.duration(100).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).position(a.pos).hidden(!1)}function y(a){var c=2===q[a.seriesIndex].yAxis?R:P;a.point.x=F.x()(a.point);a.point.y=F.y()(a.point);K.duration(100).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).position(a.pos).hidden(!1)}function w(a){var c=2===q[a.data.series].yAxis?R:P;a.value=I.x()(a.data);a.series={value:I.y()(a.data),
color:a.color};K.duration(0).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}var D=d3.select(this);c.utils.initSVG(D);a.update=function(){D.transition().call(a)};a.container=this;var H=c.utils.availableWidth(t,D,e),B=c.utils.availableHeight(l,D,e),J=q.filter(function(a){return"line"==a.type&&1==a.yAxis}),Q=q.filter(function(a){return"line"==a.type&&2==a.yAxis}),da=q.filter(function(a){return"bar"==a.type&&1==a.yAxis}),ma=q.filter(function(a){return"bar"==a.type&&2==a.yAxis}),
ua=q.filter(function(a){return"area"==a.type&&1==a.yAxis}),fa=q.filter(function(a){return"area"==a.type&&2==a.yAxis});if(q&&q.length&&q.filter(function(a){return a.values.length}).length)D.selectAll(".nv-noData").remove();else return c.utils.noData(a,D),a;var ia=q.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:a.x,y:a.y}})}),oa=q.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:a.x,
y:a.y}})});G.domain(d3.extent(d3.merge(ia.concat(oa)),function(a){return a.x})).range([0,H]);var ha=D.selectAll("g.wrap.multiChart").data([q]),ja=ha.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ja.append("g").attr("class","nv-x nv-axis");ja.append("g").attr("class","nv-y1 nv-axis");ja.append("g").attr("class","nv-y2 nv-axis");ja.append("g").attr("class","lines1Wrap");ja.append("g").attr("class","lines2Wrap");ja.append("g").attr("class","bars1Wrap");ja.append("g").attr("class",
"bars2Wrap");ja.append("g").attr("class","stack1Wrap");ja.append("g").attr("class","stack2Wrap");ja.append("g").attr("class","legendWrap");ha=ha.select("g");ja=q.map(function(a,c){return q[c].color||g(a,c)});if(n){var ra=r.align()?H/2:H,ya=r.align()?ra:0;r.width(ra);r.color(ja);ha.select(".legendWrap").datum(q.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(r);e.top!=r.height()&&(e.top=r.height(),B=c.utils.availableHeight(l,
D,e));ha.select(".legendWrap").attr("transform","translate("+ya+","+-e.top+")")}L.width(H).height(B).interpolate(C).color(ja.filter(function(a,c){return!q[c].disabled&&1==q[c].yAxis&&"line"==q[c].type}));M.width(H).height(B).interpolate(C).color(ja.filter(function(a,c){return!q[c].disabled&&2==q[c].yAxis&&"line"==q[c].type}));I.width(H).height(B).color(ja.filter(function(a,c){return!q[c].disabled&&1==q[c].yAxis&&"bar"==q[c].type}));v.width(H).height(B).color(ja.filter(function(a,c){return!q[c].disabled&&
2==q[c].yAxis&&"bar"==q[c].type}));F.width(H).height(B).color(ja.filter(function(a,c){return!q[c].disabled&&1==q[c].yAxis&&"area"==q[c].type}));U.width(H).height(B).color(ja.filter(function(a,c){return!q[c].disabled&&2==q[c].yAxis&&"area"==q[c].type}));ha.attr("transform","translate("+e.left+","+e.top+")");var ja=ha.select(".lines1Wrap").datum(J.filter(function(a){return!a.disabled})),ra=ha.select(".bars1Wrap").datum(da.filter(function(a){return!a.disabled})),ya=ha.select(".stack1Wrap").datum(ua.filter(function(a){return!a.disabled})),
na=ha.select(".lines2Wrap").datum(Q.filter(function(a){return!a.disabled})),Ia=ha.select(".bars2Wrap").datum(ma.filter(function(a){return!a.disabled})),Ja=ha.select(".stack2Wrap").datum(fa.filter(function(a){return!a.disabled})),Ca=ua.length?ua.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[],Ba=fa.length?fa.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,
y:0}]):[];E.domain(h||d3.extent(d3.merge(ia).concat(Ca),function(a){return a.y})).range([0,B]);A.domain(u||d3.extent(d3.merge(oa).concat(Ba),function(a){return a.y})).range([0,B]);L.yDomain(E.domain());I.yDomain(E.domain());F.yDomain(E.domain());M.yDomain(A.domain());v.yDomain(A.domain());U.yDomain(A.domain());ua.length&&d3.transition(ya).call(F);fa.length&&d3.transition(Ja).call(U);da.length&&d3.transition(ra).call(I);ma.length&&d3.transition(Ia).call(v);J.length&&d3.transition(ja).call(L);Q.length&&
d3.transition(na).call(M);N._ticks(c.utils.calcTicksX(H/100,q)).tickSize(-B,0);ha.select(".nv-x.nv-axis").attr("transform","translate(0,"+B+")");d3.transition(ha.select(".nv-x.nv-axis")).call(N);P._ticks(c.utils.calcTicksY(B/36,q)).tickSize(-H,0);d3.transition(ha.select(".nv-y1.nv-axis")).call(P);R._ticks(c.utils.calcTicksY(B/36,q)).tickSize(-H,0);d3.transition(ha.select(".nv-y2.nv-axis")).call(R);ha.select(".nv-y1.nv-axis").classed("nv-disabled",ia.length?!1:!0).attr("transform","translate("+G.range()[0]+
",0)");ha.select(".nv-y2.nv-axis").classed("nv-disabled",oa.length?!1:!0).attr("transform","translate("+G.range()[1]+",0)");r.dispatch.on("stateChange",function(c){a.update()});L.dispatch.on("elementMouseover.tooltip",p);M.dispatch.on("elementMouseover.tooltip",p);L.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});M.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});F.dispatch.on("elementMouseover.tooltip",y);U.dispatch.on("elementMouseover.tooltip",y);F.dispatch.on("elementMouseout.tooltip",
function(a){K.hidden(!0)});U.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});I.dispatch.on("elementMouseover.tooltip",w);v.dispatch.on("elementMouseover.tooltip",w);I.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});v.dispatch.on("elementMouseout.tooltip",function(a){K.hidden(!0)});I.dispatch.on("elementMousemove.tooltip",function(a){K.position({top:d3.event.pageY,left:d3.event.pageX})()});v.dispatch.on("elementMousemove.tooltip",function(a){K.position({top:d3.event.pageY,
left:d3.event.pageX})()})});return a}var e={top:30,right:20,bottom:50,left:60},g=c.utils.defaultColor(),t=null,l=null,n=!0,p=null,h,u,w=function(a){return a.x},J=function(a){return a.y},C="monotone",B=!0,G=d3.scale.linear(),E=d3.scale.linear(),A=d3.scale.linear(),L=c.models.line().yScale(E),M=c.models.line().yScale(A),I=c.models.multiBar().stacked(!1).yScale(E),v=c.models.multiBar().stacked(!1).yScale(A),F=c.models.stackedArea().yScale(E),U=c.models.stackedArea().yScale(A),N=c.models.axis().scale(G).orient("bottom").tickPadding(5),
P=c.models.axis().scale(E).orient("left"),R=c.models.axis().scale(A).orient("right"),r=c.models.legend().height(30),K=c.models.tooltip(),Q=d3.dispatch();a.dispatch=Q;a.lines1=L;a.lines2=M;a.bars1=I;a.bars2=v;a.stack1=F;a.stack2=U;a.xAxis=N;a.yAxis1=P;a.yAxis2=R;a.tooltip=K;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return l},set:function(a){l=a}},showLegend:{get:function(){return n},set:function(a){n=
a}},yDomain1:{get:function(){return h},set:function(a){h=a}},yDomain2:{get:function(){return u},set:function(a){u=a}},noData:{get:function(){return p},set:function(a){p=a}},interpolate:{get:function(){return C},set:function(a){C=a}},tooltips:{get:function(){return K.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");K.enabled(!!a)}},tooltipContent:{get:function(){return K.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");
K.contentGenerator(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return g},set:function(a){g=c.utils.getColor(a)}},x:{get:function(){return w},set:function(a){w=a;L.x(a);M.x(a);I.x(a);v.x(a);F.x(a);U.x(a)}},y:{get:function(){return J},set:function(a){J=a;L.y(a);M.y(a);F.y(a);U.y(a);I.y(a);v.y(a)}},useVoronoi:{get:function(){return B},
set:function(a){B=a;L.useVoronoi(a);M.useVoronoi(a);F.useVoronoi(a);U.useVoronoi(a)}}});c.utils.initOptions(a);return a};c.models.ohlcBar=function(){function a(r){r.each(function(a){n=d3.select(this);var r=c.utils.availableWidth(g,n,e),v=c.utils.availableHeight(t,n,e);c.utils.initSVG(n);var q=r/a[0].values.length*.9;p.domain(F||d3.extent(a[0].values.map(u).concat(E)));L?p.range(N||[.5*r/a[0].values.length,r*(a[0].values.length-.5)/a[0].values.length]):p.range(N||[5+q/2,r-q/2-5]);h.domain(U||[d3.min(a[0].values.map(G).concat(A)),
d3.max(a[0].values.map(B).concat(A))]).range(P||[v,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1]));var K=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),y=K.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),V=y.append("defs"),y=y.append("g"),
aa=K.select("g");y.append("g").attr("class","nv-ticks");K.attr("transform","translate("+e.left+","+e.top+")");n.on("click",function(a,c){R.chartClick({data:a,index:c,pos:d3.event,id:l})});V.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect");K.select("#nv-chart-clip-path-"+l+" rect").attr("width",r).attr("height",v);aa.attr("clip-path",M?"url(#nv-chart-clip-path-"+l+")":"");v=K.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});v.exit().remove();v.enter().append("path").attr("class",
function(a,c,e){return(J(a,c)>C(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c}).attr("d",function(a,c){return"m0,0l0,"+(h(J(a,c))-h(B(a,c)))+"l"+-q/2+",0l"+q/2+",0l0,"+(h(G(a,c))-h(J(a,c)))+"l0,"+(h(C(a,c))-h(G(a,c)))+"l"+q/2+",0l"+-q/2+",0z"}).attr("transform",function(a,c){return"translate("+p(u(a,c))+","+h(B(a,c))+")"}).attr("fill",function(a,c){return I[0]}).attr("stroke",function(a,c){return I[0]}).attr("x",0).attr("y",function(a,c){return h(Math.max(0,w(a,c)))}).attr("height",
function(a,c){return Math.abs(h(w(a,c))-h(0))});v.attr("class",function(a,c,e){return(J(a,c)>C(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});d3.transition(v).attr("transform",function(a,c){return"translate("+p(u(a,c))+","+h(B(a,c))+")"}).attr("d",function(c,e){var g=r/a[0].values.length*.9;return"m0,0l0,"+(h(J(c,e))-h(B(c,e)))+"l"+-g/2+",0l"+g/2+",0l0,"+(h(G(c,e))-h(J(c,e)))+"l0,"+(h(C(c,e))-h(G(c,e)))+"l"+g/2+",0l"+-g/2+",0z"})});return a}var e={top:0,right:0,bottom:0,left:0},
g=null,t=null,l=Math.floor(1E4*Math.random()),n=null,p=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},J=function(a){return a.open},C=function(a){return a.close},B=function(a){return a.high},G=function(a){return a.low},E=[],A=[],L=!1,M=!0,I=c.utils.defaultColor(),v=!1,F,U,N,P,R=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");
a.highlightPoint=function(c,e){a.clearHighlights();n.select(".nv-ohlcBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){n.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)};a.dispatch=R;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},xDomain:{get:function(){return F},
set:function(a){F=a}},yDomain:{get:function(){return U},set:function(a){U=a}},xRange:{get:function(){return N},set:function(a){N=a}},yRange:{get:function(){return P},set:function(a){P=a}},forceX:{get:function(){return E},set:function(a){E=a}},forceY:{get:function(){return A},set:function(a){A=a}},padData:{get:function(){return L},set:function(a){L=a}},clipEdge:{get:function(){return M},set:function(a){M=a}},id:{get:function(){return l},set:function(a){l=a}},interactive:{get:function(){return v},set:function(a){v=
a}},x:{get:function(){return u},set:function(a){u=a}},y:{get:function(){return w},set:function(a){w=a}},open:{get:function(){return J()},set:function(a){J=a}},close:{get:function(){return C()},set:function(a){C=a}},high:{get:function(){return B},set:function(a){B=a}},low:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?
a.left:e.left}},color:{get:function(){return I},set:function(a){I=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.parallelCoordinates=function(){function a(E){E.each(function(a){function A(a){return R(p.map(function(c){if(isNaN(a[c])||isNaN(parseFloat(a[c]))){var e=n[c].domain(),g=n[c].range(),h=e[0]-(e[1]-e[0])/9;0>Q.indexOf(c)&&(e=d3.scale.linear().domain([h,e[1]]).range([U-12,g[1]]),n[c].brush.y(e),Q.push(c));return[l(c),n[c](h)]}0<Q.length?(q.style("display","inline"),O.style("display",
"inline")):(q.style("display","none"),O.style("display","none"));return[l(c),n[c](a[c])]}))}function E(){var a=p.filter(function(a){return!n[a].brush.empty()}),c=a.map(function(a){return n[a].brush.extent()});w=[];a.forEach(function(a,e){w[e]={dimension:a,extent:c[e]}});J=[];V.style("display",function(e){var g=a.every(function(a,g){return isNaN(e[a])&&c[g][0]==n[a].brush.y().domain()[0]?!0:c[g][0]<=e[a]&&e[a]<=c[g][1]});g&&J.push(e);return g?null:"none"});G.brush({filters:w,active:J})}function I(a){var c=
C[a];return null==c?l(a):c}var v=d3.select(this),F=c.utils.availableWidth(g,v,e),U=c.utils.availableHeight(t,v,e);c.utils.initSVG(v);J=a;l.rangePoints([0,F],1).domain(p);p.forEach(function(c){var e=d3.extent(a,function(a){return+a[c]});void 0===e[0]&&(e[0]=0,e[1]=0);e[0]===e[1]&&(--e[0],e[1]+=1);n[c]=d3.scale.linear().domain(e).range([.9*(U-12),0]);n[c].brush=d3.svg.brush().y(n[c]).on("brush",E);return"name"!=c});var v=v.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]),N=v.enter().append("g").attr("class",
"nvd3 nv-wrap nv-parallelCoordinates").append("g"),P=v.select("g");N.append("g").attr("class","nv-parallelCoordinates background");N.append("g").attr("class","nv-parallelCoordinates foreground");N.append("g").attr("class","nv-parallelCoordinates missingValuesline");v.attr("transform","translate("+e.left+","+e.top+")");var R=d3.svg.line().interpolate("cardinal").tension(B),r=d3.svg.axis().orient("left"),N=d3.behavior.drag().on("dragstart",function(a,c){C[a]=this.parentNode.__origin__=l(a);y.attr("visibility",
"hidden")}).on("drag",function(a,c){C[a]=Math.min(F,Math.max(0,this.parentNode.__origin__+=d3.event.x));V.attr("d",A);p.sort(function(a,c){return I(a)-I(c)});l.domain(p);aa.attr("transform",function(a){return"translate("+I(a)+")"})}).on("dragend",function(a,c){delete this.parentNode.__origin__;delete C[a];d3.select(this.parentNode).attr("transform","translate("+l(a)+")");V.attr("d",A);y.attr("d",A).attr("visibility",null)}),K=l.range()[1]-l.range()[0],Q=[],D=[0+K/2,U-12,F-K/2,U-12];var q=v.select(".missingValuesline").selectAll("line").data([D]);
q.enter().append("line");q.exit().remove();q.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]});var O=v.select(".missingValuesline").selectAll("text").data(["undefined values"]);O.append("text").data(["undefined values"]);O.enter().append("text");O.exit().remove();O.attr("y",U).attr("x",F-92-K/2).text(function(a){return a});var y=v.select(".background").selectAll("path").data(a);y.enter().append("path");y.exit().remove();
y.attr("d",A);var V=v.select(".foreground").selectAll("path").data(a);V.enter().append("path");V.exit().remove();V.attr("d",A).attr("stroke",u);V.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);G.elementMouseover({label:a.name,data:a.data,index:c,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})});V.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);G.elementMouseout({label:a.name,data:a.data,index:c})});var aa=P.selectAll(".dimension").data(p),v=aa.enter().append("g").attr("class",
"nv-parallelCoordinates dimension");v.append("g").attr("class","nv-parallelCoordinates nv-axis");v.append("g").attr("class","nv-parallelCoordinates-brush");v.append("text").attr("class","nv-parallelCoordinates nv-label");aa.attr("transform",function(a){return"translate("+l(a)+",0)"});aa.exit().remove();aa.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(a,c){G.elementMouseover({dim:a,pos:[d3.mouse(this.parentNode.parentNode)[0],
d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(a,c){G.elementMouseout({dim:a})}).call(N);aa.select(".nv-axis").each(function(a,c){d3.select(this).call(r.scale(n[a]).tickFormat(d3.format(h[c])))});aa.select(".nv-parallelCoordinates-brush").each(function(a){d3.select(this).call(n[a].brush)}).selectAll("rect").attr("x",-8).attr("width",16)});return a}var e={top:30,right:0,bottom:10,left:0},g=null,t=null,l=d3.scale.ordinal(),n={},p=[],h=[],u=c.utils.defaultColor(),w=[],J=[],C=[],
B=1,G=d3.dispatch("brush","elementMouseover","elementMouseout");a.dispatch=G;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},dimensionNames:{get:function(){return p},set:function(a){p=a}},dimensionFormats:{get:function(){return h},set:function(a){h=a}},lineTension:{get:function(){return B},set:function(a){B=a}},dimensions:{get:function(){return p},set:function(a){c.deprecated("dimensions",
"use dimensionNames instead");p=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.pie=function(){function a(q){D.reset();q.each(function(a){var q=g-e.left-e.right,O=t-e.top-e.bottom,aa=Math.min(q,O)/2,H=[],S=[];h=d3.select(this);
if(0===R.length)for(var X=aa-aa/5,ka=P*aa,da=0;da<a[0].length;da++)H.push(X),S.push(ka);else H=R.map(function(a){return(a.outer-a.outer/5)*aa}),S=R.map(function(a){return(a.inner-a.inner/5)*aa}),P=d3.min(R.map(function(a){return a.inner-a.inner/5}));c.utils.initSVG(h);var X=h.selectAll(".nv-wrap.nv-pie").data(a),da=X.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+p).append("g"),ma=X.select("g"),ka=da.append("g").attr("class","nv-pie");da.append("g").attr("class","nv-pieLabels");
X.attr("transform","translate("+e.left+","+e.top+")");ma.select(".nv-pie").attr("transform","translate("+q/2+","+O/2+")");ma.select(".nv-pieLabels").attr("transform","translate("+q/2+","+O/2+")");h.on("click",function(a,c){r.chartClick({data:a,index:c,pos:d3.event,id:p})});K=[];Q=[];for(da=0;da<a[0].length;da++){var ma=d3.svg.arc().outerRadius(H[da]),ua=d3.svg.arc().outerRadius(H[da]+5);!1!==v&&(ma.startAngle(v),ua.startAngle(v));!1!==U&&(ma.endAngle(U),ua.endAngle(U));E&&(ma.innerRadius(S[da]),ua.innerRadius(S[da]));
ma.cornerRadius&&N&&(ma.cornerRadius(N),ua.cornerRadius(N));K.push(ma);Q.push(ua)}S=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:n(a)});S.padAngle&&F&&S.padAngle(F);E&&A&&(ka.append("text").attr("class","nv-pie-title"),X.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return A}).style("font-size",Math.min(q,O)*P*2/(A.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,c){return"translate(0, "+M+")"}));q=X.select(".nv-pie").selectAll(".nv-slice").data(S);
O=X.select(".nv-pieLabels").selectAll(".nv-label").data(S);q.exit().remove();O.exit().remove();S=q.enter().append("g");S.attr("class","nv-slice");S.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);L&&d3.select(this).select("path").transition().duration(70).attr("d",Q[c]);r.elementMouseover({data:a.data,index:c,color:d3.select(this).style("fill")})});S.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);L&&d3.select(this).select("path").transition().duration(50).attr("d",
K[c]);r.elementMouseout({data:a.data,index:c})});S.on("mousemove",function(a,c){r.elementMousemove({data:a.data,index:c})});S.on("click",function(a,c){r.elementClick({data:a.data,index:c,color:d3.select(this).style("fill")})});S.on("dblclick",function(a,c){r.elementDblClick({data:a.data,index:c,color:d3.select(this).style("fill")})});q.attr("fill",function(a,c){return u(a.data,c)});q.attr("stroke",function(a,c){return u(a.data,c)});S.append("path").each(function(a){this._current=a});q.select("path").transition().attr("d",
function(a,c){return K[c](a)}).attrTween("d",function(a,c){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;E||(a.innerRadius=0);var e=d3.interpolate(this._current,a);this._current=e(0);return function(a){return K[c](e(a))}});if(J){for(var fa=[],da=0;da<a[0].length;da++)fa.push(K[da]),C?E&&(fa[da]=d3.svg.arc().outerRadius(K[da].outerRadius()),!1!==v&&fa[da].startAngle(v),!1!==U&&fa[da].endAngle(U)):E||fa[da].innerRadius(0);O.enter().append("g").classed("nv-label",
!0).each(function(a,c){var e=d3.select(this);e.attr("transform",function(a,c){if(I){a.outerRadius=H[c]+10;a.innerRadius=H[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+fa[c].centroid(a)+") rotate("+e+")"}a.outerRadius=aa+10;a.innerRadius=aa+15;return"translate("+fa[c].centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",I?(a.startAngle+
a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var ia={},oa=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};O.watchTransition(D,"pie labels").attr("transform",function(a,c){if(I){a.outerRadius=H[c]+10;a.innerRadius=H[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+fa[c].centroid(a)+") rotate("+e+")"}a.outerRadius=aa+10;a.innerRadius=aa+15;e=fa[c].centroid(a);if(a.value){var g=oa(e);
ia[g]&&(e[1]-=14);ia[oa(e)]=!0}return"translate("+e+")"});O.select(".nv-label text").style("text-anchor",function(a,c){return I?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,c){var e=(a.endAngle-a.startAngle)/(2*Math.PI),g="";if(!a.value||e<G)return"";if("function"===typeof B)g=B(a,c,{key:l(a.data),value:n(a.data),percent:w(e)});else switch(B){case "key":g=l(a.data);break;case "value":g=w(n(a.data));break;case "percent":g=d3.format("%")(e)}return g})}});D.renderEnd("pie immediate");
return a}var e={top:0,right:0,bottom:0,left:0},g=500,t=500,l=function(a){return a.x},n=function(a){return a.y},p=Math.floor(1E4*Math.random()),h=null,u=c.utils.defaultColor(),w=d3.format(",.2f"),J=!0,C=!1,B="key",G=.02,E=!1,A=!1,L=!0,M=0,I=!1,v=!1,F=!1,U=!1,N=0,P=.5,R=[],r=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),K=[],Q=[],D=c.utils.renderWatch(r);a.dispatch=r;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},
{arcsRadius:{get:function(){return R},set:function(a){R=a}},width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},showLabels:{get:function(){return J},set:function(a){J=a}},title:{get:function(){return A},set:function(a){A=a}},titleOffset:{get:function(){return M},set:function(a){M=a}},labelThreshold:{get:function(){return G},set:function(a){G=a}},valueFormat:{get:function(){return w},set:function(a){w=a}},x:{get:function(){return l},set:function(a){l=
a}},id:{get:function(){return p},set:function(a){p=a}},endAngle:{get:function(){return U},set:function(a){U=a}},startAngle:{get:function(){return v},set:function(a){v=a}},padAngle:{get:function(){return F},set:function(a){F=a}},cornerRadius:{get:function(){return N},set:function(a){N=a}},donutRatio:{get:function(){return P},set:function(a){P=a}},labelsOutside:{get:function(){return C},set:function(a){C=a}},labelSunbeamLayout:{get:function(){return I},set:function(a){I=a}},donut:{get:function(){return E},
set:function(a){E=a}},growOnHover:{get:function(){return L},set:function(a){L=a}},pieLabelsOutside:{get:function(){return C},set:function(a){C=a;c.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return C},set:function(a){C=a;c.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return w},set:function(a){w=a;c.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(a){e.top=
"undefined"!=typeof a.top?a.top:e.top;e.right="undefined"!=typeof a.right?a.right:e.right;e.bottom="undefined"!=typeof a.bottom?a.bottom:e.bottom;e.left="undefined"!=typeof a.left?a.left:e.left}},y:{get:function(){return n},set:function(a){n=d3.functor(a)}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}},labelType:{get:function(){return B},set:function(a){B=a||"key"}}});c.utils.initOptions(a);return a};c.models.pieChart=function(){function a(t){A.reset();A.models(e);t.each(function(t){var v=
d3.select(this);c.utils.initSVG(v);var w=c.utils.availableWidth(n,v,l),A=c.utils.availableHeight(p,v,l);a.update=function(){v.transition().call(a)};a.container=this;J.setter(M(t),a.update).getter(L(t)).update();J.disabled=t.map(function(a){return!!a.disabled});if(!C)for(B in C={},J)C[B]=J[B]instanceof Array?J[B].slice(0):J[B];if(t&&t.length)v.selectAll(".nv-noData").remove();else return c.utils.noData(a,v),a;var B=v.selectAll("g.nv-wrap.nv-pieChart").data([t]);var I=B.enter().append("g").attr("class",
"nvd3 nv-wrap nv-pieChart").append("g"),r=B.select("g");I.append("g").attr("class","nv-pieWrap");I.append("g").attr("class","nv-legendWrap");h&&("top"===u?(g.width(w).key(e.x()),B.select(".nv-legendWrap").datum(t).call(g),l.top!=g.height()&&(l.top=g.height(),A=c.utils.availableHeight(p,v,l)),B.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")):"right"===u&&(I=c.models.legend().width(),w/2<I&&(I=w/2),g.height(A).key(e.x()),g.width(I),w-=g.width(),B.select(".nv-legendWrap").datum(t).call(g).attr("transform",
"translate("+w+",0)")));B.attr("transform","translate("+l.left+","+l.top+")");e.width(w).height(A);w=r.select(".nv-pieWrap").datum([t]);d3.transition(w).call(e);g.dispatch.on("stateChange",function(c){for(var e in c)J[e]=c[e];E.stateChange(J);a.update()});E.on("changeState",function(c){"undefined"!==typeof c.disabled&&(t.forEach(function(a,e){a.disabled=c.disabled[e]}),J.disabled=c.disabled);a.update()})});A.renderEnd("pieChart immediate");return a}var e=c.models.pie(),g=c.models.legend(),t=c.models.tooltip(),
l={top:30,right:20,bottom:20,left:20},n=null,p=null,h=!0,u="top",w=c.utils.defaultColor(),J=c.utils.state(),C=null,B=null,G=250,E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");t.headerEnabled(!1).duration(0).valueFormatter(function(a,c){return e.valueFormat()(a,c)});var A=c.utils.renderWatch(E),L=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},M=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=
!c.active[e]})}};e.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};t.data(c).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){t.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",function(a){t.position({top:d3.event.pageY,left:d3.event.pageX})()});a.legend=g;a.dispatch=E;a.pie=e;a.tooltip=t;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return n},set:function(a){n=a}},height:{get:function(){return p},
set:function(a){p=a}},noData:{get:function(){return B},set:function(a){B=a}},showLegend:{get:function(){return h},set:function(a){h=a}},legendPosition:{get:function(){return u},set:function(a){u=a}},defaultState:{get:function(){return C},set:function(a){C=a}},tooltips:{get:function(){return t.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");t.enabled(!!a)}},tooltipContent:{get:function(){return t.contentGenerator()},set:function(a){c.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");t.contentGenerator(a)}},color:{get:function(){return w},set:function(a){w=a;g.color(w);e.color(w)}},duration:{get:function(){return G},set:function(a){G=a;A.reset(G)}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.scatter=
function(){function a(H){ma.reset();H.each(function(a){p=d3.select(this);var H=c.utils.availableWidth(g,p,e),fa=c.utils.availableHeight(t,p,e);c.utils.initSVG(p);a.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var ja=r&&K&&q?[]:d3.merge(a.map(function(a){return a.values.map(function(a,c){return{x:J(a,c),y:C(a,c),size:B(a,c)}})}));h.domain(r||d3.extent(ja.map(function(a){return a.x}).concat(E)));v&&a[0]?h.range(Q||[(H*F+H)/(2*a[0].values.length),H-H*(1+F)/(2*a[0].values.length)]):
h.range(Q||[0,H]);u.domain(K||d3.extent(ja.map(function(a){return a.y}).concat(A))).range(D||[fa,0]);w.domain(q||d3.extent(ja.map(function(a){return a.size}).concat(L))).range(O||ua);y=h.domain()[0]===h.domain()[1]||u.domain()[0]===u.domain()[1];h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1]));u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-.01*u.domain()[0],u.domain()[1]+.01*u.domain()[1]]):
u.domain([-1,1]));isNaN(h.domain()[0])&&h.domain([-1,1]);isNaN(u.domain()[0])&&u.domain([-1,1]);S=S||h;X=X||u;var ra=p.selectAll("g.nv-wrap.nv-scatter").data([a]),ja=ra.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+n),ia=ja.append("defs"),na=ja.append("g"),Ia=ra.select("g");ra.classed("nv-single-point",y);na.append("g").attr("class","nv-groups");na.append("g").attr("class","nv-point-paths");ja.append("g").attr("class","nv-point-clips");ra.attr("transform","translate("+e.left+
","+e.top+")");ia.append("clipPath").attr("id","nv-edge-clip-"+n).append("rect");ra.select("#nv-edge-clip-"+n+" rect").attr("width",H).attr("height",0<fa?fa:0);Ia.attr("clip-path",U?"url(#nv-edge-clip-"+n+")":"");da=!0;H=ra.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});H.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);H.exit().remove();H.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});
H.watchTransition(ma,"scatter: groups").style("fill",function(a,c){return l(a,c)}).style("stroke",function(a,c){return l(a,c)}).style("stroke-opacity",1).style("fill-opacity",.5);fa=H.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return I(a[0],c)})});fa.enter().append("path").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",function(a){return"translate("+S(J(a[0],a[1]))+","+X(C(a[0],
a[1]))+")"}).attr("d",c.utils.symbol().type(function(a){return G(a[0])}).size(function(a){return w(B(a[0],a[1]))}));fa.exit().remove();H.exit().selectAll("path.nv-point").watchTransition(ma,"scatter exit").attr("transform",function(a){return"translate("+h(J(a[0],a[1]))+","+u(C(a[0],a[1]))+")"}).remove();fa.each(function(a){d3.select(this).classed("nv-point",!0).classed("nv-point-"+a[1],!0).classed("nv-noninteractive",!M).classed("hover",!1)});fa.watchTransition(ma,"scatter points").attr("transform",
function(a){return"translate("+h(J(a[0],a[1]))+","+u(C(a[0],a[1]))+")"}).attr("d",c.utils.symbol().type(function(a){return G(a[0])}).size(function(a){return w(B(a[0],a[1]))}));clearTimeout(ka);ka=setTimeout(function(){da=!1;if(!M)return!1;if(!0===aa){var c=d3.merge(a.map(function(a,c){return a.values.map(function(a,e){var g=J(a,e),l=C(a,e);return[h(g)+1E-4*Math.random(),u(l)+1E-4*Math.random(),c,e,a]}).filter(function(a,c){return I(a[4],c)})}));if(0==c.length)return!1;3>c.length&&(c.push([h.range()[0]-
20,u.range()[0]-20,null,null]),c.push([h.range()[1]+20,u.range()[1]+20,null,null]),c.push([h.range()[0]-20,u.range()[0]+20,null,null]),c.push([h.range()[1]+20,u.range()[1]-20,null,null]));var q=d3.geom.polygon([[-10,-10],[-10,t+10],[g+10,t+10],[g+10,-10]]),n=d3.geom.voronoi(c).map(function(a,e){return{data:q.clip(a),series:c[e][2],point:c[e][3]}});ra.select(".nv-point-paths").selectAll("path").remove();var n=ra.select(".nv-point-paths").selectAll("path").data(n),r=n.enter().append("svg:path").attr("d",
function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,c){return"nv-path-"+c}).attr("clip-path",function(a,c){return"url(#nv-clip-"+c+")"});P&&r.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));N&&(ra.select(".nv-point-clips").selectAll("clipPath").remove(),ra.select(".nv-point-clips").selectAll("clipPath").data(c).enter().append("svg:clipPath").attr("id",function(a,c){return"nv-clip-"+
c}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",R));var v=function(c,g){if(da)return 0;var q=a[c.series];if(void 0!==q){var n=q.values[c.point];n.color=l(q,c.series);n.x=J(n);n.y=C(n);var t=p.node().getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,v=window.pageXOffset||document.documentElement.scrollLeft,t={left:h(J(n,c.point))+t.left+v+e.left+10,top:u(C(n,c.point))+t.top+r+e.top+10};g({point:n,series:q,pos:t,
seriesIndex:c.series,pointIndex:c.point})}};n.on("click",function(a){v(a,V.elementClick)}).on("dblclick",function(a){v(a,V.elementDblClick)}).on("mouseover",function(a){v(a,V.elementMouseover)}).on("mouseout",function(a,c){v(a,V.elementMouseout)})}else ra.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(c,g){if(da||!a[c.series])return 0;var l=a[c.series],q=l.values[g];V.elementClick({point:q,series:l,pos:[h(J(q,g))+e.left,u(C(q,g))+e.top],seriesIndex:c.series,
pointIndex:g})}).on("dblclick",function(c,g){if(da||!a[c.series])return 0;var l=a[c.series],q=l.values[g];V.elementDblClick({point:q,series:l,pos:[h(J(q,g))+e.left,u(C(q,g))+e.top],seriesIndex:c.series,pointIndex:g})}).on("mouseover",function(c,g){if(da||!a[c.series])return 0;var q=a[c.series],n=q.values[g];V.elementMouseover({point:n,series:q,pos:[h(J(n,g))+e.left,u(C(n,g))+e.top],seriesIndex:c.series,pointIndex:g,color:l(c,g)})}).on("mouseout",function(c,e){if(da||!a[c.series])return 0;var g=a[c.series];
V.elementMouseout({point:g.values[e],series:g,seriesIndex:c.series,pointIndex:e,color:l(c,e)})})},300);S=h.copy();X=u.copy();w.copy()});ma.renderEnd("scatter immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=null,t=null,l=c.utils.defaultColor(),n=Math.floor(1E5*Math.random()),p=null,h=d3.scale.linear(),u=d3.scale.linear(),w=d3.scale.linear(),J=function(a){return a.x},C=function(a){return a.y},B=function(a){return a.size||1},G=function(a){return a.shape||"circle"},E=[],A=[],L=[],M=!0,I=
function(a){return!a.notActive},v=!1,F=.1,U=!1,N=!0,P=!1,R=function(){return 25},r=null,K=null,Q=null,D=null,q=null,O=null,y=!1,V=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),aa=!0,H=250,S,X,ka,da=!1,ma=c.utils.renderWatch(V,H),ua=[16,256];a.dispatch=V;a.options=c.utils.optionsFunc.bind(a);a._calls=new function(){this.clearHighlights=function(){c.dom.write(function(){p.selectAll(".nv-point.hover").classed("hover",!1)});return null};this.highlightPoint=
function(a,e,g){c.dom.write(function(){p.select(" .nv-series-"+a+" .nv-point-"+e).classed("hover",g)})}};V.on("elementMouseover.point",function(c){M&&a._calls.highlightPoint(c.seriesIndex,c.pointIndex,!0)});V.on("elementMouseout.point",function(c){M&&a._calls.highlightPoint(c.seriesIndex,c.pointIndex,!1)});a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},xScale:{get:function(){return h},set:function(a){h=a}},
yScale:{get:function(){return u},set:function(a){u=a}},pointScale:{get:function(){return w},set:function(a){w=a}},xDomain:{get:function(){return r},set:function(a){r=a}},yDomain:{get:function(){return K},set:function(a){K=a}},pointDomain:{get:function(){return q},set:function(a){q=a}},xRange:{get:function(){return Q},set:function(a){Q=a}},yRange:{get:function(){return D},set:function(a){D=a}},pointRange:{get:function(){return O},set:function(a){O=a}},forceX:{get:function(){return E},set:function(a){E=
a}},forceY:{get:function(){return A},set:function(a){A=a}},forcePoint:{get:function(){return L},set:function(a){L=a}},interactive:{get:function(){return M},set:function(a){M=a}},pointActive:{get:function(){return I},set:function(a){I=a}},padDataOuter:{get:function(){return F},set:function(a){F=a}},padData:{get:function(){return v},set:function(a){v=a}},clipEdge:{get:function(){return U},set:function(a){U=a}},clipVoronoi:{get:function(){return N},set:function(a){N=a}},clipRadius:{get:function(){return R},
set:function(a){R=a}},showVoronoi:{get:function(){return P},set:function(a){P=a}},id:{get:function(){return n},set:function(a){n=a}},x:{get:function(){return J},set:function(a){J=d3.functor(a)}},y:{get:function(){return C},set:function(a){C=d3.functor(a)}},pointSize:{get:function(){return B},set:function(a){B=d3.functor(a)}},pointShape:{get:function(){return G},set:function(a){G=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?
a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},duration:{get:function(){return H},set:function(a){H=a;ma.reset(H)}},color:{get:function(){return l},set:function(a){l=c.utils.getColor(a)}},useVoronoi:{get:function(){return aa},set:function(a){aa=a;!1===aa&&(N=!1)}}});c.utils.initOptions(a);return a};c.models.scatterChart=function(){function a(q){K.reset();K.models(e);I&&K.models(g);v&&K.models(t);A&&K.models(n);L&&K.models(p);q.each(function(q){C=
d3.select(this);c.utils.initSVG(C);var y=c.utils.availableWidth(w,C,u),O=c.utils.availableHeight(J,C,u);a.update=function(){0===r?C.call(a):C.transition().duration(r).call(a)};a.container=this;U.setter(D(q),a.update).getter(Q(q)).update();U.disabled=q.map(function(a){return!!a.disabled});if(!N)for(H in N={},U)N[H]=U[H]instanceof Array?U[H].slice(0):U[H];if(q&&q.length&&q.filter(function(a){return a.values.length}).length)C.selectAll(".nv-noData").remove();else return c.utils.noData(a,C),K.renderEnd("scatter immediate"),
a;G=e.xScale();E=e.yScale();var R=C.selectAll("g.nv-wrap.nv-scatterChart").data([q]);var H=R.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g");var S=R.select("g");H.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");H.append("g").attr("class","nv-x nv-axis");H.append("g").attr("class","nv-y nv-axis");H.append("g").attr("class","nv-scatterWrap");H.append("g").attr("class","nv-regressionLinesWrap");H.append("g").attr("class",
"nv-distWrap");H.append("g").attr("class","nv-legendWrap");F&&S.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");M&&(l.width(y),R.select(".nv-legendWrap").datum(q).call(l),u.top!=l.height()&&(u.top=l.height(),O=c.utils.availableHeight(J,C,u)),R.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")"));R.attr("transform","translate("+u.left+","+u.top+")");e.width(y).height(O).color(q.map(function(a,c){a.color=a.color||B(a,c);return a.color}).filter(function(a,c){return!q[c].disabled}));
R.select(".nv-scatterWrap").datum(q.filter(function(a){return!a.disabled})).call(e);R.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");R=R.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});R.enter().append("g").attr("class","nv-regLines");R=R.selectAll(".nv-regLine").data(function(a){return[a]});R.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);R.filter(function(a){return a.intercept&&a.slope}).watchTransition(K,
"scatterPlusLineChart: regline").attr("x1",G.range()[0]).attr("x2",G.range()[1]).attr("y1",function(a,c){return E(G.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,c){return E(G.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,c,e){return B(a,e)}).style("stroke-opacity",function(a,c){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});I&&(g.scale(G)._ticks(c.utils.calcTicksX(y/100,q)).tickSize(-O,0),S.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+E.range()[0]+")").call(g));v&&(t.scale(E)._ticks(c.utils.calcTicksY(O/36,q)).tickSize(-y,0),S.select(".nv-y.nv-axis").call(t));A&&(n.getData(e.x()).scale(G).width(y).color(q.map(function(a,c){return a.color||B(a,c)}).filter(function(a,c){return!q[c].disabled})),H.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),S.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(q.filter(function(a){return!a.disabled})).call(n));L&&(p.getData(e.y()).scale(E).width(O).color(q.map(function(a,
c){return a.color||B(a,c)}).filter(function(a,c){return!q[c].disabled})),H.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),S.select(".nv-distributionY").attr("transform","translate("+(F?y:-p.size())+",0)").datum(q.filter(function(a){return!a.disabled})).call(p));l.dispatch.on("stateChange",function(c){for(var e in c)U[e]=c[e];P.stateChange(U);a.update()});P.on("changeState",function(c){"undefined"!==typeof c.disabled&&(q.forEach(function(a,e){a.disabled=c.disabled[e]}),U.disabled=
c.disabled);a.update()});e.dispatch.on("elementMouseout.tooltip",function(a){h.hidden(!0);C.select(".nv-chart-"+e.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);C.select(".nv-chart-"+e.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",p.size())});e.dispatch.on("elementMouseover.tooltip",function(a){C.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos.top-O-u.top);C.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",
a.pos.left+n.size()-u.left);h.position(a.pos).data(a).hidden(!1)});G.copy();E.copy()});K.renderEnd("scatter with line immediate");return a}var e=c.models.scatter(),g=c.models.axis(),t=c.models.axis(),l=c.models.legend(),n=c.models.distribution(),p=c.models.distribution(),h=c.models.tooltip(),u={top:30,right:20,bottom:50,left:75},w=null,J=null,C=null,B=c.utils.defaultColor(),G=e.xScale(),E=e.yScale(),A=!1,L=!1,M=!0,I=!0,v=!0,F=!1,U=c.utils.state(),N=null,P=d3.dispatch("stateChange","changeState","renderEnd"),
R=null,r=250;e.xScale(G).yScale(E);g.orient("bottom").tickPadding(10);t.orient(F?"right":"left").tickPadding(10);n.axis("x");p.axis("y");h.headerFormatter(function(a,c){return g.tickFormat()(a,c)}).valueFormatter(function(a,c){return t.tickFormat()(a,c)});var K=c.utils.renderWatch(P,r),Q=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},D=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=P;a.scatter=
e;a.legend=l;a.xAxis=g;a.yAxis=t;a.distX=n;a.distY=p;a.tooltip=h;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return J},set:function(a){J=a}},container:{get:function(){return C},set:function(a){C=a}},showDistX:{get:function(){return A},set:function(a){A=a}},showDistY:{get:function(){return L},set:function(a){L=a}},showLegend:{get:function(){return M},set:function(a){M=a}},showXAxis:{get:function(){return I},
set:function(a){I=a}},showYAxis:{get:function(){return v},set:function(a){v=a}},defaultState:{get:function(){return N},set:function(a){N=a}},noData:{get:function(){return R},set:function(a){R=a}},duration:{get:function(){return r},set:function(a){r=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");
h.contentGenerator(a)}},tooltipXContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},tooltipYContent:{get:function(){return h.contentGenerator()},set:function(a){c.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?
a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},rightAlignYAxis:{get:function(){return F},set:function(a){F=a;t.orient(a?"right":"left")}},color:{get:function(){return B},set:function(a){B=c.utils.getColor(a);l.color(B);n.color(B);p.color(B)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sparkline=function(){function a(n){n.each(function(a){var n=g-e.left-e.right,A=t-e.top-e.bottom;l=d3.select(this);c.utils.initSVG(l);p.domain(C||d3.extent(a,u)).range(G||[0,n]);
h.domain(B||d3.extent(a,w)).range(E||[A,0]);a=l.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+e.left+","+e.top+")");n=a.selectAll("path").data(function(a){return[a]});n.enter().append("path");n.exit().remove();n.style("stroke",function(a,c){return a.color||J(a,c)}).attr("d",d3.svg.line().x(function(a,c){return p(u(a,c))}).y(function(a,c){return h(w(a,c))}));a=a.selectAll("circle.nv-point").data(function(a){function c(c){if(-1!=
c){var e=a[c];e.pointIndex=c;return e}return null}var e=a.map(function(a,c){return w(a,c)}),g=c(e.lastIndexOf(h.domain()[1])),l=c(e.indexOf(h.domain()[0])),e=c(e.length-1);return[l,g,e].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,c){return p(u(a,a.pointIndex))}).attr("cy",function(a,c){return h(w(a,a.pointIndex))}).attr("r",2).attr("class",function(a,c){return u(a,a.pointIndex)==p.domain()[1]?"nv-point nv-currentValue":w(a,a.pointIndex)==
h.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var e={top:2,right:0,bottom:2,left:0},g=400,t=32,l=null,n=!0,p=d3.scale.linear(),h=d3.scale.linear(),u=function(a){return a.x},w=function(a){return a.y},J=c.utils.getColor(["#000"]),C,B,G,E;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return B},
set:function(a){B=a}},xRange:{get:function(){return G},set:function(a){G=a}},yRange:{get:function(){return E},set:function(a){E=a}},xScale:{get:function(){return p},set:function(a){p=a}},yScale:{get:function(){return h},set:function(a){h=a}},animate:{get:function(){return n},set:function(a){n=a}},x:{get:function(){return u},set:function(a){u=d3.functor(a)}},y:{get:function(){return w},set:function(a){w=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;
e.right=void 0!==a.right?a.right:e.right;e.bottom=void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return J},set:function(a){J=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.sparklinePlus=function(){function a(A){A.each(function(A){function E(){if(!u){var a=R.selectAll(".nv-hoverValue").data(h),c=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",
0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+n(e.x()(A[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);h.length&&(c.append("line").attr("x1",0).attr("y1",-g.top).attr("x2",0).attr("y2",F),c.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-g.top).attr("text-anchor","end").attr("dy",".9em"),R.select(".nv-hoverValue .nv-xValue").text(w(e.x()(A[h[0]],h[0]))),c.append("text").attr("class","nv-yValue").attr("x",
6).attr("y",-g.top).attr("text-anchor","start").attr("dy",".9em"),R.select(".nv-hoverValue .nv-yValue").text(J(e.y()(A[h[0]],h[0]))))}}var I=d3.select(this);c.utils.initSVG(I);var v=c.utils.availableWidth(t,I,g),F=c.utils.availableHeight(l,I,g);a.update=function(){I.call(a)};a.container=this;if(A&&A.length)I.selectAll(".nv-noData").remove();else return c.utils.noData(a,I),a;var L=e.y()(A[A.length-1],A.length-1);n=e.xScale();p=e.yScale();var N=I.selectAll("g.nv-wrap.nv-sparklineplus").data([A]),P=
N.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),R=N.select("g");P.append("g").attr("class","nv-sparklineWrap");P.append("g").attr("class","nv-valueWrap");P.append("g").attr("class","nv-hoverArea");N.attr("transform","translate("+g.left+","+g.top+")");N=R.select(".nv-sparklineWrap");e.width(v).height(F);N.call(e);C&&(N=R.select(".nv-valueWrap").selectAll(".nv-currentValue").data([L]),N.enter().append("text").attr("class","nv-currentValue").attr("dx",G?-8:8).attr("dy",
".9em").style("text-anchor",G?"end":"start"),N.attr("x",v+(G?g.right:0)).attr("y",B?function(a){return p(a)}:0).style("fill",e.color()(A[A.length-1],A.length-1)).text(J(L)));P.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!u){for(var a=d3.mouse(this)[0]-g.left,a=Math.round(n.invert(a)),c=Math.abs(e.x()(A[0],0)-a),l=0,p=0;p<A.length;p++)Math.abs(e.x()(A[p],p)-a)<c&&(c=Math.abs(e.x()(A[p],p)-a),l=p);h=[l];E()}}).on("click",function(){u=!u}).on("mouseout",function(){h=[];E()});
R.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-g.left+","+-g.top+")"}).attr("width",v+g.left+g.right).attr("height",F+g.top)});return a}var e=c.models.sparkline(),g={top:15,right:100,bottom:10,left:50},t=null,l=null,n,p,h=[],u=!1,w=d3.format(",r"),J=d3.format(",.2f"),C=!0,B=!0,G=!1,E=null;a.sparkline=e;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return l},set:function(a){l=
a}},xTickFormat:{get:function(){return w},set:function(a){w=a}},yTickFormat:{get:function(){return J},set:function(a){J=a}},showLastValue:{get:function(){return C},set:function(a){C=a}},alignValue:{get:function(){return B},set:function(a){B=a}},rightAlignValue:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return E},set:function(a){E=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==
a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.stackedArea=function(){function a(w){v.reset();v.models(L);w.each(function(w){var F=g-e.left-e.right,M=t-e.top-e.bottom;p=d3.select(this);c.utils.initSVG(p);E=L.xScale();A=L.yScale();var U=w;w.forEach(function(a,c){a.seriesIndex=c;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=c;return a})});w=w.filter(function(a){return!a.disabled});w=d3.layout.stack().order(C).offset(J).values(function(a){return a.values}).x(h).y(u).out(function(a,
c,e){a.display={y:e,y0:c}})(w);var r=p.selectAll("g.nv-wrap.nv-stackedarea").data([w]),K=r.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),Q=K.append("defs"),K=K.append("g"),D=r.select("g");K.append("g").attr("class","nv-areaWrap");K.append("g").attr("class","nv-scatterWrap");r.attr("transform","translate("+e.left+","+e.top+")");0==L.forceY().length&&L.forceY().push(0);L.width(F).height(M).x(h).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(w.map(function(a,c){return a.color||
l(a,a.seriesIndex)}));D.select(".nv-scatterWrap").datum(w).call(L);Q.append("clipPath").attr("id","nv-edge-clip-"+n).append("rect");r.select("#nv-edge-clip-"+n+" rect").attr("width",F).attr("height",M);D.attr("clip-path",G?"url(#nv-edge-clip-"+n+")":"");var q=d3.svg.area().x(function(a,c){return E(h(a,c))}).y0(function(a){return A(a.display.y0)}).y1(function(a){return A(a.display.y+a.display.y0)}).interpolate(B),O=d3.svg.area().x(function(a,c){return E(h(a,c))}).y0(function(a){return A(a.display.y0)}).y1(function(a){return A(a.display.y0)}),
F=D.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});F.enter().append("path").attr("class",function(a,c){return"nv-area nv-area-"+c}).attr("d",function(a,c){return O(a.values,a.seriesIndex)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);I.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);I.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,c){d3.select(this).classed("hover",!1);I.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});F.exit().remove();F.style("fill",function(a,c){return a.color||l(a,a.seriesIndex)}).style("stroke",function(a,c){return a.color||l(a,a.seriesIndex)});F.watchTransition(v,"stackedArea path").attr("d",function(a,c){return q(a.values,c)});L.dispatch.on("elementMouseover.area",function(a){D.select(".nv-chart-"+
n+" .nv-area-"+a.seriesIndex).classed("hover",!0)});L.dispatch.on("elementMouseout.area",function(a){D.select(".nv-chart-"+n+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var c=a.length,e=a[0].length,g,h,l,n=[];for(h=0;h<e;++h){for(l=g=0;g<U.length;g++)l+=u(U[g].values[h]);if(l)for(g=0;g<c;g++)a[g][h][1]/=l;else for(g=0;g<c;g++)a[g][h][1]=0}for(h=0;h<e;++h)n[h]=0;return n}});v.renderEnd("stackedArea immediate");return a}var e={top:0,right:0,bottom:0,
left:0},g=960,t=500,l=c.utils.defaultColor(),n=Math.floor(1E5*Math.random()),p=null,h=function(a){return a.x},u=function(a){return a.y},w="stack",J="zero",C="default",B="linear",G=!1,E,A,L=c.models.scatter(),M=250,I=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");L.pointSize(2.2).pointDomain([2.2,2.2]);var v=c.utils.renderWatch(I,M);a.dispatch=I;a.scatter=L;L.dispatch.on("elementClick",function(){I.elementClick.apply(this,arguments)});
L.dispatch.on("elementMouseover",function(){I.elementMouseover.apply(this,arguments)});L.dispatch.on("elementMouseout",function(){I.elementMouseout.apply(this,arguments)});a.interpolate=function(c){if(!arguments.length)return B;B=c;return a};a.duration=function(c){if(!arguments.length)return M;M=c;v.reset(M);L.duration(M);return a};a.dispatch=I;a.scatter=L;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},
set:function(a){t=a}},clipEdge:{get:function(){return G},set:function(a){G=a}},offset:{get:function(){return J},set:function(a){J=a}},order:{get:function(){return C},set:function(a){C=a}},interpolate:{get:function(){return B},set:function(a){B=a}},x:{get:function(){return h},set:function(a){h=d3.functor(a)}},y:{get:function(){return u},set:function(a){u=d3.functor(a)}},margin:{get:function(){return e},set:function(a){e.top=void 0!==a.top?a.top:e.top;e.right=void 0!==a.right?a.right:e.right;e.bottom=
void 0!==a.bottom?a.bottom:e.bottom;e.left=void 0!==a.left?a.left:e.left}},color:{get:function(){return l},set:function(a){l=c.utils.getColor(a)}},style:{get:function(){return w},set:function(c){w=c;switch(w){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),
a.order("default")}}},duration:{get:function(){return M},set:function(a){M=a;v.reset(M);L.duration(M)}}});c.utils.inheritOptions(a,L);c.utils.initOptions(a);return a};c.models.stackedAreaChart=function(){function a(h){O.reset();O.models(e);E&&O.models(g);A&&O.models(t);h.each(function(h){var H=d3.select(this),O=this;c.utils.initSVG(H);var N=c.utils.availableWidth(w,H,u),S=c.utils.availableHeight(J,H,u);a.update=function(){H.transition().duration(Q).call(a)};a.container=this;F.setter(V(h),a.update).getter(y(h)).update();
F.disabled=h.map(function(a){return!!a.disabled});if(!U)for(ia in U={},F)U[ia]=F[ia]instanceof Array?F[ia].slice(0):F[ia];if(h&&h.length&&h.filter(function(a){return a.values.length}).length)H.selectAll(".nv-noData").remove();else return c.utils.noData(a,H),a;I=e.xScale();v=e.yScale();var ua=H.selectAll("g.nv-wrap.nv-stackedAreaChart").data([h]),fa=ua.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");var ia=ua.select("g");fa.append("rect").style("opacity",0);fa.append("g").attr("class",
"nv-x nv-axis");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-stackedWrap");fa.append("g").attr("class","nv-legendWrap");fa.append("g").attr("class","nv-controlsWrap");fa.append("g").attr("class","nv-interactive");ia.select("rect").attr("width",N).attr("height",S);G&&(fa=B?N-R:N,l.width(fa),ia.select(".nv-legendWrap").datum(h).call(l),u.top!=l.height()&&(u.top=l.height(),S=c.utils.availableHeight(J,H,u)),ia.select(".nv-legendWrap").attr("transform","translate("+(N-fa)+
","+-u.top+")"));if(B){var oa=[{key:K.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=e.style(),style:"stack"},{key:K.stream||"Stream",metaKey:"Stream",disabled:"stream"!=e.style(),style:"stream"},{key:K.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=e.style(),style:"expand"},{key:K.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=e.style(),style:"stack_percent"}];R=r.length/3*260;oa=oa.filter(function(a){return-1!==r.indexOf(a.metaKey)});n.width(R).color(["#444",
"#444","#444"]);ia.select(".nv-controlsWrap").datum(oa).call(n);u.top!=Math.max(n.height(),l.height())&&(u.top=Math.max(n.height(),l.height()),S=c.utils.availableHeight(J,H,u));ia.select(".nv-controlsWrap").attr("transform","translate(0,"+-u.top+")")}ua.attr("transform","translate("+u.left+","+u.top+")");L&&ia.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)");M&&(p.width(N).height(S).margin({left:u.left,top:u.top}).svgContainer(H).xScale(I),ua.select(".nv-interactive").call(p));e.width(N).height(S);
ia.select(".nv-stackedWrap").datum(h).transition().call(e);E&&(g.scale(I)._ticks(c.utils.calcTicksX(N/100,h)).tickSize(-S,0),ia.select(".nv-x.nv-axis").attr("transform","translate(0,"+S+")"),ia.select(".nv-x.nv-axis").transition().duration(0).call(g));A&&(S="wiggle"===e.offset()?0:c.utils.calcTicksY(S/36,h),t.scale(v)._ticks(S).tickSize(-N,0),"expand"===e.style()||"stack_percent"===e.style()?(N=t.tickFormat(),D&&N===aa||(D=N),t.tickFormat(aa)):D&&(t.tickFormat(D),D=null),ia.select(".nv-y.nv-axis").transition().duration(0).call(t));
e.dispatch.on("areaClick.toggle",function(c){1===h.filter(function(a){return!a.disabled}).length?h.forEach(function(a){a.disabled=!1}):h.forEach(function(a,e){a.disabled=e!=c.seriesIndex});F.disabled=h.map(function(a){return!!a.disabled});P.stateChange(F);a.update()});l.dispatch.on("stateChange",function(c){for(var e in c)F[e]=c[e];P.stateChange(F);a.update()});n.dispatch.on("legendClick",function(c,g){c.disabled&&(oa=oa.map(function(a){a.disabled=!0;return a}),c.disabled=!1,e.style(c.style),F.style=
e.style(),P.stateChange(F),a.update())});p.dispatch.on("elementMousemove",function(l){e.clearHighlights();var n,t,r,v=[];h.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,h){t=c.interactiveBisect(g.values,l.pointXValue,a.x());var q=g.values[t];null!=a.y()(q,t)&&e.highlightPoint(h,t,!0);if("undefined"!==typeof q){"undefined"===typeof n&&(n=q);"undefined"===typeof r&&(r=a.xScale()(a.x()(q,t)));var p="expand"==e.style()?q.display.y:a.y()(q,t);v.push({key:g.key,value:p,color:C(g,
g.seriesIndex),stackedValue:q.display})}});v.reverse();if(2<v.length){var w=a.yScale().invert(l.mouseY),y=null;v.forEach(function(a,c){w=Math.abs(w);var e=Math.abs(a.stackedValue.y0),g=Math.abs(a.stackedValue.y);w>=e&&w<=g+e&&(y=c)});null!=y&&(v[y].highlight=!0)}var H=g.tickFormat()(a.x()(n,t)),B=p.tooltip.valueFormatter();"expand"===e.style()||"stack_percent"===e.style()?(q||(q=B),B=d3.format(".1%")):q&&(B=q,q=null);p.tooltip.position({left:r+u.left,top:l.mouseY+u.top}).chartContainer(O.parentNode).valueFormatter(B).data({value:H,
series:v})();p.renderGuideLine(r)});p.dispatch.on("elementMouseout",function(a){e.clearHighlights()});P.on("changeState",function(c){"undefined"!==typeof c.disabled&&h.length===c.disabled.length&&(h.forEach(function(a,e){a.disabled=c.disabled[e]}),F.disabled=c.disabled);"undefined"!==typeof c.style&&e.style(c.style);a.update()})});O.renderEnd("stacked Area chart immediate");return a}var e=c.models.stackedArea(),g=c.models.axis(),t=c.models.axis(),l=c.models.legend(),n=c.models.legend(),p=c.interactiveGuideline(),
h=c.models.tooltip(),u={top:30,right:25,bottom:50,left:60},w=null,J=null,C=c.utils.defaultColor(),B=!0,G=!0,E=!0,A=!0,L=!1,M=!1,I,v,F=c.utils.state(),U=null,N=null,P=d3.dispatch("stateChange","changeState","renderEnd"),R=250,r=["Stacked","Stream","Expanded"],K={},Q=250;F.style=e.style();g.orient("bottom").tickPadding(7);t.orient(L?"right":"left");h.headerFormatter(function(a,c){return g.tickFormat()(a,c)}).valueFormatter(function(a,c){return t.tickFormat()(a,c)});p.tooltip.headerFormatter(function(a,
c){return g.tickFormat()(a,c)}).valueFormatter(function(a,c){return t.tickFormat()(a,c)});var D=null,q=null;n.updateState(!1);var O=c.utils.renderWatch(P);e.style();var y=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:e.style()}}},V=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},aa=d3.format("%");e.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=e.x()(a.point);a.point.y=e.y()(a.point);h.data(a).position(a.pos).hidden(!1)});
e.dispatch.on("elementMouseout.tooltip",function(a){h.hidden(!0)});a.dispatch=P;a.stacked=e;a.legend=l;a.controls=n;a.xAxis=g;a.yAxis=t;a.interactiveLayer=p;a.tooltip=h;a.dispatch=P;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return J},set:function(a){J=a}},showLegend:{get:function(){return G},set:function(a){G=a}},showXAxis:{get:function(){return E},set:function(a){E=a}},showYAxis:{get:function(){return A},
set:function(a){A=a}},defaultState:{get:function(){return U},set:function(a){U=a}},noData:{get:function(){return N},set:function(a){N=a}},showControls:{get:function(){return B},set:function(a){B=a}},controlLabels:{get:function(){return K},set:function(a){K=a}},controlOptions:{get:function(){return r},set:function(a){r=a}},tooltips:{get:function(){return h.enabled()},set:function(a){c.deprecated("tooltips","use chart.tooltip.enabled() instead");h.enabled(!!a)}},tooltipContent:{get:function(){return h.contentGenerator()},
set:function(a){c.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");h.contentGenerator(a)}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},duration:{get:function(){return Q},set:function(a){Q=a;O.reset(Q);e.duration(Q);g.duration(Q);t.duration(Q)}},color:{get:function(){return C},set:function(a){C=c.utils.getColor(a);
l.color(C);e.color(C)}},rightAlignYAxis:{get:function(){return L},set:function(a){L=a;t.orient(L?"right":"left")}},useInteractiveGuideline:{get:function(){return M},set:function(c){M=!!c;a.interactive(!c);a.useVoronoi(!c);e.scatter.interactive(!c)}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.models.sunburst=function(){function a(v){I.reset();v.each(function(a){function v(a){a.x0=a.x;a.dx0=a.dx}function F(a){var c=d3.interpolate(C.domain(),[a.x,a.x+a.dx]),e=d3.interpolate(B.domain(),
[a.y,1]),g=d3.interpolate(B.range(),[a.y?20:0,r]);return function(a,h){return h?function(c){return E(a)}:function(h){C.domain(c(h));B.domain(e(h)).range(g(h));return E(a)}}}h=d3.select(this);var I=c.utils.availableWidth(g,h,e),R=c.utils.availableHeight(t,h,e),r=Math.min(I,R)/2;c.utils.initSVG(h);var K=h.selectAll(".nv-wrap.nv-sunburst").data(a),Q=K.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+p).selectAll("nv-sunburst");K.attr("transform","translate("+I/2+","+R/2+")");h.on("click",
function(a,c){J.chartClick({data:a,index:c,pos:d3.event,id:p})});B.range([0,r]);A=A||a;M=a[0];G.value(n[l]||n.count);var D=Q.data(G.nodes).enter().append("path").attr("d",E).style("fill",function(a){return u((a.children?a:a.parent).name)}).style("stroke","#FFF").on("click",function(a){L!==A&&A!==a&&(L=A);A=a;D.transition().duration(w).attrTween("d",F(a))}).each(v).on("dblclick",function(a){L.parent==a&&D.transition().duration(w).attrTween("d",F(M))}).each(v).on("mouseover",function(a,c){d3.select(this).classed("hover",
!0).style("opacity",.8);J.elementMouseover({data:a,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("opacity",1);J.elementMouseout({data:a})}).on("mousemove",function(a,c){J.elementMousemove({data:a})})});I.renderEnd("sunburst immediate");return a}var e={top:0,right:0,bottom:0,left:0},g=null,t=null,l="count",n={count:function(a){return 1},size:function(a){return a.size}},p=Math.floor(1E4*Math.random()),h=null,u=c.utils.defaultColor(),w=
500,J=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),C=d3.scale.linear().range([0,2*Math.PI]),B=d3.scale.sqrt(),G=d3.layout.partition().sort(null).value(function(a){return 1}),E=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,C(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,C(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,B(a.y))}).outerRadius(function(a){return Math.max(0,
B(a.y+a.dy))}),A,L,M,I=c.utils.renderWatch(J);a.dispatch=J;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return t},set:function(a){t=a}},mode:{get:function(){return l},set:function(a){l=a}},id:{get:function(){return p},set:function(a){p=a}},duration:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return e},set:function(a){e.top=void 0!=a.top?a.top:e.top;e.right=void 0!=a.right?
a.right:e.right;e.bottom=void 0!=a.bottom?a.bottom:e.bottom;e.left=void 0!=a.left?a.left:e.left}},color:{get:function(){return u},set:function(a){u=c.utils.getColor(a)}}});c.utils.initOptions(a);return a};c.models.sunburstChart=function(){function a(g){w.reset();w.models(e);g.each(function(g){var l=d3.select(this);c.utils.initSVG(l);var n=c.utils.availableWidth(null,l,t),p=c.utils.availableHeight(null,l,t);a.update=function(){0===h?l.call(a):l.transition().duration(h).call(a)};a.container=this;if(g&&
g.length)l.selectAll(".nv-noData").remove();else return c.utils.noData(a,l),a;var u=l.selectAll("g.nv-wrap.nv-sunburstChart").data(g),w=u.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),C=u.select("g");w.append("g").attr("class","nv-sunburstWrap");u.attr("transform","translate("+t.left+","+t.top+")");e.width(n).height(p);g=C.select(".nv-sunburstWrap").datum(g);d3.transition(g).call(e)});w.renderEnd("sunburstChart immediate");return a}var e=c.models.sunburst(),g=c.models.tooltip(),
t={top:30,right:20,bottom:20,left:20},l=c.utils.defaultColor(),n=null,p=null,h=250,u=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),w=c.utils.renderWatch(u);g.headerEnabled(!1).duration(0).valueFormatter(function(a,c){return a});e.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.data.name,value:a.data.size,color:a.color};g.data(a).hidden(!1)});e.dispatch.on("elementMouseout.tooltip",function(a){g.hidden(!0)});e.dispatch.on("elementMousemove.tooltip",
function(a){g.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=u;a.sunburst=e;a.tooltip=g;a.options=c.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return p},set:function(a){p=a}},defaultState:{get:function(){return n},set:function(a){n=a}},color:{get:function(){return l},set:function(a){l=a;e.color(l)}},duration:{get:function(){return h},set:function(a){h=a;w.reset(h);e.duration(h)}},margin:{get:function(){return t},set:function(a){t.top=void 0!==
a.top?a.top:t.top;t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}}});c.utils.inheritOptions(a,e);c.utils.initOptions(a);return a};c.version="1.8.1"})();
(function(c,a){var e=0;c.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,timeout:1E4,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null,textAll:"All"},_create:function(){this.id=e;e+=1;this.openRequest=this.chart=
this.table=null},_init:function(){var a=c(this.element),e=this.options;this.table=this.data=null;this.chartOptions={currentChart:null,currentDataIndex:null,currentSeriesIndex:null,currentSpectrumIndex:null};this.table_options={hidden:!1};var l=a.find(".pt-chart");this.chart=l.length?l.first():null;e.renderFilter||e.renderOptions?(l="#"+a.attr("id"),e.renderOptions?(c(l+"-options").show(),e.collapseOptions&&(c(l+"-options legend").siblings().toggle(),c(l+"-options legend").children().toggle())):c(l+
"-options").hide(),e.renderFilter?(c(l+"-filters").show(),e.collapseFilter&&(c(l+"-filters legend").siblings().toggle(),c(l+"-filters legend").children().toggle())):c(l+"-options").hide()):a.find(".pt-form-container").hide();e.collapseTable&&(this.table_options.hidden=!0,a.find(".pt-table").hide(),a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide());e.numberFormatter=function(a){var c=e.precision;if(null===a||"undefined"==typeof a)return"-";c=c||0==c?a.toFixed(c):a.toString();c=c.split(".");
a=c[0];c=1<c.length?"."+c[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+e.thousandGrouping+"})+(?!\\d))","g"),e.thousandSeparator);return a+c};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=c(this.element),e=null;this._unbindEvents();var l=a.find('input[type="hidden"][name="pivotdata"]');l.length&&(e=JSON.parse(c(l).first().val()));e?"count"==e.method&&(this.options.precision=0,this.options.minTickSize=1):(e={empty:!0},a.find(".pt-hide-table").hide(),
a.find(".pt-show-table").hide());this.data=e;e.nodata?(a.find(".pt-table").first().empty().append(c('<div class="pt-no-data">'+e.nodata+"</div>")),a.find(".pt-hide-table").hide(),a.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();e.empty?a.find(".pt-empty").show():a.find(".pt-empty").hide();this.options.autoSubmit?a.find(".pt-submit").hide():a.find(".pt-submit").show();this._bindEvents();a.find(".pt-throbber").hide()},_renderTable:function(){var a=
c(this.element),e=a.find(".pt-table").first().empty();this.table=null;var l=this.data;if(!l.empty)if(this.options.renderTable){var n=l.cells,p=l.cols,h=l.rows,u=l.total,w=l.labels,J=this.options,C=J.showTotals,B=!1;1==p.length&&null===p[0][4]&&(B=!0);n=l.cells.slice(0);if(B&&C)for(p=[],l=0;l<h.length;l++)n[l]=[];else{for(l=0;l<h.length;l++)n[l]=n[l].filter(function(a,c){return"__other__"!=p[c][0]});p=p.filter(function(a){return"__other__"!=a[0]})}l=!1;1==p.length&&null===p[0][4]&&(l=!0);l&&C?(h=[],
n=[]):(n=n.filter(function(a,c){return"__other__"!=h[c][0]}),h=h.filter(function(a){return"__other__"!=a[0]}));e=d3.select(e.get(0)).append("table").attr("class","dataTable display report");e.append("thead").call(this._renderHeader,p,w,J).call(this._renderColumns,p,w,J);e.append("tbody").call(this._renderRows,this,h,p,w,n,J);J.showTotals&&e.append("tfoot").call(this._renderFooter,h,p,w,u);this.table=c(e.node());this.table_options.hidden?(a.find(".pt-show-table").show(),a.find(".pt-hide-table").hide()):
(a.find(".pt-show-table").hide(),a.find(".pt-hide-table").show())}else a.find(".pt-show-table").hide(),a.find(".pt-hide-table").hide()},_renderHeader:function(a,c,e,n){a=a.append("tr");a.append("th").attr("scope","col").text(e.layer);c.length&&a.append("th").attr({scope:"col",colspan:c.length}).text(e.cols);n.showTotals&&a.append("th").attr({scope:"col","class":"pt-totals-header pt-row-total",rowspan:2}).text(e.total);return a},_renderColumns:function(a,c,e,n){a=a.append("tr");a.append("th").attr({scope:"col",
"class":"pt-rows-header"}).text(e.rows);var g=!1;1==c.length&&null===c[0][4]&&(g=!0);a.selectAll("th.pt-data").data(c).enter().append("th").attr({scope:"col","class":"pt-col-label"}).text(function(a){return g?"":a[4]});return a},_renderRows:function(a,c,e,n,p,h,u){e=a.selectAll("tr.pt-row").data(e).enter().append("tr").attr("class",function(a,c){return c%2?"odd":"even"});var g=!1;1==e.length&&null===e[0][4]&&(g=!0);e.append("td").text(function(a){return g?"":a[4]});e.selectAll("td.pt-cell").data(function(a,
c){return h[c]}).enter().append("td").attr("class","pt-cell").each(c._renderCell,p);u.showTotals&&e.append("td").attr("class","pt-row-total").text(function(a){return a[2][0]});return e},_renderCell:function(a,e,l){e=d3.select(this);for(var g=a.items,p,h=0,t=g.length;h<t;h++){p=g[h];var w=e.append("div").attr("class","pt-cell-value");null===p?w.text(l.none):c.isArray(p)?w.append("ul").selectAll("li").data(p).enter().append("li").html(function(a){return a}):w.text(p);p=a.keys[h];g&&p&&p.length&&(c(w.node()).data("keys",
p).data("fact",h),w.append("div").attr("class","pt-cell-zoom"));1<t-h&&w.append("span").text(" / ")}},_renderFooter:function(a,c,e,n,p){c=c.length%2?"odd":"even";a=a.append("tr").attr("class",c+" pt-totals-row");a.append("th").attr({"class":"pt-totals-header",scope:"row"}).text(n.total);a.selectAll("td.pt-col-total").data(e).enter().append("td").attr("class","pt-col-total").text(function(a){return a[2][0]});a.append("td").attr("class","pt-total").text(p);return a},_renderChartOptions:function(){var a=
c(this.element),e=a.find(".pt-chart-controls").first().empty(),l=this.data;if(!l.empty&&this.options.renderChart){var l=l.labels,n=a.attr("id"),a=l.layer,p=l.rows,h=l.cols,u=l.per,w=c('<div class="pt-chart-opts">'),J=n+"-pchart-rows",C=n+"-vchart-rows",B=n+"-hchart-rows",G=n+"-schart-rows",E=n+"-pchart-cols",A=n+"-vchart-cols",L=n+"-hchart-cols",n=n+"-schart-cols";a&&c(w).append(c('<span class="pt-chart-label">'+a+": </span>"));p&&c(w).append(c('<div id="'+J+'" class="pt-chart-icon pt-pchart"/><div id="'+
C+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+u+" "+p+"</span>"));h&&c(w).append(c('<div id="'+E+'" class="pt-chart-icon pt-pchart"/><div id="'+A+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+u+" "+h+"</span>"));p&&h&&c(w).append(c('<span class="pt-chart-label">| '+l.breakdown+': </span><div id="'+G+'" class="pt-chart-icon pt-schart"/><div id="'+B+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+u+" "+p+'</span><div id="'+n+'"  class="pt-chart-icon pt-schart"/><div id="'+
L+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+u+" "+h+"</span>"));c(e).append(w)}},_truncateLabel:function(a,c){return a&&a.length>c?a.substring(0,c-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var e=c(this.element),g=this.data;e.find(".pt-chart-contents").hide();if(e=this.chart)if(c(e).unbind("plothover").unbind("plotclick").empty(),!g.empty&&this.options.renderChart)if(!1===a)this.options.collapseChart=!0;else{e=this.options.collapseChart;if("undefined"==typeof a||
!a){if(e)return;a=this.chartOptions.currentChart}if("undefined"==typeof a||!a){if(e)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chartOptions.currentChart=a;e=a.type;a=a.axis;var n=g.labels,p=n.per,h=n.layer+" "+p+" "+n.rows,n=n.layer+" "+p+" "+n.cols,p=g.filter,u=p[0],w=p[1];"piechart"==e?"rows"==a?this._renderPieChart(g.rows,h,u):this._renderPieChart(g.cols,n,w):"barchart"==e?"rows"==a?this._renderBarChart(g.rows,g.facts,h,u):this._renderBarChart(g.cols,
g.facts,n,w):"breakdown"==e?"rows"==a?this._renderBreakDown(g,0,h,p):this._renderBreakDown(g,1,n,p):"spectrum"==e&&this._renderSpectrum(g,a,p)}}},_renderPieChart:function(a,e,l){var g=this.chart;if(g){c(g).css({height:"360px"}).closest(".pt-chart-contents").show().css({width:"98%"});e?c(g).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):c(g).siblings(".pt-chart-title").empty();var p=[],h=0;for(e=0;e<a.length;e++){var t=a[e];!t[1]&&0<=t[2][0]&&(p.push({index:t[0],label:t[4],value:t[2][0],key:t[3]}),
h+=t[2][0])}var w=this;w.chartOptions.currentDataIndex=null;var J=function(a){var e=a.index;if(w.chartOptions.currentDataIndex!=e){w._removeChartTooltip();w.chartOptions.currentDataIndex=e;a=a.data;var g=a.value,l=d3.event;w._renderChartTooltip(l.pageX,l.pageY,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+g+" ("+Math.round(g/h*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}};nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).labelsOutside(!1).labelType("percent").labelThreshold(.03).showLegend(!0);
a.tooltip.enabled(!1);a.legend.align(!0).rightAlign(!1);a.pie.dispatch.on("elementMouseover",J).on("elementMouseout",function(a){c(".pt-tooltip").remove();w.chartOptions.currentDataIndex=null;w.chartOptions.currentSeriesIndex=null});if(w.options.exploreChart&&l)a.pie.dispatch.on("elementClick",function(a){a=a.data;w._chartExplore([["__other__"==a.index?l+"__belongs":l,a.key]])});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(p).transition().duration(1200).call(a);nv.utils.windowResize(a.update);
return a})}},_renderBarChart:function(a,e,l,n){var g=this.chart;if(g){c(g).closest(".pt-chart-contents").show().css({width:"96%"});for(var h=[],t=this._truncateLabel,w,J,C,B=0;B<e.length;B++){w={key:e[B][2]};J=[];for(var G=0;G<a.length;G++)C=a[G],J.push({label:C[4],value:C[2][B],filterIndex:C[0],filterKey:C[3]});w.values=J;h.push(w)}c(g).css({height:"360px"});l?c(g).siblings(".pt-chart-title").html("<h4>"+l+"</h4>"):c(g).siblings(".pt-chart-title").empty();var E=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+
nv.utils.defaultColor()({},a.index)+'">'+a.label+'</div><div class="pt-tooltip-text">'+a.value+"</div></div>"},A=this,L=this.options.numberFormatter;nv.addGraph(function(){if(1<h.length){var a=nv.models.multiBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showControls(!1);var e=a.multibar}else a=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).staggerLabels(!0).showValues(!0),a.valueFormat(L),e=a.discretebar;a.tooltip.contentGenerator(E);
a.yAxis.tickFormat(L);a.xAxis.tickFormat(function(a){return t(a,18)});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(h).transition().duration(500).call(a);if(A.options.exploreChart&&n)e.dispatch.on("elementClick",function(a){var c=a.data.filterKey;null===c&&(c="None");var e=n;"__other__"==a.data.filterIndex&&(e+="__belongs");A._chartExplore([[e,c]])});nv.utils.windowResize(a.update);return a})}},_renderBreakDown:function(a,e,l,n){var g=this.chart;if(g){c(g).closest(".pt-chart-contents").show().css({width:"96%"});
var h=a.cells,t=[],w=[];if(0===e){var J=a.rows;var C=a.cols;a=function(a,c){return h[t[a]][w[c]].values[0]};var B=n[0];var G=n[1]}else J=a.cols,C=a.rows,a=function(a,c){return h[w[c]][t[a]].values[0]},B=n[1],G=n[0];var E;n=[];e=[];var A=0;for(E=J.length;A<E;A++)J[A][1]||(n.push(J[A]),t.push(A));A=0;for(E=C.length;A<E;A++)C[A][1]||(e.push(C[A]),w.push(A));var L=[];for(J=0;J<e.length;J++){C={key:e[J][4],filterIndex:e[J][0],filterKey:e[J][3]};A=[];for(E=0;E<n.length;E++)A.push({label:n[E][4],filterIndex:n[E][0],
filterKey:n[E][3],value:a(E,J)});C.values=A;L.push(C)}a=Math.max(n.length*Math.max(16*(e.length+1),50)+70,360);c(g).css({height:a+"px"});l?c(g).siblings(".pt-chart-title").html("<h4>"+l+"</h4>"):c(g).siblings(".pt-chart-title").empty();var M=function(a){a=a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+nv.utils.defaultColor()({},a.index)+'">'+a.series+'</div><div class="pt-tooltip-text">'+a.label+': <span class="pt-tooltip-value">'+a.value+"</span></div></div>"},
I=this,v=this.options.numberFormatter,F=this._truncateLabel;nv.addGraph(function(){var a=nv.models.multiBarHorizontalChart().x(function(a){return a.label}).y(function(a){return a.value}).margin({top:20,right:20,bottom:20,left:175}).showValues(!0).duration(350).showControls(!0);a.tooltip.contentGenerator(M);a.valueFormat(v);a.yAxis.tickFormat(v);a.xAxis.tickFormat(function(a){return F(a,24)});d3.select(c(g).get(0)).append("svg").attr("class","nv").datum(L).call(a);if(I.options.exploreChart&&B&&G)a.multibar.dispatch.on("elementClick",
function(a){a=a.data;var c=d3.event.currentTarget.parentElement.__data__,e=c.filterKey;null===e&&(e="None");var c="__other__"==c.filterIndex?G+"__belongs":G,g=a.filterKey;null===g&&(g="None");I._chartExplore([["__other__"==a.filterIndex?B+"__belongs":B,g],[c,e]])});nv.utils.windowResize(a.update);return a})}},_renderSpectrum:function(e,t,l){var g=this.chart;if(g){var p=this,h=e.cells,u=e.labels;if("rows"==t){var w=e.rows;var J=e.cols;t=u.rows;var C=u.cols;var B=l[0];var G=l[1];var E=function(a,c){return h[a][c]}}else w=
e.cols,J=e.rows,t=u.cols,C=u.rows,B=l[1],G=l[0],E=function(a,c){return h[c][a]};var A=function(a,c){return null===a?J[c]:null===c?w[a]:E(a,c)},L=function(c,e){e===a&&(e="silver");for(var g=[],h,l,n=0;n<J.length;n++)h=A(null,n),l=null===c?h[2][0]:A(c,n).values[0],!h[1]&&0<=h[2][0]&&g.push({filterIndex:h[0],filterKey:h[3],label:h[4],value:l,color:e});return g},M=[],I=0;for(l=0;l<w.length;l++){var v=A(l,null);!v[1]&&0<=v[2][0]&&(M.push({position:l,filterIndex:v[0],filterKey:v[3],label:v[4],value:v[2][0]}),
I+=v[2][0])}p.chartOptions.currentDataIndex=null;c(g).removeAttr("style").closest(".pt-chart-contents").css({width:"98%",height:"auto"}).show();c(g).siblings(".pt-chart-title").empty();l=c('<div class="pt-spectrum-pie">').appendTo(g);var g=c('<div class="pt-spectrum-bar">').appendTo(g),F=this.options.numberFormatter,U=this._truncateLabel,N=nv.models.discreteBarChart().x(function(a){return a.label}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).showValues(!0);N.tooltip.contentGenerator(function(a){a=
a.data;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+(a.color||["silver"])+'">'+a.label+'</div><div class="pt-tooltip-text">'+F(a.value)+"</div></div>"});N.valueFormat(F);N.yAxis.tickFormat(F);N.xAxis.tickFormat(function(a){return U(a,18)});var P=d3.select(c(g).get(0)).append("svg").attr("class","nv"),g=Math.floor(l.width()/2)-30,R=nv.models.pieChart().x(function(a){return a.label}).y(function(a){return a.value}).height(280).width(g).margin({top:-20,left:20}).labelType("percent").labelThreshold(.1).showLegend(!1).donut(!0).donutRatio(.35);
R.tooltip.enabled(!1);R.legend.align(!0).rightAlign(!1);R.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});R.pie.dispatch.on("elementMouseover",function(a){var e=a.index;if(p.chartOptions.currentDataIndex!=e){p._removeChartTooltip();p.chartOptions.currentDataIndex=e;a=a.data;var g=a.value,h=d3.event;p._renderChartTooltip(h.pageX,h.pageY,'<div class="pt-tooltip-label">'+a.label+"</div>"+('<div class="pt-tooltip-text">'+g+" ("+Math.round(g/
I*100)+"%)</div>"));c(".pt-tooltip-label").css({color:nv.utils.defaultColor()({},e)})}}).on("elementMouseout",function(a){c(".pt-tooltip").remove();p.chartOptions.currentDataIndex=null;p.chartOptions.currentSeriesIndex=null});var r=d3.select(c(l).get(0)).append("svg").attr("class","nv").style({"min-width":g-30+"px"}),g=d3.select(c(l).get(0)).append("div").attr("class","pt-spectrum-form");g.append("h4").html(u.layer+" "+u.per+" "+C);g.append("label").html(t+":");var K=g.append("select");K.append("option").attr("value",
"null").style("font-weight","bold").html(p.options.textAll);K.selectAll(".pt-series-item").data(M).enter().append("option").attr("class","pt-series-item").attr("value",function(a,c){return c}).html(function(a){return a.label});g.append("label").html(u.total+":");var Q=g.append("span").text(e.total),D=function(a){if(null===a||p.chartOptions.currentSpectrumIndex==a){var c=function(a,c){return nv.utils.defaultColor()({},c)};r.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=L(null);P.datum([{key:null,
filterIndex:null,filterKey:null,values:c}]);N.update();p.chartOptions.currentSpectrumIndex=null;K.property("value","null");Q.text(e.total)}else{var g=M[a],h=nv.utils.defaultColor()({},a);c=function(c,e){return e==a?h:"silver"};r.selectAll(".nv-slice").style("fill",c).style("stroke",c);c=L(g.position,h);P.datum([{key:g.position,filterIndex:g.filterIndex,filterKey:g.filterKey,values:c}]);N.update();p.chartOptions.currentSpectrumIndex=a;K.property("value",a);Q.text(M[a].value)}};R.pie.dispatch.on("elementClick",
function(a){D(a.index)});K.on("change.pt",function(a){a=d3.select(this).property("value");"null"==a?D(null):D(a)});nv.addGraph(function(){r.datum(M).transition().duration(1200).call(R);nv.utils.windowResize(R.update);return R});nv.addGraph(function(){P.datum([{key:null,filterIndex:null,filterKey:null,values:L(null)}]).transition().duration(500).call(N);if(p.options.exploreChart&&B&&G)N.discretebar.dispatch.on("elementClick",function(a){var c=a.data,e=d3.event.currentTarget.parentElement.__data__;
a=e.filterIndex;var e=e.filterKey,g=c.filterIndex,c=c.filterKey,h=[];null!==a&&h.push(["__other__"==a?B+"__belongs":B,e||"None"]);null!==g&&h.push(["__other__"==g?G+"__belongs":G,c||"None"]);p._chartExplore(h)});nv.utils.windowResize(N.update);return N})}},_chartExplore:function(e){var g=this.options,l=c(this.element).closest(".ui-tabs"),n=g.filterTab;if(l.length&&!1!==n)g=(g=g.filterForm)?c("#"+g):a,S3.search.setCurrentFilters(g,e),e=n?c("#"+n).index():0,l.tabs("option","active",e);else if(l=g.filterURL)e=
this._updateURL(l,e),window.open(e,"_blank")},_renderChartTooltip:function(a,e,l){c('<div class="pt-tooltip">'+l+"</div>").css({position:"absolute",display:"none",top:e-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){c(".pt-tooltip").remove();this.chartOptions.currentDataIndex=null;this.chartOptions.currentSeriesIndex=null},
_getOptions:function(){var a="#"+c(this.element).attr("id");return{rows:c(a+"-rows").val(),cols:c(a+"-cols").val(),fact:c(a+"-fact").val(),totals:c(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+c(this.element).attr("id"),e=null,a=c(a+"-filters");if(a.length)try{e=S3.search.getCurrentFilters(a.first())}catch(l){}return e},_updateURL:function(a,c){var e=[],g={},p;if(c){var h=0;for(p=c.length;h<p;h++){var t=c[h];var w=t[0];g[w]=!0;e.push(w+"="+t[1])}}t=this.options.ajaxURL.split("?");
if(1<t.length){var J=t[1].split("&");t={};h=0;for(p=J.length;h<p;h++){var C=J[h].split("=");1<C.length&&(w=decodeURIComponent(C[0]),g[w]||(e.push(w+"="+decodeURIComponent(C[1])),t[w]=!0))}for(w in t)g[w]=!0}t=a.split("?");if(1<t.length)for(J=t[1].split("&"),h=0,p=J.length;h<p;h++)C=J[h].split("="),1<C.length&&(w=decodeURIComponent(C[0]),g[w]||e.push(w+"="+decodeURIComponent(C[1])));e=e.join("&");g=t[0];e&&(g=g+"?"+e);return g},_updateAjaxURL:function(a,e){var g=this.options.ajaxURL.split("?"),n=[],
p=!1;if(1<g.length){var h=g[1];h=h.split("&")}else h=[];if(a)for(J in a){var t=a[J];var w=J+"="+t;"totals"==J?this.options.showTotals=t?!0:!1:p||-1!=c.inArray(w,h)||(p=!0);n.push(w)}var J={};t={};var C;if(e){var B=0;for(C=e.length;B<C;B++){w=e[B];var G=w[0];w=w[1];null===w?J[G]||(t[G]=!0):(t[G]&&(t[G]=!1),w=G+"="+encodeURIComponent(w),J[G]?J[G].push(w):J[G]=[w])}}B=0;for(C=h.length;B<C;B++)w=h[B].split("="),1<w.length&&(G=decodeURIComponent(w[0]),w=decodeURIComponent(w[1]),t[G]?p=!0:J[G]?p||-1!=c.inArray(G+
"="+w,J[G])||(p=!0):"aggregate"!=G&&(a&&a.hasOwnProperty(G)||n.push(h[B])));for(G in J)for(B=0,C=J[G].length;B<C;B++)p||-1!=c.inArray(J[G][B],h)||(p=!0),n.push(J[G][B]);n=n.join("&");g=g[0];n&&(g=g+"?"+n);this.options.ajaxURL=g;return p},reload:function(e,t,l){l="undefined"!=typeof l?l:!0;"undefined"==typeof t&&(t=this._getFilters());var g=this,p=this.element,h=p.find('input[type="hidden"][name="pivotdata"]');if(h.length){p.find(".pt-throbber").show();if(e||t)var u=this._updateAjaxURL(e,t);u||l?(e=
this.options.ajaxURL,t=this.options.timeout,l=c.ajaxS3,c.searchS3!==a&&(l=c.searchS3),p.find(".pt-empty").hide(),g.openRequest&&(g.openRequest.onreadystatechange=null,g.openRequest.abort()),g.openRequest=l({timeout:t,url:e,dataType:"json",type:"GET",success:function(a){g.openRequest=null;h.first().val(JSON.stringify(a));g.refresh()},error:function(a,c,e){console.log("UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText)}})):g.refresh()}},_bindEvents:function(){var a=this,e=c(this.element),l=this.data,
n="#"+e.attr("id");c(n+"-options legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});c(n+"-filters legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});e.find(".pt-hide-table").click(function(){a.table_options.hidden=!0;e.find(".pt-table").hide();c(this).siblings(".pt-show-table").show();c(this).hide()});e.find(".pt-show-table").click(function(){a.table_options.hidden=!1;e.find(".pt-table").show();c(this).siblings(".pt-hide-table").show();
c(this).hide()});c(n+"-totals").click(function(){var e=c(this).is(":checked");a.options.showTotals!=e&&a.reload({totals:e},null,!1)});c(n+"-rows,"+n+"-cols,"+n+"-fact").on("change.autosubmit",function(){c(n+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var p=this.options.autoSubmit;c(n+"-pt-form").on("optionChanged",function(){var e=c(this);if(!e.data("noAutoSubmit")){var g=e.data("autoSubmitTimeout");g&&clearTimeout(g);g=setTimeout(function(){var c=a._getOptions(),e=a._getFilters();
a.reload(c,e,!1)},p);e.data("autoSubmitTimeout",g)}})}else c(n+"-pt-form input.pt-submit").click(function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)});c(n+" div.pt-table div.pt-cell-zoom").click(function(a){a=c(a.currentTarget);var e=a.closest(".pt-cell-value"),g=e.find(".pt-cell-records");if(0<g.length)g.remove(),a.removeClass("opened");else{for(var h=e.data("keys"),g=e.data("fact"),e=l.lookups[l.facts[g][0]],g=c("<div/>").addClass("pt-cell-records"),n=c("<ul/>"),p=0;p<h.length;p++)n.append("<li>"+
e[h[p]]+"</li>");g.append(n);a.addClass("opened").after(g)}});c(n+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});c(n+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});c(n+"-schart-rows").click(function(){a._renderChart({type:"spectrum",axis:"rows"})});c(n+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});c(n+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});c(n+"-vchart-cols").click(function(){a._renderChart({type:"barchart",
axis:"cols"})});c(n+"-schart-cols").click(function(){a._renderChart({type:"spectrum",axis:"cols"})});c(n+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});e.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var a=c(this.element),e="#"+a.attr("id");c(e+" div.pt-table div.pt-cell-zoom").unbind("click");c(e+"-options legend").unbind("click");c(e+"-filters legend").unbind("click");c(e+"-totals").unbind("click");c(e+"-rows,"+e+"-cols,"+
e+"-fact").unbind("change.autosubmit");c(e+"-pt-form").unbind("optionChanged");a.find("input.pt-submit").unbind("click");c(e+"-pchart-rows,"+e+"-vchart-rows,"+e+"-schart-rows,"+e+"-hchart-rows,"+e+"-pchart-cols,"+e+"-vchart-cols,"+e+"-schart-cols,"+e+"-hchart-cols").unbind("click");a.find(".pt-hide-table").unbind("click");a.find(".pt-show-table").unbind("click");a.find(".pt-hide-chart").unbind("click")}})})(jQuery);
