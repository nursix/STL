/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+
 requires NVD3.js

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,a,c){e!=Array.prototype&&e!=Object.prototype&&(e[a]=c.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var a=0;return $jscomp.iteratorPrototype(function(){return a<e.length?{done:!1,value:e[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,a){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var c=0,g={next:function(){if(c<e.length){var u=c++;return{value:a(u,e[u]),done:!1}}g.next=function(){return{done:!0,value:void 0}};return g.next()}};g[Symbol.iterator]=function(){return g};return g};
$jscomp.polyfill=function(e,a,c,g){if(a){c=$jscomp.global;e=e.split(".");for(g=0;g<e.length-1;g++){var u=e[g];u in c||(c[u]={});c=c[u]}e=e[e.length-1];g=c[e];a=a(g);a!=g&&null!=a&&$jscomp.defineProperty(c,e,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.values",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es6","es3");$jscomp.findInternal=function(e,a,c){e instanceof String&&(e=String(e));for(var g=e.length,u=0;u<g;u++){var q=e[u];if(a.call(c,q,u,e))return{i:u,v:q}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
!function(){function e(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function a(b,d){return b<d?-1:b>d?1:b>=d?0:NaN}function c(b){return null===b?NaN:+b}function g(b){return!isNaN(b)}function u(b){return{left:function(d,f,h,m){3>arguments.length&&(h=0);4>arguments.length&&(m=d.length);for(;h<m;){var x=h+m>>>1;0>b(d[x],f)?h=x+1:m=x}return h},right:function(d,f,h,m){3>arguments.length&&(h=0);4>arguments.length&&(m=d.length);for(;h<m;){var x=h+m>>>1;0<b(d[x],
f)?m=x:h=x+1}return h}}}function q(b){return b.length}function t(b,d){for(var f in d)Object.defineProperty(b.prototype,f,{value:d[f],enumerable:!1})}function v(){this._=Object.create(null)}function l(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function A(b){return"\x00"===(b+="")[0]?b.slice(1):b}function B(b){return l(b)in this._}function K(b){return(b=l(b))in this._&&delete this._[b]}function E(){var b=[],d;for(d in this._)b.push(A(d));return b}function F(){var b=0,d;for(d in this._)++b;
return b}function H(){for(var b in this._)return!1;return!0}function D(){this._=Object.create(null)}function C(b){return b}function O(b,d,f){return function(){var h=f.apply(d,arguments);return h===d?b:h}}function P(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var f=0,h=Zd.length;f<h;++f){var m=Zd[f]+d;if(m in b)return m}}function I(){}function r(){}function G(b){function d(){for(var d=f,h=-1,a=d.length,N;++h<a;)(N=d[h].on)&&N.apply(this,arguments);return b}var f=[],h=new v;d.on=
function(d,x){var m=h.get(d),N;if(2>arguments.length)return m&&m.on;m&&(m.on=null,f=f.slice(0,N=f.indexOf(m)).concat(f.slice(N+1)),h.remove(d));x&&f.push(h.set(d,{on:x}));return b};return d}function V(){z.event.preventDefault()}function Q(){for(var b=z.event,d;d=b.sourceEvent;)b=d;return b}function T(b){for(var d=new r,f=0,h=arguments.length;++f<h;)d[arguments[f]]=G(d);d.of=function(f,h){return function(m){try{var x=m.sourceEvent=z.event;m.target=b;z.event=m;d[m.type].apply(f,h)}finally{z.event=x}}};
return d}function U(b){Tb(b,ka);return b}function k(b){return"function"===typeof b?b:function(){return Rc(b,this)}}function J(b){return"function"===typeof b?b:function(){return Sc(b,this)}}function S(b,d){function f(){this.removeAttribute(b)}function h(){this.removeAttributeNS(b.space,b.local)}function m(){this.setAttribute(b,d)}function x(){this.setAttributeNS(b.space,b.local,d)}function a(){var f=d.apply(this,arguments);null==f?this.removeAttribute(b):this.setAttribute(b,f)}function N(){var f=d.apply(this,
arguments);null==f?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,f)}b=z.ns.qualify(b);return null==d?b.local?h:f:"function"===typeof d?b.local?N:a:b.local?x:m}function p(b){return new RegExp("(?:^|\\s+)"+z.requote(b)+"(?:\\s+|$)","g")}function w(b,d){function f(){for(var f=-1;++f<m;)b[f](this,d)}function h(){for(var f=-1,h=d.apply(this,arguments);++f<m;)b[f](this,h)}b=(b+"").trim().split(/^|\s+/).map(L);var m=b.length;return"function"===typeof d?h:f}function L(b){var d=
p(b);return function(f,h){if(m=f.classList)return h?m.add(b):m.remove(b);var m=f.getAttribute("class")||"";h?(d.lastIndex=0,d.test(m)||f.setAttribute("class",(m+" "+b).trim().replace(/\s+/g," "))):f.setAttribute("class",m.replace(d," ").trim().replace(/\s+/g," "))}}function n(b,d,f){function h(){this.style.removeProperty(b)}function m(){this.style.setProperty(b,d,f)}function x(){var h=d.apply(this,arguments);null==h?this.style.removeProperty(b):this.style.setProperty(b,h,f)}return null==d?h:"function"===
typeof d?x:m}function X(b,d){function f(){delete this[b]}function h(){this[b]=d}function m(){var f=d.apply(this,arguments);null==f?delete this[b]:this[b]=f}return null==d?f:"function"===typeof d?m:h}function Z(b){function d(){var d=this.ownerDocument,f=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===f&&"http://www.w3.org/1999/xhtml"===d.documentElement.namespaceURI?d.createElement(b):d.createElementNS(f,b)}function f(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=z.ns.qualify(b)).local?f:d}function y(){var b=this.parentNode;b&&b.removeChild(this)}function M(b){return function(){return Ub(this,b)}}function W(b){arguments.length||(b=a);return function(d,f){return d&&f?b(d.__data__,f.__data__):!d-!f}}function ja(b,d){for(var f=0,h=b.length;f<h;f++)for(var m=b[f],x=0,a=m.length,N;x<a;x++)(N=m[x])&&d(N,x,f);return b}function ea(b){Tb(b,Ua);return b}function la(b){var d,f;return function(h,m,x){h=b[x].update;var a=h.length;x!=f&&(f=x,d=0);for(m>=d&&
(d=m+1);!(m=h[d])&&++d<a;);return m}}function ta(b,d,f){function h(){var d=this[a];d&&(this.removeEventListener(b,d,d.$),delete this[a])}function m(){var m=R(d,Ra(arguments));h.call(this);this.addEventListener(b,this[a]=m,m.$=f);m._=d}function x(){var d=new RegExp("^__on([^.]+)"+z.requote(b)+"$"),f,h;for(h in this)if(f=h.match(d)){var m=this[h];this.removeEventListener(f[1],m,m.$);delete this[h]}}var a="__on"+b,N=b.indexOf("."),R=fa;0<N&&(b=b.slice(0,N));var c=Tc.get(b);c&&(b=c,R=ha);return N?d?m:
h:d?I:x}function fa(b,d){return function(f){var h=z.event;z.event=f;d[0]=this.__data__;try{b.apply(this,d)}finally{z.event=h}}}function ha(b,d){var f=fa(b,d);return function(b){var d=b.relatedTarget;d&&(d===this||d.compareDocumentPosition(this)&8)||f.call(this,b)}}function oa(b){var d=".dragsuppress-"+ ++pg,f="click"+d,h=z.select(e(b)).on("touchmove"+d,V).on("dragstart"+d,V).on("selectstart"+d,V);null==gb&&(gb="onselectstart"in b?!1:P(b.style,"userSelect"));if(gb){var m=(b&&(b.ownerDocument||b.document||
b).documentElement).style;var x=m[gb];m[gb]="none"}return function(b){h.on(d,null);gb&&(m[gb]=x);if(b){var a=function(){h.on(f,null)};h.on(f,function(){V();a()},!0);setTimeout(a,0)}}}function ga(b,d){d.changedTouches&&(d=d.changedTouches[0]);var f=b.ownerSVGElement||b;if(f.createSVGPoint){var h=f.createSVGPoint();if(0>Uc&&(f=e(b),f.scrollX||f.scrollY)){var f=z.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),m=f[0][0].getScreenCTM();
Uc=!(m.f||m.e);f.remove()}Uc?(h.x=d.pageX,h.y=d.pageY):(h.x=d.clientX,h.y=d.clientY);h=h.matrixTransform(b.getScreenCTM().inverse());return[h.x,h.y]}h=b.getBoundingClientRect();return[d.clientX-h.left-b.clientLeft,d.clientY-h.top-b.clientTop]}function ia(){return z.event.changedTouches[0].identifier}function qa(b,d,f){return(d[0]-b[0])*(f[1]-b[1])-(d[1]-b[1])*(f[0]-b[0])}function ya(b){return 1<b?0:-1>b?ba:Math.acos(b)}function ma(b){return 1<b?va:-1>b?-va:Math.asin(b)}function Ia(b){return((b=Math.exp(b))+
1/b)/2}function Ja(b){return(b=Math.sin(b/2))*b}function Ca(){}function Ba(b,d,f){return this instanceof Ba?void(this.h=+b,this.s=+d,this.l=+f):2>arguments.length?b instanceof Ba?new Ba(b.h,b.s,b.l):$d(""+b,ae,Ba):new Ba(b,d,f)}function za(b,d,f){function h(b){360<b?b-=360:0>b&&(b+=360);return 60>b?x+(m-x)*b/60:180>b?m:240>b?x+(m-x)*(240-b)/60:x}b=isNaN(b)?0:0>(b%=360)?b+360:b;d=isNaN(d)?0:0>d?0:1<d?1:d;f=0>f?0:1<f?1:f;var m=.5>=f?f*(1+d):f+d-f*d;var x=2*f-m;return new Ga(Math.round(255*h(b+120)),
Math.round(255*h(b)),Math.round(255*h(b-120)))}function ra(b,d,f){return this instanceof ra?void(this.h=+b,this.c=+d,this.l=+f):2>arguments.length?b instanceof ra?new ra(b.h,b.c,b.l):b instanceof Da?be(b.l,b.a,b.b):be((b=ce((b=z.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new ra(b,d,f)}function ua(b,d,f){isNaN(b)&&(b=0);isNaN(d)&&(d=0);return new Da(f,Math.cos(b*=ca)*d,Math.sin(b)*d)}function Da(b,d,f){return this instanceof Da?void(this.l=+b,this.a=+d,this.b=+f):2>arguments.length?b instanceof Da?new Da(b.l,
b.a,b.b):b instanceof ra?ua(b.h,b.c,b.l):ce((b=Ga(b)).r,b.g,b.b):new Da(b,d,f)}function Db(b,d,f){b=(b+16)/116;f=b-f/200;d=Vc(b+d/500)*de;b=Vc(b)*ee;f=Vc(f)*fe;return new Ga(Wc(3.2404542*d-1.5371385*b-.4985314*f),Wc(-.969266*d+1.8760108*b+.041556*f),Wc(.0556434*d-.2040259*b+1.0572252*f))}function be(b,d,f){return 0<b?new ra(Math.atan2(f,d)*sa,Math.sqrt(d*d+f*f),b):new ra(NaN,NaN,b)}function Vc(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Xc(b){return.008856<b?Math.pow(b,1/3):7.787037*b+
4/29}function Wc(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function Ga(b,d,f){return this instanceof Ga?void(this.r=~~b,this.g=~~d,this.b=~~f):2>arguments.length?b instanceof Ga?new Ga(b.r,b.g,b.b):$d(""+b,Ga,za):new Ga(b,d,f)}function Vb(b){return new Ga(b>>16,b>>8&255,b&255)+""}function rb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function $d(b,d,f){var h=0,m=0,x=0,a;if(a=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var N=a[2].split(",");
switch(a[1]){case "hsl":return f(parseFloat(N[0]),parseFloat(N[1])/100,parseFloat(N[2])/100);case "rgb":return d(Yc(N[0]),Yc(N[1]),Yc(N[2]))}}if(f=Wb.get(b))return d(f.r,f.g,f.b);null==b||"#"!==b.charAt(0)||isNaN(f=parseInt(b.slice(1),16))||(4===b.length?(h=(f&3840)>>4,h|=h>>4,m=f&240,m|=m>>4,x=f&15,x|=x<<4):7===b.length&&(h=(f&16711680)>>16,m=(f&65280)>>8,x=f&255));return d(h,m,x)}function ae(b,d,f){var h=Math.min(b/=255,d/=255,f/=255),m=Math.max(b,d,f),x=m-h,a=(m+h)/2;x?(h=.5>a?x/(m+h):x/(2-m-h),
b=60*(b==m?(d-f)/x+(d<f?6:0):d==m?(f-b)/x+2:(b-d)/x+4)):(b=NaN,h=0<a&&1>a?0:b);return new Ba(b,h,a)}function ce(b,d,f){b=Zc(b);d=Zc(d);f=Zc(f);var h=Xc((.4124564*b+.3575761*d+.1804375*f)/de),m=Xc((.2126729*b+.7151522*d+.072175*f)/ee);b=Xc((.0193339*b+.119192*d+.9503041*f)/fe);return Da(116*m-16,500*(h-m),200*(m-b))}function Zc(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function Yc(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function pa(b){return"function"===
typeof b?b:function(){return b}}function $c(b){return function(d,f,h){2===arguments.length&&"function"===typeof f&&(h=f,f=null);return Xb(d,f,b,h)}}function Xb(b,d,f,h){function m(){var b=R.status,d;if(d=!b)d=(d=R.responseType)&&"text"!==d?R.response:R.responseText;if(d||200<=b&&300>b||304===b){try{var h=f.call(x,R)}catch(og){a.error.call(x,og);return}a.load.call(x,h)}else a.error.call(x,R)}var x={},a=z.dispatch("beforesend","progress","load","error"),N={},R=new XMLHttpRequest,c=null;!this.XDomainRequest||
"withCredentials"in R||!/^(http(s)?:)?\/\//.test(b)||(R=new XDomainRequest);"onload"in R?R.onload=R.onerror=m:R.onreadystatechange=function(){3<R.readyState&&m()};R.onprogress=function(b){var d=z.event;z.event=b;try{a.progress.call(x,R)}finally{z.event=d}};x.header=function(b,d){b=(b+"").toLowerCase();if(2>arguments.length)return N[b];null==d?delete N[b]:N[b]=d+"";return x};x.mimeType=function(b){if(!arguments.length)return d;d=null==b?null:b+"";return x};x.responseType=function(b){if(!arguments.length)return c;
c=b;return x};x.response=function(b){f=b;return x};["get","post"].forEach(function(b){x[b]=function(){return x.send.apply(x,[b].concat(Ra(arguments)))}});x.send=function(f,h,m){2===arguments.length&&"function"===typeof h&&(m=h,h=null);R.open(f,b,!0);null==d||"accept"in N||(N.accept=d+",*/*");if(R.setRequestHeader)for(var e in N)R.setRequestHeader(e,N[e]);null!=d&&R.overrideMimeType&&R.overrideMimeType(d);null!=c&&(R.responseType=c);if(null!=m)x.on("error",m).on("load",function(b){m(null,b)});a.beforesend.call(x,
R);R.send(null==h?null:h);return x};x.abort=function(){R.abort();return x};z.rebind(x,a,"on");return null==h?x:x.get(qg(h))}function qg(b){return 1===b.length?function(d,f){b(null==d?f:null)}:b}function Yb(b,d,f){var h=arguments.length;2>h&&(d=0);3>h&&(f=Date.now());h={c:b,t:f+d,n:null};Zb?Zb.n=h:$b=h;Zb=h;ac||(bc=clearTimeout(bc),ac=1,ge(ad));return h}function ad(){var b=he(),b=ie()-b;24<b?(isFinite(b)&&(clearTimeout(bc),bc=setTimeout(ad,b)),ac=0):(ac=1,ge(ad))}function he(){for(var b=Date.now(),
d=$b;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function ie(){for(var b,d=$b,f=Infinity;d;)d.c?(d.t<f&&(f=d.t),d=(b=d).n):d=b?b.n=d.n:$b=d.n;Zb=b;return f}function bd(b,d){return d-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function rg(b){var d=b.decimal,f=b.thousands,h=b.grouping,m=b.currency,x=h&&f?function(b,d){for(var m=b.length,x=[],a=0,N=h[0],c=0;0<m&&0<N;){c+N+1>d&&(N=Math.max(1,d-c));x.push(b.substring(m-=N,m+N));if((c+=N+1)>d)break;N=h[a=(a+1)%h.length]}return x.reverse().join(f)}:C;return function(b){b=
je.exec(b);var f=b[1]||" ",h=b[2]||">",a=b[3]||"-",c=b[4]||"",e=b[5],aa=+b[6],g=b[7],k=b[8],n=b[9],l=1,w="",p="",y=!1,q=!0;k&&(k=+k.substring(1));if(e||"0"===f&&"="===h)e=f="0",h="=";switch(n){case "n":g=!0;n="g";break;case "%":l=100;p="%";n="f";break;case "p":l=100;p="%";n="r";break;case "b":case "o":case "x":case "X":"#"===c&&(w="0"+n.toLowerCase());case "c":q=!1;case "d":y=!0;k=0;break;case "s":l=-1,n="r"}"$"===c&&(w=m[0],p=m[1]);"r"!=n||k||(n="g");if(null!=k)if("g"==n)k=Math.max(1,Math.min(21,
k));else if("e"==n||"f"==n)k=Math.max(0,Math.min(20,k));var n=sg.get(n)||tg,r=e&&g;return function(b){var m=p;if(y&&b%1)return"";var N=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===a?"":a;0>l?(m=z.formatPrefix(b,k),b=m.scale(b),m=m.symbol+p):b*=l;b=n(b,k);var R=b.lastIndexOf(".");if(0>R)if(R=q?b.lastIndexOf("e"):-1,0>R){var c=b;b=""}else c=b.substring(0,R),b=b.substring(R);else c=b.substring(0,R),b=d+b.substring(R+1);!e&&g&&(c=x(c,Infinity));var R=w.length+c.length+b.length+(r?0:N.length),na=R<aa?Array(R=aa-
R+1).join(f):"";r&&(c=x(na+c,na.length?aa-b.length:Infinity));N+=w;b=c+b;return("<"===h?N+b+na:">"===h?na+N+b:"^"===h?na.substring(0,R>>=1)+N+b+na.substring(R):N+(r?b:na+b))+m}}}function tg(b){return b+""}function Va(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function hb(b,d,f){function h(d){var f=b(d),h=x(f,1);return d-f<h-d?f:h}function m(f){d(f=b(new Ea(f-1)),1);return f}function x(b,f){d(b=new Ea(+b),f);return b}function a(b,h,x){b=m(b);var a=[];if(1<x)for(;b<
h;)f(b)%x||a.push(new Date(+b)),d(b,1);else for(;b<h;)a.push(new Date(+b)),d(b,1);return a}b.floor=b;b.round=h;b.ceil=m;b.offset=x;b.range=a;var N=b.utc=cc(b);N.floor=N;N.round=cc(h);N.ceil=cc(m);N.offset=cc(x);N.range=function(b,d,f){try{Ea=Va;var h=new Va;h._=b;return a(h,d,f)}finally{Ea=Date}};return b}function cc(b){return function(d,f){try{Ea=Va;var h=new Va;h._=d;return b(h,f)._}finally{Ea=Date}}}function ug(b){function d(b){function d(d){for(var f=[],m=-1,x=0,a,N;++m<h;)if(37===b.charCodeAt(m)){f.push(b.slice(x,
m));null!=(a=ke[x=b.charAt(++m)])&&(x=b.charAt(++m));if(N=t[x])x=N(d,null==a?"e"===x?" ":"0":a);f.push(x);x=m+1}f.push(b.slice(x,m));return f.join("")}var h=b.length;d.parse=function(d){var h={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(h,b,d,0)!=d.length)return null;"p"in h&&(h.H=h.H%12+12*h.p);d=null!=h.Z&&Ea!==Va;var m=new (d?Va:Ea);"j"in h?m.setFullYear(h.y,0,h.j):"W"in h||"U"in h?("w"in h||(h.w="W"in h?1:0),m.setFullYear(h.y,0,1),m.setFullYear(h.y,0,"W"in h?(h.w+6)%7+7*h.W-(m.getDay()+5)%7:h.w+
7*h.U-(m.getDay()+6)%7)):m.setFullYear(h.y,h.m,h.d);m.setHours(h.H+(h.Z/100|0),h.M+h.Z%100,h.S,h.L);return d?m._:m};d.toString=function(){return b};return d}function f(b,d,f,h){for(var m,x=0,a=d.length,N=f.length;x<a;){if(h>=N)return-1;m=d.charCodeAt(x++);if(37===m){if(m=d.charAt(x++),m=L[m in ke?d.charAt(x++):m],!m||0>(h=m(b,f,h)))return-1}else if(m!=f.charCodeAt(h++))return-1}return h}var h=b.dateTime,m=b.date,x=b.time,a=b.periods,N=b.days,R=b.shortDays,c=b.months,e=b.shortMonths;d.utc=function(b){function f(b){try{Ea=
Va;var d=new Ea;d._=b;return h(d)}finally{Ea=Date}}var h=d(b);f.parse=function(b){try{Ea=Va;var d=h.parse(b);return d&&d._}finally{Ea=Date}};f.toString=h.toString;return f};d.multi=d.utc.multi=vg;var g=z.map(),k=dc(N),n=ec(N),l=dc(R),w=ec(R),p=dc(c),y=ec(c),q=dc(e),r=ec(e);a.forEach(function(b,d){g.set(b.toLowerCase(),d)});var t={a:function(b){return R[b.getDay()]},A:function(b){return N[b.getDay()]},b:function(b){return e[b.getMonth()]},B:function(b){return c[b.getMonth()]},c:d(h),d:function(b,d){return Ha(b.getDate(),
d,2)},e:function(b,d){return Ha(b.getDate(),d,2)},H:function(b,d){return Ha(b.getHours(),d,2)},I:function(b,d){return Ha(b.getHours()%12||12,d,2)},j:function(b,d){return Ha(1+Y.dayOfYear(b),d,3)},L:function(b,d){return Ha(b.getMilliseconds(),d,3)},m:function(b,d){return Ha(b.getMonth()+1,d,2)},M:function(b,d){return Ha(b.getMinutes(),d,2)},p:function(b){return a[+(12<=b.getHours())]},S:function(b,d){return Ha(b.getSeconds(),d,2)},U:function(b,d){return Ha(Y.sundayOfYear(b),d,2)},w:function(b){return b.getDay()},
W:function(b,d){return Ha(Y.mondayOfYear(b),d,2)},x:d(m),X:d(x),y:function(b,d){return Ha(b.getFullYear()%100,d,2)},Y:function(b,d){return Ha(b.getFullYear()%1E4,d,4)},Z:wg,"%":function(){return"%"}},L={a:function(b,d,f){l.lastIndex=0;return(d=l.exec(d.slice(f)))?(b.w=w.get(d[0].toLowerCase()),f+d[0].length):-1},A:function(b,d,f){k.lastIndex=0;return(d=k.exec(d.slice(f)))?(b.w=n.get(d[0].toLowerCase()),f+d[0].length):-1},b:function(b,d,f){q.lastIndex=0;return(d=q.exec(d.slice(f)))?(b.m=r.get(d[0].toLowerCase()),
f+d[0].length):-1},B:function(b,d,f){p.lastIndex=0;return(d=p.exec(d.slice(f)))?(b.m=y.get(d[0].toLowerCase()),f+d[0].length):-1},c:function(b,d,h){return f(b,t.c.toString(),d,h)},d:le,e:le,H:me,I:me,j:xg,L:yg,m:zg,M:Ag,p:function(b,d,f){d=g.get(d.slice(f,f+=2).toLowerCase());return null==d?-1:(b.p=d,f)},S:Bg,U:Cg,w:Dg,W:Eg,x:function(b,d,h){return f(b,t.x.toString(),d,h)},X:function(b,d,h){return f(b,t.X.toString(),d,h)},y:Fg,Y:Gg,Z:Hg,"%":Ig};return d}function Ha(b,d,f){var h=0>b?"-":"";b=(h?-b:
b)+"";var m=b.length;return h+(m<f?Array(f-m+1).join(d)+b:b)}function dc(b){return new RegExp("^(?:"+b.map(z.requote).join("|")+")","i")}function ec(b){for(var d=new v,f=-1,h=b.length;++f<h;)d.set(b[f].toLowerCase(),f);return d}function Dg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+1)))?(b.w=+d[0],f+d[0].length):-1}function Cg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f)))?(b.U=+d[0],f+d[0].length):-1}function Eg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f)))?(b.W=+d[0],f+d[0].length):
-1}function Gg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+4)))?(b.y=+d[0],f+d[0].length):-1}function Fg(b,d,f){wa.lastIndex=0;if(d=wa.exec(d.slice(f,f+2))){var h=+d[0];b=(b.y=h+(68<h?1900:2E3),f+d[0].length)}else b=-1;return b}function Hg(b,d,f){return/^[+-]\d{4}$/.test(d=d.slice(f,f+5))?(b.Z=-d,f+5):-1}function zg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.m=d[0]-1,f+d[0].length):-1}function le(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.d=+d[0],f+d[0].length):
-1}function xg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+3)))?(b.j=+d[0],f+d[0].length):-1}function me(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.H=+d[0],f+d[0].length):-1}function Ag(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.M=+d[0],f+d[0].length):-1}function Bg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+2)))?(b.S=+d[0],f+d[0].length):-1}function yg(b,d,f){wa.lastIndex=0;return(d=wa.exec(d.slice(f,f+3)))?(b.L=+d[0],f+d[0].length):-1}function wg(b){var d=
b.getTimezoneOffset();b=0<d?"-":"+";var f=da(d)/60|0,d=da(d)%60;return b+Ha(f,"0",2)+Ha(d,"0",2)}function Ig(b,d,f){ne.lastIndex=0;return(b=ne.exec(d.slice(f,f+1)))?f+b[0].length:-1}function vg(b){for(var d=b.length,f=-1;++f<d;)b[f][0]=this(b[f][0]);return function(d){for(var f=0,h=b[f];!h[1](d);)h=b[++f];return h[0](d)}}function cd(){}function oe(b,d,f){var h=f.s=b+d,m=h-b;f.t=b-(h-m)+(d-m)}function fc(b,d){if(b&&pe.hasOwnProperty(b.type))pe[b.type](b,d)}function dd(b,d,f){var h=-1;f=b.length-f;
for(d.lineStart();++h<f;){var m=b[h];d.point(m[0],m[1],m[2])}d.lineEnd()}function qe(b,d){var f=-1,h=b.length;for(d.polygonStart();++f<h;)dd(b[f],d,1);d.polygonEnd()}function Jg(){function b(b,d){b*=ca;d=d*ca/2+ba/4;var f=b-h,a=0<=f?1:-1,f=a*f,N=Math.cos(d),c=Math.sin(d),e=x*c;ib.add(Math.atan2(e*a*Math.sin(f),m*N+e*Math.cos(f)));h=b;m=N;x=c}var d,f,h,m,x;Ka.point=function(a,N){Ka.point=b;h=(d=a)*ca;m=Math.cos(N=(f=N)*ca/2+ba/4);x=Math.sin(N)};Ka.lineEnd=function(){b(d,f)}}function jb(b){var d=b[0];
b=b[1];var f=Math.cos(b);return[f*Math.cos(d),f*Math.sin(d),Math.sin(b)]}function gc(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function sb(b,d){return[b[1]*d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function ed(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function hc(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function ic(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function jc(b){return[Math.atan2(b[1],b[0]),ma(b[2])]}function kc(b,d){return 1E-6>da(b[0]-d[0])&&1E-6>da(b[1]-
d[1])}function fd(b,d){b*=ca;var f=Math.cos(d*=ca);Eb(f*Math.cos(b),f*Math.sin(b),Math.sin(d))}function Eb(b,d,f){++Fb;kb+=(b-kb)/Fb;lb+=(d-lb)/Fb;Wa+=(f-Wa)/Fb}function re(){function b(b,x){b*=ca;var m=Math.cos(x*=ca),a=m*Math.cos(b),m=m*Math.sin(b),R=Math.sin(x),c=Math.atan2(Math.sqrt((c=f*R-h*m)*c+(c=h*a-d*R)*c+(c=d*m-f*a)*c),d*a+f*m+h*R);lc+=c;$a+=c*(d+(d=a));ab+=c*(f+(f=m));Sa+=c*(h+(h=R));Eb(d,f,h)}var d,f,h;Oa.point=function(m,x){m*=ca;var a=Math.cos(x*=ca);d=a*Math.cos(m);f=a*Math.sin(m);
h=Math.sin(x);Oa.point=b;Eb(d,f,h)}}function se(){Oa.point=fd}function Kg(){function b(b,d){b*=ca;var f=Math.cos(d*=ca),a=f*Math.cos(b),f=f*Math.sin(b),N=Math.sin(d),c=m*N-x*f,e=x*a-h*N,aa=h*f-m*a,g=Math.sqrt(c*c+e*e+aa*aa),k=h*a+m*f+x*N,n=g&&-ya(k)/g,g=Math.atan2(g,k);tb+=n*c;ub+=n*e;bb+=n*aa;lc+=g;$a+=g*(h+(h=a));ab+=g*(m+(m=f));Sa+=g*(x+(x=N));Eb(h,m,x)}var d,f,h,m,x;Oa.point=function(a,N){d=a;f=N;Oa.point=b;a*=ca;var c=Math.cos(N*=ca);h=c*Math.cos(a);m=c*Math.sin(a);x=Math.sin(N);Eb(h,m,x)};Oa.lineEnd=
function(){b(d,f);Oa.lineEnd=se;Oa.point=fd}}function te(b,d){function f(f,m){return f=b(f,m),d(f[0],f[1])}b.invert&&d.invert&&(f.invert=function(f,m){return f=d.invert(f,m),f&&b.invert(f[0],f[1])});return f}function Gb(){return!0}function ue(b,d,f,h,m){var x=[],a=[];b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,f=b[0],h=b[d];if(kc(f,h)){m.lineStart();for(h=0;h<d;++h)m.point((f=b[h])[0],f[1]);m.lineEnd()}else d=new mc(f,b,null,!0),f=new mc(f,null,d,!1),d.o=f,x.push(d),a.push(f),d=new mc(h,
b,null,!1),f=new mc(h,null,d,!0),d.o=f,x.push(d),a.push(f)}});a.sort(d);ve(x);ve(a);if(x.length){b=0;d=f;for(f=a.length;b<f;++b)a[b].e=d=!d;d=x[0];for(var N,c;;){for(var e=d,g=!0;e.v;)if((e=e.n)===d)return;N=e.z;m.lineStart();do{e.v=e.o.v=!0;if(e.e){if(g)for(b=0,f=N.length;b<f;++b)m.point((c=N[b])[0],c[1]);else h(e.x,e.n.x,1,m);e=e.n}else{if(g)for(N=e.p.z,b=N.length-1;0<=b;--b)m.point((c=N[b])[0],c[1]);else h(e.x,e.p.x,-1,m);e=e.p}e=e.o;N=e.z;g=!g}while(!e.v);m.lineEnd()}}}function ve(b){if(d=b.length){for(var d,
f=0,h=b[0],m;++f<d;)h.n=m=b[f],m.p=h,h=m;h.n=m=b[0];m.p=h}}function mc(b,d,f,h){this.x=b;this.z=d;this.o=f;this.e=h;this.v=!1;this.n=this.p=null}function we(b,d,f,h){return function(m,x){function a(d,f){var h=m(d,f);b(d=h[0],f=h[1])&&x.point(d,f)}function N(b,d){var f=m(b,d);l.point(f[0],f[1])}function c(){p.point=N;l.lineStart()}function e(){p.point=a;l.lineEnd()}function g(b,d){u.push([b,d]);var f=m(b,d);r.point(f[0],f[1])}function k(){r.lineStart();u=[]}function n(){g(u[0][0],u[0][1]);r.lineEnd();
var b=r.clean(),d=q.buffer();var f=d.length;u.pop();L.push(u);u=null;if(f)if(b&1){b=d[0];f=b.length-1;var d=-1,h;if(0<f){t||(x.polygonStart(),t=!0);for(x.lineStart();++d<f;)x.point((h=b[d])[0],h[1]);x.lineEnd()}}else 1<f&&b&2&&d.push(d.pop().concat(d.shift())),y.push(d.filter(Lg))}var l=d(x),w=m.invert(h[0],h[1]),p={point:a,lineStart:c,lineEnd:e,polygonStart:function(){p.point=g;p.lineStart=k;p.lineEnd=n;y=[];L=[]},polygonEnd:function(){p.point=a;p.lineStart=c;p.lineEnd=e;y=z.merge(y);var b=w;var d=
L;var h=b[0],m=b[1],N=[Math.sin(h),-Math.cos(h),0],R=0,aa=0;ib.reset();for(var na=0,g=d.length;na<g;++na){var xa=d[na],k=xa.length;if(k)for(var n=xa[0],l=n[0],b=n[1]/2+ba/4,Za=Math.sin(b),q=Math.cos(b),r=1;;){r===k&&(r=0);var b=xa[r],Na=b[0],u=b[1]/2+ba/4,v=Math.sin(u),u=Math.cos(u),M=Na-l,W=0<=M?1:-1,G=W*M,C=G>ba,Za=Za*v;ib.add(Math.atan2(Za*W*Math.sin(G),q*u+Za*Math.cos(G)));R+=C?M+W*La:M;C^l>=h^Na>=h&&(n=sb(jb(n),jb(b)),ic(n),l=sb(N,n),ic(l),l=(C^0<=M?-1:1)*ma(l[2]),m>l||m===l&&(n[0]||n[1]))&&
(aa+=C^0<=M?1:-1);if(!r++)break;l=Na;Za=v;q=u;n=b}}d=(-1E-6>R||1E-6>R&&-1E-6>ib)^aa&1;y.length?(t||(x.polygonStart(),t=!0),ue(y,Mg,d,f,x)):d&&(t||(x.polygonStart(),t=!0),x.lineStart(),f(null,null,1,x),x.lineEnd());t&&(x.polygonEnd(),t=!1);y=L=null},sphere:function(){x.polygonStart();x.lineStart();f(null,null,1,x);x.lineEnd();x.polygonEnd()}},y,q=xe(),r=d(q),t=!1,L,u;return p}}function Lg(b){return 1<b.length}function xe(){var b=[],d;return{lineStart:function(){b.push(d=[])},point:function(b,h){d.push([b,
h])},lineEnd:I,buffer:function(){var f=b;b=[];d=null;return f},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Mg(b,d){return(0>(b=b.x)[0]?b[1]-va-1E-6:va-b[1])-(0>(d=d.x)[0]?d[1]-va-1E-6:va-d[1])}function Ng(b){function d(b,d){return Math.cos(b)*Math.cos(d)>m}function f(b,d,f){var h=jb(b),x=jb(d),a=[1,0,0],x=sb(h,x),N=gc(x,x),h=x[0],c=N-h*h;if(!c)return!f&&b;N=m*N/c;c=-m*h/c;h=sb(a,x);a=hc(a,N);x=hc(x,c);ed(a,x);x=gc(a,h);N=gc(h,h);c=x*x-N*(gc(a,a)-1);if(!(0>c)){var e=
Math.sqrt(c),c=hc(h,(-x-e)/N);ed(c,a);c=jc(c);if(!f)return c;f=b[0];var R=d[0];b=b[1];d=d[1];if(R<f){var aa=f;f=R;R=aa}var na=R-f,g=1E-6>da(na-ba);!g&&d<b&&(aa=b,b=d,d=aa);if(g||1E-6>na?g?0<b+d^c[1]<(1E-6>da(c[0]-f)?b:d):b<=c[1]&&c[1]<=d:na>ba^(f<=c[0]&&c[0]<=R))return d=hc(h,(-x+e)/N),ed(d,a),[c,jc(d)]}}function h(d,f){var h=x?b:ba-b,m=0;d<-h?m|=1:d>h&&(m|=2);f<-h?m|=4:f>h&&(m|=8);return m}var m=Math.cos(b),x=0<m,a=1E-6<da(m),N=gd(b,6*ca);return we(d,function(b){var m,N,c,e,R;return{lineStart:function(){e=
c=!1;R=1},point:function(aa,na){var g=[aa,na],k=d(aa,na),n=x?k?0:h(aa,na):k?h(aa+(0>aa?ba:-ba),na):0;!m&&(e=c=k)&&b.lineStart();if(k!==c){var xa=f(m,g);if(kc(m,xa)||kc(g,xa))g[0]+=1E-6,g[1]+=1E-6,k=d(g[0],g[1])}if(k!==c)R=0,k?(b.lineStart(),xa=f(g,m),b.point(xa[0],xa[1])):(xa=f(m,g),b.point(xa[0],xa[1]),b.lineEnd()),m=xa;else if(a&&m&&x^k){var l;n&N||!(l=f(g,m,!0))||(R=0,x?(b.lineStart(),b.point(l[0][0],l[0][1]),b.point(l[1][0],l[1][1]),b.lineEnd()):(b.point(l[1][0],l[1][1]),b.lineEnd(),b.lineStart(),
b.point(l[0][0],l[0][1])))}!k||m&&kc(m,g)||b.point(g[0],g[1]);m=g;c=k;N=n},lineEnd:function(){c&&b.lineEnd();m=null},clean:function(){return R|(e&&c)<<1}}},N,x?[0,-b]:[-ba,b-ba])}function ye(b,d,f,h){return function(m){var x=m.a,a=m.b,N=x.x,x=x.y,c=0,e=1,g=a.x-N,a=a.y-x;var k=b-N;if(g||!(0<k)){k/=g;if(0>g){if(k<c)return;k<e&&(e=k)}else if(0<g){if(k>e)return;k>c&&(c=k)}k=f-N;if(g||!(0>k)){k/=g;if(0>g){if(k>e)return;k>c&&(c=k)}else if(0<g){if(k<c)return;k<e&&(e=k)}k=d-x;if(a||!(0<k)){k/=a;if(0>a){if(k<
c)return;k<e&&(e=k)}else if(0<a){if(k>e)return;k>c&&(c=k)}k=h-x;if(a||!(0>k)){k/=a;if(0>a){if(k>e)return;k>c&&(c=k)}else if(0<a){if(k<c)return;k<e&&(e=k)}0<c&&(m.a={x:N+c*g,y:x+c*a});1>e&&(m.b={x:N+e*g,y:x+e*a});return m}}}}}}function ze(b,d,f,h){function m(h,m){return 1E-6>da(h[0]-b)?0<m?0:3:1E-6>da(h[0]-f)?0<m?2:1:1E-6>da(h[1]-d)?0<m?1:0:0<m?3:2}function x(b,d){return a(b.x,d.x)}function a(b,d){var f=m(b,1),h=m(d,1);return f!==h?f-h:0===f?d[1]-b[1]:1===f?b[0]-d[0]:2===f?b[1]-d[1]:d[0]-b[0]}return function(c){function N(x,
c,N,e){var R=0,aa=0;if(null==x||(R=m(x,N))!==(aa=m(c,N))||0>a(x,c)^0<N){do e.point(0===R||3===R?b:f,1<R?h:d);while((R=(R+N+4)%4)!==aa)}else e.point(c[0],c[1])}function e(m,x){b<=m&&m<=f&&d<=x&&x<=h&&c.point(m,x)}function aa(m,x){m=Math.max(-1E9,Math.min(1E9,m));x=Math.max(-1E9,Math.min(1E9,x));var a=b<=m&&m<=f&&d<=x&&x<=h;p&&w.push([m,x]);if(v)q=m,r=x,t=a,v=!1,a&&(c.lineStart(),c.point(m,x));else if(a&&M)c.point(m,x);else{var N={a:{x:u,y:L},b:{x:m,y:x}};n(N)?(M||(c.lineStart(),c.point(N.a.x,N.a.y)),
c.point(N.b.x,N.b.y),a||c.lineEnd(),W=!1):a&&(c.lineStart(),c.point(m,x),W=!1)}u=m;L=x;M=a}var g=c,k=xe(),n=ye(b,d,f,h),l,p,w,y={point:e,lineStart:function(){y.point=aa;p&&p.push(w=[]);v=!0;M=!1;u=L=NaN},lineEnd:function(){l&&(aa(q,r),t&&M&&k.rejoin(),l.push(k.buffer()));y.point=e;M&&c.lineEnd()},polygonStart:function(){c=k;l=[];p=[];W=!0},polygonEnd:function(){c=g;l=z.merge(l);var d=[b,h];for(var f=0,m=p.length,a=d[1],e=0;e<m;++e)for(var R=1,aa=p[e],na=aa.length,k=aa[0],n;R<na;++R)n=aa[R],k[1]<=
a?n[1]>a&&0<qa(k,n,d)&&++f:n[1]<=a&&0>qa(k,n,d)&&--f,k=n;d=0!==f;f=W&&d;m=l.length;if(f||m)c.polygonStart(),f&&(c.lineStart(),N(null,null,1,c),c.lineEnd()),m&&ue(l,x,d,N,c),c.polygonEnd();l=p=w=null}},q,r,t,u,L,M,v,W;return y}}function hd(b){var d=0,f=ba/3,h=id(b);b=h(d,f);b.parallels=function(b){return arguments.length?h(d=b[0]*ba/180,f=b[1]*ba/180):[d/ba*180,f/ba*180]};return b}function Ae(b,d){function f(b,d){var f=Math.sqrt(x-2*m*Math.sin(d))/m;return[f*Math.sin(b*=m),a-f*Math.cos(b)]}var h=Math.sin(b),
m=(h+Math.sin(d))/2,x=1+h*(2*m-h),a=Math.sqrt(x)/m;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,ma((x-(b*b+f*f)*m*m)/(2*m))]};return f}function Og(){function b(b,d){jd+=m*b-h*d;h=b;m=d}var d,f,h,m;cb.point=function(x,a){cb.point=b;d=h=x;f=m=a};cb.lineEnd=function(){b(d,f)}}function Pg(){function b(b,d){a.push("M",b,",",d,x)}function d(b,d){a.push("M",b,",",d);c.point=f}function f(b,d){a.push("L",b,",",d)}function h(){c.point=b}function m(){a.push("Z")}var x=Be(4.5),a=[],c={point:b,lineStart:function(){c.point=
d},lineEnd:h,polygonStart:function(){c.lineEnd=m},polygonEnd:function(){c.lineEnd=h;c.point=b},pointRadius:function(b){x=Be(b);return c},result:function(){if(a.length){var b=a.join("");a=[];return b}}};return c}function Be(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function mb(b,d){kb+=b;lb+=d;++Wa}function Ce(){function b(b,m){var h=b-d,a=m-f,h=Math.sqrt(h*h+a*a);$a+=h*(d+b)/2;ab+=h*(f+m)/2;Sa+=h;mb(d=b,f=m)}var d,f;Pa.point=function(h,m){Pa.point=b;mb(d=h,f=m)}}
function De(){Pa.point=mb}function Qg(){function b(b,d){var f=b-h,x=d-m,f=Math.sqrt(f*f+x*x);$a+=f*(h+b)/2;ab+=f*(m+d)/2;Sa+=f;f=m*b-h*d;tb+=f*(h+b);ub+=f*(m+d);bb+=3*f;mb(h=b,m=d)}var d,f,h,m;Pa.point=function(x,a){Pa.point=b;mb(d=h=x,f=m=a)};Pa.lineEnd=function(){b(d,f)}}function Rg(b){function d(d,f){b.moveTo(d+a,f);b.arc(d,f,a,0,La)}function f(d,f){b.moveTo(d,f);c.point=h}function h(d,f){b.lineTo(d,f)}function m(){c.point=d}function x(){b.closePath()}var a=4.5,c={point:d,lineStart:function(){c.point=
f},lineEnd:m,polygonStart:function(){c.lineEnd=x},polygonEnd:function(){c.lineEnd=m;c.point=d},pointRadius:function(b){a=b;return c},result:I};return c}function Ee(b){function d(b){return(c?h:f)(b)}function f(d){return Fe(d,function(f,h){f=b(f,h);d.point(f[0],f[1])})}function h(d){function f(f,h){f=b(f,h);d.point(f[0],f[1])}function h(){y=NaN;L.point=x;d.lineStart()}function x(f,h){var x=jb([f,h]),a=b(f,h);m(y,q,w,r,t,u,y=a[0],q=a[1],w=f,r=x[0],t=x[1],u=x[2],c,d);d.point(y,q)}function a(){L.point=
f;d.lineEnd()}function e(){h();L.point=N;L.lineEnd=R}function N(b,d){x(aa=b,d);g=y;k=q;n=r;l=t;p=u;L.point=x}function R(){m(y,q,w,r,t,u,g,k,aa,n,l,p,c,d);L.lineEnd=a;a()}var aa,g,k,n,l,p,w,y,q,r,t,u,L={point:f,lineStart:h,lineEnd:a,polygonStart:function(){d.polygonStart();L.lineStart=e},polygonEnd:function(){d.polygonEnd();L.lineStart=h}};return L}function m(d,f,h,c,e,N,aa,g,k,n,l,p,w,y){var R=aa-d,na=g-f,xa=R*R+na*na;if(xa>4*x&&w--){var q=c+n,r=e+l,t=N+p,L=Math.sqrt(q*q+r*r+t*t),u=Math.asin(t/=L),
M=1E-6>da(da(t)-1)||1E-6>da(h-k)?(h+k)/2:Math.atan2(r,q),Na=b(M,u),u=Na[0],Na=Na[1],v=u-d,W=Na-f,Za=na*v-R*W;if(Za*Za/xa>x||.3<da((R*v+na*W)/xa-.5)||c*n+e*l+N*p<a)m(d,f,h,c,e,N,u,Na,M,q/=L,r/=L,t,w,y),y.point(u,Na),m(u,Na,M,q,r,t,aa,g,k,n,l,p,w,y)}}var x=.5,a=Math.cos(30*ca),c=16;d.precision=function(b){if(!arguments.length)return Math.sqrt(x);c=0<(x=b*b)&&16;return d};return d}function Sg(b){var d=Ee(function(d,h){return b([d*sa,h*sa])});return function(b){return Ge(d(b))}}function He(b){this.stream=
b}function Fe(b,d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function db(b){return id(function(){return b})()}function id(b){function d(b){b=c(b[0]*ca,b[1]*ca);return[b[0]*g+r,t-b[1]*g]}function f(b){return(b=c.invert((b[0]-r)/g,(t-b[1])/g))&&[b[0]*sa,b[1]*sa]}function h(){c=te(a=kd(w,y,q),x);var b=x(l,p);r=k-b[0]*g;t=n+b[1]*g;return m()}function m(){W&&
(W.valid=!1,W=null);return d}var x,a,c,e=Ee(function(b,d){b=x(b,d);return[b[0]*g+r,t-b[1]*g]}),g=150,k=480,n=250,l=0,p=0,w=0,y=0,q=0,r,t,u=Ie,L=C,M=null,v=null,W;d.stream=function(b){W&&(W.valid=!1);W=Ge(u(a,e(L(b))));W.valid=!0;return W};d.clipAngle=function(b){if(!arguments.length)return M;u=null==b?(M=b,Ie):Ng((M=+b)*ca);return m()};d.clipExtent=function(b){if(!arguments.length)return v;L=(v=b)?ze(b[0][0],b[0][1],b[1][0],b[1][1]):C;return m()};d.scale=function(b){if(!arguments.length)return g;
g=+b;return h()};d.translate=function(b){if(!arguments.length)return[k,n];k=+b[0];n=+b[1];return h()};d.center=function(b){if(!arguments.length)return[l*sa,p*sa];l=b[0]%360*ca;p=b[1]%360*ca;return h()};d.rotate=function(b){if(!arguments.length)return[w*sa,y*sa,q*sa];w=b[0]%360*ca;y=b[1]%360*ca;q=2<b.length?b[2]%360*ca:0;return h()};z.rebind(d,e,"precision");return function(){x=b.apply(this,arguments);d.invert=x.invert&&f;return h()}}function Ge(b){return Fe(b,function(d,f){b.point(d*ca,f*ca)})}function Hb(b,
d){return[b,d]}function Je(b,d){return[b>ba?b-La:b<-ba?b+La:b,d]}function kd(b,d,f){return b?d||f?te(Ke(b),Le(d,f)):Ke(b):d||f?Le(d,f):Je}function Me(b){return function(d,f){return d+=b,[d>ba?d-La:d<-ba?d+La:d,f]}}function Ke(b){var d=Me(b);d.invert=Me(-b);return d}function Le(b,d){function f(b,d){var f=Math.cos(d),c=Math.cos(b)*f,f=Math.sin(b)*f,e=Math.sin(d),N=e*h+c*m;return[Math.atan2(f*x-N*a,c*h-e*m),ma(N*x+f*a)]}var h=Math.cos(b),m=Math.sin(b),x=Math.cos(d),a=Math.sin(d);f.invert=function(b,
d){var f=Math.cos(d),c=Math.cos(b)*f,f=Math.sin(b)*f,e=Math.sin(d),N=e*x-f*a;return[Math.atan2(f*x+e*a,c*h+N*m),ma(N*h-c*m)]};return f}function gd(b,d){var f=Math.cos(b),h=Math.sin(b);return function(m,x,a,c){var e=a*d;if(null!=m){if(m=Ne(f,m),x=Ne(f,x),0<a?m<x:m>x)m+=a*La}else m=b+a*La,x=b-.5*e;for(var N;0<a?m>x:m<x;m-=e)c.point((N=jc([f,-h*Math.cos(m),-h*Math.sin(m)]))[0],N[1])}}function Ne(b,d){var f=jb(d);f[0]-=b;ic(f);var h=ya(-f[1]);return((0>-f[2]?-h:h)+2*Math.PI-1E-6)%(2*Math.PI)}function Oe(b,
d,f){var h=z.range(b,d-1E-6,f).concat(d);return function(b){return h.map(function(d){return[b,d]})}}function Pe(b,d,f){var h=z.range(b,d-1E-6,f).concat(d);return function(b){return h.map(function(d){return[d,b]})}}function ld(b){return b.source}function md(b){return b.target}function Tg(b,d,f,h){var m=Math.cos(d),x=Math.sin(d),a=Math.cos(h),c=Math.sin(h),e=m*Math.cos(b),g=m*Math.sin(b),k=a*Math.cos(f),n=a*Math.sin(f),l=2*Math.asin(Math.sqrt(Ja(h-d)+m*a*Ja(f-b))),p=1/Math.sin(l);f=l?function(b){var d=
Math.sin(b*=l)*p;b=Math.sin(l-b)*p;var f=b*e+d*k,h=b*g+d*n;return[Math.atan2(h,f)*sa,Math.atan2(b*x+d*c,Math.sqrt(f*f+h*h))*sa]}:function(){return[b*sa,d*sa]};f.distance=l;return f}function Ib(b,d){function f(d,f){var h=Math.cos(f),m=b(Math.cos(d)*h);return[m*h*Math.sin(d),m*Math.sin(f)]}f.invert=function(b,f){var h=Math.sqrt(b*b+f*f),m=d(h),a=Math.sin(m);return[Math.atan2(b*a,h*Math.cos(m)),Math.asin(h&&f*a/h)]};return f}function Qe(b,d){function f(b,d){0<a?d<-va+1E-6&&(d=-va+1E-6):d>va-1E-6&&(d=
va-1E-6);var f=a/Math.pow(Math.tan(ba/4+d/2),m);return[f*Math.sin(m*b),a-f*Math.cos(m*b)]}var h=Math.cos(b),m=b===d?Math.sin(b):Math.log(h/Math.cos(d))/Math.log(Math.tan(ba/4+d/2)/Math.tan(ba/4+b/2)),a=h*Math.pow(Math.tan(ba/4+b/2),m)/m;if(!m)return nc;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,2*Math.atan(Math.pow(a/((0<m?1:0>m?-1:0)*Math.sqrt(b*b+f*f)),1/m))-va]};return f}function Re(b,d){function f(b,d){var f=a-d;return[f*Math.sin(m*b),a-f*Math.cos(m*b)]}var h=Math.cos(b),m=b===
d?Math.sin(b):(h-Math.cos(d))/(d-b),a=h/m+b;if(1E-6>da(m))return Hb;f.invert=function(b,d){var f=a-d;return[Math.atan2(b,f)/m,a-(0<m?1:0>m?-1:0)*Math.sqrt(b*b+f*f)]};return f}function nc(b,d){return[b,Math.log(Math.tan(ba/4+d/2))]}function Se(b){var d=db(b),f=d.scale,h=d.translate,m=d.clipExtent,a;d.scale=function(){var b=f.apply(d,arguments);return b===d?a?d.clipExtent(null):d:b};d.translate=function(){var b=h.apply(d,arguments);return b===d?a?d.clipExtent(null):d:b};d.clipExtent=function(b){var x=
m.apply(d,arguments);if(x===d){if(a=null==b){var c=ba*f(),e=h();m([[e[0]-c,e[1]-c],[e[0]+c,e[1]+c]])}}else a&&(x=null);return x};return d.clipExtent(null)}function nd(b,d){return[Math.log(Math.tan(ba/4+d/2)),-b]}function vb(b){return b[0]}function Jb(b){return b[1]}function Te(b){for(var d=b.length,f=[0,1],h=2,m=2;m<d;m++){for(;1<h&&0>=qa(b[f[h-2]],b[f[h-1]],b[m]);)--h;f[h++]=m}return f.slice(0,h)}function Ug(b,d){return b[0]-d[0]||b[1]-d[1]}function od(b,d,f){return(f[0]-d[0])*(b[1]-d[1])<(f[1]-
d[1])*(b[0]-d[0])}function pd(b,d,f,h){var m=b[0],a=f[0],c=d[0]-m,e=h[0]-a;b=b[1];f=f[1];d=d[1]-b;h=h[1]-f;a=(e*(b-f)-h*(m-a))/(h*c-e*d);return[m+a*c,b+a*d]}function Ue(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function Vg(){oc(this);this.edge=this.site=this.circle=null}function Ve(b){var d=We.pop()||new Vg;d.site=b;return d}function qd(b){wb(b);xb.remove(b);We.push(b);oc(b)}function Xe(b,d){var f=b.site,h=f.x,m=f.y,a=m-d;if(!a)return h;var c=b.P;if(!c)return-Infinity;var f=c.site,
c=f.x,f=f.y,e=f-d;if(!e)return c;var R=c-h,g=1/a-1/e,k=R/e;return g?(-k+Math.sqrt(k*k-2*g*(R*R/(-2*e)-f+e/2+m-a/2)))/g+h:(h+c)/2}function Ye(b){this.site=b;this.edges=[]}function Ze(b,d){return d.angle-b.angle}function Wg(){oc(this);this.x=this.y=this.arc=this.site=this.cy=null}function yb(b){var d=b.P,f=b.N;if(d&&f){var h=d.site,d=b.site,m=f.site;if(h!==m){var f=d.x,a=d.y,c=h.x-f,e=h.y-a,h=m.x-f,m=m.y-a,R=2*(c*m-e*h);if(!(-1E-12<=R)){var g=c*c+e*e,k=h*h+m*m,e=(m*g-e*k)/R,c=(c*k-h*g)/R,m=c+a,a=$e.pop()||
new Wg;a.arc=b;a.site=d;a.x=e+f;a.y=m+Math.sqrt(e*e+c*c);a.cy=m;b.circle=a;b=null;for(d=Kb._;d;)if(a.y<d.y||a.y===d.y&&a.x<=d.x)if(d.L)d=d.L;else{b=d.P;break}else if(d.R)d=d.R;else{b=d;break}Kb.insert(b,a);b||(rd=a)}}}}function wb(b){var d=b.circle;d&&(d.P||(rd=d.N),Kb.remove(d),$e.push(d),oc(d),b.circle=null)}function Xg(b,d){var f=b.b;if(f)return!0;var h=b.a,f=d[0][0],m=d[1][0],a=d[0][1],c=d[1][1],e=b.l,R=b.r,g=e.x,e=e.y,k=R.x,R=R.y,n=(g+k)/2;if(R===e){if(n<f||n>=m)return;if(g>k){if(!h)h={x:n,y:a};
else if(h.y>=c)return;f={x:n,y:c}}else{if(!h)h={x:n,y:c};else if(h.y<a)return;f={x:n,y:a}}}else{var l=(g-k)/(R-e);n=(e+R)/2-l*n;if(-1>l||1<l)if(g>k){if(!h)h={x:(a-n)/l,y:a};else if(h.y>=c)return;f={x:(c-n)/l,y:c}}else{if(!h)h={x:(c-n)/l,y:c};else if(h.y<a)return;f={x:(a-n)/l,y:a}}else if(e<R){if(!h)h={x:f,y:l*f+n};else if(h.x>=m)return;f={x:m,y:l*m+n}}else{if(!h)h={x:m,y:l*m+n};else if(h.x<f)return;f={x:f,y:l*f+n}}}b.a=h;b.b=f;return!0}function af(b,d){this.l=b;this.r=d;this.a=this.b=null}function Lb(b,
d,f,h){var m=new af(b,d);zb.push(m);f&&pc(m,b,d,f);h&&pc(m,d,b,h);nb[b.i].edges.push(new qc(m,b,d));nb[d.i].edges.push(new qc(m,d,b));return m}function Yg(b,d,f){b=new af(b,null);b.a=d;b.b=f;zb.push(b);return b}function pc(b,d,f,h){b.a||b.b?b.l===f?b.b=h:b.a=h:(b.a=h,b.l=d,b.r=f)}function qc(b,d,f){var h=b.a,m=b.b;this.edge=b;this.site=d;this.angle=f?Math.atan2(f.y-d.y,f.x-d.x):b.l===d?Math.atan2(m.x-h.x,h.y-m.y):Math.atan2(h.x-m.x,m.y-h.y)}function sd(){this._=null}function oc(b){b.U=b.C=b.L=b.R=
b.P=b.N=null}function Mb(b,d){var f=d.R,h=d.U;h?h.L===d?h.L=f:h.R=f:b._=f;f.U=h;d.U=f;d.R=f.L;d.R&&(d.R.U=d);f.L=d}function Nb(b,d){var f=d.L,h=d.U;h?h.L===d?h.L=f:h.R=f:b._=f;f.U=h;d.U=f;d.L=f.R;d.L&&(d.L.U=d);f.R=d}function bf(b){for(;b.L;)b=b.L;return b}function td(b,d){var f=b.sort(Zg).pop(),h;zb=[];nb=Array(b.length);xb=new sd;for(Kb=new sd;;){var m=rd;if(f&&(!m||f.y<m.y||f.y===m.y&&f.x<m.x)){if(f.x!==h||f.y!==a){nb[f.i]=new Ye(f);var a=h=void 0;m=f;for(var c=m.x,e=m.y,R=xb._;R;){var g=Xe(R,
e)-c;if(1E-6<g)R=R.L;else{var k=R;var n=e;var l=k.N;l?n=Xe(l,n):(k=k.site,n=k.y===n?k.x:Infinity);n=c-n;if(1E-6<n){if(!R.R){a=R;break}R=R.R}else{-1E-6<g?(a=R.P,h=R):-1E-6<n?(a=R,h=R.N):a=h=R;break}}}g=Ve(m);xb.insert(a,g);if(a||h)if(a===h)wb(a),h=Ve(a.site),xb.insert(g,h),g.edge=h.edge=Lb(a.site,g.site),yb(a),yb(h);else if(h){wb(a);wb(h);c=a.site;R=c.x;n=c.y;var k=m.x-R,l=m.y-n,e=h.site,p=e.x-R,w=e.y-n,y=2*(k*w-l*p),q=k*k+l*l,r=p*p+w*w,R={x:(w*q-l*r)/y+R,y:(k*r-p*q)/y+n};pc(h.edge,c,e,R);g.edge=Lb(c,
m,null,R);h.edge=Lb(m,e,null,R);yb(a);yb(h)}else g.edge=Lb(a.site,g.site);h=f.x;a=f.y}f=b.pop()}else if(m){e=m.arc;m=e.circle;c=m.x;R=m.cy;m={x:c,y:R};k=e.P;n=e.N;g=[e];qd(e);for(e=k;e.circle&&1E-6>da(c-e.circle.x)&&1E-6>da(R-e.circle.cy);)k=e.P,g.unshift(e),qd(e),e=k;g.unshift(e);wb(e);for(k=n;k.circle&&1E-6>da(c-k.circle.x)&&1E-6>da(R-k.circle.cy);)n=k.N,g.push(k),qd(k),k=n;g.push(k);wb(k);R=g.length;for(c=1;c<R;++c)k=g[c],e=g[c-1],pc(k.edge,e.site,k.site,m);e=g[0];k=g[R-1];k.edge=Lb(e.site,k.site,
null,m);yb(e);yb(k)}else break}if(d){f=zb;h=ye(d[0][0],d[0][1],d[1][0],d[1][1]);for(a=f.length;a--;)if(m=f[a],!Xg(m,d)||!h(m)||1E-6>da(m.a.x-m.b.x)&&1E-6>da(m.a.y-m.b.y))m.a=m.b=null,f.splice(a,1);f=d[0][0];h=d[1][0];a=d[0][1];m=d[1][1];R=nb;for(n=R.length;n--;)if((k=R[n])&&k.prepare())for(p=k.edges,w=p.length,l=0;l<w;)if(y=p[l].end(),c=y.x,e=y.y,q=p[++l%w].start(),g=q.x,q=q.y,1E-6<da(c-g)||1E-6<da(e-q))p.splice(l,0,new qc(Yg(k.site,y,1E-6>da(c-f)&&1E-6<m-e?{x:f,y:1E-6>da(g-f)?q:m}:1E-6>da(e-m)&&
1E-6<h-c?{x:1E-6>da(q-m)?g:h,y:m}:1E-6>da(c-h)&&1E-6<e-a?{x:h,y:1E-6>da(g-h)?q:a}:1E-6>da(e-a)&&1E-6<c-f?{x:1E-6>da(q-a)?g:f,y:a}:null),k.site,null)),++w}f={cells:nb,edges:zb};xb=Kb=zb=nb=null;return f}function Zg(b,d){return d.y-b.y||d.x-b.x}function $g(b){return b.x}function ah(b){return b.y}function cf(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ob(b,d,f,h,m,a){if(!b(d,f,h,m,a)){var c=.5*(f+m),x=.5*(h+a);d=d.nodes;d[0]&&Ob(b,d[0],f,h,c,x);d[1]&&Ob(b,d[1],c,h,m,x);d[2]&&Ob(b,d[2],
f,x,c,a);d[3]&&Ob(b,d[3],c,x,m,a)}}function bh(b,d,f,h,m,a,c){var x=Infinity,e;(function xa(b,N,R,g,k){var n;if(!(N>a||R>c||g<h||k<m)){if(n=b.point){var aa=d-b.x,l=f-b.y,aa=aa*aa+l*l;aa<x&&(aa=Math.sqrt(x=aa),h=d-aa,m=f-aa,a=d+aa,c=f+aa,e=n)}n=b.nodes;for(var aa=.5*(N+g),l=.5*(R+k),p=(f>=l)<<1|d>=aa,w=p+4;p<w;++p)if(b=n[p&3])switch(p&3){case 0:xa(b,N,R,aa,l);break;case 1:xa(b,aa,R,g,l);break;case 2:xa(b,N,l,aa,k);break;case 3:xa(b,aa,l,g,k)}}})(b,h,m,a,c);return e}function ud(b,d){b=z.rgb(b);d=z.rgb(d);
var f=b.r,h=b.g,m=b.b,a=d.r-f,c=d.g-h,e=d.b-m;return function(b){return"#"+rb(Math.round(f+a*b))+rb(Math.round(h+c*b))+rb(Math.round(m+e*b))}}function df(b,d){var f={},h={},m;for(m in b)m in d?f[m]=ob(b[m],d[m]):h[m]=b[m];for(m in d)m in b||(h[m]=d[m]);return function(b){for(m in f)h[m]=f[m](b);return h}}function Xa(b,d){b=+b;d=+d;return function(f){return b*(1-f)+d*f}}function ef(b,d){var f=vd.lastIndex=wd.lastIndex=0,h,m,a,c=-1,e=[],g=[];b+="";for(d+="";(h=vd.exec(b))&&(m=wd.exec(d));)(a=m.index)>
f&&(a=d.slice(f,a),e[c]?e[c]+=a:e[++c]=a),(h=h[0])===(m=m[0])?e[c]?e[c]+=m:e[++c]=m:(e[++c]=null,g.push({i:c,x:Xa(h,m)})),f=wd.lastIndex;f<d.length&&(a=d.slice(f),e[c]?e[c]+=a:e[++c]=a);return 2>e.length?g[0]?(d=g[0].x,function(b){return d(b)+""}):function(){return d}:(d=g.length,function(b){for(var f=0,h;f<d;++f)e[(h=g[f]).i]=h.x(b);return e.join("")})}function ob(b,d){for(var f=z.interpolators.length,h;0<=--f&&!(h=z.interpolators[f](b,d)););return h}function rc(b,d){var f=[],h=[],m=b.length,a=d.length,
c=Math.min(b.length,d.length),e;for(e=0;e<c;++e)f.push(ob(b[e],d[e]));for(;e<m;++e)h[e]=b[e];for(;e<a;++e)h[e]=d[e];return function(b){for(e=0;e<c;++e)h[e]=f[e](b);return h}}function ch(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function ff(b){return function(d){return 1-b(1-d)}}function gf(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function dh(b){return b*b}function eh(b){return b*b*b}function fh(b){if(0>=b)return 0;if(1<=b)return 1;var d=b*b,f=d*b;return 4*(.5>b?f:3*(b-d)+f-
.75)}function gh(b){return 1-Math.cos(b*va)}function hh(b){return Math.pow(2,10*(b-1))}function ih(b){return 1-Math.sqrt(1-b*b)}function jh(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function hf(b,d){d-=b;return function(f){return Math.round(b+d*f)}}function jf(b){var d=[b.a,b.b],f=[b.c,b.d],h=kf(d),m=d[0]*f[0]+d[1]*f[1],a=-m;f[0]+=a*d[0];f[1]+=a*d[1];a=kf(f)||0;d[0]*f[1]<f[0]*d[1]&&(d[0]*=-1,d[1]*=-1,
h*=-1,m*=-1);this.rotate=(h?Math.atan2(d[1],d[0]):Math.atan2(-f[0],f[1]))*sa;this.translate=[b.e,b.f];this.scale=[h,a];this.skew=a?Math.atan2(m,a)*sa:0}function kf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);d&&(b[0]/=d,b[1]/=d);return d}function Ab(b){return b.length?b.pop()+",":""}function kh(b,d,f,h){b[0]!==d[0]||b[1]!==d[1]?(f=f.push("translate(",null,",",null,")"),h.push({i:f-4,x:Xa(b[0],d[0])},{i:f-2,x:Xa(b[1],d[1])})):(d[0]||d[1])&&f.push("translate("+d+")")}function lh(b,d,f,h){b!==d?(180<b-d?
d+=360:180<d-b&&(b+=360),h.push({i:f.push(Ab(f)+"rotate(",null,")")-2,x:Xa(b,d)})):d&&f.push(Ab(f)+"rotate("+d+")")}function mh(b,d,f,h){b!==d?h.push({i:f.push(Ab(f)+"skewX(",null,")")-2,x:Xa(b,d)}):d&&f.push(Ab(f)+"skewX("+d+")")}function nh(b,d,f,h){b[0]!==d[0]||b[1]!==d[1]?(f=f.push(Ab(f)+"scale(",null,",",null,")"),h.push({i:f-4,x:Xa(b[0],d[0])},{i:f-2,x:Xa(b[1],d[1])})):1===d[0]&&1===d[1]||f.push(Ab(f)+"scale("+d+")")}function lf(b,d){var f=[],h=[];b=z.transform(b);d=z.transform(d);kh(b.translate,
d.translate,f,h);lh(b.rotate,d.rotate,f,h);mh(b.skew,d.skew,f,h);nh(b.scale,d.scale,f,h);b=d=null;return function(b){for(var d=-1,m=h.length,a;++d<m;)f[(a=h[d]).i]=a.x(b);return f.join("")}}function oh(b,d){d=(d-=b=+b)||1/d;return function(f){return(f-b)/d}}function ph(b,d){d=(d-=b=+b)||1/d;return function(f){return Math.max(0,Math.min(1,(f-b)/d))}}function qh(b){var d=b.source;b=b.target;var f=b;if(d===f)var h=d;else{h=mf(d);for(var f=mf(f),m=h.pop(),a=f.pop(),c=null;m===a;)c=m,m=h.pop(),a=f.pop();
h=c}for(f=[d];d!==h;)d=d.parent,f.push(d);for(d=f.length;b!==h;)f.splice(d,0,b),b=b.parent;return f}function mf(b){for(var d=[],f=b.parent;null!=f;)d.push(b),b=f,f=f.parent;d.push(b);return d}function rh(b){b.fixed|=2}function sh(b){b.fixed&=-7}function th(b){b.fixed|=4;b.px=b.x;b.py=b.y}function uh(b){b.fixed&=-5}function nf(b,d,f){var h=0,m=0;b.charge=0;if(!b.leaf)for(var a=b.nodes,c=a.length,e=-1,g;++e<c;)g=a[e],null!=g&&(nf(g,d,f),b.charge+=g.charge,h+=g.charge*g.cx,m+=g.charge*g.cy);b.point&&
(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),d*=f[b.point.index],b.charge+=b.pointCharge=d,h+=d*b.point.x,m+=d*b.point.y);b.cx=h/b.charge;b.cy=m/b.charge}function Pb(b,d){z.rebind(b,d,"sort","children","value");b.nodes=b;b.links=vh;return b}function Qb(b,d){for(var f,h,m=[b];null!=(b=m.pop());)if(d(b),(f=b.children)&&(h=f.length))for(;0<=--h;)m.push(f[h])}function Ta(b,d){for(var f,h,m=[b],a=[];null!=(b=m.pop());)if(a.push(b),(f=b.children)&&(h=f.length))for(var c=-1;++c<h;)m.push(f[c]);
for(;null!=(b=a.pop());)d(b)}function wh(b){return b.children}function xh(b){return b.value}function yh(b,d){return d.value-b.value}function vh(b){return z.merge(b.map(function(b){return(b.children||[]).map(function(d){return{source:b,target:d}})}))}function zh(b){return b.x}function Ah(b){return b.y}function Bh(b,d,f){b.y0=d;b.y=f}function xd(b){return z.range(b.length)}function yd(b){var d=-1;b=b[0].length;for(var f=[];++d<b;)f[d]=0;return f}function Ch(b){for(var d=1,f=0,h=b[0][1],m,a=b.length;d<
a;++d)(m=b[d][1])>h&&(f=d,h=m);return f}function Dh(b){return b.reduce(Eh,0)}function Eh(b,d){return b+d[1]}function Fh(b,d){return of(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function of(b,d){for(var f=-1,h=+b[0],m=(b[1]-h)/d,a=[];++f<=d;)a[f]=m*f+h;return a}function Gh(b){return[z.min(b),z.max(b)]}function Hh(b,d){return b.value-d.value}function zd(b,d){var f=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=f;f._pack_prev=d}function pf(b,d){b._pack_next=d;d._pack_prev=b}function qf(b,
d){var f=d.x-b.x,h=d.y-b.y,m=b.r+d.r;return.999*m*m>f*f+h*h}function rf(b){function d(b){h=Math.min(b.x-b.r,h);m=Math.max(b.x+b.r,m);a=Math.min(b.y-b.r,a);c=Math.max(b.y+b.r,c)}if((f=b.children)&&(n=f.length)){var f,h=Infinity,m=-Infinity,a=Infinity,c=-Infinity,e,g,k,n;f.forEach(Ih);var l=f[0];l.x=-l.r;l.y=0;d(l);if(1<n){var p=f[1];p.x=p.r;p.y=0;d(p);if(2<n){var w=f[2];sf(l,p,w);d(w);zd(l,w);l._pack_prev=w;zd(w,p);p=l._pack_next;for(e=3;e<n;e++){sf(l,p,w=f[e]);var y=0,q=1,r=1;for(g=p._pack_next;g!==
p;g=g._pack_next,q++)if(qf(g,w)){y=1;break}if(1==y)for(k=l._pack_prev;k!==g._pack_prev&&!qf(k,w);k=k._pack_prev,r++);y?(q<r||q==r&&p.r<l.r?pf(l,p=g):pf(l=k,p),e--):(zd(l,w),p=w,d(w))}}}l=(h+m)/2;p=(a+c)/2;for(e=g=0;e<n;e++)w=f[e],w.x-=l,w.y-=p,g=Math.max(g,w.r+Math.sqrt(w.x*w.x+w.y*w.y));b.r=g;f.forEach(Jh)}}function Ih(b){b._pack_next=b._pack_prev=b}function Jh(b){delete b._pack_next;delete b._pack_prev}function tf(b,d,f,h){var m=b.children;b.x=d+=h*b.x;b.y=f+=h*b.y;b.r*=h;if(m){b=-1;for(var a=m.length;++b<
a;)tf(m[b],d,f,h)}}function sf(b,d,f){var h=b.r+f.r,m=d.x-b.x,a=d.y-b.y;if(h&&(m||a)){var c=d.r+f.r,e=m*m+a*a,c=c*c,h=h*h;d=.5+(h-c)/(2*e);c=Math.sqrt(Math.max(0,2*c*(h+e)-(h-=e)*h-c*c))/(2*e);f.x=b.x+d*m+c*a;f.y=b.y+d*a-c*m}else f.x=b.x+h,f.y=b.y}function uf(b,d){return b.parent==d.parent?1:2}function Ad(b){var d=b.children;return d.length?d[0]:b.t}function Bd(b){var d=b.children,f;return(f=d.length)?d[f-1]:b.t}function Kh(b){return 1+z.max(b,function(b){return b.y})}function Lh(b){return b.reduce(function(b,
f){return b+f.x},0)/b.length}function vf(b){var d=b.children;return d&&d.length?vf(d[0]):b}function wf(b){var d=b.children,f;return d&&(f=d.length)?wf(d[f-1]):b}function Cd(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function xf(b,d){var f=b.x+d[3],h=b.y+d[0],m=b.dx-d[1]-d[3],a=b.dy-d[0]-d[2];0>m&&(f+=m/2,m=0);0>a&&(h+=a/2,a=0);return{x:f,y:h,dx:m,dy:a}}function Bb(b){var d=b[0];b=b[b.length-1];return d<b?[d,b]:[b,d]}function sc(b){return b.rangeExtent?b.rangeExtent():Bb(b.range())}function Mh(b,d,f,h){var m=
f(b[0],b[1]),a=h(d[0],d[1]);return function(b){return a(m(b))}}function tc(b,d){var f=0,h=b.length-1,m=b[f],a=b[h];if(a<m){var c=f;f=h;h=c;c=m;m=a;a=c}b[f]=d.floor(m);b[h]=d.ceil(a);return b}function yf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Nh}function Oh(b,d,f,h){var m=[],a=[],c=0,e=Math.min(b.length,d.length)-1;b[e]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());for(;++c<=e;)m.push(f(b[c-1],b[c])),a.push(h(d[c-1],d[c]));return function(d){var f=
z.bisect(b,d,1,e)-1;return a[f](m[f](d))}}function zf(b,d,f,h){function m(){var m=2<Math.min(b.length,d.length)?Oh:Mh,x=h?ph:oh;c=m(b,d,x,f);e=m(d,b,x,ob);return a}function a(b){return c(b)}var c,e;a.invert=function(b){return e(b)};a.domain=function(d){if(!arguments.length)return b;b=d.map(Number);return m()};a.range=function(b){if(!arguments.length)return d;d=b;return m()};a.rangeRound=function(b){return a.range(b).interpolate(hf)};a.clamp=function(b){if(!arguments.length)return h;h=b;return m()};
a.interpolate=function(b){if(!arguments.length)return f;f=b;return m()};a.ticks=function(d){return z.range.apply(z,eb(b,d))};a.tickFormat=function(d,f){return Dd(b,d,f)};a.nice=function(d){Af(b,d);return m()};a.copy=function(){return zf(b,d,f,h)};return m()}function Ed(b,d){return z.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Af(b,d){tc(b,yf(eb(b,d)[2]));tc(b,yf(eb(b,d)[2]));return b}function eb(b,d){null==d&&(d=10);var f=Bb(b),h=f[1]-f[0],m=Math.pow(10,Math.floor(Math.log(h/d)/
Math.LN10)),h=d/h*m;.15>=h?m*=10:.35>=h?m*=5:.75>=h&&(m*=2);f[0]=Math.ceil(f[0]/m)*m;f[1]=Math.floor(f[1]/m)*m+.5*m;f[2]=m;return f}function Dd(b,d,f){b=eb(b,d);if(f){d=je.exec(f);d.shift();if("s"===d[8]){var h=z.formatPrefix(Math.max(da(b[0]),da(b[1])));d[7]||(d[7]="."+uc(h.scale(b[2])));d[8]="f";f=z.format(d.join(""));return function(b){return f(h.scale(b))+h.symbol}}d[7]||(d[7]="."+Ph(d[8],b));f=d.join("")}else f=",."+uc(b[2])+"f";return z.format(f)}function uc(b){return-Math.floor(Math.log(b)/
Math.LN10+.01)}function Ph(b,d){var f=uc(d[2]);return b in Qh?Math.abs(f-uc(Math.max(da(d[0]),da(d[1]))))+ +("e"!==b):f-2*("%"===b)}function Bf(b,d,f,h){function m(b){return(f?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function a(b){return f?Math.pow(d,b):-Math.pow(d,-b)}function c(d){return b(m(d))}c.invert=function(d){return a(b.invert(d))};c.domain=function(d){if(!arguments.length)return h;f=0<=d[0];b.domain((h=d.map(Number)).map(m));return c};c.base=function(f){if(!arguments.length)return d;
d=+f;b.domain(h.map(m));return c};c.nice=function(){var d=tc(h.map(m),f?Math:Rh);b.domain(d);h=d.map(a);return c};c.ticks=function(){var b=Bb(h),c=[],e=b[0],b=b[1],x=Math.floor(m(e)),g=Math.ceil(m(b)),k=d%1?2:d;if(isFinite(g-x)){if(f){for(;x<g;x++)for(var n=1;n<k;n++)c.push(a(x)*n);c.push(a(x))}else for(c.push(a(x));x++<g;)for(n=k-1;0<n;n--)c.push(a(x)*n);for(x=0;c[x]<e;x++);for(g=c.length;c[g-1]>b;g--);c=c.slice(x,g)}return c};c.tickFormat=function(b,f){if(!arguments.length)return Cf;2>arguments.length?
f=Cf:"function"!==typeof f&&(f=z.format(f));var h=Math.max(1,d*b/c.ticks().length);return function(b){var c=b/a(Math.round(m(b)));c*d<d-.5&&(c*=d);return c<=h?f(b):""}};c.copy=function(){return Bf(b.copy(),d,f,h)};return Ed(c,b)}function Df(b,d,f){function h(d){return b(m(d))}var m=vc(d),a=vc(1/d);h.invert=function(d){return a(b.invert(d))};h.domain=function(d){if(!arguments.length)return f;b.domain((f=d.map(Number)).map(m));return h};h.ticks=function(b){return z.range.apply(z,eb(f,b))};h.tickFormat=
function(b,d){return Dd(f,b,d)};h.nice=function(b){return h.domain(Af(f,b))};h.exponent=function(c){if(!arguments.length)return d;m=vc(d=c);a=vc(1/d);b.domain(f.map(m));return h};h.copy=function(){return Df(b.copy(),d,f)};return Ed(h,b)}function vc(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function Ef(b,d){function f(f){return a[((m.get(f)||("range"===d.t?m.set(f,b.push(f)):NaN))-1)%a.length]}function h(d,f){return z.range(b.length).map(function(b){return d+f*b})}var m,a,c;f.domain=
function(h){if(!arguments.length)return b;b=[];m=new v;for(var a=-1,c=h.length,e;++a<c;)m.has(e=h[a])||m.set(e,b.push(e));return f[d.t].apply(f,d.a)};f.range=function(b){if(!arguments.length)return a;a=b;c=0;d={t:"range",a:arguments};return f};f.rangePoints=function(m,e){2>arguments.length&&(e=0);var x=m[0],g=m[1],g=2>b.length?(x=(x+g)/2,0):(g-x)/(b.length-1+e);a=h(x+g*e/2,g);c=0;d={t:"rangePoints",a:arguments};return f};f.rangeRoundPoints=function(m,e){2>arguments.length&&(e=0);var x=m[0],g=m[1],
k=2>b.length?(x=g=Math.round((x+g)/2),0):(g-x)/(b.length-1+e)|0;a=h(x+Math.round(k*e/2+(g-x-(b.length-1+e)*k)/2),k);c=0;d={t:"rangeRoundPoints",a:arguments};return f};f.rangeBands=function(m,e,x){2>arguments.length&&(e=0);3>arguments.length&&(x=e);var g=m[1]<m[0],k=m[g-0],N=(m[1-g]-k)/(b.length-e+2*x);a=h(k+N*x,N);g&&a.reverse();c=N*(1-e);d={t:"rangeBands",a:arguments};return f};f.rangeRoundBands=function(m,e,x){2>arguments.length&&(e=0);3>arguments.length&&(x=e);var g=m[1]<m[0],k=m[g-0],N=m[1-g],
n=Math.floor((N-k)/(b.length-e+2*x));a=h(k+Math.round((N-k-(b.length-e)*n)/2),n);g&&a.reverse();c=Math.round(n*(1-e));d={t:"rangeRoundBands",a:arguments};return f};f.rangeBand=function(){return c};f.rangeExtent=function(){return Bb(d.a[0])};f.copy=function(){return Ef(b,d)};return f.domain(b)}function Ff(b,d){function f(){var f=0,a=d.length;for(m=[];++f<a;)m[f-1]=z.quantile(b,f/a);return h}function h(b){if(!isNaN(b=+b))return d[z.bisect(m,b)]}var m;h.domain=function(d){if(!arguments.length)return b;
b=d.map(c).filter(g).sort(a);return f()};h.range=function(b){if(!arguments.length)return d;d=b;return f()};h.quantiles=function(){return m};h.invertExtent=function(f){f=d.indexOf(f);return 0>f?[NaN,NaN]:[0<f?m[f-1]:b[0],f<m.length?m[f]:b[b.length-1]]};h.copy=function(){return Ff(b,d)};return f()}function Gf(b,d,f){function h(d){return f[Math.max(0,Math.min(c,Math.floor(a*(d-b))))]}function m(){a=f.length/(d-b);c=f.length-1;return h}var a,c;h.domain=function(f){if(!arguments.length)return[b,d];b=+f[0];
d=+f[f.length-1];return m()};h.range=function(b){if(!arguments.length)return f;f=b;return m()};h.invertExtent=function(d){d=f.indexOf(d);d=0>d?NaN:d/a+b;return[d,d+1/a]};h.copy=function(){return Gf(b,d,f)};return m()}function Hf(b,d){function f(f){if(f<=f)return d[z.bisect(b,f)]}f.domain=function(d){if(!arguments.length)return b;b=d;return f};f.range=function(b){if(!arguments.length)return d;d=b;return f};f.invertExtent=function(f){f=d.indexOf(f);return[b[f-1],b[f]]};f.copy=function(){return Hf(b,
d)};return f}function If(b){function d(b){return+b}d.invert=d;d.domain=d.range=function(f){if(!arguments.length)return b;b=f.map(d);return d};d.ticks=function(d){return z.range.apply(z,eb(b,d))};d.tickFormat=function(d,h){return Dd(b,d,h)};d.copy=function(){return If(b)};return d}function Sh(){return 0}function Th(b){return b.innerRadius}function Uh(b){return b.outerRadius}function Jf(b){return b.startAngle}function Kf(b){return b.endAngle}function Vh(b){return b&&b.padAngle}function wc(b,d,f,h){return 0<
(b-f)*d-(d-h)*b?0:1}function xc(b,d,f,h,a){var m=b[0]-d[0],c=b[1]-d[1];a=(a?h:-h)/Math.sqrt(m*m+c*c);var c=a*c,m=-a*m,e=b[0]+c,g=b[1]+m,k=d[0]+c,n=d[1]+m;b=(e+k)/2;d=(g+n)/2;a=k-e;var l=n-g,p=a*a+l*l;h=f-h;var n=e*n-k*g,w=(0>l?-1:1)*Math.sqrt(Math.max(0,h*h*p-n*n)),e=(n*l-a*w)/p,g=(-n*a-l*w)/p,k=(n*l+a*w)/p;a=(-n*a+l*w)/p;l=e-b;p=g-d;b=k-b;d=a-d;l*l+p*p>b*b+d*d&&(e=k,g=a);return[[e-c,g-m],[e*f/h,g*f/h]]}function Lf(b){function d(d){function m(){e.push("M",c(b(x),g))}for(var e=[],x=[],k=-1,n=d.length,
l,N=pa(f),R=pa(h);++k<n;)a.call(this,l=d[k],k)?x.push([+N.call(this,l,k),+R.call(this,l,k)]):x.length&&(m(),x=[]);x.length&&m();return e.length?e.join(""):null}var f=vb,h=Jb,a=Gb,c=Qa,e=c.key,g=.7;d.x=function(b){if(!arguments.length)return f;f=b;return d};d.y=function(b){if(!arguments.length)return h;h=b;return d};d.defined=function(b){if(!arguments.length)return a;a=b;return d};d.interpolate=function(b){if(!arguments.length)return e;e="function"===typeof b?c=b:(c=Fd.get(b)||Qa).key;return d};d.tension=
function(b){if(!arguments.length)return g;g=b;return d};return d}function Qa(b){return 1<b.length?b.join("L"):b+"Z"}function Mf(b){return b.join("L")+"Z"}function Gd(b){for(var d=0,f=b.length,h=b[0],a=[h[0],",",h[1]];++d<f;)a.push("V",(h=b[d])[1],"H",h[0]);return a.join("")}function Hd(b){for(var d=0,f=b.length,h=b[0],a=[h[0],",",h[1]];++d<f;)a.push("H",(h=b[d])[0],"V",h[1]);return a.join("")}function yc(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return Qa(b);var f=b.length!=d.length,
h="",a=b[0],c=b[1],e=d[0],g=e,k=1;f&&(h+="Q"+(c[0]-2*e[0]/3)+","+(c[1]-2*e[1]/3)+","+c[0]+","+c[1],a=b[1],k=2);if(1<d.length)for(g=d[1],c=b[k],k++,h+="C"+(a[0]+e[0])+","+(a[1]+e[1])+","+(c[0]-g[0])+","+(c[1]-g[1])+","+c[0]+","+c[1],a=2;a<d.length;a++,k++)c=b[k],g=d[a],h+="S"+(c[0]-g[0])+","+(c[1]-g[1])+","+c[0]+","+c[1];f&&(f=b[k],h+="Q"+(c[0]+2*g[0]/3)+","+(c[1]+2*g[1]/3)+","+f[0]+","+f[1]);return h}function Id(b,d){for(var f=[],h=(1-d)/2,a,c=b[0],e=b[1],g=1,k=b.length;++g<k;)a=c,c=e,e=b[g],f.push([h*
(e[0]-a[0]),h*(e[1]-a[1])]);return f}function Nf(b){if(3>b.length)return Qa(b);var d=1,f=b.length,h=b[0],a=h[0],c=h[1],e=[a,a,a,(h=b[1])[0]],g=[c,c,c,h[1]],a=[a,",",c,"L",Ma(fb,e),",",Ma(fb,g)];for(b.push(b[f-1]);++d<=f;)h=b[d],e.shift(),e.push(h[0]),g.shift(),g.push(h[1]),Jd(a,e,g);b.pop();a.push("L",h);return a.join("")}function Ma(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function Jd(b,d,f){b.push("C",Ma(Of,d),",",Ma(Of,f),",",Ma(Pf,d),",",Ma(Pf,f),",",Ma(fb,d),",",Ma(fb,f))}function Kd(b,
d){return(d[1]-b[1])/(d[0]-b[0])}function Qf(b){for(var d,f=-1,h=b.length,a,c;++f<h;)d=b[f],a=d[0],c=d[1]-va,d[0]=a*Math.cos(c),d[1]=a*Math.sin(c);return b}function Rf(b){function d(d){function m(){x.push("M",g(b(N),p),l,n(b(k.reverse()),p),"Z")}for(var x=[],k=[],N=[],R=-1,w=d.length,y,q=pa(f),na=pa(a),r=f===h?function(){return aa}:pa(h),t=a===c?function(){return u}:pa(c),aa,u;++R<w;)e.call(this,y=d[R],R)?(k.push([aa=+q.call(this,y,R),u=+na.call(this,y,R)]),N.push([+r.call(this,y,R),+t.call(this,
y,R)])):k.length&&(m(),k=[],N=[]);k.length&&m();return x.length?x.join(""):null}var f=vb,h=vb,a=0,c=Jb,e=Gb,g=Qa,k=g.key,n=g,l="L",p=.7;d.x=function(b){if(!arguments.length)return h;f=h=b;return d};d.x0=function(b){if(!arguments.length)return f;f=b;return d};d.x1=function(b){if(!arguments.length)return h;h=b;return d};d.y=function(b){if(!arguments.length)return c;a=c=b;return d};d.y0=function(b){if(!arguments.length)return a;a=b;return d};d.y1=function(b){if(!arguments.length)return c;c=b;return d};
d.defined=function(b){if(!arguments.length)return e;e=b;return d};d.interpolate=function(b){if(!arguments.length)return k;k="function"===typeof b?g=b:(g=Fd.get(b)||Qa).key;n=g.reverse||g;l=g.closed?"M":"L";return d};d.tension=function(b){if(!arguments.length)return p;p=b;return d};return d}function Wh(b){return b.radius}function Sf(b){return[b.x,b.y]}function Xh(b){return function(){var d=b.apply(this,arguments),f=d[0],d=d[1]-va;return[f*Math.cos(d),f*Math.sin(d)]}}function Yh(){return 64}function Zh(){return"circle"}
function Tf(b){b=Math.sqrt(b/ba);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Uf(b){return function(){var d,f,h;(d=this[b])&&(h=d[f=d.active])&&(h.timer.c=null,h.timer.t=NaN,--d.count?delete d[f]:delete this[b],d.active+=.5,h.event&&h.event.interrupt.call(this,this.__data__,h.index))}}function Rb(b,d,f){Tb(b,Aa);b.namespace=d;b.id=f;return b}function Ld(b,d,f,h){var a=b.id,c=b.namespace;return ja(b,"function"===typeof f?function(b,m,e){b[c][a].tween.set(d,h(f.call(b,
b.__data__,m,e)))}:(f=h(f),function(b){b[c][a].tween.set(d,f)}))}function $h(b){null==b&&(b="");return function(){this.textContent=b}}function Md(b){return null==b?"__transition__":"__transition_"+b+"__"}function zc(b,d,f,h,a){function m(b){var d=k.delay;y.t=d+w;if(d<=b)return c(b-d);y.c=c}function c(f){var a=g.active,m=g[a];m&&(m.timer.c=null,m.timer.t=NaN,--g.count,delete g[a],m.event&&m.event.interrupt.call(b,b.__data__,m.index));for(var c in g)+c<h&&(a=g[c],a.timer.c=null,a.timer.t=NaN,--g.count,
delete g[c]);y.c=e;Yb(function(){y.c&&e(f||1)&&(y.c=null,y.t=NaN);return 1},0,w);g.active=h;k.event&&k.event.start.call(b,b.__data__,d);p=[];k.tween.forEach(function(f,h){(h=h.call(b,b.__data__,d))&&p.push(h)});l=k.ease;n=k.duration}function e(a){a/=n;for(var m=l(a),c=p.length;0<c;)p[--c].call(b,m);if(1<=a)return k.event&&k.event.end.call(b,b.__data__,d),--g.count?delete g[h]:delete b[f],1}var g=b[f]||(b[f]={active:0,count:0}),k=g[h],n,l,p;if(!k){var w=a.time;var y=Yb(m,0,w);k=g[h]={tween:new v,time:w,
timer:y,delay:a.delay,duration:a.duration,ease:a.ease,index:d};a=null;++g.count}}function ai(b,d,f){b.attr("transform",function(b){var h=d(b);return"translate("+(isFinite(h)?h:f(b))+",0)"})}function bi(b,d,f){b.attr("transform",function(b){var h=d(b);return"translate(0,"+(isFinite(h)?h:f(b))+")"})}function Nd(b){return b.toISOString()}function Od(b,d,f){function h(d){return b(d)}function a(b,f){var h=(b[1]-b[0])/f,a=z.bisect(Ac,h);return a==Ac.length?[d.year,eb(b.map(function(b){return b/31536E6}),
f)[2]]:a?d[h/Ac[a-1]<Ac[a]/h?a-1:a]:[ci,eb(b,f)[2]]}h.invert=function(d){return pb(b.invert(d))};h.domain=function(d){if(!arguments.length)return b.domain().map(pb);b.domain(d);return h};h.nice=function(b,d){function f(f){return!isNaN(f)&&!b.range(f,pb(+f+1),d).length}var m=h.domain(),c=Bb(m);if(c=null==b?a(c,10):"number"===typeof b&&a(c,b))b=c[0],d=c[1];return h.domain(tc(m,1<d?{floor:function(d){for(;f(d=b.floor(d));)d=pb(d-1);return d},ceil:function(d){for(;f(d=b.ceil(d));)d=pb(+d+1);return d}}:
b))};h.ticks=function(b,d){var f=Bb(h.domain()),c=null==b?a(f,10):"number"===typeof b?a(f,b):!b.range&&[{range:b},d];c&&(b=c[0],d=c[1]);return b.range(f[0],pb(+f[1]+1),1>d?1:d)};h.tickFormat=function(){return f};h.copy=function(){return Od(b.copy(),d,f)};return Ed(h,b)}function pb(b){return new Date(b)}function di(b){return JSON.parse(b.responseText)}function ei(b){var d=Fa.createRange();d.selectNode(Fa.body);return d.createContextualFragment(b.responseText)}var z={version:"3.5.17"},Vf=[].slice,Ra=
function(b){return Vf.call(b)},Fa=this.document;if(Fa)try{Ra(Fa.documentElement.childNodes)[0].nodeType}catch(b){Ra=function(b){for(var d=b.length,h=Array(d);d--;)h[d]=b[d];return h}}Date.now||(Date.now=function(){return+new Date});if(Fa)try{Fa.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var Bc=this.Element.prototype,fi=Bc.setAttribute,gi=Bc.setAttributeNS,Wf=this.CSSStyleDeclaration.prototype,hi=Wf.setProperty;Bc.setAttribute=function(b,f){fi.call(this,b,f+"")};Bc.setAttributeNS=
function(b,f,h){gi.call(this,b,f,h+"")};Wf.setProperty=function(b,f,h){hi.call(this,b,f+"",h)}}z.ascending=a;z.descending=function(b,d){return d<b?-1:d>b?1:d>=b?0:NaN};z.min=function(b,d){var f=-1,h=b.length,a;if(1===arguments.length){for(;++f<h;)if(null!=(a=b[f])&&a>=a){var c=a;break}for(;++f<h;)null!=(a=b[f])&&c>a&&(c=a)}else{for(;++f<h;)if(null!=(a=d.call(b,b[f],f))&&a>=a){c=a;break}for(;++f<h;)null!=(a=d.call(b,b[f],f))&&c>a&&(c=a)}return c};z.max=function(b,d){var f=-1,h=b.length,a;if(1===arguments.length){for(;++f<
h;)if(null!=(a=b[f])&&a>=a){var c=a;break}for(;++f<h;)null!=(a=b[f])&&a>c&&(c=a)}else{for(;++f<h;)if(null!=(a=d.call(b,b[f],f))&&a>=a){c=a;break}for(;++f<h;)null!=(a=d.call(b,b[f],f))&&a>c&&(c=a)}return c};z.extent=function(b,d){var f=-1,h=b.length,a,c;if(1===arguments.length){for(;++f<h;)if(null!=(a=b[f])&&a>=a){var e=c=a;break}for(;++f<h;)null!=(a=b[f])&&(e>a&&(e=a),c<a&&(c=a))}else{for(;++f<h;)if(null!=(a=d.call(b,b[f],f))&&a>=a){e=c=a;break}for(;++f<h;)null!=(a=d.call(b,b[f],f))&&(e>a&&(e=a),
c<a&&(c=a))}return[e,c]};z.sum=function(b,d){var f=0,a=b.length,c,e=-1;if(1===arguments.length)for(;++e<a;)isNaN(c=+b[e])||(f+=c);else for(;++e<a;)isNaN(c=+d.call(b,b[e],e))||(f+=c);return f};z.mean=function(b,d){var f=0,a=b.length,m,e=-1,g=a;if(1===arguments.length)for(;++e<a;)isNaN(m=c(b[e]))?--g:f+=m;else for(;++e<a;)isNaN(m=c(d.call(b,b[e],e)))?--g:f+=m;if(g)return f/g};z.quantile=function(b,d){var f=(b.length-1)*d+1,a=Math.floor(f),c=+b[a-1];return(f-=a)?c+f*(b[a]-c):c};z.median=function(b,d){var f=
[],h=b.length,m,e=-1;if(1===arguments.length)for(;++e<h;)isNaN(m=c(b[e]))||f.push(m);else for(;++e<h;)isNaN(m=c(d.call(b,b[e],e)))||f.push(m);if(f.length)return z.quantile(f.sort(a),.5)};z.variance=function(b,d){var f=b.length,a=0,m,e=0,g=-1,k=0;if(1===arguments.length)for(;++g<f;){if(!isNaN(m=c(b[g]))){var n=m-a;a+=n/++k;e+=n*(m-a)}}else for(;++g<f;)isNaN(m=c(d.call(b,b[g],g)))||(n=m-a,a+=n/++k,e+=n*(m-a));if(1<k)return e/(k-1)};z.deviation=function(){var b=z.variance.apply(this,arguments);return b?
Math.sqrt(b):b};var Xf=u(a);z.bisectLeft=Xf.left;z.bisect=z.bisectRight=Xf.right;z.bisector=function(b){return u(1===b.length?function(d,f){return a(b(d),f)}:b)};z.shuffle=function(b,d,f){3>(a=arguments.length)&&(f=b.length,2>a&&(d=0));for(var a=f-d,c,e;a;)e=Math.random()*a--|0,c=b[a+d],b[a+d]=b[e+d],b[e+d]=c;return b};z.permute=function(b,d){for(var f=d.length,a=Array(f);f--;)a[f]=b[d[f]];return a};z.pairs=function(b){for(var d=0,f=b.length-1,a=b[0],c=Array(0>f?0:f);d<f;)c[d]=[a,a=b[++d]];return c};
z.transpose=function(b){if(!(e=b.length))return[];for(var d=-1,f=z.min(b,q),a=Array(f);++d<f;)for(var c=-1,e,g=a[d]=Array(e);++c<e;)g[c]=b[c][d];return a};z.zip=function(){return z.transpose(arguments)};z.keys=function(b){var d=[],f;for(f in b)d.push(f);return d};z.values=function(b){var d=[],f;for(f in b)d.push(b[f]);return d};z.entries=function(b){var d=[],f;for(f in b)d.push({key:f,value:b[f]});return d};z.merge=function(b){var d=b.length;var f=-1;for(var a=0,c,e;++f<d;)a+=b[f].length;for(c=Array(a);0<=
--d;)for(e=b[d],f=e.length;0<=--f;)c[--a]=e[f];return c};var da=Math.abs;z.range=function(b,d,f){3>arguments.length&&(f=1,2>arguments.length&&(d=b,b=0));if(Infinity===(d-b)/f)throw Error("infinite range");var a=[];var c=da(f);for(var e=1;c*e%1;)e*=10;c=e;var e=-1,g;b*=c;d*=c;f*=c;if(0>f)for(;(g=b+f*++e)>d;)a.push(g/c);else for(;(g=b+f*++e)<d;)a.push(g/c);return a};z.map=function(b,d){var f=new v;if(b instanceof v)b.forEach(function(b,d){f.set(b,d)});else if(Array.isArray(b)){var a=-1,c=b.length,e;
if(1===arguments.length)for(;++a<c;)f.set(a,b[a]);else for(;++a<c;)f.set(d.call(b,e=b[a],a),e)}else for(a in b)f.set(a,b[a]);return f};t(v,{has:B,get:function(b){return this._[l(b)]},set:function(b,d){return this._[l(b)]=d},remove:K,keys:E,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},entries:function(){var b=[],d;for(d in this._)b.push({key:A(d),value:this._[d]});return b},size:F,empty:H,forEach:function(b){for(var d in this._)b.call(this,A(d),this._[d])}});z.nest=function(){function b(d,
h,c){if(c>=a.length)return g?g.call(f,h):e?h.sort(e):h;for(var m=-1,k=h.length,x=a[c++],n,l,p=new v,N;++m<k;)(N=p.get(n=x(l=h[m])))?N.push(l):p.set(n,[l]);d?(l=d(),h=function(f,a){l.set(f,b(d,a,c))}):(l={},h=function(f,a){l[f]=b(d,a,c)});p.forEach(h);return l}function d(b,f){if(f>=a.length)return b;var h=[],e=c[f++];b.forEach(function(b,a){h.push({key:b,values:d(a,f)})});return e?h.sort(function(b,d){return e(b.key,d.key)}):h}var f={},a=[],c=[],e,g;f.map=function(d,f){return b(f,d,0)};f.entries=function(f){return d(b(z.map,
f,0),0)};f.key=function(b){a.push(b);return f};f.sortKeys=function(b){c[a.length-1]=b;return f};f.sortValues=function(b){e=b;return f};f.rollup=function(b){g=b;return f};return f};z.set=function(b){var d=new D;if(b)for(var f=0,a=b.length;f<a;++f)d.add(b[f]);return d};t(D,{has:B,add:function(b){this._[l(b+="")]=!0;return b},remove:K,values:E,size:F,empty:H,forEach:function(b){for(var d in this._)b.call(this,A(d))}});z.behavior={};z.rebind=function(b,d){for(var f=1,a=arguments.length,c;++f<a;)b[c=arguments[f]]=
O(b,d,d[c]);return b};var Zd="webkit ms moz Moz o O".split(" ");z.dispatch=function(){for(var b=new r,d=-1,f=arguments.length;++d<f;)b[arguments[d]]=G(b);return b};r.prototype.on=function(b,d){var f=b.indexOf("."),a="";0<=f&&(a=b.slice(f+1),b=b.slice(0,f));if(b)return 2>arguments.length?this[b].on(a):this[b].on(a,d);if(2===arguments.length){if(null==d)for(b in this)if(this.hasOwnProperty(b))this[b].on(a,null);return this}};z.event=null;z.requote=function(b){return b.replace(ii,"\\$&")};var ii=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,
Tb={}.__proto__?function(b,d){b.__proto__=d}:function(b,d){for(var f in d)b[f]=d[f]},Rc=function(b,d){return d.querySelector(b)},Sc=function(b,d){return d.querySelectorAll(b)},Ub=function(b,d){var f=b.matches||b[P(b,"matchesSelector")];Ub=function(b,d){return f.call(b,d)};return Ub(b,d)};"function"===typeof Sizzle&&(Rc=function(b,d){return Sizzle(b,d)[0]||null},Sc=Sizzle,Ub=Sizzle.matchesSelector);z.selection=function(){return z.select(Fa.documentElement)};var ka=z.selection.prototype=[];ka.select=
function(b){var d=[],f,a,c,e;b=k(b);for(var g=-1,n=this.length;++g<n;){d.push(f=[]);f.parentNode=(c=this[g]).parentNode;for(var l=-1,p=c.length;++l<p;)(e=c[l])?(f.push(a=b.call(e,e.__data__,l,g)),a&&"__data__"in e&&(a.__data__=e.__data__)):f.push(null)}return U(d)};ka.selectAll=function(b){var d=[],f,a;b=J(b);for(var c=-1,e=this.length;++c<e;)for(var g=this[c],k=-1,n=g.length;++k<n;)if(a=g[k])d.push(f=Ra(b.call(a,a.__data__,k,c))),f.parentNode=a;return U(d)};var Pd={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};z.ns={prefix:Pd,qualify:function(b){var d=b.indexOf(":"),f=b;0<=d&&"xmlns"!==(f=b.slice(0,d))&&(b=b.slice(d+1));return Pd.hasOwnProperty(f)?{space:Pd[f],local:b}:b}};ka.attr=function(b,d){if(2>arguments.length){if("string"===typeof b){var f=this.node();b=z.ns.qualify(b);return b.local?f.getAttributeNS(b.space,b.local):f.getAttribute(b)}for(d in b)this.each(S(d,
b[d]));return this}return this.each(S(b,d))};ka.classed=function(b,d){if(2>arguments.length){if("string"===typeof b){var f=this.node(),a=(b=(b+"").trim().split(/^|\s+/)).length,c=-1;if(d=f.classList)for(;++c<a;){if(!d.contains(b[c]))return!1}else for(d=f.getAttribute("class");++c<a;)if(!p(b[c]).test(d))return!1;return!0}for(d in b)this.each(w(d,b[d]));return this}return this.each(w(b,d))};ka.style=function(b,d,f){var a=arguments.length;if(3>a){if("string"!==typeof b){2>a&&(d="");for(f in b)this.each(n(f,
b[f],d));return this}if(2>a)return a=this.node(),e(a).getComputedStyle(a,null).getPropertyValue(b);f=""}return this.each(n(b,d,f))};ka.property=function(b,d){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(d in b)this.each(X(d,b[d]));return this}return this.each(X(b,d))};ka.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=
b}):this.node().textContent};ka.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};ka.append=function(b){b=Z(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};ka.insert=function(b,d){b=Z(b);d=k(d);return this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,
arguments)||null)})};ka.remove=function(){return this.each(y)};ka.data=function(b,d){function f(b,f){var a,c=b.length,h=f.length,e=Math.min(c,h),m=Array(h),g=Array(h),x=Array(c),p,w;if(d){var e=new v,N=Array(c),y;for(a=-1;++a<c;)if(p=b[a])e.has(y=d.call(p,p.__data__,a))?x[a]=p:e.set(y,p),N[a]=y;for(a=-1;++a<h;)(p=e.get(y=d.call(f,w=f[a],a)))?!0!==p&&(m[a]=p,p.__data__=w):g[a]={__data__:w},e.set(y,!0);for(a=-1;++a<c;)a in N&&!0!==e.get(N[a])&&(x[a]=b[a])}else{for(a=-1;++a<e;)p=b[a],w=f[a],p?(p.__data__=
w,m[a]=p):g[a]={__data__:w};for(;a<h;++a)g[a]={__data__:f[a]};for(;a<c;++a)x[a]=b[a]}g.update=m;g.parentNode=m.parentNode=x.parentNode=b.parentNode;k.push(g);n.push(m);l.push(x)}var a=-1,c=this.length,e,g;if(!arguments.length){for(b=Array(c=(e=this[0]).length);++a<c;)if(g=e[a])b[a]=g.__data__;return b}var k=ea([]),n=U([]),l=U([]);if("function"===typeof b)for(;++a<c;)f(e=this[a],b.call(e,e.parentNode.__data__,a));else for(;++a<c;)f(e=this[a],b);n.enter=function(){return k};n.exit=function(){return l};
return n};ka.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};ka.filter=function(b){var d=[],f,a,c;"function"!==typeof b&&(b=M(b));for(var e=0,g=this.length;e<g;e++){d.push(f=[]);f.parentNode=(a=this[e]).parentNode;for(var k=0,n=a.length;k<n;k++)(c=a[k])&&b.call(c,c.__data__,k,e)&&f.push(c)}return U(d)};ka.order=function(){for(var b=-1,d=this.length;++b<d;)for(var f=this[b],a=f.length-1,c=f[a],e;0<=--a;)if(e=f[a])c&&c!==e.nextSibling&&c.parentNode.insertBefore(e,
c),c=e;return this};ka.sort=function(b){b=W.apply(this,arguments);for(var d=-1,f=this.length;++d<f;)this[d].sort(b);return this.order()};ka.each=function(b){return ja(this,function(d,f,a){b.call(d,d.__data__,f,a)})};ka.call=function(b){var d=Ra(arguments);b.apply(d[0]=this,d);return this};ka.empty=function(){return!this.node()};ka.node=function(){for(var b=0,d=this.length;b<d;b++)for(var f=this[b],a=0,c=f.length;a<c;a++){var e=f[a];if(e)return e}return null};ka.size=function(){var b=0;ja(this,function(){++b});
return b};var Ua=[];z.selection.enter=ea;z.selection.enter.prototype=Ua;Ua.append=ka.append;Ua.empty=ka.empty;Ua.node=ka.node;Ua.call=ka.call;Ua.size=ka.size;Ua.select=function(b){for(var d=[],f,a,c,e,g,k=-1,n=this.length;++k<n;){c=(e=this[k]).update;d.push(f=[]);f.parentNode=e.parentNode;for(var l=-1,p=e.length;++l<p;)(g=e[l])?(f.push(c[l]=a=b.call(e.parentNode,g.__data__,l,k)),a.__data__=g.__data__):f.push(null)}return U(d)};Ua.insert=function(b,d){2>arguments.length&&(d=la(this));return ka.insert.call(this,
b,d)};z.select=function(b){if("string"===typeof b){var d=[Rc(b,Fa)];d.parentNode=Fa.documentElement}else d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return U([d])};z.selectAll=function(b){"string"===typeof b?(b=Ra(Sc(b,Fa)),b.parentNode=Fa.documentElement):(b=Ra(b),b.parentNode=null);return U([b])};ka.on=function(b,d,f){var a=arguments.length;if(3>a){if("string"!==typeof b){2>a&&(d=!1);for(f in b)this.each(ta(f,b[f],d));return this}if(2>a)return(a=this.node()["__on"+b])&&
a._;f=!1}return this.each(ta(b,d,f))};var Tc=z.map({mouseenter:"mouseover",mouseleave:"mouseout"});Fa&&Tc.forEach(function(b){"on"+b in Fa&&Tc.remove(b)});var gb,pg=0;z.mouse=function(b){return ga(b,Q())};var Uc=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;z.touch=function(b,d,f){3>arguments.length&&(f=d,d=Q().changedTouches);if(d)for(var a=0,c=d.length,e;a<c;++a)if((e=d[a]).identifier===f)return ga(b,e)};z.behavior.drag=function(){function b(){this.on("mousedown.drag",c).on("touchstart.drag",
g)}function d(b,d,c,h,e){return function(){var m=z.event.target.correspondingElement||z.event.target,g=this.parentNode,k=f.of(this,arguments),x=0,n=b(),l=".drag"+(null==n?"":"-"+n),p=z.select(c(m)).on(h+l,function(){var b=d(g,n);if(b){var f=b[0]-y[0];var a=b[1]-y[1];x|=f|a;y=b;k({type:"drag",x:b[0]+N[0],y:b[1]+N[1],dx:f,dy:a})}}).on(e+l,function(){d(g,n)&&(p.on(h+l,null).on(e+l,null),w(x),k({type:"dragend"}))}),w=oa(m),y=d(g,n);if(a){var N=a.apply(this,arguments);N=[N.x-y[0],N.y-y[1]]}else N=[0,0];
k({type:"dragstart"})}}var f=T(b,"drag","dragstart","dragend"),a=null,c=d(I,z.mouse,e,"mousemove","mouseup"),g=d(ia,z.touch,C,"touchmove","touchend");b.origin=function(d){if(!arguments.length)return a;a=d;return b};return z.rebind(b,f,"on")};z.touches=function(b,d){2>arguments.length&&(d=Q().touches);return d?Ra(d).map(function(d){var f=ga(b,d);f.identifier=d.identifier;return f}):[]};var ba=Math.PI,La=2*ba,ji=La-1E-6,va=ba/2,ca=ba/180,sa=180/ba,Sb=Math.SQRT2;z.interpolateZoom=function(b,d){var f=
b[0],a=b[1],c=b[2],e=d[2],g=d[0]-f,k=d[1]-a,n=g*g+k*k;if(1E-12>n){var l=Math.log(e/c)/Sb;var p=function(b){return[f+b*g,a+b*k,c*Math.exp(Sb*b*l)]}}else{var w=Math.sqrt(n);p=(e*e-c*c+4*n)/(4*c*w);var e=(e*e-c*c-4*n)/(4*e*w),y=Math.log(Math.sqrt(p*p+1)-p);l=(Math.log(Math.sqrt(e*e+1)-e)-y)/Sb;p=function(b){b*=l;var d=Ia(y),h=c/(2*w),e=Sb*b+y;var m=((e=Math.exp(2*e))-1)/(e+1);var x=y,e=((x=Math.exp(x))-1/x)/2,h=h*(d*m-e);return[f+h*g,a+h*k,c*d/Ia(Sb*b+y)]}}p.duration=1E3*l;return p};z.behavior.zoom=
function(){function b(b){b.on("mousedown.zoom",p).on(Qd+".zoom",y).on("dblclick.zoom",q).on("touchstart.zoom",w)}function d(b){return[(b[0]-r.x)/r.k,(b[1]-r.y)/r.k]}function f(b){r.k=Math.max(v[0],Math.min(v[1],b))}function a(b,d){d=[d[0]*r.k+r.x,d[1]*r.k+r.y];r.x+=b[0]-d[0];r.y+=b[1]-d[1]}function c(d,c,h,e){d.__chart__={x:r.x,y:r.y,k:r.k};f(Math.pow(2,e));a(u=c,h);d=z.select(d);0<W&&(d=d.transition().duration(W));d.call(b.event)}function g(){Z&&Z.domain(A.range().map(function(b){return(b-r.x)/r.k}).map(A.invert));
S&&S.domain(D.range().map(function(b){return(b-r.y)/r.k}).map(D.invert))}function k(b){G++||b({type:"zoomstart"})}function n(b){g();b({type:"zoom",scale:r.k,translate:[r.x,r.y]})}function l(b){--G||(b({type:"zoomend"}),u=null)}function p(){var b=this,f=I.of(b,arguments),c=0,h=z.select(e(b)).on("mousemove.zoom",function(){c=1;a(z.mouse(b),m);n(f)}).on("mouseup.zoom",function(){h.on("mousemove.zoom",null).on("mouseup.zoom",null);g(c);l(f)}),m=d(z.mouse(b)),g=oa(b);Cc.call(b);k(f)}function w(){function b(){var b=
z.touches(g);q=r.k;b.forEach(function(b){b.identifier in y&&(y[b.identifier]=d(b))});return b}function h(){var d=z.event.target;z.select(d).on(t,e).on(u,m);L.push(d);d=z.event.changedTouches;for(var f=0,a=d.length;f<a;++f)y[d[f].identifier]=null;f=b();a=Date.now();1===f.length?(500>a-J&&(d=f[0],c(g,d,y[d.identifier],Math.floor(Math.log(r.k)/Math.LN2)+1),V()),J=a):1<f.length&&(d=f[0],a=f[1],f=d[0]-a[0],d=d[1]-a[1],N=f*f+d*d)}function e(){var b=z.touches(g),d;Cc.call(g);for(var c=0,h=b.length;c<h;++c,
d=null){var e=b[c];if(d=y[e.identifier]){if(k)break;var m=e;var k=d}}if(d){var l=(l=e[0]-m[0])*l+(l=e[1]-m[1])*l,b=N&&Math.sqrt(l/N);m=[(m[0]+e[0])/2,(m[1]+e[1])/2];k=[(k[0]+d[0])/2,(k[1]+d[1])/2];f(b*q)}J=null;a(m,k);n(x)}function m(){if(z.event.touches.length){for(var d=z.event.changedTouches,f=0,a=d.length;f<a;++f)delete y[d[f].identifier];for(var c in y)return void b()}z.selectAll(L).on(R,null);na.on("mousedown.zoom",p).on("touchstart.zoom",w);M();l(x)}var g=this,x=I.of(g,arguments),y={},N=0,
q,R=".zoom-"+z.event.changedTouches[0].identifier,t="touchmove"+R,u="touchend"+R,L=[],na=z.select(g),M=oa(g);h();k(x);na.on("mousedown.zoom",null).on("touchstart.zoom",h)}function y(){var b=I.of(this,arguments);C?clearTimeout(C):(Cc.call(this),t=d(u=L||z.mouse(this)),k(b));C=setTimeout(function(){C=null;l(b)},50);V();f(Math.pow(2,.002*Dc())*r.k);a(u,t);n(b)}function q(){var b=z.mouse(this),f=Math.log(r.k)/Math.LN2;c(this,b,d(b),z.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1)}var r={x:0,y:0,k:1},
t,u,L,M=[960,500],v=Yf,W=250,G=0,C,J,I=T(b,"zoomstart","zoom","zoomend"),A,Z,D,S;Qd||(Qd="onwheel"in Fa?(Dc=function(){return-z.event.deltaY*(z.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Fa?(Dc=function(){return z.event.wheelDelta},"mousewheel"):(Dc=function(){return-z.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=I.of(this,arguments),d=r;qb?z.select(this).transition().each("start.zoom",function(){r=this.__chart__||{x:0,y:0,k:1};k(b)}).tween("zoom:zoom",
function(){var f=M[0],a=M[1],c=u?u[0]:f/2,h=u?u[1]:a/2,e=z.interpolateZoom([(c-r.x)/r.k,(h-r.y)/r.k,f/r.k],[(c-d.x)/d.k,(h-d.y)/d.k,f/d.k]);return function(d){d=e(d);var a=f/d[2];this.__chart__=r={x:c-d[0]*a,y:h-d[1]*a,k:a};n(b)}}).each("interrupt.zoom",function(){l(b)}).each("end.zoom",function(){l(b)}):(this.__chart__=r,k(b),n(b),l(b))})};b.translate=function(d){if(!arguments.length)return[r.x,r.y];r={x:+d[0],y:+d[1],k:r.k};g();return b};b.scale=function(d){if(!arguments.length)return r.k;r={x:r.x,
y:r.y,k:null};f(+d);g();return b};b.scaleExtent=function(d){if(!arguments.length)return v;v=null==d?Yf:[+d[0],+d[1]];return b};b.center=function(d){if(!arguments.length)return L;L=d&&[+d[0],+d[1]];return b};b.size=function(d){if(!arguments.length)return M;M=d&&[+d[0],+d[1]];return b};b.duration=function(d){if(!arguments.length)return W;W=+d;return b};b.x=function(d){if(!arguments.length)return Z;Z=d;A=d.copy();r={x:0,y:0,k:1};return b};b.y=function(d){if(!arguments.length)return S;S=d;D=d.copy();
r={x:0,y:0,k:1};return b};return z.rebind(b,I,"on")};var Yf=[0,Infinity],Dc,Qd;z.color=Ca;Ca.prototype.toString=function(){return this.rgb()+""};z.hsl=Ba;var Rd=Ba.prototype=new Ca;Rd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ba(this.h,this.s,this.l/b)};Rd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ba(this.h,this.s,b*this.l)};Rd.rgb=function(){return za(this.h,this.s,this.l)};z.hcl=ra;var Sd=ra.prototype=new Ca;Sd.brighter=function(b){return new ra(this.h,
this.c,Math.min(100,this.l+Ec*(arguments.length?b:1)))};Sd.darker=function(b){return new ra(this.h,this.c,Math.max(0,this.l-Ec*(arguments.length?b:1)))};Sd.rgb=function(){return ua(this.h,this.c,this.l).rgb()};z.lab=Da;var Ec=18,de=.95047,ee=1,fe=1.08883,Td=Da.prototype=new Ca;Td.brighter=function(b){return new Da(Math.min(100,this.l+Ec*(arguments.length?b:1)),this.a,this.b)};Td.darker=function(b){return new Da(Math.max(0,this.l-Ec*(arguments.length?b:1)),this.a,this.b)};Td.rgb=function(){return Db(this.l,
this.a,this.b)};z.rgb=Ga;var Fc=Ga.prototype=new Ca;Fc.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var d=this.r,f=this.g,a=this.b;if(!d&&!f&&!a)return new Ga(30,30,30);d&&30>d&&(d=30);f&&30>f&&(f=30);a&&30>a&&(a=30);return new Ga(Math.min(255,d/b),Math.min(255,f/b),Math.min(255,a/b))};Fc.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ga(b*this.r,b*this.g,b*this.b)};Fc.hsl=function(){return ae(this.r,this.g,this.b)};Fc.toString=function(){return"#"+rb(this.r)+rb(this.g)+
rb(this.b)};var Wb=z.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,
darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,
grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,
lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,
palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,
teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Wb.forEach(function(b,d){Wb.set(b,new Ga(d>>16,d>>8&255,d&255))});z.functor=pa;z.xhr=$c(C);z.dsv=function(b,d){function f(b,f,h){3>arguments.length&&(h=f,f=null);var e=Xb(b,d,null==f?a:c(f),h);e.row=function(b){return arguments.length?e.response(null==(f=b)?a:c(b)):f};return e}function a(b){return f.parse(b.responseText)}function c(b){return function(d){return f.parse(d.responseText,
b)}}function e(d){return d.map(g).join(b)}function g(b){return k.test(b)?'"'+b.replace(/\"/g,'""')+'"':b}var k=new RegExp('["'+b+"\n]"),n=b.charCodeAt(0);f.parse=function(b,d){var a;return f.parseRows(b,function(b,f){if(a)return a(b,f-1);var c=new Function("d","return {"+b.map(function(b,d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");a=d?function(b,f){return d(c(b),f)}:c})};f.parseRows=function(b,d){function f(){var d;if(m>=e)return c;if(x)return x=!1,a;var f=m;if(34===b.charCodeAt(f)){for(d=
f;d++<e;)if(34===b.charCodeAt(d)){if(34!==b.charCodeAt(d+1))break;++d}m=d+2;var h=b.charCodeAt(d+1);13===h?(x=!0,10===b.charCodeAt(d+2)&&++m):10===h&&(x=!0);return b.slice(f+1,d).replace(/""/g,'"')}for(;m<e;){h=b.charCodeAt(m++);d=1;if(10===h)x=!0;else if(13===h)x=!0,10===b.charCodeAt(m)&&(++m,++d);else if(h!==n)continue;return b.slice(f,m-d)}return b.slice(f)}for(var a={},c={},h=[],e=b.length,m=0,g=0,k,x;(k=f())!==c;){for(var l=[];k!==a&&k!==c;)l.push(k),k=f();d&&null==(l=d(l,g++))||h.push(l)}return h};
f.format=function(d){if(Array.isArray(d[0]))return f.formatRows(d);var a=new D,c=[];d.forEach(function(b){for(var d in b)a.has(d)||c.push(a.add(d))});return[c.map(g).join(b)].concat(d.map(function(d){return c.map(function(b){return g(d[b])}).join(b)})).join("\n")};f.formatRows=function(b){return b.map(e).join("\n")};return f};z.csv=z.dsv(",","text/csv");z.tsv=z.dsv("\t","text/tab-separated-values");var $b,Zb,ac,bc,ge=this[P(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};z.timer=function(){Yb.apply(this,
arguments)};z.timer.flush=function(){he();ie()};z.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var ki="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var f=Math.pow(10,3*da(8-d));return{scale:8<d?function(b){return b/f}:function(b){return b*f},symbol:b}});z.formatPrefix=function(b,d){var f=0;if(b=+b)0>b&&(b*=-1),d&&(b=z.round(b,bd(b,d))),f=1+Math.floor(1E-12+Math.log(b)/Math.LN10),f=Math.max(-24,Math.min(24,3*Math.floor((f-1)/3)));return ki[8+
f/3]};var je=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,sg=z.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,d){return b.toPrecision(d)},e:function(b,d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=z.round(b,bd(b,d))).toFixed(Math.max(0,Math.min(20,bd(b*
(1+1E-15),d))))}}),Y=z.time={},Ea=Date;Va.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},
getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ya.setUTCDate.apply(this._,arguments)},setDay:function(){Ya.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ya.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ya.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ya.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ya.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ya.setUTCMonth.apply(this._,
arguments)},setSeconds:function(){Ya.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ya.setTime.apply(this._,arguments)}};var Ya=Date.prototype;Y.year=hb(function(b){b=Y.day(b);b.setMonth(0,1);return b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});Y.years=Y.year.range;Y.years.utc=Y.year.utc.range;Y.day=hb(function(b){var d=new Ea(2E3,0);d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-
1});Y.days=Y.day.range;Y.days.utc=Y.day.utc.range;Y.dayOfYear=function(b){var d=Y.year(b);return Math.floor((b-d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var f=Y[b]=hb(function(b){(b=Y.day(b)).setDate(b.getDate()-(b.getDay()+d)%7);return b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var f=Y.year(b).getDay();return Math.floor((Y.dayOfYear(b)+(f+d)%7)/7)-(f!==d)});
Y[b+"s"]=f.range;Y[b+"s"].utc=f.utc.range;Y[b+"OfYear"]=function(b){var f=Y.year(b).getDay();return Math.floor((Y.dayOfYear(b)+(f+d)%7)/7)}});Y.week=Y.sunday;Y.weeks=Y.sunday.range;Y.weeks.utc=Y.sunday.utc.range;Y.weekOfYear=Y.sundayOfYear;var ke={"-":"",_:" ",0:"0"},wa=/^\s*\d+/,ne=/^%/;z.locale=function(b){return{numberFormat:rg(b),timeFormat:ug(b)}};var Zf=z.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM",
"PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});z.format=Zf.numberFormat;z.geo={};cd.prototype={s:0,t:0,add:function(b){oe(b,this.t,Gc);oe(Gc.s,this.s,this);this.s?this.t+=Gc.t:this.s=Gc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};
var Gc=new cd;z.geo.stream=function(b,d){if(b&&$f.hasOwnProperty(b.type))$f[b.type](b,d);else fc(b,d)};var $f={Feature:function(b,d){fc(b.geometry,d)},FeatureCollection:function(b,d){for(var f=b.features,a=-1,c=f.length;++a<c;)fc(f[a].geometry,d)}},pe={Sphere:function(b,d){d.sphere()},Point:function(b,d){b=b.coordinates;d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)b=f[a],d.point(b[0],b[1],b[2])},LineString:function(b,d){dd(b.coordinates,d,0)},MultiLineString:function(b,
d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)dd(f[a],d,0)},Polygon:function(b,d){qe(b.coordinates,d)},MultiPolygon:function(b,d){for(var f=b.coordinates,a=-1,c=f.length;++a<c;)qe(f[a],d)},GeometryCollection:function(b,d){for(var f=b.geometries,a=-1,c=f.length;++a<c;)fc(f[a],d)}};z.geo.area=function(b){Hc=0;z.geo.stream(b,Ka);return Hc};var Hc,ib=new cd,Ka={sphere:function(){Hc+=4*ba},point:I,lineStart:I,lineEnd:I,polygonStart:function(){ib.reset();Ka.lineStart=Jg},polygonEnd:function(){var b=
2*ib;Hc+=0>b?4*ba+b:b;Ka.lineStart=Ka.lineEnd=Ka.point=I}};z.geo.bounds=function(){function b(b,d){v.push(W=[p=b,y=b]);d<w&&(w=d);d>r&&(r=d)}function d(d,f){var a=jb([d*ca,f*ca]);if(L){var c=sb(L,a);var h=[c[1],-c[0],0];h=sb(h,c);ic(h);h=jc(h);var e=d-q;c=0<e?1:-1;var m=h[0]*sa*c,e=180<da(e);e^(c*q<m&&m<c*d)?(h=h[1]*sa,h>r&&(r=h)):(m=(m+360)%360-180,e^(c*q<m&&m<c*d))?(h=-h[1]*sa,h<w&&(w=h)):(f<w&&(w=f),f>r&&(r=f));e?d<q?k(p,d)>k(p,y)&&(y=d):k(d,y)>k(p,y)&&(p=d):y>=p?(d<p&&(p=d),d>y&&(y=d)):d>q?k(p,
d)>k(p,y)&&(y=d):k(d,y)>k(p,y)&&(p=d)}else b(d,f);L=a;q=d}function f(){G.point=d}function a(){W[0]=p;W[1]=y;G.point=b;L=null}function c(b,f){if(L){var a=b-q;M+=180<da(a)?a+(0<a?360:-360):a}else t=b,u=f;Ka.point(b,f);d(b,f)}function e(){Ka.lineStart()}function g(){c(t,u);Ka.lineEnd();1E-6<da(M)&&(p=-(y=180));W[0]=p;W[1]=y;L=null}function k(b,d){return 0>(d-=b)?d+360:d}function n(b,d){return b[0]-d[0]}function l(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var p,w,y,r,q,t,u,L,M,v,W,G={point:b,
lineStart:f,lineEnd:a,polygonStart:function(){G.point=c;G.lineStart=e;G.lineEnd=g;M=0;Ka.polygonStart()},polygonEnd:function(){Ka.polygonEnd();G.point=b;G.lineStart=f;G.lineEnd=a;0>ib?(p=-(y=180),w=-(r=90)):1E-6<M?r=90:-1E-6>M&&(w=-90);W[0]=p;W[1]=y}};return function(b){r=y=-(p=w=Infinity);v=[];z.geo.stream(b,G);if(b=v.length){v.sort(n);for(var d=1,f=v[0],a,c=[f];d<b;++d)a=v[d],l(a[0],f)||l(a[1],f)?(k(f[0],a[1])>k(f[0],f[1])&&(f[1]=a[1]),k(a[0],f[1])>k(f[0],f[1])&&(f[0]=a[0])):c.push(f=a);var h=-Infinity,
e;b=c.length-1;d=0;for(f=c[b];d<=b;f=a,++d)a=c[d],(e=k(f[1],a[0]))>h&&(h=e,p=a[0],y=f[1])}v=W=null;return Infinity===p||Infinity===w?[[NaN,NaN],[NaN,NaN]]:[[p,w],[y,r]]}}();z.geo.centroid=function(b){Fb=lc=kb=lb=Wa=$a=ab=Sa=tb=ub=bb=0;z.geo.stream(b,Oa);b=tb;var d=ub,f=bb,a=b*b+d*d+f*f;return 1E-12>a&&(b=$a,d=ab,f=Sa,1E-6>lc&&(b=kb,d=lb,f=Wa),a=b*b+d*d+f*f,1E-12>a)?[NaN,NaN]:[Math.atan2(d,b)*sa,ma(f/Math.sqrt(a))*sa]};var Fb,lc,kb,lb,Wa,$a,ab,Sa,tb,ub,bb,Oa={sphere:I,point:fd,lineStart:re,lineEnd:se,
polygonStart:function(){Oa.lineStart=Kg},polygonEnd:function(){Oa.lineStart=re}},Ie=we(Gb,function(b){var d=NaN,f=NaN,a=NaN,c;return{lineStart:function(){b.lineStart();c=1},point:function(h,e){var m=0<h?ba:-ba,g=da(h-d);if(1E-6>da(g-ba))b.point(d,f=0<(f+e)/2?va:-va),b.point(a,f),b.lineEnd(),b.lineStart(),b.point(m,f),b.point(h,f),c=0;else if(a!==m&&g>=ba){1E-6>da(d-a)&&(d-=1E-6*a);1E-6>da(h-m)&&(h-=1E-6*m);var g=d,k=f,x=h,n,l,p=Math.sin(g-x);f=1E-6<da(p)?Math.atan((Math.sin(k)*(l=Math.cos(e))*Math.sin(x)-
Math.sin(e)*(n=Math.cos(k))*Math.sin(g))/(n*l*p)):(k+e)/2;b.point(a,f);b.lineEnd();b.lineStart();b.point(m,f);c=0}b.point(d=h,f=e);a=m},lineEnd:function(){b.lineEnd();d=f=NaN},clean:function(){return 2-c}}},function(b,d,f,a){null==b?(f*=va,a.point(-ba,f),a.point(0,f),a.point(ba,f),a.point(ba,0),a.point(ba,-f),a.point(0,-f),a.point(-ba,-f),a.point(-ba,0),a.point(-ba,f)):1E-6<da(b[0]-d[0])?(b=b[0]<d[0]?ba:-ba,f=f*b/2,a.point(-b,f),a.point(0,f),a.point(b,f)):a.point(d[0],d[1])},[-ba,-ba/2]);z.geo.clipExtent=
function(){var b,d,f,a,c,e,g={stream:function(b){c&&(c.valid=!1);c=e(b);c.valid=!0;return c},extent:function(h){if(!arguments.length)return[[b,d],[f,a]];e=ze(b=+h[0][0],d=+h[0][1],f=+h[1][0],a=+h[1][1]);c&&(c.valid=!1,c=null);return g}};return g.extent([[0,0],[960,500]])};(z.geo.conicEqualArea=function(){return hd(Ae)}).raw=Ae;z.geo.albers=function(){return z.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};z.geo.albersUsa=function(){function b(b){var d=b[0];
b=b[1];c=null;(g(d,b),c)||(k(d,b),c)||n(d,b);return c}var d=z.geo.albers(),f=z.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=z.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c,e={point:function(b,d){c=[b,d]}},g,k,n;b.invert=function(b){var c=d.scale(),e=d.translate(),h=(b[0]-e[0])/c,c=(b[1]-e[1])/c;return(.12<=c&&.234>c&&-.425<=h&&-.214>h?f:.166<=c&&.234>c&&-.214<=h&&-.115>h?a:d).invert(b)};b.stream=function(b){var c=d.stream(b),e=f.stream(b),
h=a.stream(b);return{point:function(b,d){c.point(b,d);e.point(b,d);h.point(b,d)},sphere:function(){c.sphere();e.sphere();h.sphere()},lineStart:function(){c.lineStart();e.lineStart();h.lineStart()},lineEnd:function(){c.lineEnd();e.lineEnd();h.lineEnd()},polygonStart:function(){c.polygonStart();e.polygonStart();h.polygonStart()},polygonEnd:function(){c.polygonEnd();e.polygonEnd();h.polygonEnd()}}};b.precision=function(c){if(!arguments.length)return d.precision();d.precision(c);f.precision(c);a.precision(c);
return b};b.scale=function(c){if(!arguments.length)return d.scale();d.scale(c);f.scale(.35*c);a.scale(c);return b.translate(d.translate())};b.translate=function(c){if(!arguments.length)return d.translate();var h=d.scale(),m=+c[0],x=+c[1];g=d.translate(c).clipExtent([[m-.455*h,x-.238*h],[m+.455*h,x+.238*h]]).stream(e).point;k=f.translate([m-.307*h,x+.201*h]).clipExtent([[m-.425*h+1E-6,x+.12*h+1E-6],[m-.214*h-1E-6,x+.234*h-1E-6]]).stream(e).point;n=a.translate([m-.205*h,x+.212*h]).clipExtent([[m-.214*
h+1E-6,x+.166*h+1E-6],[m-.115*h-1E-6,x+.234*h-1E-6]]).stream(e).point;return b};return b.scale(1070)};var Ud,jd,cb={point:I,lineStart:I,lineEnd:I,polygonStart:function(){jd=0;cb.lineStart=Og},polygonEnd:function(){cb.lineStart=cb.lineEnd=cb.point=I;Ud+=da(jd/2)}},Ic,Jc,Kc,Lc,li={point:function(b,d){b<Ic&&(Ic=b);b>Kc&&(Kc=b);d<Jc&&(Jc=d);d>Lc&&(Lc=d)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I},Pa={point:mb,lineStart:Ce,lineEnd:De,polygonStart:function(){Pa.lineStart=Qg},polygonEnd:function(){Pa.point=
mb;Pa.lineStart=Ce;Pa.lineEnd=De}};z.geo.path=function(){function b(b){b&&("function"===typeof f&&g.pointRadius(+f.apply(this,arguments)),k&&k.valid||(k=e(g)),z.geo.stream(b,k));return g.result()}function d(){k=null;return b}var f=4.5,a,c,e,g,k;b.area=function(b){Ud=0;z.geo.stream(b,e(cb));return Ud};b.centroid=function(b){kb=lb=Wa=$a=ab=Sa=tb=ub=bb=0;z.geo.stream(b,e(Pa));return bb?[tb/bb,ub/bb]:Sa?[$a/Sa,ab/Sa]:Wa?[kb/Wa,lb/Wa]:[NaN,NaN]};b.bounds=function(b){Kc=Lc=-(Ic=Jc=Infinity);z.geo.stream(b,
e(li));return[[Ic,Jc],[Kc,Lc]]};b.projection=function(b){if(!arguments.length)return a;e=(a=b)?b.stream||Sg(b):C;return d()};b.context=function(b){if(!arguments.length)return c;g=null==(c=b)?new Pg:new Rg(b);"function"!==typeof f&&g.pointRadius(f);return d()};b.pointRadius=function(d){if(!arguments.length)return f;f="function"===typeof d?d:(g.pointRadius(+d),+d);return b};return b.projection(z.geo.albersUsa()).context(null)};z.geo.transform=function(b){return{stream:function(d){d=new He(d);for(var f in b)d[f]=
b[f];return d}}};He.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};z.geo.projection=db;z.geo.projectionMutator=id;(z.geo.equirectangular=function(){return db(Hb)}).raw=Hb.invert=Hb;z.geo.rotation=function(b){function d(d){d=b(d[0]*ca,d[1]*ca);return d[0]*=sa,d[1]*=
sa,d}b=kd(b[0]%360*ca,b[1]*ca,2<b.length?b[2]*ca:0);d.invert=function(d){d=b.invert(d[0]*ca,d[1]*ca);return d[0]*=sa,d[1]*=sa,d};return d};Je.invert=Hb;z.geo.circle=function(){function b(){var b="function"===typeof d?d.apply(this,arguments):d,f=kd(-b[0]*ca,-b[1]*ca,0).invert,a=[];c(null,null,1,{point:function(b,d){a.push(b=f(b,d));b[0]*=sa;b[1]*=sa}});return{type:"Polygon",coordinates:[a]}}var d=[0,0],f,a=6,c;b.origin=function(f){if(!arguments.length)return d;d=f;return b};b.angle=function(d){if(!arguments.length)return f;
c=gd((f=+d)*ca,a*ca);return b};b.precision=function(d){if(!arguments.length)return a;c=gd(f*ca,(a=+d)*ca);return b};return b.angle(90)};z.geo.distance=function(b,d){var f=(d[0]-b[0])*ca,a=b[1]*ca,c=d[1]*ca,e=Math.cos(f),g=Math.sin(a),a=Math.cos(a),k=Math.sin(c),c=Math.cos(c),n;return Math.atan2(Math.sqrt((n=c*Math.sin(f))*n+(n=a*k-g*c*e)*n),g*k+a*c*e)};z.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return z.range(Math.ceil(e/y)*y,c,y).map(u).concat(z.range(Math.ceil(l/
r)*r,n,r).map(L)).concat(z.range(Math.ceil(a/p)*p,f,p).filter(function(b){return 1E-6<da(b%y)}).map(q)).concat(z.range(Math.ceil(k/w)*w,g,w).filter(function(b){return 1E-6<da(b%r)}).map(t))}var f,a,c,e,g,k,n,l,p=10,w=p,y=90,r=360,q,t,u,L,M=2.5;b.lines=function(){return d().map(function(b){return{type:"LineString",coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[u(e).concat(L(n).slice(1),u(c).reverse().slice(1),L(l).reverse().slice(1))]}};b.extent=function(d){return arguments.length?
b.majorExtent(d).minorExtent(d):b.minorExtent()};b.majorExtent=function(d){if(!arguments.length)return[[e,l],[c,n]];e=+d[0][0];c=+d[1][0];l=+d[0][1];n=+d[1][1];e>c&&(d=e,e=c,c=d);l>n&&(d=l,l=n,n=d);return b.precision(M)};b.minorExtent=function(d){if(!arguments.length)return[[a,k],[f,g]];a=+d[0][0];f=+d[1][0];k=+d[0][1];g=+d[1][1];a>f&&(d=a,a=f,f=d);k>g&&(d=k,k=g,g=d);return b.precision(M)};b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()};b.majorStep=function(d){if(!arguments.length)return[y,
r];y=+d[0];r=+d[1];return b};b.minorStep=function(d){if(!arguments.length)return[p,w];p=+d[0];w=+d[1];return b};b.precision=function(d){if(!arguments.length)return M;M=+d;q=Oe(k,g,90);t=Pe(a,f,M);u=Oe(l,n,90);L=Pe(e,c,M);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};z.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[f||d.apply(this,arguments),c||a.apply(this,arguments)]}}var d=ld,f,a=md,c;b.distance=
function(){return z.geo.distance(f||d.apply(this,arguments),c||a.apply(this,arguments))};b.source=function(a){if(!arguments.length)return d;d=a;f="function"===typeof a?null:a;return b};b.target=function(d){if(!arguments.length)return a;a=d;c="function"===typeof d?null:d;return b};b.precision=function(){return arguments.length?b:0};return b};z.geo.interpolate=function(b,d){return Tg(b[0]*ca,b[1]*ca,d[0]*ca,d[1]*ca)};z.geo.length=function(b){Vd=0;z.geo.stream(b,Cb);return Vd};var Vd,Cb={sphere:I,point:I,
lineStart:function(){function b(b,c){var e=Math.sin(c*=ca),h=Math.cos(c),m=da((b*=ca)-d),g=Math.cos(m);Vd+=Math.atan2(Math.sqrt((m=h*Math.sin(m))*m+(m=a*e-f*h*g)*m),f*e+a*h*g);d=b;f=e;a=h}var d,f,a;Cb.point=function(c,e){d=c*ca;f=Math.sin(e*=ca);a=Math.cos(e);Cb.point=b};Cb.lineEnd=function(){Cb.point=Cb.lineEnd=I}},lineEnd:I,polygonStart:I,polygonEnd:I},ag=Ib(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(z.geo.azimuthalEqualArea=function(){return db(ag)}).raw=ag;var bg=
Ib(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},C);(z.geo.azimuthalEquidistant=function(){return db(bg)}).raw=bg;(z.geo.conicConformal=function(){return hd(Qe)}).raw=Qe;(z.geo.conicEquidistant=function(){return hd(Re)}).raw=Re;var cg=Ib(function(b){return 1/b},Math.atan);(z.geo.gnomonic=function(){return db(cg)}).raw=cg;nc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-va]};(z.geo.mercator=function(){return Se(nc)}).raw=nc;var dg=Ib(function(){return 1},Math.asin);(z.geo.orthographic=
function(){return db(dg)}).raw=dg;var eg=Ib(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(z.geo.stereographic=function(){return db(eg)}).raw=eg;nd.invert=function(b,d){return[-d,2*Math.atan(Math.exp(b))-va]};(z.geo.transverseMercator=function(){var b=Se(nd),d=b.center,f=b.rotate;b.center=function(b){return b?d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return b?f([b[0],b[1],2<b.length?b[2]+90:90]):(b=f(),[b[0],b[1],b[2]-90])};return f([0,0,90])}).raw=nd;z.geom={};
z.geom.hull=function(b){function d(b){if(3>b.length)return[];var d=pa(f),c=pa(a),e,h=b.length,m=[],g=[];for(e=0;e<h;e++)m.push([+d.call(this,b[e],e),+c.call(this,b[e],e),e]);m.sort(Ug);for(e=0;e<h;e++)g.push([m[e][0],-m[e][1]]);var d=Te(m),g=Te(g),c=g[0]===d[0],h=g[g.length-1]===d[d.length-1],k=[];for(e=d.length-1;0<=e;--e)k.push(b[m[d[e]][2]]);for(e=+c;e<g.length-h;++e)k.push(b[m[g[e]][2]]);return k}var f=vb,a=Jb;if(arguments.length)return d(b);d.x=function(b){return arguments.length?(f=b,d):f};
d.y=function(b){return arguments.length?(a=b,d):a};return d};z.geom.polygon=function(b){Tb(b,Mc);return b};var Mc=z.geom.polygon.prototype=[];Mc.area=function(){for(var b=-1,d=this.length,f,a=this[d-1],c=0;++b<d;)f=a,a=this[b],c+=f[1]*a[0]-f[0]*a[1];return.5*c};Mc.centroid=function(b){var d=-1,f=this.length,a=0,c=0,e=this[f-1];for(arguments.length||(b=-1/(6*this.area()));++d<f;){var g=e;e=this[d];var k=g[0]*e[1]-e[0]*g[1];a+=(g[0]+e[0])*k;c+=(g[1]+e[1])*k}return[a*b,c*b]};Mc.clip=function(b){for(var d,
f=Ue(b),a=-1,c=this.length-Ue(this),e,g,k=this[c-1],n,l,p;++a<c;){d=b.slice();b.length=0;n=this[a];l=d[(g=d.length-f)-1];for(e=-1;++e<g;)p=d[e],od(p,k,n)?(od(l,k,n)||b.push(pd(l,p,k,n)),b.push(p)):od(l,k,n)&&b.push(pd(l,p,k,n)),l=p;f&&b.push(b[0]);k=n}return b};var zb,nb,xb,We=[],rd,Kb,$e=[];Ye.prototype.prepare=function(){for(var b=this.edges,d=b.length,f;d--;)f=b[d].edge,f.b&&f.a||b.splice(d,1);b.sort(Ze);return b.length};qc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:
this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};sd.prototype={insert:function(b,d){var f;if(b){d.P=b;if(d.N=b.N)b.N.P=d;b.N=d;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;var a=b}else this._?(b=bf(this._),d.P=null,d.N=b,b.P=b.L=d,a=b):(d.P=d.N=null,this._=d,a=null);d.L=d.R=null;d.U=a;d.C=!0;for(b=d;a&&a.C;){var c=a.U;a===c.L?(f=c.R)&&f.C?(a.C=f.C=!1,c.C=!0,b=c):(b===a.R&&(Mb(this,a),b=a,a=b.U),a.C=!1,c.C=!0,Nb(this,c)):(f=c.L)&&f.C?(a.C=f.C=!1,c.C=!0,b=c):(b===
a.L&&(Nb(this,a),b=a,a=b.U),a.C=!1,c.C=!0,Mb(this,c));a=b.U}this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d=b.U,f=b.L,a=b.R;var c=f?a?bf(a):f:a;d?d.L===b?d.L=c:d.R=c:this._=c;if(f&&a){var e=c.C;c.C=b.C;c.L=f;f.U=c;c!==a?(d=c.U,c.U=b.U,b=c.R,d.L=b,c.R=a,a.U=c):(c.U=d,d=c,b=c.R)}else e=b.C,b=c;b&&(b.U=d);if(!e)if(b&&b.C)b.C=!1;else{do{if(b===this._)break;if(b===d.L){if(b=d.R,b.C&&(b.C=!1,d.C=!0,Mb(this,d),b=d.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=
!0,Nb(this,b),b=d.R);b.C=d.C;d.C=b.R.C=!1;Mb(this,d);b=this._;break}}else if(b=d.L,b.C&&(b.C=!1,d.C=!0,Nb(this,d),b=d.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Mb(this,b),b=d.L);b.C=d.C;d.C=b.L.C=!1;Nb(this,d);b=this._;break}b.C=!0;b=d;d=d.U}while(!b.C);b&&(b.C=!1)}}};z.geom.voronoi=function(b){function d(b){var d=Array(b.length),a=k[0][0],c=k[0][1],e=k[1][0],h=k[1][1];td(f(b),k).cells.forEach(function(f,m){var g=f.edges,k=f.site;(d[m]=g.length?g.map(function(b){b=b.start();return[b.x,
b.y]}):k.x>=a&&k.x<=e&&k.y>=c&&k.y<=h?[[a,h],[e,h],[e,c],[a,c]]:[]).point=b[m]});return d}function f(b){return b.map(function(b,d){return{x:1E-6*Math.round(e(b,d)/1E-6),y:1E-6*Math.round(g(b,d)/1E-6),i:d}})}var a=vb,c=Jb,e=a,g=c,k=Nc;if(b)return d(b);d.links=function(b){return td(f(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],target:b[d.r.i]}})};d.triangles=function(b){var d=[];td(f(b)).cells.forEach(function(f,a){for(var c=f.site,e=f.edges.sort(Ze),h=-1,m=
e.length,g,k=e[m-1].edge,k=k.l===c?k.r:k.l;++h<m;)g=k,k=e[h].edge,k=k.l===c?k.r:k.l,a<g.i&&a<k.i&&0>(c.x-k.x)*(g.y-c.y)-(c.x-g.x)*(k.y-c.y)&&d.push([b[a],b[g.i],b[k.i]])});return d};d.x=function(b){return arguments.length?(e=pa(a=b),d):a};d.y=function(b){return arguments.length?(g=pa(c=b),d):c};d.clipExtent=function(b){if(!arguments.length)return k===Nc?null:k;k=null==b?Nc:b;return d};d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):k===Nc?null:k&&k[1]};return d};var Nc=[[-1E6,
-1E6],[1E6,1E6]];z.geom.delaunay=function(b){return z.geom.voronoi().triangles(b)};z.geom.quadtree=function(b,d,f,a,c){function e(b){function e(b,d,f,a,c,e,h,m){if(!isNaN(f)&&!isNaN(a))if(b.leaf){var g=b.x,n=b.y;if(null!=g){if(!(.01>da(g-f)+da(n-a))){var l=b.point;b.x=b.y=b.point=null;k(b,l,g,n,c,e,h,m)}k(b,d,f,a,c,e,h,m)}else b.x=f,b.y=a,b.point=d}else k(b,d,f,a,c,e,h,m)}function k(b,d,f,a,c,h,m,g){var k=.5*(c+m),n=.5*(h+g),l=f>=k,p=a>=n,x=p<<1|l;b.leaf=!1;b=b.nodes[x]||(b.nodes[x]=cf());l?c=k:m=
k;p?h=n:g=n;e(b,d,f,a,c,h,m,g)}var n=pa(h),l=pa(m),p;if(null!=d){var x=d;var y=f;var w=a;var r=c}else{w=r=-(x=y=Infinity);var q=[];var t=[];var u=b.length;if(g)for(p=0;p<u;++p){var L=b[p];L.x<x&&(x=L.x);L.y<y&&(y=L.y);L.x>w&&(w=L.x);L.y>r&&(r=L.y);q.push(L.x);t.push(L.y)}else for(p=0;p<u;++p){var M=+n(L=b[p],p);L=+l(L,p);M<x&&(x=M);L<y&&(y=L);M>w&&(w=M);L>r&&(r=L);q.push(M);t.push(L)}}M=w-x;L=r-y;M>L?r=y+M:w=x+L;var v=cf();v.add=function(b){e(v,b,+n(b,++p),+l(b,p),x,y,w,r)};v.visit=function(b){Ob(b,
v,x,y,w,r)};v.find=function(b){return bh(v,b[0],b[1],x,y,w,r)};p=-1;if(null==d){for(;++p<u;)e(v,b[p],q[p],t[p],x,y,w,r);--p}else b.forEach(v.add);q=t=b=L=null;return v}var h=vb,m=Jb,g;if(g=arguments.length)return h=$g,m=ah,3===g&&(c=f,a=d,f=d=0),e(b);e.x=function(b){return arguments.length?(h=b,e):h};e.y=function(b){return arguments.length?(m=b,e):m};e.extent=function(b){if(!arguments.length)return null==d?null:[[d,f],[a,c]];null==b?d=f=a=c=null:(d=+b[0][0],f=+b[0][1],a=+b[1][0],c=+b[1][1]);return e};
e.size=function(b){if(!arguments.length)return null==d?null:[a-d,c-f];null==b?d=f=a=c=null:(d=f=0,a=+b[0],c=+b[1]);return e};return e};z.interpolateRgb=ud;z.interpolateObject=df;z.interpolateNumber=Xa;z.interpolateString=ef;var vd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wd=new RegExp(vd.source,"g");z.interpolate=ob;z.interpolators=[function(b,d){var f=typeof d;return("string"===f?Wb.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?ud:ef:d instanceof Ca?ud:Array.isArray(d)?rc:"object"===f&&
isNaN(d)?df:Xa)(b,d)}];z.interpolateArray=rc;var fg=function(){return C},mi=z.map({linear:fg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return dh},cubic:function(){return eh},sin:function(){return gh},exp:function(){return hh},circle:function(){return ih},elastic:function(b,d){2>arguments.length&&(d=.45);if(arguments.length)var f=d/La*Math.asin(1/b);else b=1,f=d/4;return function(a){return 1+b*Math.pow(2,-10*a)*Math.sin((a-f)*La/d)}},back:function(b){b||(b=1.70158);
return function(d){return d*d*((b+1)*d-b)}},bounce:function(){return jh}}),ni=z.map({"in":C,out:ff,"in-out":gf,"out-in":function(b){return gf(ff(b))}});z.ease=function(b){var d=b.indexOf("-"),f=0<=d?b.slice(0,d):b,d=0<=d?b.slice(d+1):"in",f=mi.get(f)||fg,d=ni.get(d)||C;return ch(d(f.apply(null,Vf.call(arguments,1))))};z.interpolateHcl=function(b,d){b=z.hcl(b);d=z.hcl(d);var f=b.h,a=b.c,c=b.l,e=d.h-f,g=d.c-a,k=d.l-c;isNaN(g)&&(g=0,a=isNaN(a)?d.c:a);isNaN(e)?(e=0,f=isNaN(f)?d.h:f):180<e?e-=360:-180>
e&&(e+=360);return function(b){return ua(f+e*b,a+g*b,c+k*b)+""}};z.interpolateHsl=function(b,d){b=z.hsl(b);d=z.hsl(d);var f=b.h,a=b.s,c=b.l,e=d.h-f,g=d.s-a,k=d.l-c;isNaN(g)&&(g=0,a=isNaN(a)?d.s:a);isNaN(e)?(e=0,f=isNaN(f)?d.h:f):180<e?e-=360:-180>e&&(e+=360);return function(b){return za(f+e*b,a+g*b,c+k*b)+""}};z.interpolateLab=function(b,d){b=z.lab(b);d=z.lab(d);var f=b.l,a=b.a,c=b.b,e=d.l-f,g=d.a-a,k=d.b-c;return function(b){return Db(f+e*b,a+g*b,c+k*b)+""}};z.interpolateRound=hf;z.transform=function(b){var d=
Fa.createElementNS(z.ns.prefix.svg,"g");return(z.transform=function(b){if(null!=b){d.setAttribute("transform",b);var f=d.transform.baseVal.consolidate()}return new jf(f?f.matrix:oi)})(b)};jf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var oi={a:1,b:0,c:0,d:1,e:0,f:0};z.interpolateTransform=lf;z.layout={};z.layout.bundle=function(){return function(b){for(var d=[],f=-1,a=b.length;++f<a;)d.push(qh(b[f]));return d}};
z.layout.chord=function(){function b(){var b={},f=[],h=z.range(g),m=[],x,y;a=[];c=[];var w=0;for(x=-1;++x<g;){var r=0;for(y=-1;++y<g;)r+=e[x][y];f.push(r);m.push(z.range(g));w+=r}n&&h.sort(function(b,d){return n(f[b],f[d])});l&&m.forEach(function(b,d){b.sort(function(b,f){return l(e[d][b],e[d][f])})});w=(La-k*g)/w;r=0;for(x=-1;++x<g;){var q=r;for(y=-1;++y<g;){var L=h[x];var t=m[L][y],u=e[L][t],M=r,v=r+=u*w;b[L+"-"+t]={index:L,subindex:t,startAngle:M,endAngle:v,value:u}}c[L]={index:L,startAngle:q,
endAngle:r,value:f[L]};r+=k}for(x=-1;++x<g;)for(y=x-1;++y<g;)L=b[x+"-"+y],h=b[y+"-"+x],(L.value||h.value)&&a.push(L.value<h.value?{source:h,target:L}:{source:L,target:h});p&&d()}function d(){a.sort(function(b,d){return p((b.source.value+b.target.value)/2,(d.source.value+d.target.value)/2)})}var f={},a,c,e,g,k=0,n,l,p;f.matrix=function(b){if(!arguments.length)return e;g=(e=b)&&e.length;a=c=null;return f};f.padding=function(b){if(!arguments.length)return k;k=b;a=c=null;return f};f.sortGroups=function(b){if(!arguments.length)return n;
n=b;a=c=null;return f};f.sortSubgroups=function(b){if(!arguments.length)return l;l=b;a=null;return f};f.sortChords=function(b){if(!arguments.length)return p;p=b;a&&d();return f};f.chords=function(){a||b();return a};f.groups=function(){c||b();return c};return f};z.layout.force=function(){function b(b){return function(d,f,a,c){if(d.point!==b){var e=d.cx-b.x;a=d.cy-b.y;c-=f;f=e*e+a*a;if(c*c/q<f)return f<w&&(f=d.charge/f,b.px-=e*f,b.py-=a*f),!0;d.point&&f&&f<w&&(f=d.pointCharge/f,b.px-=e*f,b.py-=a*f)}return!d.charge}}
function d(b){b.px=z.event.x;b.py=z.event.y;f.resume()}var f={},a=z.dispatch("start","tick","end"),c,e=[1,1],g,k,n=.9,l=pi,p=qi,y=-30,w=ri,r=.1,q=.64,L=[],t=[],u,M,v;f.tick=function(){if(.005>(k*=.99))return c=null,a.end({type:"end",alpha:k=0}),!0;var d=L.length,f=t.length,h,m;for(h=0;h<f;++h){var g=t[h];var l=g.source;var p=g.target;var x=p.x-l.x;var w=p.y-l.y;if(m=x*x+w*w)m=k*M[h]*((m=Math.sqrt(m))-u[h])/m,x*=m,w*=m,p.x-=x*(m=l.weight+p.weight?l.weight/(l.weight+p.weight):.5),p.y-=w*m,l.x+=x*(m=
1-m),l.y+=w*m}if(m=k*r)if(x=e[0]/2,w=e[1]/2,h=-1,m)for(;++h<d;)g=L[h],g.x+=(x-g.x)*m,g.y+=(w-g.y)*m;if(y)for(nf(f=z.geom.quadtree(L),k,v),h=-1;++h<d;)(g=L[h]).fixed||f.visit(b(g));for(h=-1;++h<d;)g=L[h],g.fixed?(g.x=g.px,g.y=g.py):(g.x-=(g.px-(g.px=g.x))*n,g.y-=(g.py-(g.py=g.y))*n);a.tick({type:"tick",alpha:k})};f.nodes=function(b){if(!arguments.length)return L;L=b;return f};f.links=function(b){if(!arguments.length)return t;t=b;return f};f.size=function(b){if(!arguments.length)return e;e=b;return f};
f.linkDistance=function(b){if(!arguments.length)return l;l="function"===typeof b?b:+b;return f};f.distance=f.linkDistance;f.linkStrength=function(b){if(!arguments.length)return p;p="function"===typeof b?b:+b;return f};f.friction=function(b){if(!arguments.length)return n;n=+b;return f};f.charge=function(b){if(!arguments.length)return y;y="function"===typeof b?b:+b;return f};f.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(w);w=b*b;return f};f.gravity=function(b){if(!arguments.length)return r;
r=+b;return f};f.theta=function(b){if(!arguments.length)return Math.sqrt(q);q=b*b;return f};f.alpha=function(b){if(!arguments.length)return k;b=+b;k?0<b?k=b:(c.c=null,c.t=NaN,c=null,a.end({type:"end",alpha:k=0})):0<b&&(a.start({type:"start",alpha:k=b}),c=Yb(f.tick));return f};f.start=function(){function b(b,f){if(!m){m=Array(a);for(h=0;h<a;++h)m[h]=[];for(h=0;h<c;++h){var e=t[h];m[e.source.index].push(e.target);m[e.target.index].push(e.source)}}for(var e=m[d],h=-1,g=e.length,k;++h<g;)if(!isNaN(k=
e[h][b]))return k;return Math.random()*f}var d,a=L.length,c=t.length,h=e[0],g=e[1],m,k;for(d=0;d<a;++d)(k=L[d]).index=d,k.weight=0;for(d=0;d<c;++d)k=t[d],"number"==typeof k.source&&(k.source=L[k.source]),"number"==typeof k.target&&(k.target=L[k.target]),++k.source.weight,++k.target.weight;for(d=0;d<a;++d)k=L[d],isNaN(k.x)&&(k.x=b("x",h)),isNaN(k.y)&&(k.y=b("y",g)),isNaN(k.px)&&(k.px=k.x),isNaN(k.py)&&(k.py=k.y);u=[];if("function"===typeof l)for(d=0;d<c;++d)u[d]=+l.call(this,t[d],d);else for(d=0;d<
c;++d)u[d]=l;M=[];if("function"===typeof p)for(d=0;d<c;++d)M[d]=+p.call(this,t[d],d);else for(d=0;d<c;++d)M[d]=p;v=[];if("function"===typeof y)for(d=0;d<a;++d)v[d]=+y.call(this,L[d],d);else for(d=0;d<a;++d)v[d]=y;return f.resume()};f.resume=function(){return f.alpha(.1)};f.stop=function(){return f.alpha(0)};f.drag=function(){g||(g=z.behavior.drag().origin(C).on("dragstart.force",rh).on("drag.force",d).on("dragend.force",sh));if(!arguments.length)return g;this.on("mouseover.force",th).on("mouseout.force",
uh).call(g)};return z.rebind(f,a,"on")};var pi=20,qi=1,ri=Infinity;z.layout.hierarchy=function(){function b(c){var e,h,g=[c],m=[],k;for(c.depth=0;null!=(k=g.pop());)if(m.push(k),(e=f.call(b,k,k.depth))&&(h=e.length)){for(var n;0<=--h;)g.push(n=e[h]),n.parent=k,n.depth=k.depth+1;a&&(k.value=0);k.children=e}else a&&(k.value=+a.call(b,k,k.depth)||0),delete k.children;Ta(c,function(b){var f,c;d&&(f=b.children)&&f.sort(d);a&&(c=b.parent)&&(c.value+=b.value)});return m}var d=yh,f=wh,a=xh;b.sort=function(f){if(!arguments.length)return d;
d=f;return b};b.children=function(d){if(!arguments.length)return f;f=d;return b};b.value=function(d){if(!arguments.length)return a;a=d;return b};b.revalue=function(d){a&&(Qb(d,function(b){b.children&&(b.value=0)}),Ta(d,function(d){var f;d.children||(d.value=+a.call(b,d,d.depth)||0);if(f=d.parent)f.value+=d.value}));return d};return b};z.layout.partition=function(){function b(d,f,a,c){var e,h=d.children;d.x=f;d.y=d.depth*c;d.dx=a;d.dy=c;if(h&&(e=h.length)){var g=-1,m;for(a=d.value?a/d.value:0;++g<
e;)b(m=h[g],f,d=m.value*a,c),f+=d}}function d(b){var f;b=b.children;var a=0;if(b&&(f=b.length))for(var c=-1;++c<f;)a=Math.max(a,d(b[c]));return 1+a}function f(f,e){var h=a.call(this,f,e);b(h[0],0,c[0],c[1]/d(h[0]));return h}var a=z.layout.hierarchy(),c=[1,1];f.size=function(b){if(!arguments.length)return c;c=b;return f};return Pb(f,a)};z.layout.pie=function(){function b(h){var g=h.length,m=h.map(function(f,a){return+d.call(b,f,a)}),k=+("function"===typeof a?a.apply(this,arguments):a),n=("function"===
typeof c?c.apply(this,arguments):c)-k,l=Math.min(Math.abs(n)/g,+("function"===typeof e?e.apply(this,arguments):e)),p=l*(0>n?-1:1),y=z.sum(m),w=y?(n-g*p)/y:0,g=z.range(g),r=[],x;null!=f&&g.sort(f===gg?function(b,d){return m[d]-m[b]}:function(b,d){return f(h[b],h[d])});g.forEach(function(b){r[b]={data:h[b],value:x=m[b],startAngle:k,endAngle:k+=x*w+p,padAngle:l}});return r}var d=Number,f=gg,a=0,c=La,e=0;b.value=function(f){if(!arguments.length)return d;d=f;return b};b.sort=function(d){if(!arguments.length)return f;
f=d;return b};b.startAngle=function(d){if(!arguments.length)return a;a=d;return b};b.endAngle=function(d){if(!arguments.length)return c;c=d;return b};b.padAngle=function(d){if(!arguments.length)return e;e=d;return b};return b};var gg={};z.layout.stack=function(){function b(h,m){if(!(y=h.length))return h;var k=h.map(function(f,a){return d.call(b,f,a)}),n=k.map(function(d){return d.map(function(d,f){return[e.call(b,d,f),g.call(b,d,f)]})}),l=f.call(b,n,m),k=z.permute(k,l),n=z.permute(n,l),l=a.call(b,
n,m),p=k[0].length,y,w,r,x;for(r=0;r<p;++r)for(c.call(b,k[0][r],x=l[r],n[0][r][1]),w=1;w<y;++w)c.call(b,k[w][r],x+=n[w-1][r][1],n[w][r][1]);return h}var d=C,f=xd,a=yd,c=Bh,e=zh,g=Ah;b.values=function(f){if(!arguments.length)return d;d=f;return b};b.order=function(d){if(!arguments.length)return f;f="function"===typeof d?d:si.get(d)||xd;return b};b.offset=function(d){if(!arguments.length)return a;a="function"===typeof d?d:ti.get(d)||yd;return b};b.x=function(d){if(!arguments.length)return e;e=d;return b};
b.y=function(d){if(!arguments.length)return g;g=d;return b};b.out=function(d){if(!arguments.length)return c;c=d;return b};return b};var si=z.map({"inside-out":function(b){var d=b.length,f=b.map(Ch),a=b.map(Dh),c=z.range(d).sort(function(b,d){return f[b]-f[d]}),e=0,g=0,k=[],n=[];for(b=0;b<d;++b){var l=c[b];e<g?(e+=a[l],k.push(l)):(g+=a[l],n.push(l))}return n.reverse().concat(k)},reverse:function(b){return z.range(b.length).reverse()},"default":xd}),ti=z.map({silhouette:function(b){var d=b.length,f=
b[0].length,a=[],c=0,e,g,k,n=[];for(g=0;g<f;++g){for(k=e=0;e<d;e++)k+=b[e][g][1];k>c&&(c=k);a.push(k)}for(g=0;g<f;++g)n[g]=(c-a[g])/2;return n},wiggle:function(b){var d=b.length,f=b[0],a=f.length,c,e,g,k,n,l,p,w=[];w[0]=l=p=0;for(e=1;e<a;++e){for(g=c=0;c<d;++c)g+=b[c][e][1];var y=c=0;for(n=f[e][0]-f[e-1][0];c<d;++c){var r=0;for(k=(b[c][e][1]-b[c][e-1][1])/(2*n);r<c;++r)k+=(b[r][e][1]-b[r][e-1][1])/n;y+=k*b[c][e][1]}w[e]=l-=g?y/g*n:0;l<p&&(p=l)}for(e=0;e<a;++e)w[e]-=p;return w},expand:function(b){var d=
b.length,f=b[0].length,a=1/d,c,e,g,k=[];for(e=0;e<f;++e){for(g=c=0;c<d;c++)g+=b[c][e][1];if(g)for(c=0;c<d;c++)b[c][e][1]/=g;else for(c=0;c<d;c++)b[c][e][1]=a}for(e=0;e<f;++e)k[e]=0;return k},zero:yd});z.layout.histogram=function(){function b(b,e){var h=[],g=b.map(f,this),m=a.call(this,g,e),k=c.call(this,m,g,e);e=-1;for(var n=g.length,l=k.length-1,p=d?1:1/n;++e<l;){var w=h[e]=[];w.dx=k[e+1]-(w.x=k[e]);w.y=0}if(0<l)for(e=-1;++e<n;)w=g[e],w>=m[0]&&w<=m[1]&&(w=h[z.bisect(k,w,1,l)-1],w.y+=p,w.push(b[e]));
return h}var d=!0,f=Number,a=Gh,c=Fh;b.value=function(d){if(!arguments.length)return f;f=d;return b};b.range=function(d){if(!arguments.length)return a;a=pa(d);return b};b.bins=function(d){if(!arguments.length)return c;c="number"===typeof d?function(b){return of(b,d)}:pa(d);return b};b.frequency=function(f){if(!arguments.length)return d;d=!!f;return b};return b};z.layout.pack=function(){function b(b,e){var h=d.call(this,b,e),g=h[0],k=a[0],m=a[1],n=null==c?Math.sqrt:"function"===typeof c?c:function(){return c};
g.x=g.y=0;Ta(g,function(b){b.r=+n(b.value)});Ta(g,rf);if(f){var l=f*(c?1:Math.max(2*g.r/k,2*g.r/m))/2;Ta(g,function(b){b.r+=l});Ta(g,rf);Ta(g,function(b){b.r-=l})}tf(g,k/2,m/2,c?1:1/Math.max(2*g.r/k,2*g.r/m));return h}var d=z.layout.hierarchy().sort(Hh),f=0,a=[1,1],c;b.size=function(d){if(!arguments.length)return a;a=d;return b};b.radius=function(d){if(!arguments.length)return c;c=null==d||"function"===typeof d?d:+d;return b};b.padding=function(d){if(!arguments.length)return f;f=+d;return b};return Pb(b,
d)};z.layout.tree=function(){function b(b,h){var m=e.call(this,b,h),l=m[0],p=d(l);Ta(p,f);p.parent.m=-p.z;Qb(p,a);if(n)Qb(l,c);else{var w=l,y=l,r=l;Qb(l,function(b){b.x<w.x&&(w=b);b.x>y.x&&(y=b);b.depth>r.depth&&(r=b)});var q=g(w,y)/2-w.x,L=k[0]/(y.x+g(y,w)/2+q),x=k[1]/(r.depth||1);Qb(l,function(b){b.x=(b.x+q)*L;b.y=b.depth*x})}return m}function d(b){b={A:null,children:[b]};for(var d=[b],f;null!=(f=d.pop());)for(var a=f.children,c,e=0,h=a.length;e<h;++e)d.push((a[e]=c={_:a[e],parent:f,children:(c=
a[e].children)&&c.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:e}).a=c);return b.children[0]}function f(b){var d=b.children,f=b.parent.children,a=b.i?f[b.i-1]:null;if(d.length){for(var c=0,e=0,h=b.children,k=h.length,m;0<=--k;)m=h[k],m.z+=c,m.m+=c,c+=m.s+(e+=m.c);d=(d[0].z+d[d.length-1].z)/2;a?(b.z=a.z+g(b._,a._),b.m=b.z-d):b.z=d}else a&&(b.z=a.z+g(b._,a._));d=b.parent;f=b.parent.A||f[0];if(a){e=c=b;h=c.parent.children[0];k=c.m;m=e.m;for(var n=a.m,l=h.m,p;a=Bd(a),c=Ad(c),a&&c;){h=Ad(h);e=Bd(e);
e.a=b;p=a.z+n-c.z-k+g(a._,c._);if(0<p){var w=a.a.parent===b.parent?a.a:f,y=b,r=p,q=r/(y.i-w.i);y.c-=q;y.s+=r;w.c+=q;y.z+=r;y.m+=r;k+=p;m+=p}n+=a.m;k+=c.m;l+=h.m;m+=e.m}a&&!Bd(e)&&(e.t=a,e.m+=n-m);c&&!Ad(h)&&(h.t=c,h.m+=k-l,f=b)}d.A=f}function a(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function c(b){b.x*=k[0];b.y=b.depth*k[1]}var e=z.layout.hierarchy().sort(null).value(null),g=uf,k=[1,1],n=null;b.separation=function(d){if(!arguments.length)return g;g=d;return b};b.size=function(d){if(!arguments.length)return n?
null:k;n=null==(k=d)?c:null;return b};b.nodeSize=function(d){if(!arguments.length)return n?k:null;n=null==(k=d)?null:c;return b};return Pb(b,e)};z.layout.cluster=function(){function b(b,e){var h=d.call(this,b,e),g=h[0],k,m=0;Ta(g,function(b){var d=b.children;d&&d.length?(b.x=Lh(d),b.y=Kh(d)):(b.x=k?m+=f(b,k):0,b.y=0,k=b)});var n=vf(g),l=wf(g),p=n.x-f(n,l)/2,w=l.x+f(l,n)/2;Ta(g,c?function(b){b.x=(b.x-g.x)*a[0];b.y=(g.y-b.y)*a[1]}:function(b){b.x=(b.x-p)/(w-p)*a[0];b.y=(1-(g.y?b.y/g.y:1))*a[1]});return h}
var d=z.layout.hierarchy().sort(null).value(null),f=uf,a=[1,1],c=!1;b.separation=function(d){if(!arguments.length)return f;f=d;return b};b.size=function(d){if(!arguments.length)return c?null:a;c=null==(a=d);return b};b.nodeSize=function(d){if(!arguments.length)return c?a:null;c=null!=(a=d);return b};return Pb(b,d)};z.layout.treemap=function(){function b(b,d){for(var f=-1,a=b.length,c,e;++f<a;)e=(c=b[f]).value*(0>d?0:d),c.area=isNaN(e)||0>=e?0:e}function d(f){var c=f.children;if(c&&c.length){var e=
l(f),h=[],g=c.slice(),k=Infinity,m,n="slice"===y?e.dx:"dice"===y?e.dy:"slice-dice"===y?f.depth&1?e.dy:e.dx:Math.min(e.dx,e.dy);b(g,e.dx*e.dy/f.value);for(h.area=0;0<(f=g.length);){h.push(f=g[f-1]);h.area+=f.area;if(!(f="squarify"!==y)){f=n;for(var p=h.area,w=0,q=Infinity,L=-1,t=h.length;++L<t;)if(m=h[L].area)m<q&&(q=m),m>w&&(w=m);p*=p;f*=f;f=(m=p?Math.max(f*w*r/p,p/(f*q*r)):Infinity)<=k}f?(g.pop(),k=m):(h.area-=h.pop().area,a(h,n,e,!1),n=Math.min(e.dx,e.dy),h.length=h.area=0,k=Infinity)}h.length&&
(a(h,n,e,!0),h.length=h.area=0);c.forEach(d)}}function f(d){var c=d.children;if(c&&c.length){var e=l(d),h=c.slice(),g=[];b(h,e.dx*e.dy/d.value);for(g.area=0;d=h.pop();)g.push(d),g.area+=d.area,null!=d.z&&(a(g,d.z?e.dx:e.dy,e,!h.length),g.length=g.area=0);c.forEach(f)}}function a(b,d,f,a){var c=-1,e=b.length,h=f.x,k=f.y,m=d?g(b.area/d):0;if(d==f.dx){if(a||m>f.dy)m=f.dy;for(;++c<e;){var n=b[c];n.x=h;n.y=k;n.dy=m;h+=n.dx=Math.min(f.x+f.dx-h,m?g(n.area/m):0)}n.z=!0;n.dx+=f.x+f.dx-h;f.y+=m;f.dy-=m}else{if(a||
m>f.dx)m=f.dx;for(;++c<e;)n=b[c],n.x=h,n.y=k,n.dx=m,k+=n.dy=Math.min(f.y+f.dy-k,m?g(n.area/m):0);n.z=!1;n.dy+=f.y+f.dy-k;f.x+=m;f.dx-=m}}function c(a){a=w||e(a);var c=a[0];c.x=c.y=0;c.value?(c.dx=k[0],c.dy=k[1]):c.dx=c.dy=0;w&&e.revalue(c);b([c],c.dx*c.dy/c.value);(w?f:d)(c);p&&(w=a);return a}var e=z.layout.hierarchy(),g=Math.round,k=[1,1],n=null,l=Cd,p=!1,w,y="squarify",r=.5*(1+Math.sqrt(5));c.size=function(b){if(!arguments.length)return k;k=b;return c};c.padding=function(b){function d(d){var f=
b.call(c,d,d.depth);return null==f?Cd(d):xf(d,"number"===typeof f?[f,f,f,f]:f)}function f(d){return xf(d,b)}if(!arguments.length)return n;var a;l=null==(n=b)?Cd:"function"===(a=typeof b)?d:"number"===a?(b=[b,b,b,b],f):f;return c};c.round=function(b){if(!arguments.length)return g!=Number;g=b?Math.round:Number;return c};c.sticky=function(b){if(!arguments.length)return p;p=b;w=null;return c};c.ratio=function(b){if(!arguments.length)return r;r=b;return c};c.mode=function(b){if(!arguments.length)return y;
y=b+"";return c};return Pb(c,e)};z.random={normal:function(b,d){var f=arguments.length;2>f&&(d=1);1>f&&(b=0);return function(){do{var f=2*Math.random()-1;var a=2*Math.random()-1;a=f*f+a*a}while(!a||1<a);return b+d*f*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var b=z.random.normal.apply(z,arguments);return function(){return Math.exp(b())}},bates:function(b){var d=z.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,f=0;f<b;f++)d+=Math.random();
return d}}};z.scale={};var Nh={floor:C,ceil:C};z.scale.linear=function(){return zf([0,1],[0,1],ob,!1)};var Qh={s:1,g:1,p:1,r:1,e:1};z.scale.log=function(){return Bf(z.scale.linear().domain([0,1]),10,!0,[1,10])};var Cf=z.format(".0e"),Rh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};z.scale.pow=function(){return Df(z.scale.linear(),1,[0,1])};z.scale.sqrt=function(){return z.scale.pow().exponent(.5)};z.scale.ordinal=function(){return Ef([],{t:"range",a:[[]]})};z.scale.category10=
function(){return z.scale.ordinal().range(ui)};z.scale.category20=function(){return z.scale.ordinal().range(vi)};z.scale.category20b=function(){return z.scale.ordinal().range(wi)};z.scale.category20c=function(){return z.scale.ordinal().range(xi)};var ui=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Vb),vi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,
1556175,10410725].map(Vb),wi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Vb),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Vb);z.scale.quantile=function(){return Ff([],[])};z.scale.quantize=function(){return Gf(0,1,[0,1])};z.scale.threshold=
function(){return Hf([.5],[0,1])};z.scale.identity=function(){return If([0,1])};z.svg={};z.svg.arc=function(){function b(){var b=Math.max(0,+f.apply(this,arguments)),h=Math.max(0,+a.apply(this,arguments)),m=g.apply(this,arguments)-va,l=k.apply(this,arguments)-va,p=Math.abs(l-m),w=m>l?0:1;if(h<b){var y=h;h=b;b=y}if(p>=ji)return d(h,w)+(b?d(b,1-w):"")+"Z";var r,q=0,L=0,t=[];if(r=(+n.apply(this,arguments)||0)/2){var x=e===Oc?Math.sqrt(b*b+h*h):+e.apply(this,arguments);w||(L*=-1);h&&(L=ma(x/h*Math.sin(r)));
b&&(q=ma(x/b*Math.sin(r)))}if(h){x=h*Math.cos(m+L);r=h*Math.sin(m+L);var u=h*Math.cos(l-L);var M=h*Math.sin(l-L);var v=Math.abs(l-m-2*L)<=ba?0:1;L&&wc(x,r,u,M)===w^v&&(u=(m+l)/2,x=h*Math.cos(u),r=h*Math.sin(u),u=M=null)}else x=r=0;if(b){L=b*Math.cos(l-q);var W=b*Math.sin(l-q);var G=b*Math.cos(m+q);var z=b*Math.sin(m+q);var C=Math.abs(m-l+2*q)<=ba?0:1;q&&wc(L,W,G,z)===1-w^C&&(G=(m+l)/2,L=b*Math.cos(G),W=b*Math.sin(G),G=z=null)}else L=W=0;1E-6<p&&.001<(y=Math.min(Math.abs(h-b)/2,+c.apply(this,arguments)))?
(C=b<h^w?0:1,v=m=y,p<ba&&(p=null==G?[L,W]:null==u?[x,r]:pd([x,r],[G,z],[u,M],[L,W]),v=x-p[0],m=r-p[1],l=u-p[0],q=M-p[1],m=1/Math.sin(Math.acos((v*l+m*q)/(Math.sqrt(v*v+m*m)*Math.sqrt(l*l+q*q)))/2),p=Math.sqrt(p[0]*p[0]+p[1]*p[1]),v=Math.min(y,(b-p)/(m-1)),m=Math.min(y,(h-p)/(m+1))),null!=u?(p=xc(null==G?[L,W]:[G,z],[x,r],h,m,w),l=xc([u,M],[L,W],h,m,w),y===m?t.push("M",p[0],"A",m,",",m," 0 0,",C," ",p[1],"A",h,",",h," 0 ",1-w^wc(p[1][0],p[1][1],l[1][0],l[1][1]),",",w," ",l[1],"A",m,",",m," 0 0,",C,
" ",l[0]):t.push("M",p[0],"A",m,",",m," 0 1,",C," ",l[0])):t.push("M",x,",",r),null!=G?(h=xc([x,r],[G,z],b,-v,w),u=xc([L,W],null==u?[x,r]:[u,M],b,-v,w),y===v?t.push("L",u[0],"A",v,",",v," 0 0,",C," ",u[1],"A",b,",",b," 0 ",w^wc(u[1][0],u[1][1],h[1][0],h[1][1]),",",1-w," ",h[1],"A",v,",",v," 0 0,",C," ",h[0]):t.push("L",u[0],"A",v,",",v," 0 0,",C," ",h[0])):t.push("L",L,",",W)):(t.push("M",x,",",r),null!=u&&t.push("A",h,",",h," 0 ",v,",",w," ",u,",",M),t.push("L",L,",",W),null!=G&&t.push("A",b,",",
b," 0 ",C,",",1-w," ",G,",",z));t.push("Z");return t.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var f=Th,a=Uh,c=Sh,e=Oc,g=Jf,k=Kf,n=Vh;b.innerRadius=function(d){if(!arguments.length)return f;f=pa(d);return b};b.outerRadius=function(d){if(!arguments.length)return a;a=pa(d);return b};b.cornerRadius=function(d){if(!arguments.length)return c;c=pa(d);return b};b.padRadius=function(d){if(!arguments.length)return e;e=d==Oc?Oc:pa(d);return b};b.startAngle=
function(d){if(!arguments.length)return g;g=pa(d);return b};b.endAngle=function(d){if(!arguments.length)return k;k=pa(d);return b};b.padAngle=function(d){if(!arguments.length)return n;n=pa(d);return b};b.centroid=function(){var b=(+f.apply(this,arguments)+ +a.apply(this,arguments))/2,d=(+g.apply(this,arguments)+ +k.apply(this,arguments))/2-va;return[Math.cos(d)*b,Math.sin(d)*b]};return b};var Oc="auto";z.svg.line=function(){return Lf(C)};var Fd=z.map({linear:Qa,"linear-closed":Mf,step:function(b){for(var d=
0,f=b.length,a=b[0],c=[a[0],",",a[1]];++d<f;)c.push("H",(a[0]+(a=b[d])[0])/2,"V",a[1]);1<f&&c.push("H",a[0]);return c.join("")},"step-before":Gd,"step-after":Hd,basis:Nf,"basis-open":function(b){if(4>b.length)return Qa(b);for(var d=[],f=-1,a=b.length,c,e=[0],g=[0];3>++f;)c=b[f],e.push(c[0]),g.push(c[1]);d.push(Ma(fb,e)+","+Ma(fb,g));for(--f;++f<a;)c=b[f],e.shift(),e.push(c[0]),g.shift(),g.push(c[1]),Jd(d,e,g);return d.join("")},"basis-closed":function(b){for(var d,f=-1,a=b.length,c=a+4,e,g=[],k=[];4>
++f;)e=b[f%a],g.push(e[0]),k.push(e[1]);d=[Ma(fb,g),",",Ma(fb,k)];for(--f;++f<c;)e=b[f%a],g.shift(),g.push(e[0]),k.shift(),k.push(e[1]),Jd(d,g,k);return d.join("")},bundle:function(b,d){var f=b.length-1;if(f)for(var a=b[0][0],c=b[0][1],e=b[f][0]-a,g=b[f][1]-c,k=-1,n,l;++k<=f;)n=b[k],l=k/f,n[0]=d*n[0]+(1-d)*(a+l*e),n[1]=d*n[1]+(1-d)*(c+l*g);return Nf(b)},cardinal:function(b,d){return 3>b.length?Qa(b):b[0]+yc(b,Id(b,d))},"cardinal-open":function(b,d){return 4>b.length?Qa(b):b[1]+yc(b.slice(1,-1),Id(b,
d))},"cardinal-closed":function(b,d){return 3>b.length?Mf(b):b[0]+yc((b.push(b[0]),b),Id([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=Qa(b);else{var d=b[0],f=[],a;var c=0;var e=b.length-1;var g=[];var k=b[1];for(a=g[0]=Kd(b[0],k);++c<e;)g[c]=(a+(a=Kd(k,k=b[c+1])))/2;g[c]=a;for(var n=-1,l=b.length-1;++n<l;)c=Kd(b[n],b[n+1]),1E-6>da(c)?g[n]=g[n+1]=0:(e=g[n]/c,k=g[n+1]/c,a=e*e+k*k,9<a&&(a=3*c/Math.sqrt(a),g[n]=a*e,g[n+1]=a*k));for(n=-1;++n<=l;)a=(b[Math.min(l,n+1)][0]-b[Math.max(0,
n-1)][0])/(6*(1+g[n]*g[n])),f.push([a||0,g[n]*a||0]);b=d+yc(b,f)}return b}});Fd.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var Of=[0,2/3,1/3,0],Pf=[0,1/3,2/3,0],fb=[0,1/6,2/3,1/6];z.svg.line.radial=function(){var b=Lf(Qf);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Gd.reverse=Hd;Hd.reverse=Gd;z.svg.area=function(){return Rf(C)};z.svg.area.radial=function(){var b=Rf(Qf);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;
b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};z.svg.chord=function(){function b(b,e){var h=d(this,a,b,e),g=d(this,c,b,e);return"M"+h.p0+f(h.r,h.p1,h.a1-h.a0)+(h.a0==g.a0&&h.a1==g.a1?"Q 0,0 "+h.p0:"Q 0,0 "+g.p0+f(g.r,g.p1,g.a1-g.a0)+("Q 0,0 "+h.p0))+"Z"}function d(b,d,f,a){var c=d.call(b,f,a);d=e.call(b,c,a);f=g.call(b,c,a)-va;b=k.call(b,c,a)-va;return{r:d,a0:f,a1:b,p0:[d*Math.cos(f),d*Math.sin(f)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function f(b,d,f){return"A"+b+","+b+" 0 "+ +(f>
ba)+",1 "+d}var a=ld,c=md,e=Wh,g=Jf,k=Kf;b.radius=function(d){if(!arguments.length)return e;e=pa(d);return b};b.source=function(d){if(!arguments.length)return a;a=pa(d);return b};b.target=function(d){if(!arguments.length)return c;c=pa(d);return b};b.startAngle=function(d){if(!arguments.length)return g;g=pa(d);return b};b.endAngle=function(d){if(!arguments.length)return k;k=pa(d);return b};return b};z.svg.diagonal=function(){function b(b,c){var e=d.call(this,b,c),h=f.call(this,b,c),g=(e.y+h.y)/2,e=
[e,{x:e.x,y:g},{x:h.x,y:g},h],e=e.map(a);return"M"+e[0]+"C"+e[1]+" "+e[2]+" "+e[3]}var d=ld,f=md,a=Sf;b.source=function(f){if(!arguments.length)return d;d=pa(f);return b};b.target=function(d){if(!arguments.length)return f;f=pa(d);return b};b.projection=function(d){if(!arguments.length)return a;a=d;return b};return b};z.svg.diagonal.radial=function(){var b=z.svg.diagonal(),d=Sf,f=b.projection;b.projection=function(b){return arguments.length?f(Xh(d=b)):d};return b};z.svg.symbol=function(){function b(b,
a){return(hg.get(d.call(this,b,a))||Tf)(f.call(this,b,a))}var d=Zh,f=Yh;b.type=function(f){if(!arguments.length)return d;d=pa(f);return b};b.size=function(d){if(!arguments.length)return f;f=pa(d);return b};return b};var hg=z.map({circle:Tf,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*ig));var d=b*ig;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=
Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Pc);var d=b*Pc/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=Math.sqrt(b/Pc);var d=b*Pc/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});z.svg.symbolTypes=hg.keys();var Pc=Math.sqrt(3),ig=Math.tan(30*ca);ka.transition=function(b){var d=qb||++jg;b=Md(b);for(var f=[],a,c,e=Qc||{time:Date.now(),ease:fh,delay:0,duration:250},g=-1,k=this.length;++g<k;){f.push(a=
[]);for(var n=this[g],l=-1,p=n.length;++l<p;)(c=n[l])&&zc(c,l,b,d,e),a.push(c)}return Rb(f,b,d)};ka.interrupt=function(b){return this.each(null==b?Cc:Uf(Md(b)))};var Cc=Uf(Md()),Aa=[],jg=0,qb,Qc;Aa.call=ka.call;Aa.empty=ka.empty;Aa.node=ka.node;Aa.size=ka.size;z.transition=function(b,d){return b&&b.transition?qb?b.transition(d):b:z.selection().transition(b)};z.transition.prototype=Aa;Aa.select=function(b){var d=this.id,a=this.namespace,c=[],e,g,n;b=k(b);for(var l=-1,p=this.length;++l<p;){c.push(e=
[]);for(var w=this[l],y=-1,r=w.length;++y<r;)(n=w[y])&&(g=b.call(n,n.__data__,y,l))?("__data__"in n&&(g.__data__=n.__data__),zc(g,y,a,d,n[a][d]),e.push(g)):e.push(null)}return Rb(c,a,d)};Aa.selectAll=function(b){var d=this.id,a=this.namespace,c=[],e,g;b=J(b);for(var k=-1,n=this.length;++k<n;)for(var l=this[k],p=-1,w=l.length;++p<w;)if(e=l[p]){var y=e[a][d];var r=b.call(e,e.__data__,p,k);c.push(e=[]);for(var q=-1,L=r.length;++q<L;)(g=r[q])&&zc(g,q,a,d,y),e.push(g)}return Rb(c,a,d)};Aa.filter=function(b){var d=
[],a,c;"function"!==typeof b&&(b=M(b));for(var e=0,g=this.length;e<g;e++){d.push(a=[]);var k=this[e];for(var n=0,l=k.length;n<l;n++)(c=k[n])&&b.call(c,c.__data__,n,e)&&a.push(c)}return Rb(d,this.namespace,this.id)};Aa.tween=function(b,d){var a=this.id,c=this.namespace;return 2>arguments.length?this.node()[c][a].tween.get(b):ja(this,null==d?function(d){d[c][a].tween.remove(b)}:function(f){f[c][a].tween.set(b,d)})};Aa.attr=function(b,d){function a(){this.removeAttribute(n)}function c(){this.removeAttributeNS(n.space,
n.local)}function e(b){return null==b?a:(b+="",function(){var d=this.getAttribute(n),a;return d!==b&&(a=k(d,b),function(b){this.setAttribute(n,a(b))})})}function g(b){return null==b?c:(b+="",function(){var d=this.getAttributeNS(n.space,n.local),a;return d!==b&&(a=k(d,b),function(b){this.setAttributeNS(n.space,n.local,a(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var k="transform"==b?lf:ob,n=z.ns.qualify(b);return Ld(this,"attr."+b,d,n.local?g:e)};Aa.attrTween=function(b,
d){function a(b,a){var f=d.call(this,b,a,this.getAttribute(e));return f&&function(b){this.setAttribute(e,f(b))}}function c(b,a){var f=d.call(this,b,a,this.getAttributeNS(e.space,e.local));return f&&function(b){this.setAttributeNS(e.space,e.local,f(b))}}var e=z.ns.qualify(b);return this.tween("attr."+b,e.local?c:a)};Aa.style=function(b,d,a){function f(){this.style.removeProperty(b)}var c=arguments.length;if(3>c){if("string"!==typeof b){2>c&&(d="");for(a in b)this.style(a,b[a],d);return this}a=""}return Ld(this,
"style."+b,d,function(d){return null==d?f:(d+="",function(){var f=e(this).getComputedStyle(this,null).getPropertyValue(b),c;return f!==d&&(c=ob(f,d),function(d){this.style.setProperty(b,c(d),a)})})})};Aa.styleTween=function(b,d,a){3>arguments.length&&(a="");return this.tween("style."+b,function(f,c){var g=d.call(this,f,c,e(this).getComputedStyle(this,null).getPropertyValue(b));return g&&function(d){this.style.setProperty(b,g(d),a)}})};Aa.text=function(b){return Ld(this,"text",b,$h)};Aa.remove=function(){var b=
this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};Aa.ease=function(b){var d=this.id,a=this.namespace;if(1>arguments.length)return this.node()[a][d].ease;"function"!==typeof b&&(b=z.ease.apply(z,arguments));return ja(this,function(f){f[a][d].ease=b})};Aa.delay=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].delay:ja(this,"function"===typeof b?function(f,c,e){f[a][d].delay=+b.call(f,f.__data__,
c,e)}:(b=+b,function(f){f[a][d].delay=b}))};Aa.duration=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].duration:ja(this,"function"===typeof b?function(f,c,e){f[a][d].duration=Math.max(1,b.call(f,f.__data__,c,e))}:(b=Math.max(1,b),function(f){f[a][d].duration=b}))};Aa.each=function(b,d){var a=this.id,c=this.namespace;if(2>arguments.length){var e=Qc,g=qb;try{qb=a,ja(this,function(d,f,e){Qc=d[c][a];b.call(d,d.__data__,f,e)})}finally{Qc=e,qb=g}}else ja(this,function(f){f=
f[c][a];(f.event||(f.event=z.dispatch("start","end","interrupt"))).on(b,d)});return this};Aa.transition=function(){for(var b=this.id,d=++jg,a=this.namespace,c=[],e,g,k,n,l=0,p=this.length;l<p;l++){c.push(e=[]);g=this[l];for(var w=0,y=g.length;w<y;w++){if(k=g[w])n=k[a][b],zc(k,w,a,d,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration});e.push(k)}}return Rb(c,a,d)};z.svg.axis=function(){function b(b){b.each(function(){var b=z.select(this),f=this.__chart__||d,h=this.__chart__=d.copy(),
m=null==n?h.ticks?h.ticks.apply(h,k):h.domain():n,p=null==l?h.tickFormat?h.tickFormat.apply(h,k):C:l,w=b.selectAll(".tick").data(m,h),m=w.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),y=z.transition(w.exit()).style("opacity",1E-6).remove(),r=z.transition(w.order()).style("opacity",1),q=Math.max(c,0)+g,L=sc(h),b=b.selectAll(".domain").data([0]),b=(b.enter().append("path").attr("class","domain"),z.transition(b));m.append("line");m.append("text");var t=m.select("line"),u=r.select("line"),
w=w.select("text").text(p),M=m.select("text"),v=r.select("text"),x="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a){p=ai;var W="x";var G="y";var J="x2";var I="y2";w.attr("dy",0>x?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+L[0]+","+x*e+"V0H"+L[1]+"V"+x*e)}else p=bi,W="y",G="x",J="y2",I="x2",w.attr("dy",".32em").style("text-anchor",0>x?"end":"start"),b.attr("d","M"+x*e+","+L[0]+"H0V"+L[1]+"H"+x*e);t.attr(I,x*c);M.attr(G,x*q);u.attr(J,0).attr(I,x*c);v.attr(W,0).attr(G,x*q);if(h.rangeBand)var Z=
h,A=Z.rangeBand()/2,f=h=function(b){return Z(b)+A};else f.rangeBand?f=h:y.call(p,h,f);m.call(p,f,h);r.call(p,h,h)})}var d=z.scale.linear(),a=kg,c=6,e=6,g=3,k=[10],n=null,l;b.scale=function(a){if(!arguments.length)return d;d=a;return b};b.orient=function(d){if(!arguments.length)return a;a=d in yi?d+"":kg;return b};b.ticks=function(){if(!arguments.length)return k;k=Ra(arguments);return b};b.tickValues=function(d){if(!arguments.length)return n;n=d;return b};b.tickFormat=function(d){if(!arguments.length)return l;
l=d;return b};b.tickSize=function(d){var a=arguments.length;if(!a)return c;c=+d;e=+arguments[a-1];return b};b.innerTickSize=function(d){if(!arguments.length)return c;c=+d;return b};b.outerTickSize=function(d){if(!arguments.length)return e;e=+d;return b};b.tickPadding=function(d){if(!arguments.length)return g;g=+d;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var kg="bottom",yi={top:1,right:1,bottom:1,left:1};z.svg.brush=function(){function b(f){f.each(function(){var f=
z.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),e=f.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(t,C);h.exit().remove();h.enter().append("g").attr("class",function(b){return"resize "+
b}).style("cursor",function(b){return zi[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");h.style("display",b.empty()?"none":null);f=z.transition(f);e=z.transition(e);n&&(h=sc(n),e.attr("x",h[0]).attr("width",h[1]-h[0]),a(f));l&&(h=sc(l),e.attr("y",h[0]).attr("height",h[1]-h[0]),c(f));d(f)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+
p[+/e$/.test(b)]+","+w[+/^s/.test(b)]+")"})}function a(b){b.select(".extent").attr("x",p[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",p[1]-p[0])}function c(b){b.select(".extent").attr("y",w[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",w[1]-w[0])}function g(){function f(){var b=z.mouse(m),f=!1;D&&(b[0]+=D[0],b[1]+=D[1]);G||(z.event.altKey?(J||(J=[(p[0]+p[1])/2,(w[0]+w[1])/2]),I[0]=p[+(b[0]<J[0])],I[1]=w[+(b[1]<J[1])]):J=null);x&&g(b,n,0)&&(a(M),f=!0);W&&g(b,l,1)&&(c(M),f=!0);
f&&(d(M),u({type:"brush",mode:G?"move":"resize"}))}function g(b,d,a){var f=sc(d);d=f[0];var c=f[1],f=I[a],e=a?w:p,g=e[1]-e[0];G&&(d-=f,c-=g+f);b=(a?L:q)?Math.max(d,Math.min(c,b[a])):b[a];G?d=(b+=f)+g:(J&&(f=Math.max(d,Math.min(c,2*J[a]-b))),f<b?(d=b,b=f):d=f);if(e[0]!=b||e[1]!=d)return a?r=null:y=null,e[0]=b,e[1]=d,!0}function h(){f();M.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);z.select("body").style("cursor",null);Z.on("mousemove.brush",null).on("mouseup.brush",
null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);C();u({type:"brushend"})}var m=this,t=z.select(z.event.target),u=k.of(m,arguments),M=z.select(m),v=t.datum(),x=!/^(n|s)$/.test(v)&&n,W=!/^(e|w)$/.test(v)&&l,G=t.classed("extent"),C=oa(m),J,I=z.mouse(m),Z=z.select(e(m)).on("keydown.brush",function(){32==z.event.keyCode&&(G||(J=null,I[0]-=p[1],I[1]-=w[1],G=2),V())}).on("keyup.brush",function(){32==z.event.keyCode&&2==G&&(I[0]+=p[1],I[1]+=w[1],
G=0,V())});if(z.event.changedTouches)Z.on("touchmove.brush",f).on("touchend.brush",h);else Z.on("mousemove.brush",f).on("mouseup.brush",h);M.interrupt().selectAll("*").interrupt();if(G)I[0]=p[0]-I[0],I[1]=w[0]-I[1];else if(v){var A=+/w$/.test(v),v=+/^n/.test(v);var D=[p[1-A]-I[0],w[1-v]-I[1]];I[0]=p[A];I[1]=w[v]}else z.event.altKey&&(J=I.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null);z.select("body").style("cursor",t.style("cursor"));u({type:"brushstart"});f()}
var k=T(b,"brushstart","brush","brushend"),n=null,l=null,p=[0,0],w=[0,0],y,r,q=!0,L=!0,t=Wd[0];b.event=function(b){b.each(function(){var b=k.of(this,arguments),d={x:p,y:w,i:y,j:r},a=this.__chart__||d;this.__chart__=d;qb?z.select(this).transition().each("start.brush",function(){y=a.i;r=a.j;p=a.x;w=a.y;b({type:"brushstart"})}).tween("brush:brush",function(){var a=rc(p,d.x),f=rc(w,d.y);y=r=null;return function(c){p=d.x=a(c);w=d.y=f(c);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){y=
d.i;r=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(d){if(!arguments.length)return n;n=d;t=Wd[!n<<1|!l];return b};b.y=function(d){if(!arguments.length)return l;l=d;t=Wd[!n<<1|!l];return b};b.clamp=function(d){if(!arguments.length)return n&&l?[q,L]:n?q:l?L:null;n&&l?(q=!!d[0],L=!!d[1]):n?q=!!d:l&&(L=!!d);return b};b.extent=function(d){if(!arguments.length){if(n)if(y){var a=y[0];var f=y[1]}else if(a=
p[0],f=p[1],n.invert&&(a=n.invert(a),f=n.invert(f)),f<a){var c=a;a=f;f=c}if(l)if(r){var e=r[0];var g=r[1]}else e=w[0],g=w[1],l.invert&&(e=l.invert(e),g=l.invert(g)),g<e&&(c=e,e=g,g=c);return n&&l?[[a,e],[f,g]]:n?[a,f]:l&&[e,g]}n&&(a=d[0],f=d[1],l&&(a=a[0],f=f[0]),y=[a,f],n.invert&&(a=n(a),f=n(f)),f<a&&(c=a,a=f,f=c),a!=p[0]||f!=p[1])&&(p=[a,f]);l&&(e=d[0],g=d[1],n&&(e=e[1],g=g[1]),r=[e,g],l.invert&&(e=l(e),g=l(g)),g<e&&(c=e,e=g,g=c),e!=w[0]||g!=w[1])&&(w=[e,g]);return b};b.clear=function(){b.empty()||
(p=[0,0],w=[0,0],y=r=null);return b};b.empty=function(){return!!n&&p[0]==p[1]||!!l&&w[0]==w[1]};return z.rebind(b,k,"on")};var zi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Xd=Y.format=Zf.timeFormat,lg=Xd.utc,mg=lg("%Y-%m-%dT%H:%M:%S.%LZ");Xd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nd:mg;Nd.parse=function(b){b=new Date(b);return isNaN(b)?
null:b};Nd.toString=mg.toString;Y.second=hb(function(b){return new Ea(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});Y.seconds=Y.second.range;Y.seconds.utc=Y.second.utc.range;Y.minute=hb(function(b){return new Ea(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+6E4*Math.floor(d))},function(b){return b.getMinutes()});Y.minutes=Y.minute.range;Y.minutes.utc=Y.minute.utc.range;Y.hour=hb(function(b){var d=b.getTimezoneOffset()/
60;return new Ea(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});Y.hours=Y.hour.range;Y.hours.utc=Y.hour.utc.range;Y.month=hb(function(b){b=Y.day(b);b.setDate(1);return b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});Y.months=Y.month.range;Y.months.utc=Y.month.utc.range;var Ac=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Yd=[[Y.second,1],
[Y.second,5],[Y.second,15],[Y.second,30],[Y.minute,1],[Y.minute,5],[Y.minute,15],[Y.minute,30],[Y.hour,1],[Y.hour,3],[Y.hour,6],[Y.hour,12],[Y.day,1],[Y.day,2],[Y.week,1],[Y.month,1],[Y.month,3],[Y.year,1]],Ai=Xd.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],
["%B",function(b){return b.getMonth()}],["%Y",Gb]]),ci={range:function(b,d,a){return z.range(Math.ceil(b/a)*a,+d,a).map(pb)},floor:C,ceil:C};Yd.year=Y.year;Y.scale=function(){return Od(z.scale.linear(),Yd,Ai)};var ng=Yd.map(function(b){return[b[0].utc,b[1]]}),Bi=lg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&
1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Gb]]);ng.year=Y.year.utc;Y.scale.utc=function(){return Od(z.scale.linear(),ng,Bi)};z.text=$c(function(b){return b.responseText});z.json=function(b,d){return Xb(b,"application/json",di,d)};z.html=function(b,d){return Xb(b,"text/html",ei,d)};z.xml=$c(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=z,define(z)):"object"===typeof module&&module.exports?
module.exports=z:this.d3=z}();
(function(){var e={dev:!1};e.tooltip=e.tooltip||{};e.utils=e.utils||{};e.models=e.models||{};e.charts={};e.logs={};e.dom={};e.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,1),e=this,u=function(){},q=function(){return e.apply(this instanceof u&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};
u.prototype=this.prototype;q.prototype=new u;return q});e.dev&&(e.dispatch.on("render_start",function(a){e.logs.startTime=+new Date}),e.dispatch.on("render_end",function(a){e.logs.endTime=+new Date;e.logs.totalTime=e.logs.endTime-e.logs.startTime;e.log("total",e.logs.totalTime)}));e.log=function(){e.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):e.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,
console).apply(console,arguments);return arguments[arguments.length-1]};e.deprecated=function(a,c){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",c||"")};e.render=function(a){a=a||1;e.render.active=!0;e.dispatch.render_start();var c=function(){for(var g,u,q=0;q<a&&(u=e.render.queue[q]);q++)g=u.generate(),typeof u.callback==typeof Function&&u.callback(g);e.render.queue.splice(0,q);e.render.queue.length?setTimeout(c):(e.dispatch.render_end(),e.render.active=!1)};setTimeout(c)};
e.render.active=!1;e.render.queue=[];e.addGraph=function(a,c){typeof a===typeof Function&&(a={generate:a,callback:c});e.render.queue.push(a);e.render.active||e.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=e);"undefined"!==typeof window&&(window.nv=e);e.dom.write=function(a){return void 0!==window.fastdom?fastdom.write(a):a()};e.dom.read=function(a){return void 0!==window.fastdom?fastdom.read(a):a()};e.interactiveGuideline=function(){function a(K){K.each(function(E){function F(){var e=
d3.mouse(this),g=e[0],e=e[1],l=!0,u=!1;B&&(g=d3.event.offsetX,e=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(l=!1),d3.event.target.className.baseVal.match("nv-legend")&&(u=!0));l&&(g-=q.left,e-=q.top);0>g||0>e||g>D||e>C||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||u?B&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(c.nvPointerEventsClass))||(v.elementMouseout({mouseX:g,
mouseY:e}),a.renderGuideLine(null),c.hidden(!0)):(c.hidden(!1),l=t.invert(g),v.elementMousemove({mouseX:g,mouseY:e,pointXValue:l}),"dblclick"===d3.event.type&&v.elementDblclick({mouseX:g,mouseY:e,pointXValue:l}),"click"===d3.event.type&&v.elementClick({mouseX:g,mouseY:e,pointXValue:l}))}var H=d3.select(this),D=g||960,C=u||400,K=H.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([E]);K.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");
A&&(A.on("touchmove",F).on("mousemove",F,!0).on("mouseout",F,!0).on("dblclick",F).on("click",F),a.guideLine=null,a.renderGuideLine=function(c){l&&(a.guideLine&&a.guideLine.attr("x1")===c||e.dom.write(function(){var a=K.select(".nv-interactiveGuideLine").selectAll("line").data(null!=c?[e.utils.NaNtoZero(c)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",function(a){return a}).attr("y1",C).attr("y2",0);a.exit().remove()}))})})}var c=e.models.tooltip();
c.duration(0).hideDelay(0)._isInteractiveLayer(!0).hidden(!1);var g=null,u=null,q={left:0,top:0},t=d3.scale.linear(),v=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),l=!0,A=null,B="ActiveXObject"in window;a.dispatch=v;a.tooltip=c;a.margin=function(c){if(!arguments.length)return q;q.top="undefined"!=typeof c.top?c.top:q.top;q.left="undefined"!=typeof c.left?c.left:q.left;return a};a.width=function(c){if(!arguments.length)return g;g=c;return a};a.height=function(c){if(!arguments.length)return u;
u=c;return a};a.xScale=function(c){if(!arguments.length)return t;t=c;return a};a.showGuideLine=function(c){if(!arguments.length)return l;l=c;return a};a.svgContainer=function(c){if(!arguments.length)return A;A=c;return a};return a};e.interactiveBisect=function(a,c,e){if(!(a instanceof Array))return null;var g="function"!==typeof e?function(a){return a.x}:e;e=d3.bisector(function(a,c){return g(a)-c}).left;e=d3.max([0,e(a,c)-1]);var q=g(a[e]);"undefined"===typeof q&&(q=e);if(q===c)return e;var t=d3.min([e+
1,a.length-1]);a=g(a[t]);"undefined"===typeof a&&(a=t);return Math.abs(a-c)>=Math.abs(q-c)?e:t};e.nearestValueIndex=function(a,c,e){var g=Infinity,q=null;a.forEach(function(a,u){var l=Math.abs(c-a);null!=a&&l<=g&&l<e&&(g=l,q=u)});return q};(function(){e.models.tooltip=function(){function a(){if(A){var a=d3.select(A);"svg"!==a.node().tagName&&(a=a.select("svg"));var c=a.node()?a.attr("viewBox"):null;c&&(c=c.split(" "),a=parseInt(a.style("width"),10)/c[2],H.left*=a,H.top*=a)}}function c(){if(C){a:{if(g&&
g.series){if(g.series instanceof Array){var k=!!g.series.length;break a}if(g.series instanceof Object){g.series=[g.series];k=!0;break a}}k=!1}if(k){a();var q=H.left,u=null!==v?v:H.top;e.dom.write(function(){E||(E=d3.select(A?A:document.body).append("div").attr("class","nvtooltip "+(l?l:"xy-tooltip")).attr("id",r),E.style("top",0).style("left",0),E.style("opacity",0),E.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0),E.classed("nv-pointer-events-none",!0),F=E.node());var a=T(g);
a&&(F.innerHTML=a);A&&I?e.dom.read(function(){var a=A.getElementsByTagName("svg")[0],c=0,e=0;if(a){a=a.getBoundingClientRect();c=A.getBoundingClientRect();e=a.top;if(0>e)var g=A.getBoundingClientRect(),e=Math.abs(e)>g.height?0:e;e=Math.abs(e-c.top);c=Math.abs(a.left-c.left)}q+=A.offsetLeft+c-2*A.scrollLeft;u+=A.offsetTop+e-2*A.scrollTop;t&&0<t&&(u=Math.floor(u/t)*t);U([q,u])}):U([q,u])});return c}}}var g=null,u="w",q=25,t=0,v=null,l=null,A=null,B=!0,K=400,E=null,F=null,H={left:null,top:null},D={left:0,
top:0},C=!0,O=100,P=!0,I=!1,r="nvtooltip-"+Math.floor(1E5*Math.random()),G=function(a,c){return a},V=function(a){return a},Q=function(a,c){return a},T=function(a){if(null===a)return"";var c=d3.select(document.createElement("table"));P&&c.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(V(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",
function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});e.append("td").classed("key",!0).html(function(a,c){return Q(a.key,c)});e.append("td").classed("value",!0).html(function(a,c){return G(a.value,c)});e.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});c=c.node().outerHTML;
void 0!==a.footer&&(c+="<div class='footer'>"+a.footer+"</div>");return c},U=function(a){F&&e.dom.read(function(){var c=parseInt(F.offsetHeight,10),g=parseInt(F.offsetWidth,10),k=e.utils.windowSize().width,l=e.utils.windowSize().height,r=window.pageYOffset,n=window.pageXOffset,l=window.innerWidth>=document.body.scrollWidth?l:l-16,k=window.innerHeight>=document.body.scrollHeight?k:k-16,t=function(a){var c=M;do isNaN(a.offsetTop)||(c+=a.offsetTop),a=a.offsetParent;while(a);return c},v=function(a){var c=
y;do isNaN(a.offsetLeft)||(c+=a.offsetLeft),a=a.offsetParent;while(a);return c};switch(u){case "e":var y=a[0]-g-q;var M=a[1]-c/2;v=v(F);t=t(F);v<n&&(y=a[0]+q>n?a[0]+q:n-v+y);t<r&&(M=r-t+M);t+c>r+l&&(M=r+l-t+M-c);break;case "w":y=a[0]+q;M=a[1]-c/2;v=v(F);t=t(F);v+g>k&&(y=a[0]-g-q);t<r&&(M=r+5);t+c>r+l&&(M=r+l-t+M-c);break;case "n":y=a[0]-g/2-5;M=a[1]+q;v=v(F);t=t(F);v<n&&(y=n+5);v+g>k&&(y=y-g/2+5);t+c>r+l&&(M=r+l-t+M-c);break;case "s":y=a[0]-g/2;M=a[1]-c-q;v=v(F);t=t(F);v<n&&(y=n+5);v+g>k&&(y=y-g/
2+5);r>t&&(M=r);break;case "none":y=a[0],M=a[1]-q,v=v(F),t=t(F)}y-=D.left;M-=D.top;var g=F.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft,c="translate("+y+"px, "+M+"px)",W=d3.interpolateString("translate("+(g.left+n)+"px, "+(g.top+r)+"px)",c),r=.1>E.style("opacity");B?E.transition().delay(K).duration(0).style("opacity",0):E.interrupt().transition().duration(r?0:O).styleTween("transform",function(a){return W},
"important").style("-webkit-transform",c).style("opacity",1)})};c.nvPointerEventsClass="nv-pointer-events-none";c.options=e.utils.optionsFunc.bind(c);c._options=Object.create({},{duration:{get:function(){return O},set:function(a){O=a}},gravity:{get:function(){return u},set:function(a){u=a}},distance:{get:function(){return q},set:function(a){q=a}},snapDistance:{get:function(){return t},set:function(a){t=a}},classes:{get:function(){return l},set:function(a){l=a}},chartContainer:{get:function(){return A},
set:function(a){A=a}},fixedTop:{get:function(){return v},set:function(a){v=a}},enabled:{get:function(){return C},set:function(a){C=a}},hideDelay:{get:function(){return K},set:function(a){K=a}},contentGenerator:{get:function(){return T},set:function(a){T=a}},valueFormatter:{get:function(){return G},set:function(a){G=a}},headerFormatter:{get:function(){return V},set:function(a){V=a}},keyFormatter:{get:function(){return Q},set:function(a){Q=a}},headerEnabled:{get:function(){return P},set:function(a){P=
a}},_isInteractiveLayer:{get:function(){return I},set:function(a){I=!!a}},position:{get:function(){return H},set:function(a){H.left=void 0!==a.left?a.left:H.left;H.top=void 0!==a.top?a.top:H.top}},offset:{get:function(){return D},set:function(a){D.left=void 0!==a.left?a.left:D.left;D.top=void 0!==a.top?a.top:D.top}},hidden:{get:function(){return B},set:function(a){B!=a&&(B=!!a,c())}},data:{get:function(){return g},set:function(a){a.point&&(a.value=a.point.x,a.series=a.series||{},a.series.value=a.point.y,
a.series.color=a.point.color||a.series.color);g=a}},tooltipElem:{get:function(){return F},set:function(a){}},id:{get:function(){return r},set:function(a){}}});e.utils.initOptions(c);return c}})();e.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight)return a.width=window.innerWidth,a.height=window.innerHeight,a;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)return a.width=document.documentElement.offsetWidth,
a.height=document.documentElement.offsetHeight,a;document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);return a};e.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):e.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};e.utils.getColor=function(a){if(void 0===a)return e.utils.defaultColor();if(Array.isArray(a)){var c=d3.scale.ordinal().range(a);
return function(a,e){return a.color||c(void 0===e?a:e)}}return a};e.utils.defaultColor=function(){return e.utils.getColor(d3.scale.category20().range())};e.utils.customTheme=function(a,c,e){c=c||function(a){return a.key};e=e||d3.scale.category20().range();var g=e.length;return function(q,t){var u=c(q);if("function"===typeof a[u])return a[u]();if(void 0!==a[u])return a[u];g||(g=e.length);--g;return e[g]}};e.utils.pjax=function(a,c){var g=function(g){d3.html(g,function(g){var q=d3.select(c).node();
q.parentNode.replaceChild(d3.select(g).select(c).node(),q);e.utils.pjax(a,c)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,this.href);g(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&g(d3.event.state)})};e.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var c=parseInt(a.style("font-size").replace("px",""),10);return a.text().length*c*.5}return 0};e.utils.NaNtoZero=
function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a||-Infinity===a?0:a};d3.selection.prototype.watchTransition=function(a){var c=[this].concat([].slice.call(arguments,1));return a.transition.apply(a,c)};e.utils.renderWatch=function(a,c){if(!(this instanceof e.utils.renderWatch))return new e.utils.renderWatch(a,c);var g=void 0!==c?c:250,u=[],q=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=!1;(function(a){a.dispatch.on("renderEnd",function(c){a.__rendered=
!0;q.renderEnd("model")})})(a);0>u.indexOf(a)&&u.push(a)});return this};this.reset=function(a){void 0!==a&&(g=a);u=[]};this.transition=function(a,c,e){c=1<arguments.length?[].slice.call(arguments,1):[];e=1<c.length?c.pop():void 0!==g?g:250;a.__rendered=!1;0>u.indexOf(a)&&u.push(a);if(0===e)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var l=0;return a.transition().duration(e).each(function(){++l}).each("end",
function(e,g){0===--l&&(a.__rendered=!0,q.renderEnd.apply(this,c))})};this.renderEnd=function(){u.every(function(a){return a.__rendered})&&(u.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}};e.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(c){for(var g in c){var u=a[g]instanceof Array,q="object"===typeof c[g];"object"===typeof a[g]&&!u&&q?e.utils.deepExtend(a[g],c[g]):a[g]=c[g]}})};e.utils.state=function(){if(!(this instanceof
e.utils.state))return new e.utils.state;var a={},c=function(){},g=function(){return{}},u=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){c(a,!0)});this.getter=function(a){g=a;return this};this.setter=function(a,e){e||(e=function(){});c=function(c,g){a(c);g&&e()};return this};this.init=function(a){u=u||{};e.utils.deepExtend(u,a)};this.update=function(){u&&(c(u,!1),u=null);var e=g();if(JSON.stringify(e)===JSON.stringify(a))e=!1;else{for(var t in e)void 0===a[t]&&(a[t]=
{}),a[t]=e[t];e=!0}e&&this.dispatch.change(a)}};e.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,e){if("function"===typeof this[a])this[a](e)}.bind(this));return this};e.utils.calcTicksX=function(a,c){for(var g=1,u=0;u<c.length;u+=1)var q=c[u]&&c[u].values?c[u].values.length:0,g=q>g?q:g;e.log("Requested number of ticks: ",a);e.log("Calculated max values to be: ",g);a=a>g?a=g-1:a;a=Math.floor(1>a?1:a);e.log("Calculating tick count as: ",a);return a};e.utils.calcTicksY=function(a,c){for(var g=
1,u=0;u<c.length;u+=1)for(var q=c[u]&&c[u].values?c[u].values:[],t,v=0;v<q.length;v+=1)t=q[v]&&q[v].value?q[v].value:0,g=t>g?t:g;e.log("Requested number of ticks: ",a);e.log("Calculated max values to be: ",g);a=a>g?a=g-1:a;a=Math.floor(1>a?1:a);e.log("Calculating tick count as: ",a);return a};e.utils.initOption=function(a,c){a._calls&&a._calls[c]?a[c]=a._calls[c]:(a[c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]=!0;a._options[c]=e;return a},a["_"+c]=function(e){if(!arguments.length)return a._options[c];
a._overrides[c]||(a._options[c]=e);return a})};e.utils.initOptions=function(a){a._overrides=a._overrides||{};var c=Object.getOwnPropertyNames(a._options||{}),g=Object.getOwnPropertyNames(a._calls||{}),c=c.concat(g),u;for(u in c)e.utils.initOption(a,c[u])};e.utils.inheritOptionsD3=function(a,c,e){a._d3options=e.concat(a._d3options||[]);e.unshift(c);e.unshift(a);d3.rebind.apply(this,e)};e.utils.arrayUnique=function(a){return a.sort().filter(function(c,e){return!e||c!=a[e-1]})};e.utils.symbolMap=d3.map();
e.utils.symbol=function(){function a(a,q){var t=c.call(this,a,q),u=g.call(this,a,q);return-1!==d3.svg.symbolTypes.indexOf(t)?d3.svg.symbol().type(t).size(u)():e.utils.symbolMap.get(t)(u)}var c,g=64;a.type=function(e){if(!arguments.length)return c;c=d3.functor(e);return a};a.size=function(c){if(!arguments.length)return g;g=d3.functor(c);return a};return a};e.utils.inheritOptions=function(a,c){var g=Object.getOwnPropertyNames(c._options||{}),u=Object.getOwnPropertyNames(c._calls||{}),q=c._inherited||
[],t=c._d3options||[],v=g.concat(u).concat(q).concat(t);v.unshift(c);v.unshift(a);d3.rebind.apply(this,v);a._inherited=e.utils.arrayUnique(g.concat(u).concat(q).concat(g).concat(a._inherited||[]));a._d3options=e.utils.arrayUnique(t.concat(a._d3options||[]))};e.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})};e.utils.sanitizeHeight=function(a,c){return a||parseInt(c.style("height"),10)||400};e.utils.sanitizeWidth=function(a,c){return a||parseInt(c.style("width"),10)||960};e.utils.availableHeight=
function(a,c,g){return e.utils.sanitizeHeight(a,c)-g.top-g.bottom};e.utils.availableWidth=function(a,c,g){return e.utils.sanitizeWidth(a,c)-g.left-g.right};e.utils.noData=function(a,c){var g=a.options(),u=g.margin(),q=g.noData(),q=null==q?["No Data Available."]:[q],t=e.utils.availableHeight(g.height(),c,u),g=e.utils.availableWidth(g.width(),c,u),g=u.left+g/2,u=u.top+t/2;c.selectAll("g").remove();q=c.selectAll(".nv-noData").data(q);q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle");q.attr("x",g).attr("y",u).text(function(a){return a})};e.models.axis=function(){function a(t){P.reset();t.each(function(a){var r=d3.select(this);e.utils.initSVG(r);a=r.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");r=a.select("g");null!==F?c.ticks(F):"top"!=c.orient()&&"bottom"!=c.orient()||c.ticks(Math.abs(g.range()[1]-g.range()[0])/100);r.watchTransition(P,"axis").call(c);O=O||c.scale();var t=
c.tickFormat();null==t&&(t=O.tickFormat());var C=r.selectAll("text.nv-axislabel").data([v||null]);C.exit().remove();switch(c.orient()){case "top":C.enter().append("text").attr("class","nv-axislabel");var I=2>g.range().length?0:2===g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);C.attr("text-anchor","middle").attr("y",0).attr("x",I/2);if(l){var D=a.selectAll("g.nv-axisMaxMin").data(g.domain());D.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",
0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");D.exit().remove();D.attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(g(a))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-c.tickPadding()).attr("text-anchor","middle").text(function(a,c){var e=t(a);return(""+e).match("NaN")?"":e});D.watchTransition(P,"min-max top").attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(g.range()[c])+",0)"})}break;case "bottom":D=H+36;var k=30,J=0,S=r.selectAll("g").select("text"),
p="";A%360&&(S.each(function(a,c){var e=this.getBoundingClientRect(),g=e.width;J=e.height;g>k&&(k=g)}),p="rotate("+A+" 0,"+(J/2+c.tickPadding())+")",D=Math.abs(Math.sin(A*Math.PI/180)),D=(D?D*k:k)+30,S.attr("transform",p).style("text-anchor",0<A%360?"start":"end"));C.enter().append("text").attr("class","nv-axislabel");I=2>g.range().length?0:2===g.range().length?g.range()[1]:g.range()[g.range().length-1]+(g.range()[1]-g.range()[0]);C.attr("text-anchor","middle").attr("y",D).attr("x",I/2);l&&(D=a.selectAll("g.nv-axisMaxMin").data([g.domain()[0],
g.domain()[g.domain().length-1]]),D.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),D.exit().remove(),D.attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(g(a)+(E?g.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",c.tickPadding()).attr("transform",p).style("text-anchor",A?0<A%360?"start":"end":"middle").text(function(a,c){var e=t(a);return(""+e).match("NaN")?"":
e}),D.watchTransition(P,"min-max bottom").attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(g(a)+(E?g.rangeBand()/2:0))+",0)"}));K&&S.attr("transform",function(a,c){return"translate(0,"+(0==c%2?"0":"12")+")"});break;case "right":C.enter().append("text").attr("class","nv-axislabel");C.style("text-anchor",B?"middle":"begin").attr("transform",B?"rotate(90)":"").attr("y",B?-Math.max(u.right,q)+12:-10).attr("x",B?d3.max(g.range())/2:c.tickPadding());l&&(D=a.selectAll("g.nv-axisMaxMin").data(g.domain()),
D.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),D.exit().remove(),D.attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(g(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",c.tickPadding()).style("text-anchor","start").text(function(a,c){var e=t(a);return(""+e).match("NaN")?"":e}),D.watchTransition(P,"min-max right").attr("transform",function(a,
c){return"translate(0,"+e.utils.NaNtoZero(g.range()[c])+")"}).select("text").style("opacity",1));break;case "left":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",B?"middle":"end").attr("transform",B?"rotate(-90)":"").attr("y",B?-Math.max(u.left,q)+25-(H||0):-10).attr("x",B?-d3.max(g.range())/2:-c.tickPadding()),l&&(D=a.selectAll("g.nv-axisMaxMin").data(g.domain()),D.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":
"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),D.exit().remove(),D.attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(O(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-c.tickPadding()).attr("text-anchor","end").text(function(a,c){var e=t(a);return(""+e).match("NaN")?"":e}),D.watchTransition(P,"min-max right").attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(g.range()[c])+")"}).select("text").style("opacity",1))}C.text(function(a){return a});
!l||"left"!==c.orient()&&"right"!==c.orient()||(r.selectAll("g").each(function(a,c){d3.select(this).select("text").attr("opacity",1);if(g(a)<g.range()[1]+10||g(a)>g.range()[0]-10)(1E-10<a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),g.domain()[0]==g.domain()[1]&&0==g.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,c){return c?0:1}));if(l&&("top"===c.orient()||"bottom"===c.orient())){var w=[];a.selectAll("g.nv-axisMaxMin").each(function(a,
c){try{c?w.push(g(a)-this.getBoundingClientRect().width-4):w.push(g(a)+this.getBoundingClientRect().width+4)}catch(X){c?w.push(g(a)-4):w.push(g(a)+4)}});r.selectAll("g").each(function(a,c){if(g(a)<w[0]||g(a)>w[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}r.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a)/1E6)&&void 0!==a}).classed("zero",!0);O=g.copy()});P.renderEnd("axis immediate");return a}var c=d3.svg.axis(),g=d3.scale.linear(),
u={top:0,right:0,bottom:0,left:0},q=75,t=60,v=null,l=!0,A=0,B=!0,K=!1,E=!1,F=null,H=0,D=250,C=d3.dispatch("renderEnd");c.scale(g).orient("bottom").tickFormat(function(a){return a});var O,P=e.utils.renderWatch(C,D);a.axis=c;a.dispatch=C;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return H},set:function(a){H=a}},staggerLabels:{get:function(){return K},set:function(a){K=a}},rotateLabels:{get:function(){return A},set:function(a){A=a}},rotateYLabel:{get:function(){return B},
set:function(a){B=a}},showMaxMin:{get:function(){return l},set:function(a){l=a}},axisLabel:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return t},set:function(a){t=a}},ticks:{get:function(){return F},set:function(a){F=a}},width:{get:function(){return q},set:function(a){q=a}},margin:{get:function(){return u},set:function(a){u.top=void 0!==a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}},
duration:{get:function(){return D},set:function(a){D=a;P.reset(D)}},scale:{get:function(){return g},set:function(l){g=l;c.scale(g);E="function"===typeof g.rangeBands;e.utils.inheritOptionsD3(a,g,["domain","range","rangeBand","rangeBands"])}}});e.utils.initOptions(a);e.utils.inheritOptionsD3(a,c,"orient tickValues tickSubdivide tickSize tickPadding tickFormat".split(" "));e.utils.inheritOptionsD3(a,g,["domain","range","rangeBand","rangeBands"]);return a};e.models.boxPlot=function(){function a(q){r.reset();
q.each(function(a){var q=g-c.left-c.right,G=u-c.top-c.bottom;K=d3.select(this);e.utils.initSVG(K);t.domain(E||a.map(function(a,c){return l(a,c)})).rangeBands(H||[0,q],.1);q=[];if(!F)var q=d3.min(a.map(function(a){var c=[];c.push(a.values.Q1);a.values.hasOwnProperty("whisker_low")&&null!==a.values.whisker_low&&c.push(a.values.whisker_low);a.values.hasOwnProperty("outliers")&&null!==a.values.outliers&&(c=c.concat(a.values.outliers));return d3.min(c)})),A=d3.max(a.map(function(a){var c=[];c.push(a.values.Q3);
a.values.hasOwnProperty("whisker_high")&&null!==a.values.whisker_high&&c.push(a.values.whisker_high);a.values.hasOwnProperty("outliers")&&null!==a.values.outliers&&(c=c.concat(a.values.outliers));return d3.max(c)})),q=[q,A];v.domain(F||q);v.range(D||[G,0]);I=I||v.copy().range([v(0),v(0)]);G=K.selectAll("g.nv-wrap").data([a]);G.enter().append("g").attr("class","nvd3 nv-wrap");G.attr("transform","translate("+c.left+","+c.top+")");var k=G.selectAll(".nv-boxplot").data(function(a){return a}),J=k.enter().append("g").style("stroke-opacity",
1E-6).style("fill-opacity",1E-6);k.attr("class","nv-boxplot").attr("transform",function(a,c,e){return"translate("+(t(l(a,c))+.05*t.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover});k.watchTransition(r,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(c,e){return e*O/a.length}).attr("transform",function(a,c){return"translate("+(t(l(a,c))+.05*t.rangeBand())+", 0)"});k.exit().remove();J.each(function(a,c){var e=d3.select(this);["low","high"].forEach(function(g){a.values.hasOwnProperty("whisker_"+
g)&&null!==a.values["whisker_"+g]&&(e.append("line").style("stroke",a.color?a.color:B(a,c)).attr("class","nv-boxplot-whisker nv-boxplot-"+g),e.append("line").style("stroke",a.color?a.color:B(a,c)).attr("class","nv-boxplot-tick nv-boxplot-"+g))})});G=k.selectAll(".nv-boxplot-outlier").data(function(a){return a.values.hasOwnProperty("outliers")&&null!==a.values.outliers?a.values.outliers:[]});G.enter().append("circle").style("fill",function(a,c,e){return B(a,e)}).style("stroke",function(a,c,e){return B(a,
e)}).on("mouseover",function(a,c,e){d3.select(this).classed("hover",!0);C.elementMouseover({series:{key:a,color:B(a,e)},e:d3.event})}).on("mouseout",function(a,c,e){d3.select(this).classed("hover",!1);C.elementMouseout({series:{key:a,color:B(a,e)},e:d3.event})}).on("mousemove",function(a,c){C.elementMousemove({e:d3.event})});G.attr("class","nv-boxplot-outlier");G.watchTransition(r,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*t.rangeBand()).attr("cy",function(a,c,e){return v(a)}).attr("r","3");
G.exit().remove();var S=function(){return null===P?.9*t.rangeBand():Math.min(75,.9*t.rangeBand())},p=function(){return.45*t.rangeBand()-S()/2},w=function(){return.45*t.rangeBand()+S()/2};["low","high"].forEach(function(a){var c="low"===a?"Q1":"Q3";k.select("line.nv-boxplot-whisker.nv-boxplot-"+a).watchTransition(r,"nv-boxplot: boxplots").attr("x1",.45*t.rangeBand()).attr("y1",function(c,e){return v(c.values["whisker_"+a])}).attr("x2",.45*t.rangeBand()).attr("y2",function(a,e){return v(a.values[c])});
k.select("line.nv-boxplot-tick.nv-boxplot-"+a).watchTransition(r,"nv-boxplot: boxplots").attr("x1",p).attr("y1",function(c,e){return v(c.values["whisker_"+a])}).attr("x2",w).attr("y2",function(c,e){return v(c.values["whisker_"+a])})});["low","high"].forEach(function(a){J.selectAll(".nv-boxplot-"+a).on("mouseover",function(c,e,g){d3.select(this).classed("hover",!0);C.elementMouseover({series:{key:c.values["whisker_"+a],color:B(c,g)},e:d3.event})}).on("mouseout",function(c,e,g){d3.select(this).classed("hover",
!1);C.elementMouseout({series:{key:c.values["whisker_"+a],color:B(c,g)},e:d3.event})}).on("mousemove",function(a,c){C.elementMousemove({e:d3.event})})});J.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,c){d3.select(this).classed("hover",!0);C.elementMouseover({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||B(a,c)},{key:"Q2",value:a.values.Q2,color:a.color||B(a,c)},{key:"Q1",value:a.values.Q1,color:a.color||B(a,c)}],data:a,index:c,e:d3.event})}).on("mouseout",
function(a,c){d3.select(this).classed("hover",!1);C.elementMouseout({key:a.label,value:a.label,series:[{key:"Q3",value:a.values.Q3,color:a.color||B(a,c)},{key:"Q2",value:a.values.Q2,color:a.color||B(a,c)},{key:"Q1",value:a.values.Q1,color:a.color||B(a,c)}],data:a,index:c,e:d3.event})}).on("mousemove",function(a,c){C.elementMousemove({e:d3.event})});k.select("rect.nv-boxplot-box").watchTransition(r,"nv-boxplot: boxes").attr("y",function(a,c){return v(a.values.Q3)}).attr("width",S).attr("x",p).attr("height",
function(a,c){return Math.abs(v(a.values.Q3)-v(a.values.Q1))||1}).style("fill",function(a,c){return a.color||B(a,c)}).style("stroke",function(a,c){return a.color||B(a,c)});J.append("line").attr("class","nv-boxplot-median");k.select("line.nv-boxplot-median").watchTransition(r,"nv-boxplot: boxplots line").attr("x1",p).attr("y1",function(a,c){return v(a.values.Q2)}).attr("x2",w).attr("y2",function(a,c){return v(a.values.Q2)});t.copy();I=v.copy()});r.renderEnd("nv-boxplot immediate");return a}var c={top:0,
right:0,bottom:0,left:0},g=960,u=500,q=Math.floor(1E4*Math.random()),t=d3.scale.ordinal(),v=d3.scale.linear(),l=function(a){return a.x},A=function(a){return a.y},B=e.utils.defaultColor(),K=null,E,F,H,D,C=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),O=250,P=null,I,r=e.utils.renderWatch(C,O);a.dispatch=C;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=
a}},maxBoxWidth:{get:function(){return P},set:function(a){P=a}},x:{get:function(){return l},set:function(a){l=a}},y:{get:function(){return A},set:function(a){A=a}},xScale:{get:function(){return t},set:function(a){t=a}},yScale:{get:function(){return v},set:function(a){v=a}},xDomain:{get:function(){return E},set:function(a){E=a}},yDomain:{get:function(){return F},set:function(a){F=a}},xRange:{get:function(){return H},set:function(a){H=a}},yRange:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return q},
set:function(a){q=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return B},set:function(a){B=e.utils.getColor(a)}},duration:{get:function(){return O},set:function(a){O=a;r.reset(O)}}});e.utils.initOptions(a);return a};e.models.boxPlotChart=function(){function a(l){I.reset();I.models(c);A&&I.models(g);B&&I.models(u);
l.each(function(l){var r=d3.select(this);e.utils.initSVG(r);var G=(t||parseInt(r.style("width"))||960)-q.left-q.right,I=(v||parseInt(r.style("height"))||400)-q.top-q.bottom;a.update=function(){O.beforeUpdate();r.transition().duration(P).call(a)};a.container=this;if(l&&l.length&&l.filter(function(a){return a.values.hasOwnProperty("Q1")&&a.values.hasOwnProperty("Q2")&&a.values.hasOwnProperty("Q3")}).length)r.selectAll(".nv-noData").remove();else return l=r.selectAll(".nv-noData").data([C]),l.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),l.attr("x",q.left+G/2).attr("y",q.top+I/2).text(function(a){return a}),a;H=c.xScale();D=c.yScale().clamp(!0);var F=r.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([l]),k=F.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),J=k.append("defs"),F=F.select("g");k.append("g").attr("class","nv-x nv-axis");k.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");k.append("g").attr("class",
"nv-barsWrap");F.attr("transform","translate("+q.left+","+q.top+")");K&&F.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)");c.width(G).height(I);F.select(".nv-barsWrap").datum(l.filter(function(a){return!a.disabled})).transition().call(c);J.append("clipPath").attr("id","nv-x-label-clip-"+c.id()).append("rect");F.select("#nv-x-label-clip-"+c.id()+" rect").attr("width",H.rangeBand()*(E?2:1)).attr("height",16).attr("x",-H.rangeBand()/(E?1:2));A&&(g.scale(H).ticks(e.utils.calcTicksX(G/100,
l)).tickSize(-I,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")"),F.select(".nv-x.nv-axis").call(g),l=F.select(".nv-x.nv-axis").selectAll("g"),E&&l.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));B&&(u.scale(D).ticks(Math.floor(I/36)).tickSize(-G,0),F.select(".nv-y.nv-axis").call(u));F.select(".nv-zeroLine line").attr("x1",0).attr("x2",G).attr("y1",D(0)).attr("y2",D(0))});I.renderEnd("nv-boxplot chart immediate");return a}
var c=e.models.boxPlot(),g=e.models.axis(),u=e.models.axis(),q={top:15,right:10,bottom:50,left:60},t=null,v=null,l=e.utils.getColor(),A=!0,B=!0,K=!1,E=!1,F=e.models.tooltip(),H,D,C="No Data Available.",O=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),P=250;g.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});u.orient(K?"right":"left").tickFormat(d3.format(",.1f"));F.duration(0);var I=e.utils.renderWatch(O,P);c.dispatch.on("elementMouseover.tooltip",function(a){F.data(a).hidden(!1)});
c.dispatch.on("elementMouseout.tooltip",function(a){F.data(a).hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){F.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=O;a.boxplot=c;a.xAxis=g;a.yAxis=u;a.tooltip=F;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return v},set:function(a){v=a}},staggerLabels:{get:function(){return E},set:function(a){E=a}},showXAxis:{get:function(){return A},
set:function(a){A=a}},showYAxis:{get:function(){return B},set:function(a){B=a}},tooltips:{get:function(){return tooltips},set:function(a){tooltips=a}},tooltipContent:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return C},set:function(a){C=a}},margin:{get:function(){return q},set:function(a){q.top=void 0!==a.top?a.top:q.top;q.right=void 0!==a.right?a.right:q.right;q.bottom=void 0!==a.bottom?a.bottom:q.bottom;q.left=void 0!==a.left?a.left:q.left}},duration:{get:function(){return P},
set:function(a){P=a;I.reset(P);c.duration(P);g.duration(P);u.duration(P)}},color:{get:function(){return l},set:function(a){l=e.utils.getColor(a);c.color(l)}},rightAlignYAxis:{get:function(){return K},set:function(a){K=a;u.orient(a?"right":"left")}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.bullet=function(){function a(g){g.each(function(a,g){var C=A-c.left-c.right,D=B-c.top-c.bottom;K=d3.select(this);e.utils.initSVG(K);var r=q.call(this,a,g).slice().sort(d3.descending),
G=t.call(this,a,g).slice().sort(d3.descending),E=v.call(this,a,g).slice().sort(d3.descending),Q=(a.rangeLabels?a.rangeLabels:[]).slice(),T=(a.markerLabels?a.markerLabels:[]).slice(),O=(a.measureLabels?a.measureLabels:[]).slice(),k=d3.scale.linear().domain(d3.extent(d3.merge([l,r]))).range(u?[C,0]:[0,C]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(k.range());this.__chart__=k;var J=d3.min(r),S=d3.max(r),p=r[1],r=K.selectAll("g.nv-wrap.nv-bullet").data([a]),C=r.enter().append("g").attr("class",
"nvd3 nv-wrap nv-bullet").append("g"),w=r.select("g");C.append("rect").attr("class","nv-range nv-rangeMax");C.append("rect").attr("class","nv-range nv-rangeAvg");C.append("rect").attr("class","nv-range nv-rangeMin");C.append("rect").attr("class","nv-measure");r.attr("transform","translate("+c.left+","+c.top+")");var L=function(a){return Math.abs(k(a)-k(0))},n=function(a){return 0>a?k(a):k(0)};w.select("rect.nv-rangeMax").attr("height",D).attr("width",L(0<S?S:J)).attr("x",n(0<S?S:J)).datum(0<S?S:J);
w.select("rect.nv-rangeAvg").attr("height",D).attr("width",L(p)).attr("x",n(p)).datum(p);w.select("rect.nv-rangeMin").attr("height",D).attr("width",L(S)).attr("x",n(S)).attr("width",L(0<S?J:S)).attr("x",n(0<S?J:S)).datum(0<S?J:S);w.select("rect.nv-measure").style("fill",F).attr("height",D/3).attr("y",D/3).attr("width",0>E?k(0)-k(E[0]):k(E[0])-k(0)).attr("x",n(E)).on("mouseover",function(){H.elementMouseover({value:E[0],label:O[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){H.elementMousemove({value:E[0],
label:O[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){H.elementMouseout({value:E[0],label:O[0]||"Current",color:d3.select(this).style("fill")})});J=D/6;G=G.map(function(a,c){return{value:a,label:T[c]}});C.selectAll("path.nv-markerTriangle").data(G).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(a){return"translate("+k(a.value)+","+D/2+")"}).attr("d","M0,"+J+"L"+J+","+-J+" "+-J+","+-J+"Z").on("mouseover",function(a){H.elementMouseover({value:a.value,
label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[k(a.value),D/2]})}).on("mousemove",function(a){H.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){H.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});r.selectAll(".nv-range").on("mouseover",function(a,c){H.elementMouseover({value:a,label:Q[c]||(c?1==c?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})}).on("mousemove",
function(){H.elementMousemove({value:E[0],label:O[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){H.elementMouseout({value:a,label:Q[c]||(c?1==c?"Mean":"Minimum":"Maximum"),color:d3.select(this).style("fill")})})});return a}var c={top:0,right:0,bottom:0,left:0},g="left",u=!1,q=function(a){return a.ranges},t=function(a){return a.markers?a.markers:[0]},v=function(a){return a.measures},l=[0],A=380,B=30,K=null,E=null,F=e.utils.getColor(["#1f77b4"]),H=d3.dispatch("elementMouseover",
"elementMouseout","elementMousemove");a.dispatch=H;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return q},set:function(a){q=a}},markers:{get:function(){return t},set:function(a){t=a}},measures:{get:function(){return v},set:function(a){v=a}},forceX:{get:function(){return l},set:function(a){l=a}},width:{get:function(){return A},set:function(a){A=a}},height:{get:function(){return B},set:function(a){B=a}},tickFormat:{get:function(){return E},set:function(a){E=
a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},orient:{get:function(){return g},set:function(a){g=a;u="right"==g||"bottom"==g}},color:{get:function(){return F},set:function(a){F=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.bulletChart=function(){function a(g){g.each(function(u,C){var D=d3.select(this);e.utils.initSVG(D);
var r=e.utils.availableWidth(B,D,t),G=K-t.top-t.bottom;a.update=function(){a(g)};a.container=this;if(u&&v.call(this,u,C))D.selectAll(".nv-noData").remove();else return e.utils.noData(a,D),a;var H=v.call(this,u,C).slice().sort(d3.descending),Q=l.call(this,u,C).slice().sort(d3.descending),T=A.call(this,u,C).slice().sort(d3.descending),O=D.selectAll("g.nv-wrap.nv-bulletChart").data([u]),k=O.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),D=O.select("g");k.append("g").attr("class",
"nv-bulletWrap");k.append("g").attr("class","nv-titles");O.attr("transform","translate("+t.left+","+t.top+")");var J=d3.scale.linear().domain([0,Math.max(H[0],Q[0],T[0])]).range(q?[r,0]:[0,r]),S=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(J.range());this.__chart__=J;H=k.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(K-t.top-t.bottom)/2+")");H.append("text").attr("class","nv-title").text(function(a){return a.title});H.append("text").attr("class",
"nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});c.width(r).height(G);H=D.select(".nv-bulletWrap");d3.transition(H).call(c);var p=E||J.tickFormat(r/100),r=D.selectAll("g.nv-tick").data(J.ticks(F?F:r/50),function(a){return this.textContent||p(a)}),D=r.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+S(a)+",0)"}).style("opacity",1E-6);D.append("line").attr("y1",G).attr("y2",7*G/6);D.append("text").attr("text-anchor","middle").attr("dy",
"1em").attr("y",7*G/6).text(p);D=d3.transition(r).attr("transform",function(a){return"translate("+J(a)+",0)"}).style("opacity",1);D.select("line").attr("y1",G).attr("y2",7*G/6);D.select("text").attr("y",7*G/6);d3.transition(r.exit()).attr("transform",function(a){return"translate("+J(a)+",0)"}).style("opacity",1E-6).remove()});d3.timer.flush();return a}var c=e.models.bullet(),g=e.models.tooltip(),u="left",q=!1,t={top:5,right:40,bottom:20,left:120},v=function(a){return a.ranges},l=function(a){return a.markers?
a.markers:[0]},A=function(a){return a.measures},B=null,K=55,E=null,F=null,H=null,D=d3.dispatch("tooltipShow","tooltipHide");g.duration(0).headerEnabled(!1);c.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};g.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){g.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){g.position({top:d3.event.pageY,left:d3.event.pageX})()});a.bullet=c;a.dispatch=D;a.tooltip=g;a.options=
e.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return v},set:function(a){v=a}},markers:{get:function(){return l},set:function(a){l=a}},measures:{get:function(){return A},set:function(a){A=a}},width:{get:function(){return B},set:function(a){B=a}},height:{get:function(){return K},set:function(a){K=a}},tickFormat:{get:function(){return E},set:function(a){E=a}},ticks:{get:function(){return F},set:function(a){F=a}},noData:{get:function(){return H},set:function(a){H=a}},
tooltips:{get:function(){return g.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");g.enabled(!!a)}},tooltipContent:{get:function(){return g.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");g.contentGenerator(a)}},margin:{get:function(){return t},set:function(a){t.top=void 0!==a.top?a.top:t.top;t.right=void 0!==a.right?a.right:t.right;t.bottom=void 0!==a.bottom?a.bottom:t.bottom;t.left=void 0!==
a.left?a.left:t.left}},orient:{get:function(){return u},set:function(a){u=a;q="right"==u||"bottom"==u}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.candlestickBar=function(){function a(k){k.each(function(a){t=d3.select(this);var k=e.utils.availableWidth(g,t,c),p=e.utils.availableHeight(u,t,c);e.utils.initSVG(t);var w=k/a[0].values.length*.45;v.domain(G||d3.extent(a[0].values.map(A).concat(D)));O?v.range(Q||[.5*k/a[0].values.length,k*(a[0].values.length-.5)/a[0].values.length]):
v.range(Q||[5+w/2,k-w/2-5]);l.domain(V||[d3.min(a[0].values.map(H).concat(C)),d3.max(a[0].values.map(F).concat(C))]).range(T||[p,0]);v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]);var r=a.enter().append("g").attr("class",
"nvd3 nv-wrap nv-candlestickBar"),n=r.append("defs"),r=r.append("g"),J=a.select("g");r.append("g").attr("class","nv-ticks");a.attr("transform","translate("+c.left+","+c.top+")");t.on("click",function(a,c){U.chartClick({data:a,index:c,pos:d3.event,id:q})});n.append("clipPath").attr("id","nv-chart-clip-path-"+q).append("rect");a.select("#nv-chart-clip-path-"+q+" rect").attr("width",k).attr("height",p);J.attr("clip-path",P?"url(#nv-chart-clip-path-"+q+")":"");k=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});
k.exit().remove();k=k.enter().append("g").attr("class",function(a,c,e){return(K(a,c)>E(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});k.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,c){return"translate("+v(A(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return l(F(a,c))}).attr("x2",0).attr("y2",function(a,c){return l(H(a,c))});k.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,c){return"translate("+(v(A(a,
c))-w/2)+","+(l(B(a,c))-(K(a,c)>E(a,c)?l(E(a,c))-l(K(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",w).attr("height",function(a,c){var e=K(a,c),g=E(a,c);return e>g?l(g)-l(e):l(e)-l(g)});t.selectAll(".nv-candlestick-lines").transition().attr("transform",function(a,c){return"translate("+v(A(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return l(F(a,c))}).attr("x2",0).attr("y2",function(a,c){return l(H(a,c))});t.selectAll(".nv-candlestick-rects").transition().attr("transform",function(a,c){return"translate("+
(v(A(a,c))-w/2)+","+(l(B(a,c))-(K(a,c)>E(a,c)?l(E(a,c))-l(K(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",w).attr("height",function(a,c){var e=K(a,c),g=E(a,c);return e>g?l(g)-l(e):l(e)-l(g)})});return a}var c={top:0,right:0,bottom:0,left:0},g=null,u=null,q=Math.floor(1E4*Math.random()),t,v=d3.scale.linear(),l=d3.scale.linear(),A=function(a){return a.x},B=function(a){return a.y},K=function(a){return a.open},E=function(a){return a.close},F=function(a){return a.high},H=function(a){return a.low},
D=[],C=[],O=!1,P=!0,I=e.utils.defaultColor(),r=!1,G,V,Q,T,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();t.select(".nv-candlestickBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){t.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)};a.dispatch=U;a.options=e.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return G},set:function(a){G=a}},yDomain:{get:function(){return V},set:function(a){V=a}},xRange:{get:function(){return Q},set:function(a){Q=a}},yRange:{get:function(){return T},set:function(a){T=a}},forceX:{get:function(){return D},
set:function(a){D=a}},forceY:{get:function(){return C},set:function(a){C=a}},padData:{get:function(){return O},set:function(a){O=a}},clipEdge:{get:function(){return P},set:function(a){P=a}},id:{get:function(){return q},set:function(a){q=a}},interactive:{get:function(){return r},set:function(a){r=a}},x:{get:function(){return A},set:function(a){A=a}},y:{get:function(){return B},set:function(a){B=a}},open:{get:function(){return K()},set:function(a){K=a}},close:{get:function(){return E()},set:function(a){E=
a}},high:{get:function(){return F},set:function(a){F=a}},low:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!=a.top?a.top:c.top;c.right=void 0!=a.right?a.right:c.right;c.bottom=void 0!=a.bottom?a.bottom:c.bottom;c.left=void 0!=a.left?a.left:c.left}},color:{get:function(){return I},set:function(a){I=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.cumulativeLineChart=function(){function a(k){X.reset();X.models(g);D&&X.models(u);
C&&X.models(q);k.each(function(k){function w(){ma.data([n]);var c=a.duration();a.duration(0);a.update();a.duration(c)}var M=d3.select(this);e.utils.initSVG(M);M.classed("nv-chart-"+Q,!0);var W=this,A=e.utils.availableWidth(E,M,B),X=e.utils.availableHeight(F,M,B);a.update=function(){0===p?M.call(a):M.transition().duration(p).call(a)};a.container=this;T.setter(y(k),a.update).getter(Z(k)).update();T.disabled=k.map(function(a){return!!a.disabled});if(!U)for(ja in U={},T)U[ja]=T[ja]instanceof Array?T[ja].slice(0):
T[ja];var ja=d3.behavior.drag().on("dragstart",function(c,e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,c){n.x=d3.event.x;n.i=Math.round(L.invert(n.x));w()}).on("dragend",function(c,e){d3.select(a.container).style("cursor","auto");T.index=n.i;S.stateChange(T)});if(k&&k.length&&k.filter(function(a){return a.values.length}).length)M.selectAll(".nv-noData").remove();else return e.utils.noData(a,M),a;G=g.xScale();V=g.yScale();if(r)g.yDomain(null);else{var ga=k.filter(function(a){return!a.disabled}).map(function(a,
c){var e=d3.extent(a.values,g.y());-.95>e[0]&&(e[0]=-.95);return[(e[0]-e[1])/(1+e[1]),(e[1]-e[0])/(1+e[0])]}),ga=[d3.min(ga,function(a){return a[0]}),d3.max(ga,function(a){return a[1]})];g.yDomain(ga)}L.domain([0,k[0].values.length-1]).range([0,A]).clamp(!0);k=c(n.i,k);var ia=I?"none":"all",qa=M.selectAll("g.nv-wrap.nv-cumulativeLine").data([k]),ya=qa.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ga=qa.select("g");ya.append("g").attr("class","nv-interactive");ya.append("g").attr("class",
"nv-x nv-axis").style("pointer-events","none");ya.append("g").attr("class","nv-y nv-axis");ya.append("g").attr("class","nv-background");ya.append("g").attr("class","nv-linesWrap").style("pointer-events",ia);ya.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");ya.append("g").attr("class","nv-legendWrap");ya.append("g").attr("class","nv-controlsWrap");H&&(t.width(A),ga.select(".nv-legendWrap").datum(k).call(t),B.top!=t.height()&&(B.top=t.height(),X=e.utils.availableHeight(F,
M,B)),ga.select(".nv-legendWrap").attr("transform","translate(0,"+-B.top+")"));P&&(ia=[{key:"Re-scale y-axis",disabled:!r}],v.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ga.select(".nv-controlsWrap").datum(ia).attr("transform","translate(0,"+-B.top+")").call(v));qa.attr("transform","translate("+B.left+","+B.top+")");O&&ga.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)");ia=k.filter(function(a){return a.tempDisabled});qa.select(".tempDisabled").remove();
ia.length&&qa.append("text").attr("class","tempDisabled").attr("x",A/2).attr("y","-.71em").style("text-anchor","end").text(ia.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");I&&(l.width(A).height(X).margin({left:B.left,top:B.top}).svgContainer(M).xScale(G),qa.select(".nv-interactive").call(l));ya.select(".nv-background").append("rect");ga.select(".nv-background rect").attr("width",A).attr("height",X);g.y(function(a){return a.display.y}).width(A).height(X).color(k.map(function(a,
c){return a.color||K(a,c)}).filter(function(a,c){return!k[c].disabled&&!k[c].tempDisabled}));qa=ga.select(".nv-linesWrap").datum(k.filter(function(a){return!a.disabled&&!a.tempDisabled}));qa.call(g);k.forEach(function(a,c){a.seriesIndex=c});ya=k.filter(function(a){return!a.disabled&&!!J(a)});ya=ga.select(".nv-avgLinesWrap").selectAll("line").data(ya,function(a){return a.key});ia=function(a){a=V(J(a));return 0>a?0:a>X?X:a};ya.enter().append("line").style("stroke-width",2).style("stroke-dasharray",
"10,10").style("stroke",function(a,c){return g.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",A).attr("y1",ia).attr("y2",ia);ya.style("stroke-opacity",function(a){a=V(J(a));return 0>a||a>X?0:1}).attr("x1",0).attr("x2",A).attr("y1",ia).attr("y2",ia);ya.exit().remove();var ma=qa.selectAll(".nv-indexLine").data([n]);ma.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ja);ma.attr("transform",
function(a){return"translate("+L(a.i)+",0)"}).attr("height",X);D&&(u.scale(G)._ticks(e.utils.calcTicksX(A/70,k)).tickSize(-X,0),ga.select(".nv-x.nv-axis").attr("transform","translate(0,"+V.range()[0]+")"),ga.select(".nv-x.nv-axis").call(u));C&&(q.scale(V)._ticks(e.utils.calcTicksY(X/36,k)).tickSize(-A,0),ga.select(".nv-y.nv-axis").call(q));ga.select(".nv-background rect").on("click",function(){n.x=d3.mouse(this)[0];n.i=Math.round(L.invert(n.x));T.index=n.i;S.stateChange(T);w()});g.dispatch.on("elementClick",
function(a){n.i=a.pointIndex;n.x=L(n.i);T.index=n.i;S.stateChange(T);w()});v.dispatch.on("legendClick",function(c,e){c.disabled=!c.disabled;r=!c.disabled;T.rescaleY=r;S.stateChange(T);a.update()});t.dispatch.on("stateChange",function(c){for(var e in c)T[e]=c[e];S.stateChange(T);a.update()});l.dispatch.on("elementMousemove",function(c){g.clearHighlights();var n,p,w,y=[];k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(k,l){p=e.interactiveBisect(k.values,c.pointXValue,a.x());
g.highlightPoint(l,p,!0);var r=k.values[p];"undefined"!==typeof r&&("undefined"===typeof n&&(n=r),"undefined"===typeof w&&(w=a.xScale()(a.x()(r,p))),y.push({key:k.key,value:a.y()(r,p),color:K(k,k.seriesIndex)}))});if(2<y.length){var r=a.yScale().invert(c.mouseY),t=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),r=e.nearestValueIndex(y.map(function(a){return a.value}),r,t);null!==r&&(y[r].highlight=!0)}r=u.tickFormat()(a.x()(n,p),p);l.tooltip.position({left:w+B.left,top:c.mouseY+B.top}).chartContainer(W.parentNode).valueFormatter(function(a,
c){return q.tickFormat()(a)}).data({value:r,series:y})();l.renderGuideLine(w)});l.dispatch.on("elementMouseout",function(a){g.clearHighlights()});S.on("changeState",function(c){"undefined"!==typeof c.disabled&&(k.forEach(function(a,e){a.disabled=c.disabled[e]}),T.disabled=c.disabled);"undefined"!==typeof c.index&&(n.i=c.index,n.x=L(n.i),T.index=c.index,ma.data([n]));"undefined"!==typeof c.rescaleY&&(r=c.rescaleY);a.update()})});X.renderEnd("cumulativeLineChart immediate");return a}function c(a,c){M||
(M=g.y());return c.map(function(c,e){if(!c.values)return c;var g=c.values[a];if(null==g)return c;var k=M(g,a);if(-.95>k&&!w)return c.tempDisabled=!0,c;c.tempDisabled=!1;c.values=c.values.map(function(a,c){a.display={y:(M(a,c)-k)/(1+k)};return a});return c})}var g=e.models.line(),u=e.models.axis(),q=e.models.axis(),t=e.models.legend(),v=e.models.legend(),l=e.interactiveGuideline(),A=e.models.tooltip(),B={top:30,right:30,bottom:50,left:60},K=e.utils.defaultColor(),E=null,F=null,H=!0,D=!0,C=!0,O=!1,
P=!0,I=!1,r=!0,G,V,Q=g.id(),T=e.utils.state(),U=null,k=null,J=function(a){return a.average},S=d3.dispatch("stateChange","changeState","renderEnd"),p=250,w=!1;T.index=0;T.rescaleY=r;u.orient("bottom").tickPadding(7);q.orient(O?"right":"left");A.valueFormatter(function(a,c){return q.tickFormat()(a,c)}).headerFormatter(function(a,c){return u.tickFormat()(a,c)});v.updateState(!1);var L=d3.scale.linear(),n={i:0,x:0},X=e.utils.renderWatch(S,p),Z=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),
index:n.i,rescaleY:r}}},y=function(a){return function(c){void 0!==c.index&&(n.i=c.index);void 0!==c.rescaleY&&(r=c.rescaleY);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};g.dispatch.on("elementMouseover.tooltip",function(c){var e={x:a.x()(c.point),y:a.y()(c.point),color:c.point.color};c.point=e;A.data(c).position(c.pos).hidden(!1)});g.dispatch.on("elementMouseout.tooltip",function(a){A.hidden(!0)});var M=null;a.dispatch=S;a.lines=g;a.legend=t;a.controls=v;a.xAxis=u;a.yAxis=
q;a.interactiveLayer=l;a.state=T;a.tooltip=A;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return E},set:function(a){E=a}},height:{get:function(){return F},set:function(a){F=a}},rescaleY:{get:function(){return r},set:function(a){r=a}},showControls:{get:function(){return P},set:function(a){P=a}},showLegend:{get:function(){return H},set:function(a){H=a}},average:{get:function(){return J},set:function(a){J=a}},defaultState:{get:function(){return U},set:function(a){U=
a}},noData:{get:function(){return k},set:function(a){k=a}},showXAxis:{get:function(){return D},set:function(a){D=a}},showYAxis:{get:function(){return C},set:function(a){C=a}},noErrorCheck:{get:function(){return w},set:function(a){w=a}},tooltips:{get:function(){return A.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");A.enabled(!!a)}},tooltipContent:{get:function(){return A.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");
A.contentGenerator(a)}},margin:{get:function(){return B},set:function(a){B.top=void 0!==a.top?a.top:B.top;B.right=void 0!==a.right?a.right:B.right;B.bottom=void 0!==a.bottom?a.bottom:B.bottom;B.left=void 0!==a.left?a.left:B.left}},color:{get:function(){return K},set:function(a){K=e.utils.getColor(a);t.color(K)}},useInteractiveGuideline:{get:function(){return I},set:function(c){I=c;!0===c&&(a.interactive(!1),a.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return O},set:function(a){O=a;q.orient(a?
"right":"left")}},duration:{get:function(){return p},set:function(a){p=a;g.duration(p);u.duration(p);q.duration(p);X.reset(p)}}});e.utils.inheritOptions(a,g);e.utils.initOptions(a);return a};e.models.discreteBar=function(){function a(q){Q.reset();q.each(function(a){var k=g-c.left-c.right,q=u-c.top-c.bottom;t=d3.select(this);e.utils.initSVG(t);a.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var G=D&&C?[]:a.map(function(a){return a.values.map(function(a,c){return{x:A(a,c),y:B(a,
c),y0:a.y0}})});v.domain(D||d3.merge(G).map(function(a){return a.x})).rangeBands(O||[0,k],.1);l.domain(C||d3.extent(d3.merge(G).map(function(a){return a.y}).concat(K)));F?l.range(P||[q-(0>l.domain()[0]?12:0),0<l.domain()[1]?12:0]):l.range(P||[q,0]);V=V||l.copy().range([l(0),l(0)]);k=t.selectAll("g.nv-wrap.nv-discretebar").data([a]);q=k.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");k.select("g");q.append("g").attr("class","nv-groups");k.attr("transform","translate("+c.left+
","+c.top+")");k=k.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});k.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);k.exit().watchTransition(Q,"discreteBar: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();k.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});k.watchTransition(Q,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",
.75);k=k.selectAll("g.nv-bar").data(function(a){return a.values});k.exit().remove();q=k.enter().append("g").attr("transform",function(a,c,e){return"translate("+(v(A(a,c))+.05*v.rangeBand())+", "+l(0)+")"}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);I.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);I.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,
c){I.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){I.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){I.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});q.append("rect").attr("height",0).attr("width",.9*v.rangeBand()/a.length);F?(q.append("text").attr("text-anchor","middle"),k.select("text").text(function(a,c){return H(B(a,
c))}).watchTransition(Q,"discreteBar: bars text").attr("x",.9*v.rangeBand()/2).attr("y",function(a,c){return 0>B(a,c)?l(B(a,c))-l(0)+12:-4})):k.selectAll("text").remove();k.attr("class",function(a,c){return 0>B(a,c)?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,c){return a.color||E(a,c)}).style("stroke",function(a,c){return a.color||E(a,c)}).select("rect").attr("class",r).watchTransition(Q,"discreteBar: bars rect").attr("width",.9*v.rangeBand()/a.length);k.watchTransition(Q,"discreteBar: bars").attr("transform",
function(a,c){var e=v(A(a,c))+.05*v.rangeBand(),g=0>B(a,c)?l(0):1>l(0)-l(B(a,c))?l(0)-1:l(B(a,c));return"translate("+e+", "+g+")"}).select("rect").attr("height",function(a,c){return Math.max(Math.abs(l(B(a,c))-l(C&&C[0]||0))||1)});v.copy();V=l.copy()});Q.renderEnd("discreteBar immediate");return a}var c={top:0,right:0,bottom:0,left:0},g=960,u=500,q=Math.floor(1E4*Math.random()),t,v=d3.scale.ordinal(),l=d3.scale.linear(),A=function(a){return a.x},B=function(a){return a.y},K=[0],E=e.utils.defaultColor(),
F=!1,H=d3.format(",.2f"),D,C,O,P,I=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),r="discreteBar",G=250,V,Q=e.utils.renderWatch(I,G);a.dispatch=I;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},forceY:{get:function(){return K},set:function(a){K=a}},showValues:{get:function(){return F},set:function(a){F=
a}},x:{get:function(){return A},set:function(a){A=a}},y:{get:function(){return B},set:function(a){B=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return D},set:function(a){D=a}},yDomain:{get:function(){return C},set:function(a){C=a}},xRange:{get:function(){return O},set:function(a){O=a}},yRange:{get:function(){return P},set:function(a){P=a}},valueFormat:{get:function(){return H},set:function(a){H=a}},id:{get:function(){return q},
set:function(a){q=a}},rectClass:{get:function(){return r},set:function(a){r=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return E},set:function(a){E=e.utils.getColor(a)}},duration:{get:function(){return G},set:function(a){G=a;Q.reset(G)}}});e.utils.initOptions(a);return a};e.models.discreteBarChart=function(){function a(r){I.reset();
I.models(c);B&&I.models(g);K&&I.models(u);r.each(function(r){var q=d3.select(this);e.utils.initSVG(q);var G=e.utils.availableWidth(v,q,t),A=e.utils.availableHeight(l,q,t);a.update=function(){O.beforeUpdate();q.transition().duration(P).call(a)};a.container=this;if(r&&r.length&&r.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return e.utils.noData(a,q),a;H=c.xScale();D=c.yScale().clamp(!0);var C=q.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([r]),k=
C.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),I=k.append("defs"),C=C.select("g");k.append("g").attr("class","nv-x nv-axis");k.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");k.append("g").attr("class","nv-barsWrap");C.attr("transform","translate("+t.left+","+t.top+")");E&&C.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)");c.width(G).height(A);C.select(".nv-barsWrap").datum(r.filter(function(a){return!a.disabled})).transition().call(c);
I.append("clipPath").attr("id","nv-x-label-clip-"+c.id()).append("rect");C.select("#nv-x-label-clip-"+c.id()+" rect").attr("width",H.rangeBand()*(F?2:1)).attr("height",16).attr("x",-H.rangeBand()/(F?1:2));B&&(g.scale(H)._ticks(e.utils.calcTicksX(G/100,r)).tickSize(-A,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+(D.range()[0]+(c.showValues()&&0>D.domain()[0]?16:0))+")"),C.select(".nv-x.nv-axis").call(g),k=C.select(".nv-x.nv-axis").selectAll("g"),F&&k.selectAll("text").attr("transform",
function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}));K&&(u.scale(D)._ticks(e.utils.calcTicksY(A/36,r)).tickSize(-G,0),C.select(".nv-y.nv-axis").call(u));C.select(".nv-zeroLine line").attr("x1",0).attr("x2",G).attr("y1",D(0)).attr("y2",D(0))});I.renderEnd("discreteBar chart immediate");return a}var c=e.models.discreteBar(),g=e.models.axis(),u=e.models.axis(),q=e.models.tooltip(),t={top:15,right:10,bottom:50,left:60},v=null,l=null,A=e.utils.getColor(),B=!0,K=!0,E=!1,F=!1,H,D,C=null,O=d3.dispatch("beforeUpdate",
"renderEnd"),P=250;g.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});u.orient(E?"right":"left").tickFormat(d3.format(",.1f"));q.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return u.tickFormat()(a,c)}).keyFormatter(function(a,c){return g.tickFormat()(a,c)});var I=e.utils.renderWatch(O,P);c.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};q.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){q.hidden(!0)});
c.dispatch.on("elementMousemove.tooltip",function(a){q.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=O;a.discretebar=c;a.xAxis=g;a.yAxis=u;a.tooltip=q;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return l},set:function(a){l=a}},staggerLabels:{get:function(){return F},set:function(a){F=a}},showXAxis:{get:function(){return B},set:function(a){B=a}},showYAxis:{get:function(){return K},
set:function(a){K=a}},noData:{get:function(){return C},set:function(a){C=a}},tooltips:{get:function(){return q.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");q.enabled(!!a)}},tooltipContent:{get:function(){return q.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");q.contentGenerator(a)}},margin:{get:function(){return t},set:function(a){t.top=void 0!==a.top?a.top:t.top;t.right=void 0!==a.right?
a.right:t.right;t.bottom=void 0!==a.bottom?a.bottom:t.bottom;t.left=void 0!==a.left?a.left:t.left}},duration:{get:function(){return P},set:function(a){P=a;I.reset(P);c.duration(P);g.duration(P);u.duration(P)}},color:{get:function(){return A},set:function(a){A=e.utils.getColor(a);c.color(A)}},rightAlignYAxis:{get:function(){return E},set:function(a){E=a;u.orient(a?"right":"left")}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.distribution=function(){function a(g){E.reset();
g.each(function(a){var g="x"==q?"y":"x",A=d3.select(this);e.utils.initSVG(A);K=K||l;a=A.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");A=a.select("g");a.attr("transform","translate("+c.left+","+c.top+")");a=A.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,c){return"nv-dist nv-series-"+c}).style("stroke",function(a,c){return v(a,c)});A=a.selectAll("line.nv-dist"+
q).data(function(a){return a.values});A.enter().append("line").attr(q+"1",function(a,c){return K(t(a,c))}).attr(q+"2",function(a,c){return K(t(a,c))});E.transition(a.exit().selectAll("line.nv-dist"+q),"dist exit").attr(q+"1",function(a,c){return l(t(a,c))}).attr(q+"2",function(a,c){return l(t(a,c))}).style("stroke-opacity",0).remove();A.attr("class",function(a,c){return"nv-dist"+q+" nv-dist"+q+"-"+c}).attr(g+"1",0).attr(g+"2",u);E.transition(A,"dist").attr(q+"1",function(a,c){return l(t(a,c))}).attr(q+
"2",function(a,c){return l(t(a,c))});K=l.copy()});E.renderEnd("distribution immediate");return a}var c={top:0,right:0,bottom:0,left:0},g=400,u=8,q="x",t=function(a){return a[q]},v=e.utils.defaultColor(),l=d3.scale.linear(),A=250,B=d3.dispatch("renderEnd"),K,E=e.utils.renderWatch(B,A);a.options=e.utils.optionsFunc.bind(a);a.dispatch=B;a.margin=function(e){if(!arguments.length)return c;c.top="undefined"!=typeof e.top?e.top:c.top;c.right="undefined"!=typeof e.right?e.right:c.right;c.bottom="undefined"!=
typeof e.bottom?e.bottom:c.bottom;c.left="undefined"!=typeof e.left?e.left:c.left;return a};a.width=function(c){if(!arguments.length)return g;g=c;return a};a.axis=function(c){if(!arguments.length)return q;q=c;return a};a.size=function(c){if(!arguments.length)return u;u=c;return a};a.getData=function(c){if(!arguments.length)return t;t=d3.functor(c);return a};a.scale=function(c){if(!arguments.length)return l;l=c;return a};a.color=function(c){if(!arguments.length)return v;v=e.utils.getColor(c);return a};
a.duration=function(c){if(!arguments.length)return A;A=c;E.reset(A);return a};return a};e.models.furiousLegend=function(){function a(D){function C(a,c){if("furious"!=H)return"#000";if(E)return a.disengaged?t(a,c):"#fff";if(!E)return a.disabled?t(a,c):"#fff"}function O(a,c){return E&&"furious"==H?a.disengaged?"#fff":t(a,c):a.disabled?"#fff":t(a,c)}D.each(function(a){var D=g-c.left-c.right,r=d3.select(this);e.utils.initSVG(r);r=r.selectAll("g.nv-legend").data([a]);r.enter().append("g").attr("class",
"nvd3 nv-legend").append("g");a=r.select("g");r.attr("transform","translate("+c.left+","+c.top+")");var G=a.selectAll(".nv-series").data(function(a){return"furious"!=H?a:a.filter(function(a){return E?!0:!a.disengaged})}),r=G.enter().append("g").attr("class","nv-series");if("classic"==H){r.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var V=G.select("circle")}else"furious"==H&&(r.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",
3).attr("ry",3),V=G.select("rect"),r.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),G.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",C(a,c))}));r.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",
".32em").attr("dx","8");var Q=G.select("text.nv-legend-text");G.on("mouseover",function(a,c){F.legendMouseover(a,c)}).on("mouseout",function(a,c){F.legendMouseout(a,c)}).on("click",function(a,c){F.legendClick(a,c);var e=G.data();B&&("classic"==H?K?(e.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==H&&(E?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:
a.userDisabled,a.disabled=a.disengaged||a.userDisabled):E||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&e.forEach(function(a){a.disabled=a.userDisabled=!1}))),F.stateChange({disabled:e.map(function(a){return!!a.disabled}),disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=H||!E)if(F.legendDblclick(a,c),B){var e=G.data();e.forEach(function(a){a.disabled=!0;"furious"==
H&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==H&&(a.userDisabled=a.disabled);F.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});G.classed("nv-disabled",function(a){return a.userDisabled});G.exit().remove();Q.attr("fill",C).text(q);switch(H){case "furious":var T=23;break;case "classic":T=20}if(v){var P=[];G.each(function(a,c){var g=d3.select(this).select("text");try{var k=g.node().getComputedTextLength();if(0>=k)throw Error();}catch(ja){k=e.utils.calcApproxTextWidth(g)}P.push(k+
l)});for(var k=0,J=0,r=[];J<D&&k<P.length;)r[k]=P[k],J+=P[k++];for(0===k&&(k=1);J>D&&1<k;){r=[];k--;for(J=0;J<P.length;J++)P[J]>(r[J%k]||0)&&(r[J%k]=P[J]);J=r.reduce(function(a,c,e,g){return a+c})}for(var S=[],p=D=0;D<k;D++)S[D]=p,p+=r[D];G.attr("transform",function(a,c){return"translate("+S[c%k]+","+(5+Math.floor(c/k)*T)+")"});A?a.attr("transform","translate("+(g-c.right-J)+","+c.top+")"):a.attr("transform","translate(0,"+c.top+")");u=c.top+c.bottom+Math.ceil(P.length/k)*T}else{var w=5,L=5,n=0,X;
G.attr("transform",function(a,e){var k=d3.select(this).select("text").node().getComputedTextLength()+l;X=L;g<c.left+c.right+X+k&&(L=X=5,w+=T);L+=k;L>n&&(n=L);return"translate("+X+","+w+")"});a.attr("transform","translate("+(g-c.right-n)+","+c.top+")");u=c.top+c.bottom+w+15}"furious"==H&&V.attr("width",function(a,c){return Q[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);V.style("fill",O).style("stroke",function(a,c){return a.color||t(a,c)})});return a}var c={top:5,
right:0,bottom:5,left:0},g=400,u=20,q=function(a){return a.key},t=e.utils.getColor(),v=!0,l=28,A=!0,B=!0,K=!1,E=!1,F=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),H="classic";a.dispatch=F;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},key:{get:function(){return q},set:function(a){q=a}},align:{get:function(){return v},set:function(a){v=
a}},rightAlign:{get:function(){return A},set:function(a){A=a}},padding:{get:function(){return l},set:function(a){l=a}},updateState:{get:function(){return B},set:function(a){B=a}},radioButtonMode:{get:function(){return K},set:function(a){K=a}},expanded:{get:function(){return E},set:function(a){E=a}},vers:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?
a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return t},set:function(a){t=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.historicalBar=function(){function a(Q){Q.each(function(a){V.reset();t=d3.select(this);var Q=e.utils.availableWidth(g,t,c),k=e.utils.availableHeight(u,t,c);e.utils.initSVG(t);v.domain(C||d3.extent(a[0].values.map(A).concat(K)));F?v.range(P||[.5*Q/a[0].values.length,Q*(a[0].values.length-.5)/a[0].values.length]):v.range(P||[0,Q]);
l.domain(O||d3.extent(a[0].values.map(B).concat(E))).range(I||[k,0]);v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));var J=t.selectAll("g.nv-wrap.nv-historicalBar-"+q).data([a[0].values]),S=J.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+q),p=S.append("defs"),
S=S.append("g"),w=J.select("g");S.append("g").attr("class","nv-bars");J.attr("transform","translate("+c.left+","+c.top+")");t.on("click",function(a,c){r.chartClick({data:a,index:c,pos:d3.event,id:q})});p.append("clipPath").attr("id","nv-chart-clip-path-"+q).append("rect");J.select("#nv-chart-clip-path-"+q+" rect").attr("width",Q).attr("height",k);w.attr("clip-path",H?"url(#nv-chart-clip-path-"+q+")":"");k=J.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,c){return A(a,
c)});k.exit().remove();k.enter().append("rect").attr("x",0).attr("y",function(a,c){return e.utils.NaNtoZero(l(Math.max(0,B(a,c))))}).attr("height",function(a,c){return e.utils.NaNtoZero(Math.abs(l(B(a,c))-l(0)))}).attr("transform",function(c,e){return"translate("+(v(A(c,e))-Q/a[0].values.length*.45)+",0)"}).on("mouseover",function(a,c){G&&(d3.select(this).classed("hover",!0),r.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,c){G&&(d3.select(this).classed("hover",
!1),r.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,c){G&&r.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){G&&(r.elementClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(a,c){G&&(r.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});k.attr("fill",function(a,c){return D(a,c)}).attr("class",
function(a,c,e){return(0>B(a,c)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+c}).watchTransition(V,"bars").attr("transform",function(c,e){return"translate("+(v(A(c,e))-Q/a[0].values.length*.45)+",0)"}).attr("width",Q/a[0].values.length*.9);k.watchTransition(V,"bars").attr("y",function(a,c){var g=0>B(a,c)?l(0):1>l(0)-l(B(a,c))?l(0)-1:l(B(a,c));return e.utils.NaNtoZero(g)}).attr("height",function(a,c){return e.utils.NaNtoZero(Math.max(Math.abs(l(B(a,c))-l(0)),1))})});V.renderEnd("historicalBar immediate");
return a}var c={top:0,right:0,bottom:0,left:0},g=null,u=null,q=Math.floor(1E4*Math.random()),t=null,v=d3.scale.linear(),l=d3.scale.linear(),A=function(a){return a.x},B=function(a){return a.y},K=[],E=[0],F=!1,H=!0,D=e.utils.defaultColor(),C,O,P,I,r=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),G=!0,V=e.utils.renderWatch(r,0);a.highlightPoint=function(a,c){t.select(".nv-bars .nv-bar-0-"+a).classed("hover",c)};a.clearHighlights=
function(){t.select(".nv-bars .nv-bar.hover").classed("hover",!1)};a.dispatch=r;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},forceX:{get:function(){return K},set:function(a){K=a}},forceY:{get:function(){return E},set:function(a){E=a}},padData:{get:function(){return F},set:function(a){F=a}},x:{get:function(){return A},set:function(a){A=a}},y:{get:function(){return B},set:function(a){B=
a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return C},set:function(a){C=a}},yDomain:{get:function(){return O},set:function(a){O=a}},xRange:{get:function(){return P},set:function(a){P=a}},yRange:{get:function(){return I},set:function(a){I=a}},clipEdge:{get:function(){return H},set:function(a){H=a}},id:{get:function(){return q},set:function(a){q=a}},interactive:{get:function(){return G},set:function(a){G=a}},
margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return D},set:function(a){D=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.historicalBarChart=function(a){function c(a){a.each(function(k){U.reset();U.models(g);H&&U.models(u);D&&U.models(q);var l=d3.select(this),p=this;e.utils.initSVG(l);var w=e.utils.availableWidth(K,
l,A),L=e.utils.availableHeight(E,l,A);c.update=function(){l.transition().duration(T).call(c)};c.container=this;r.disabled=k.map(function(a){return!!a.disabled});if(!G)for(J in G={},r)G[J]=r[J]instanceof Array?r[J].slice(0):r[J];if(k&&k.length&&k.filter(function(a){return a.values.length}).length)l.selectAll(".nv-noData").remove();else return e.utils.noData(c,l),c;P=g.xScale();I=g.yScale();var n=l.selectAll("g.nv-wrap.nv-historicalBarChart").data([k]);var J=n.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var Z=n.select("g");J.append("g").attr("class","nv-x nv-axis");J.append("g").attr("class","nv-y nv-axis");J.append("g").attr("class","nv-barsWrap");J.append("g").attr("class","nv-legendWrap");J.append("g").attr("class","nv-interactive");F&&(t.width(w),Z.select(".nv-legendWrap").datum(k).call(t),A.top!=t.height()&&(A.top=t.height(),L=e.utils.availableHeight(E,l,A)),n.select(".nv-legendWrap").attr("transform","translate(0,"+-A.top+")"));n.attr("transform","translate("+A.left+","+A.top+")");C&&Z.select(".nv-y.nv-axis").attr("transform",
"translate("+w+",0)");O&&(v.width(w).height(L).margin({left:A.left,top:A.top}).svgContainer(l).xScale(P),n.select(".nv-interactive").call(v));g.width(w).height(L).color(k.map(function(a,c){return a.color||B(a,c)}).filter(function(a,c){return!k[c].disabled}));Z.select(".nv-barsWrap").datum(k.filter(function(a){return!a.disabled})).transition().call(g);H&&(u.scale(P)._ticks(e.utils.calcTicksX(w/100,k)).tickSize(-L,0),Z.select(".nv-x.nv-axis").attr("transform","translate(0,"+I.range()[0]+")"),Z.select(".nv-x.nv-axis").transition().call(u));
D&&(q.scale(I)._ticks(e.utils.calcTicksY(L/36,k)).tickSize(-w,0),Z.select(".nv-y.nv-axis").transition().call(q));v.dispatch.on("elementMousemove",function(a){g.clearHighlights();var l,n,w,r=[];k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(k,p){n=e.interactiveBisect(k.values,a.pointXValue,c.x());g.highlightPoint(n,!0);var y=k.values[n];void 0!==y&&(void 0===l&&(l=y),void 0===w&&(w=c.xScale()(c.x()(y,n))),r.push({key:k.key,value:c.y()(y,n),color:B(k,k.seriesIndex),data:k.values[n]}))});
var y=u.tickFormat()(c.x()(l,n));v.tooltip.position({left:w+A.left,top:a.mouseY+A.top}).chartContainer(p.parentNode).valueFormatter(function(a,c){return q.tickFormat()(a)}).data({value:y,index:n,series:r})();v.renderGuideLine(w)});v.dispatch.on("elementMouseout",function(a){Q.tooltipHide();g.clearHighlights()});t.dispatch.on("legendClick",function(e,g){e.disabled=!e.disabled;k.filter(function(a){return!a.disabled}).length||k.map(function(a){a.disabled=!1;n.selectAll(".nv-series").classed("disabled",
!1);return a});r.disabled=k.map(function(a){return!!a.disabled});Q.stateChange(r);a.transition().call(c)});t.dispatch.on("legendDblclick",function(a){k.forEach(function(a){a.disabled=!0});a.disabled=!1;r.disabled=k.map(function(a){return!!a.disabled});Q.stateChange(r);c.update()});Q.on("changeState",function(a){"undefined"!==typeof a.disabled&&(k.forEach(function(c,e){c.disabled=a.disabled[e]}),r.disabled=a.disabled);c.update()})});U.renderEnd("historicalBarChart immediate");return c}var g=a||e.models.historicalBar(),
u=e.models.axis(),q=e.models.axis(),t=e.models.legend(),v=e.interactiveGuideline(),l=e.models.tooltip(),A={top:30,right:90,bottom:50,left:90},B=e.utils.defaultColor(),K=null,E=null,F=!1,H=!0,D=!0,C=!1,O=!1,P,I,r={},G=null,V=null,Q=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),T=250;u.orient("bottom").tickPadding(7);q.orient(C?"right":"left");l.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return q.tickFormat()(a,c)}).headerFormatter(function(a,c){return u.tickFormat()(a,
c)});var U=e.utils.renderWatch(Q,0);g.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:c.x()(a.data),value:c.y()(a.data),color:a.color};l.data(a).hidden(!1)});g.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});g.dispatch.on("elementMousemove.tooltip",function(a){l.position({top:d3.event.pageY,left:d3.event.pageX})()});c.dispatch=Q;c.bars=g;c.legend=t;c.xAxis=u;c.yAxis=q;c.interactiveLayer=v;c.tooltip=l;c.options=e.utils.optionsFunc.bind(c);c._options=Object.create({},
{width:{get:function(){return K},set:function(a){K=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return F},set:function(a){F=a}},showXAxis:{get:function(){return H},set:function(a){H=a}},showYAxis:{get:function(){return D},set:function(a){D=a}},defaultState:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return V},set:function(a){V=a}},tooltips:{get:function(){return l.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");
l.enabled(!!a)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");l.contentGenerator(a)}},margin:{get:function(){return A},set:function(a){A.top=void 0!==a.top?a.top:A.top;A.right=void 0!==a.right?a.right:A.right;A.bottom=void 0!==a.bottom?a.bottom:A.bottom;A.left=void 0!==a.left?a.left:A.left}},color:{get:function(){return B},set:function(a){B=e.utils.getColor(a);t.color(B);g.color(B)}},duration:{get:function(){return T},
set:function(a){T=a;U.reset(T);q.duration(T);u.duration(T)}},rightAlignYAxis:{get:function(){return C},set:function(a){C=a;q.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return O},set:function(a){O=a;!0===a&&c.interactive(!1)}}});e.utils.inheritOptions(c,g);e.utils.initOptions(c);return c};e.models.ohlcBarChart=function(){var a=e.models.historicalBarChart(e.models.ohlcBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;
return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};e.models.candlestickBarChart=function(){var a=e.models.historicalBarChart(e.models.candlestickBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=
c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};e.models.legend=function(){function a(D){function C(a,c){if("furious"!=H)return"#000";if(E)return a.disengaged?"#000":
"#fff";if(!E)return a.color||(a.color=t(a,c)),a.disabled?a.color:"#fff"}function O(a,c){return E&&"furious"==H?a.disengaged?"#eee":a.color||t(a,c):a.color||t(a,c)}function P(a,c){return E&&"furious"==H?1:a.disabled?0:1}D.each(function(a){var r=g-c.left-c.right,t=d3.select(this);e.utils.initSVG(t);var D=t.selectAll("g.nv-legend").data([a]);a=D.enter().append("g").attr("class","nvd3 nv-legend").append("g");t=D.select("g");D.attr("transform","translate("+c.left+","+c.top+")");var I=t.selectAll(".nv-series").data(function(a){return"furious"!=
H?a:a.filter(function(a){return E?!0:!a.disengaged})}),D=I.enter().append("g").attr("class","nv-series");switch(H){case "furious":var T=23;break;case "classic":T=20}if("classic"==H){D.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var U=I.select("circle")}else"furious"==H&&(D.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),U=I.select(".nv-legend-symbol"),D.append("g").attr("class","nv-check-box").property("innerHTML",
'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),I.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",C(a,c))}));D.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var k=I.select("text.nv-legend-text");I.on("mouseover",function(a,c){F.legendMouseover(a,
c)}).on("mouseout",function(a,c){F.legendMouseout(a,c)}).on("click",function(a,c){F.legendClick(a,c);var e=I.data();B&&("classic"==H?K?(e.forEach(function(a){a.disabled=!0}),a.disabled=!1):(a.disabled=!a.disabled,e.every(function(a){return a.disabled})&&e.forEach(function(a){a.disabled=!1})):"furious"==H&&(E?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):E||(a.disabled=!a.disabled,a.userDisabled=a.disabled,e.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&
e.forEach(function(a){a.disabled=a.userDisabled=!1}))),F.stateChange({disabled:e.map(function(a){return!!a.disabled}),disengaged:e.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){if("furious"!=H||!E)if(F.legendDblclick(a,c),B){var e=I.data();e.forEach(function(a){a.disabled=!0;"furious"==H&&(a.userDisabled=a.disabled)});a.disabled=!1;"furious"==H&&(a.userDisabled=a.disabled);F.stateChange({disabled:e.map(function(a){return!!a.disabled})})}});I.classed("nv-disabled",function(a){return a.userDisabled});
I.exit().remove();k.attr("fill",C).text(q);var J=0;if(v){var S=[];I.each(function(a,c){var g=d3.select(this).select("text");try{var k=g.node().getComputedTextLength();if(0>=k)throw Error();}catch(la){k=e.utils.calcApproxTextWidth(g)}S.push(k+l)});for(var p=0,D=[],J=0;J<r&&p<S.length;)D[p]=S[p],J+=S[p++];for(0===p&&(p=1);J>r&&1<p;){D=[];p--;for(var w=0;w<S.length;w++)S[w]>(D[w%p]||0)&&(D[w%p]=S[w]);J=D.reduce(function(a,c,e,g){return a+c})}for(var L=[],w=r=0;r<p;r++)L[r]=w,w+=D[r];I.attr("transform",
function(a,c){return"translate("+L[c%p]+","+(5+Math.floor(c/p)*T)+")"});A?t.attr("transform","translate("+(g-c.right-J)+","+c.top+")"):t.attr("transform","translate(0,"+c.top+")");u=c.top+c.bottom+Math.ceil(S.length/p)*T}else{var n=5,X=5,Z=0,y;I.attr("transform",function(a,e){var k=d3.select(this).select("text").node().getComputedTextLength()+l;y=X;g<c.left+c.right+y+k&&(X=y=5,n+=T);X+=k;X>Z&&(Z=X);J<y+Z&&(J=y+Z);return"translate("+y+","+n+")"});t.attr("transform","translate("+(g-c.right-Z)+","+c.top+
")");u=c.top+c.bottom+n+15}"furious"==H&&(U.attr("width",function(a,c){return k[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),t.select(".nv-legend-bg").transition().duration(300).attr("x",-T).attr("width",J+T-12).attr("height",u+10).attr("y",-c.top-10).attr("opacity",E?1:0));U.style("fill",O).style("fill-opacity",P).style("stroke",O)});return a}var c={top:5,right:0,
bottom:5,left:0},g=400,u=20,q=function(a){return a.key},t=e.utils.getColor(),v=!0,l=32,A=!0,B=!0,K=!1,E=!1,F=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),H="classic";a.dispatch=F;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},key:{get:function(){return q},set:function(a){q=a}},align:{get:function(){return v},set:function(a){v=
a}},rightAlign:{get:function(){return A},set:function(a){A=a}},padding:{get:function(){return l},set:function(a){l=a}},updateState:{get:function(){return B},set:function(a){B=a}},radioButtonMode:{get:function(){return K},set:function(a){K=a}},expanded:{get:function(){return E},set:function(a){E=a}},vers:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?
a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return t},set:function(a){t=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.line=function(){function a(G){r.reset();r.models(c);G.each(function(a){t=d3.select(this);var G=e.utils.availableWidth(u,t,g),C=e.utils.availableHeight(q,t,g);e.utils.initSVG(t);F=c.xScale();H=c.yScale();P=P||F;I=I||H;a=t.selectAll("g.nv-wrap.nv-line").data([a]);var O=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),k=
O.append("defs"),J=O.append("g"),O=a.select("g");J.append("g").attr("class","nv-groups");J.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+g.left+","+g.top+")");c.width(G).height(C);J=a.select(".nv-scatterWrap");J.call(c);k.append("clipPath").attr("id","nv-edge-clip-"+c.id()).append("rect");a.select("#nv-edge-clip-"+c.id()+" rect").attr("width",G).attr("height",0<C?C:0);O.attr("clip-path",E?"url(#nv-edge-clip-"+c.id()+")":"");J.attr("clip-path",E?"url(#nv-edge-clip-"+c.id()+
")":"");G=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});G.enter().append("g").style("stroke-opacity",1E-6).style("stroke-width",function(a){return a.strokeWidth||1.5}).style("fill-opacity",1E-6);G.exit().remove();G.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return v(a,c)}).style("stroke",function(a,c){return v(a,c)});G.watchTransition(r,"line: groups").style("stroke-opacity",
1).style("fill-opacity",function(a){return a.fillOpacity||.5});C=G.selectAll("path.nv-area").data(function(a){return K(a)?[a]:[]});C.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(D).defined(B).x(function(a,c){return e.utils.NaNtoZero(P(l(a,c)))}).y0(function(a,c){return e.utils.NaNtoZero(I(A(a,c)))}).y1(function(a,c){return I(0>=H.domain()[0]?0<=H.domain()[1]?0:H.domain()[1]:H.domain()[0])}).apply(this,[a.values])});G.exit().selectAll("path.nv-area").remove();
C.watchTransition(r,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(D).defined(B).x(function(a,c){return e.utils.NaNtoZero(F(l(a,c)))}).y0(function(a,c){return e.utils.NaNtoZero(H(A(a,c)))}).y1(function(a,c){return H(0>=H.domain()[0]?0<=H.domain()[1]?0:H.domain()[1]:H.domain()[0])}).apply(this,[a.values])});G=G.selectAll("path.nv-line").data(function(a){return[a.values]});G.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(D).defined(B).x(function(a,
c){return e.utils.NaNtoZero(P(l(a,c)))}).y(function(a,c){return e.utils.NaNtoZero(I(A(a,c)))}));G.watchTransition(r,"line: linePaths").attr("d",d3.svg.line().interpolate(D).defined(B).x(function(a,c){return e.utils.NaNtoZero(F(l(a,c)))}).y(function(a,c){return e.utils.NaNtoZero(H(A(a,c)))}));P=F.copy();I=H.copy()});r.renderEnd("line immediate");return a}var c=e.models.scatter(),g={top:0,right:0,bottom:0,left:0},u=960,q=500,t=null,v=e.utils.defaultColor(),l=function(a){return a.x},A=function(a){return a.y},
B=function(a,c){return!isNaN(A(a,c))&&null!==A(a,c)},K=function(a){return a.area},E=!1,F,H,D="linear",C=250,O=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");c.pointSize(16).pointDomain([16,256]);var P,I,r=e.utils.renderWatch(O,C);a.dispatch=O;a.scatter=c;c.dispatch.on("elementClick",function(){O.elementClick.apply(this,arguments)});c.dispatch.on("elementMouseover",function(){O.elementMouseover.apply(this,arguments)});c.dispatch.on("elementMouseout",function(){O.elementMouseout.apply(this,
arguments)});a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return q},set:function(a){q=a}},defined:{get:function(){return B},set:function(a){B=a}},interpolate:{get:function(){return D},set:function(a){D=a}},clipEdge:{get:function(){return E},set:function(a){E=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==
a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}},duration:{get:function(){return C},set:function(a){C=a;r.reset(C);c.duration(C)}},isArea:{get:function(){return K},set:function(a){K=d3.functor(a)}},x:{get:function(){return l},set:function(a){l=a;c.x(a)}},y:{get:function(){return A},set:function(a){A=a;c.y(a)}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a);c.color(v)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.lineChart=function(){function a(v){T.reset();
T.models(c);F&&T.models(g);H&&T.models(u);v.each(function(v){var p=d3.select(this),w=this;e.utils.initSVG(p);var G=e.utils.availableWidth(B,p,l),n=e.utils.availableHeight(K,p,l);a.update=function(){0===Q?p.call(a):p.transition().duration(Q).call(a)};a.container=this;I.setter(k(v),a.update).getter(U(v)).update();I.disabled=v.map(function(a){return!!a.disabled});if(!r)for(J in r={},I)r[J]=I[J]instanceof Array?I[J].slice(0):I[J];if(v&&v.length&&v.filter(function(a){return a.values.length}).length)p.selectAll(".nv-noData").remove();
else return e.utils.noData(a,p),a;O=c.xScale();P=c.yScale();var J=p.selectAll("g.nv-wrap.nv-lineChart").data([v]);var S=J.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),y=J.select("g");S.append("rect").style("opacity",0);S.append("g").attr("class","nv-x nv-axis");S.append("g").attr("class","nv-y nv-axis");S.append("g").attr("class","nv-linesWrap");S.append("g").attr("class","nv-legendWrap");S.append("g").attr("class","nv-interactive");y.select("rect").attr("width",G).attr("height",
0<n?n:0);E&&(q.width(G),y.select(".nv-legendWrap").datum(v).call(q),l.top!=q.height()&&(l.top=q.height(),n=e.utils.availableHeight(K,p,l)),J.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")"));J.attr("transform","translate("+l.left+","+l.top+")");D&&y.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)");C&&(t.width(G).height(n).margin({left:l.left,top:l.top}).svgContainer(p).xScale(O),J.select(".nv-interactive").call(t));c.width(G).height(n).color(v.map(function(a,c){return a.color||
A(a,c)}).filter(function(a,c){return!v[c].disabled}));y.select(".nv-linesWrap").datum(v.filter(function(a){return!a.disabled})).call(c);F&&(g.scale(O)._ticks(e.utils.calcTicksX(G/100,v)).tickSize(-n,0),y.select(".nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")"),y.select(".nv-x.nv-axis").call(g));H&&(u.scale(P)._ticks(e.utils.calcTicksY(n/36,v)).tickSize(-G,0),y.select(".nv-y.nv-axis").call(u));q.dispatch.on("stateChange",function(c){for(var e in c)I[e]=c[e];V.stateChange(I);a.update()});
t.dispatch.on("elementMousemove",function(k){c.clearHighlights();var n,p,r,y=[];v.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,l){p=e.interactiveBisect(g.values,k.pointXValue,a.x());var w=g.values[p],q=a.y()(w,p);null!=q&&c.highlightPoint(l,p,!0);void 0!==w&&(void 0===n&&(n=w),void 0===r&&(r=a.xScale()(a.x()(w,p))),y.push({key:g.key,value:q,color:A(g,g.seriesIndex)}))});if(2<y.length){var q=a.yScale().invert(k.mouseY),M=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),
q=e.nearestValueIndex(y.map(function(a){return a.value}),q,M);null!==q&&(y[q].highlight=!0)}q=g.tickFormat()(a.x()(n,p));t.tooltip.position({left:k.mouseX+l.left,top:k.mouseY+l.top}).chartContainer(w.parentNode).valueFormatter(function(a,c){return null==a?"N/A":u.tickFormat()(a)}).data({value:q,index:p,series:y})();t.renderGuideLine(r)});t.dispatch.on("elementClick",function(g){var k,l=[];v.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(c){var n=e.interactiveBisect(c.values,
g.pointXValue,a.x()),p=c.values[n];if("undefined"!==typeof p){"undefined"===typeof k&&(k=a.xScale()(a.x()(p,n)));var w=a.yScale()(a.y()(p,n));l.push({point:p,pointIndex:n,pos:[k,w],seriesIndex:c.seriesIndex,series:c})}});c.dispatch.elementClick(l)});t.dispatch.on("elementMouseout",function(a){c.clearHighlights()});V.on("changeState",function(c){"undefined"!==typeof c.disabled&&v.length===c.disabled.length&&(v.forEach(function(a,e){a.disabled=c.disabled[e]}),I.disabled=c.disabled);a.update()})});T.renderEnd("lineChart immediate");
return a}var c=e.models.line(),g=e.models.axis(),u=e.models.axis(),q=e.models.legend(),t=e.interactiveGuideline(),v=e.models.tooltip(),l={top:30,right:20,bottom:50,left:60},A=e.utils.defaultColor(),B=null,K=null,E=!0,F=!0,H=!0,D=!1,C=!1,O,P,I=e.utils.state(),r=null,G=null,V=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),Q=250;g.orient("bottom").tickPadding(7);u.orient(D?"right":"left");v.valueFormatter(function(a,c){return u.tickFormat()(a,c)}).headerFormatter(function(a,
c){return g.tickFormat()(a,c)});var T=e.utils.renderWatch(V,Q),U=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},k=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(a){v.data(a).position(a.pos).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)});a.dispatch=V;a.lines=c;a.legend=q;a.xAxis=g;a.yAxis=u;a.interactiveLayer=t;a.tooltip=v;a.dispatch=
V;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return B},set:function(a){B=a}},height:{get:function(){return K},set:function(a){K=a}},showLegend:{get:function(){return E},set:function(a){E=a}},showXAxis:{get:function(){return F},set:function(a){F=a}},showYAxis:{get:function(){return H},set:function(a){H=a}},defaultState:{get:function(){return r},set:function(a){r=a}},noData:{get:function(){return G},set:function(a){G=a}},tooltips:{get:function(){return v.enabled()},
set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");v.enabled(!!a)}},tooltipContent:{get:function(){return v.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");v.contentGenerator(a)}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return Q},
set:function(a){Q=a;T.reset(Q);c.duration(Q);g.duration(Q);u.duration(Q)}},color:{get:function(){return A},set:function(a){A=e.utils.getColor(a);q.color(A);c.color(A)}},rightAlignYAxis:{get:function(){return D},set:function(a){D=a;u.orient(D?"right":"left")}},useInteractiveGuideline:{get:function(){return C},set:function(a){if(C=a)c.interactive(!1),c.useVoronoi(!1)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.linePlusBarChart=function(){function a(y){y.each(function(y){function H(){F.empty()||
F.extent(S);Db.data([F.empty()?w.domain():S]).each(function(a,c){var e=w(a[0])-w.range()[0],g=w.range()[1]-w(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",w(a[1])).attr("width",0>g?0:g)})}function ga(){S=F.empty()?null:F.extent();J=F.empty()?w.domain():F.extent();M.brush({extent:J,brush:F});H();u.width(ma).height(Ia).color(y.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!y[c].disabled&&y[c].bar}));c.width(ma).height(Ia).color(y.map(function(a,
c){return a.color||G(a,c)}).filter(function(a,c){return!y[c].disabled&&!y[c].bar}));var a=ua.select(".nv-focus .nv-barsWrap").datum(Ca.length?Ca.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return u.x()(a,c)>=J[0]&&u.x()(a,c)<=J[1]})}}):[{values:[]}]),g=ua.select(".nv-focus .nv-linesWrap").datum(Ba[0].disabled?[{values:[]}]:Ba.map(function(a,e){return{area:a.area,fillOpacity:a.fillOpacity,key:a.key,values:a.values.filter(function(a,e){return c.x()(a,e)>=J[0]&&c.x()(a,e)<=
J[1]})}}));p=Ca.length?u.xScale():c.xScale();t.scale(p)._ticks(e.utils.calcTicksX(ma/100,y)).tickSize(-Ia,0);t.domain([Math.ceil(J[0]),Math.floor(J[1])]);ua.select(".nv-x.nv-axis").transition().duration(W).call(t);a.transition().duration(W).call(u);g.transition().duration(W).call(c);ua.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+L.range()[0]+")");l.scale(L)._ticks(e.utils.calcTicksY(Ia/36,y)).tickSize(-ma,0);A.scale(n)._ticks(e.utils.calcTicksY(Ia/36,y)).tickSize(Ca.length?0:
-ma,0);ua.select(".nv-focus .nv-y1.nv-axis").style("opacity",Ca.length?1:0);ua.select(".nv-focus .nv-y2.nv-axis").style("opacity",Ba.length&&!Ba[0].disabled?1:0).attr("transform","translate("+p.range()[1]+",0)");ua.select(".nv-focus .nv-y1.nv-axis").transition().duration(W).call(l);ua.select(".nv-focus .nv-y2.nv-axis").transition().duration(W).call(A)}var oa=d3.select(this);e.utils.initSVG(oa);var ma=e.utils.availableWidth(O,oa,D),Ia=e.utils.availableHeight(P,oa,D)-(Q?k:0),Ja=k-C.top-C.bottom;a.update=
function(){oa.transition().duration(W).call(a)};a.container=this;ja.setter(ha(y),a.update).getter(fa(y)).update();ja.disabled=y.map(function(a){return!!a.disabled});if(!ea)for(za in ea={},ja)ea[za]=ja[za]instanceof Array?ja[za].slice(0):ja[za];if(y&&y.length&&y.filter(function(a){return a.values.length}).length)oa.selectAll(".nv-noData").remove();else return e.utils.noData(a,oa),a;var Ca=y.filter(function(a){return!a.disabled&&a.bar}),Ba=y.filter(function(a){return!a.bar});p=u.xScale();w=v.scale();
L=u.yScale();n=c.yScale();X=q.yScale();Z=g.yScale();var za=y.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,c){return{x:I(a,c),y:r(a,c)}})});var ra=y.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,c){return{x:I(a,c),y:r(a,c)}})});p.range([0,ma]);w.domain(d3.extent(d3.merge(za.concat(ra)),function(a){return a.x})).range([0,ma]);za=oa.selectAll("g.nv-wrap.nv-linePlusBar").data([y]);var ra=za.enter().append("g").attr("class",
"nvd3 nv-wrap nv-linePlusBar").append("g"),ua=za.select("g");ra.append("g").attr("class","nv-legendWrap");var Da=ra.append("g").attr("class","nv-focus");Da.append("g").attr("class","nv-x nv-axis");Da.append("g").attr("class","nv-y1 nv-axis");Da.append("g").attr("class","nv-y2 nv-axis");Da.append("g").attr("class","nv-barsWrap");Da.append("g").attr("class","nv-linesWrap");ra=ra.append("g").attr("class","nv-context");ra.append("g").attr("class","nv-x nv-axis");ra.append("g").attr("class","nv-y1 nv-axis");
ra.append("g").attr("class","nv-y2 nv-axis");ra.append("g").attr("class","nv-barsWrap");ra.append("g").attr("class","nv-linesWrap");ra.append("g").attr("class","nv-brushBackground");ra.append("g").attr("class","nv-x nv-brush");V&&(ra=E.align()?ma/2:ma,Da=E.align()?ra:0,E.width(ra),ua.select(".nv-legendWrap").datum(y.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?la:ta);return a})).call(E),D.top!=E.height()&&(D.top=E.height(),Ia=e.utils.availableHeight(P,
oa,D)-k),ua.select(".nv-legendWrap").attr("transform","translate("+Da+","+-D.top+")"));za.attr("transform","translate("+D.left+","+D.top+")");ua.select(".nv-context").style("display",Q?"initial":"none");q.width(ma).height(Ja).color(y.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!y[c].disabled&&y[c].bar}));g.width(ma).height(Ja).color(y.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!y[c].disabled&&!y[c].bar}));za=ua.select(".nv-context .nv-barsWrap").datum(Ca.length?
Ca:[{values:[]}]);ra=ua.select(".nv-context .nv-linesWrap").datum(Ba[0].disabled?[{values:[]}]:Ba);ua.select(".nv-context").attr("transform","translate(0,"+(Ia+D.bottom+C.top)+")");za.transition().call(q);ra.transition().call(g);U&&(v._ticks(e.utils.calcTicksX(ma/100,y)).tickSize(-Ja,0),ua.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+X.range()[0]+")"),ua.select(".nv-context .nv-x.nv-axis").transition().call(v));T&&(B.scale(X)._ticks(Ja/36).tickSize(-ma,0),K.scale(Z)._ticks(Ja/
36).tickSize(Ca.length?0:-ma,0),ua.select(".nv-context .nv-y3.nv-axis").style("opacity",Ca.length?1:0).attr("transform","translate(0,"+w.range()[0]+")"),ua.select(".nv-context .nv-y2.nv-axis").style("opacity",Ba.length?1:0).attr("transform","translate("+w.range()[1]+",0)"),ua.select(".nv-context .nv-y1.nv-axis").transition().call(B),ua.select(".nv-context .nv-y2.nv-axis").transition().call(K));F.x(w).on("brush",ga);S&&F.extent(S);var Db=ua.select(".nv-brushBackground").selectAll("g").data([S||F.extent()]);
za=Db.enter().append("g");za.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Ja);za.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Ja);za=ua.select(".nv-x.nv-brush").call(F);za.selectAll("rect").attr("height",Ja);za.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=Ja/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+
(e+8)+"V"+(2*e-8)});E.dispatch.on("stateChange",function(c){for(var e in c)ja[e]=c[e];M.stateChange(ja);a.update()});M.on("changeState",function(c){"undefined"!==typeof c.disabled&&(y.forEach(function(a,e){a.disabled=c.disabled[e]}),ja.disabled=c.disabled);a.update()});ga()});return a}var c=e.models.line(),g=e.models.line(),u=e.models.historicalBar(),q=e.models.historicalBar(),t=e.models.axis(),v=e.models.axis(),l=e.models.axis(),A=e.models.axis(),B=e.models.axis(),K=e.models.axis(),E=e.models.legend(),
F=d3.svg.brush(),H=e.models.tooltip(),D={top:30,right:30,bottom:30,left:60},C={top:0,right:30,bottom:20,left:60},O=null,P=null,I=function(a){return a.x},r=function(a){return a.y},G=e.utils.defaultColor(),V=!0,Q=!0,T=!1,U=!0,k=50,J,S=null,p,w,L,n,X,Z,y=null,M=d3.dispatch("brush","stateChange","changeState"),W=0,ja=e.utils.state(),ea=null,la=" (left axis)",ta=" (right axis)";c.clipEdge(!0);g.interactive(!1);t.orient("bottom").tickPadding(5);l.orient("left");A.orient("right");v.orient("bottom").tickPadding(5);
B.orient("left");K.orient("right");H.headerEnabled(!0).headerFormatter(function(a,c){return t.tickFormat()(a,c)});var fa=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},ha=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(a){H.duration(100).valueFormatter(function(a,c){return A.tickFormat()(a,c)}).data(a).position(a.pos).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",
function(a){H.hidden(!0)});u.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={value:a.y()(c.data),color:c.color};H.duration(0).valueFormatter(function(a,c){return l.tickFormat()(a,c)}).data(c).hidden(!1)});u.dispatch.on("elementMouseout.tooltip",function(a){H.hidden(!0)});u.dispatch.on("elementMousemove.tooltip",function(a){H.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=M;a.legend=E;a.lines=c;a.lines2=g;a.bars=u;a.bars2=q;a.xAxis=t;a.x2Axis=v;
a.y1Axis=l;a.y2Axis=A;a.y3Axis=B;a.y4Axis=K;a.tooltip=H;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return O},set:function(a){O=a}},height:{get:function(){return P},set:function(a){P=a}},showLegend:{get:function(){return V},set:function(a){V=a}},brushExtent:{get:function(){return S},set:function(a){S=a}},noData:{get:function(){return y},set:function(a){y=a}},focusEnable:{get:function(){return Q},set:function(a){Q=a}},focusHeight:{get:function(){return k},
set:function(a){k=a}},focusShowAxisX:{get:function(){return U},set:function(a){U=a}},focusShowAxisY:{get:function(){return T},set:function(a){T=a}},legendLeftAxisHint:{get:function(){return la},set:function(a){la=a}},legendRightAxisHint:{get:function(){return ta},set:function(a){ta=a}},tooltips:{get:function(){return H.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");H.enabled(!!a)}},tooltipContent:{get:function(){return H.contentGenerator()},set:function(a){e.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");H.contentGenerator(a)}},margin:{get:function(){return D},set:function(a){D.top=void 0!==a.top?a.top:D.top;D.right=void 0!==a.right?a.right:D.right;D.bottom=void 0!==a.bottom?a.bottom:D.bottom;D.left=void 0!==a.left?a.left:D.left}},duration:{get:function(){return W},set:function(a){W=a}},color:{get:function(){return G},set:function(a){G=e.utils.getColor(a);E.color(G)}},x:{get:function(){return I},set:function(a){I=a;c.x(a);g.x(a);u.x(a);q.x(a)}},y:{get:function(){return r},
set:function(a){r=a;c.y(a);g.y(a);u.y(a);q.y(a)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.lineWithFocusChart=function(){function a(n){n.each(function(n){function B(){A.empty()||A.extent(T);ga.data([A.empty()?G.domain():T]).each(function(a,c){var e=G(a[0])-I.range()[0],g=X-G(a[1]);d3.select(this).select(".left").attr("width",0>e?0:e);d3.select(this).select(".right").attr("x",G(a[1])).attr("width",0>g?0:g)})}function y(){T=A.empty()?null:A.extent();var a=A.empty()?G.domain():
A.extent();1>=Math.abs(a[0]-a[1])||(k.brush({extent:a,brush:A}),B(),ha.select(".nv-focus .nv-linesWrap").datum(n.filter(function(a){return!a.disabled}).map(function(e,g){return{key:e.key,area:e.area,values:e.values.filter(function(e,g){return c.x()(e,g)>=a[0]&&c.x()(e,g)<=a[1]})}})).transition().duration(J).call(c),ha.select(".nv-focus .nv-x.nv-axis").transition().duration(J).call(u),ha.select(".nv-focus .nv-y.nv-axis").transition().duration(J).call(q))}var M=d3.select(this),W=this;e.utils.initSVG(M);
var X=e.utils.availableWidth(D,M,E),ea=e.utils.availableHeight(C,M,E)-O,la=O-F.top-F.bottom;a.update=function(){M.transition().duration(J).call(a)};a.container=this;S.setter(L(n),a.update).getter(w(n)).update();S.disabled=n.map(function(a){return!!a.disabled});if(!p)for(U in p={},S)p[U]=S[U]instanceof Array?S[U].slice(0):S[U];if(n&&n.length&&n.filter(function(a){return a.values.length}).length)M.selectAll(".nv-noData").remove();else return e.utils.noData(a,M),a;I=c.xScale();r=c.yScale();G=g.xScale();
V=g.yScale();var U=M.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([n]);var fa=U.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),ha=U.select("g");fa.append("g").attr("class","nv-legendWrap");var oa=fa.append("g").attr("class","nv-focus");oa.append("g").attr("class","nv-x nv-axis");oa.append("g").attr("class","nv-y nv-axis");oa.append("g").attr("class","nv-linesWrap");oa.append("g").attr("class","nv-interactive");fa=fa.append("g").attr("class","nv-context");fa.append("g").attr("class",
"nv-x nv-axis");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-linesWrap");fa.append("g").attr("class","nv-brushBackground");fa.append("g").attr("class","nv-x nv-brush");Q&&(l.width(X),ha.select(".nv-legendWrap").datum(n).call(l),E.top!=l.height()&&(E.top=l.height(),ea=e.utils.availableHeight(C,M,E)-O),ha.select(".nv-legendWrap").attr("transform","translate(0,"+-E.top+")"));U.attr("transform","translate("+E.left+","+E.top+")");P&&(K.width(X).height(ea).margin({left:E.left,
top:E.top}).svgContainer(M).xScale(I),U.select(".nv-interactive").call(K));c.width(X).height(ea).color(n.map(function(a,c){return a.color||H(a,c)}).filter(function(a,c){return!n[c].disabled}));g.defined(c.defined()).width(X).height(la).color(n.map(function(a,c){return a.color||H(a,c)}).filter(function(a,c){return!n[c].disabled}));ha.select(".nv-context").attr("transform","translate(0,"+(ea+E.bottom+F.top)+")");U=ha.select(".nv-context .nv-linesWrap").datum(n.filter(function(a){return!a.disabled}));
d3.transition(U).call(g);u.scale(I)._ticks(e.utils.calcTicksX(X/100,n)).tickSize(-ea,0);q.scale(r)._ticks(e.utils.calcTicksY(ea/36,n)).tickSize(-X,0);ha.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+ea+")");A.x(G).on("brush",function(){y()});T&&A.extent(T);var ga=ha.select(".nv-brushBackground").selectAll("g").data([T||A.extent()]),ea=ga.enter().append("g");ea.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",la);ea.append("rect").attr("class","right").attr("x",
0).attr("y",0).attr("height",la);ea=ha.select(".nv-x.nv-brush").call(A);ea.selectAll("rect").attr("height",la);ea.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=la/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});y();t.scale(G)._ticks(e.utils.calcTicksX(X/100,n)).tickSize(-la,0);ha.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+
V.range()[0]+")");d3.transition(ha.select(".nv-context .nv-x.nv-axis")).call(t);v.scale(V)._ticks(e.utils.calcTicksY(la/36,n)).tickSize(-X,0);d3.transition(ha.select(".nv-context .nv-y.nv-axis")).call(v);ha.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+V.range()[0]+")");l.dispatch.on("stateChange",function(c){for(var e in c)S[e]=c[e];k.stateChange(S);a.update()});K.dispatch.on("elementMousemove",function(g){c.clearHighlights();var k,l,p,w=[];n.filter(function(a,c){a.seriesIndex=
c;return!a.disabled}).forEach(function(n,y){var r=A.empty()?G.domain():A.extent(),q=n.values.filter(function(a,e){return c.x()(a,e)>=r[0]&&c.x()(a,e)<=r[1]});l=e.interactiveBisect(q,g.pointXValue,c.x());q=q[l];null!=a.y()(q,l)&&c.highlightPoint(y,l,!0);void 0!==q&&(void 0===k&&(k=q),void 0===p&&(p=a.xScale()(a.x()(q,l))),w.push({key:n.key,value:a.y()(q,l),color:H(n,n.seriesIndex)}))});if(2<w.length){var y=a.yScale().invert(g.mouseY),r=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),y=
e.nearestValueIndex(w.map(function(a){return a.value}),y,r);null!==y&&(w[y].highlight=!0)}y=u.tickFormat()(a.x()(k,l));K.tooltip.position({left:g.mouseX+E.left,top:g.mouseY+E.top}).chartContainer(W.parentNode).valueFormatter(function(a,c){return null==a?"N/A":q.tickFormat()(a)}).data({value:y,index:l,series:w})();K.renderGuideLine(p)});K.dispatch.on("elementMouseout",function(a){c.clearHighlights()});k.on("changeState",function(c){"undefined"!==typeof c.disabled&&n.forEach(function(a,e){a.disabled=
c.disabled[e]});a.update()})});return a}var c=e.models.line(),g=e.models.line(),u=e.models.axis(),q=e.models.axis(),t=e.models.axis(),v=e.models.axis(),l=e.models.legend(),A=d3.svg.brush(),B=e.models.tooltip(),K=e.interactiveGuideline(),E={top:30,right:30,bottom:30,left:60},F={top:0,right:30,bottom:20,left:60},H=e.utils.defaultColor(),D=null,C=null,O=50,P=!1,I,r,G,V,Q=!0,T=null,U=null,k=d3.dispatch("brush","stateChange","changeState"),J=250,S=e.utils.state(),p=null;c.clipEdge(!0).duration(0);g.interactive(!1);
u.orient("bottom").tickPadding(5);q.orient("left");t.orient("bottom").tickPadding(5);v.orient("left");B.valueFormatter(function(a,c){return q.tickFormat()(a,c)}).headerFormatter(function(a,c){return u.tickFormat()(a,c)});var w=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},L=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(a){B.data(a).position(a.pos).hidden(!1)});
c.dispatch.on("elementMouseout.tooltip",function(a){B.hidden(!0)});a.dispatch=k;a.legend=l;a.lines=c;a.lines2=g;a.xAxis=u;a.yAxis=q;a.x2Axis=t;a.y2Axis=v;a.interactiveLayer=K;a.tooltip=B;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return D},set:function(a){D=a}},height:{get:function(){return C},set:function(a){C=a}},focusHeight:{get:function(){return O},set:function(a){O=a}},showLegend:{get:function(){return Q},set:function(a){Q=a}},brushExtent:{get:function(){return T},
set:function(a){T=a}},defaultState:{get:function(){return p},set:function(a){p=a}},noData:{get:function(){return U},set:function(a){U=a}},tooltips:{get:function(){return B.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");B.enabled(!!a)}},tooltipContent:{get:function(){return B.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");B.contentGenerator(a)}},margin:{get:function(){return E},set:function(a){E.top=
void 0!==a.top?a.top:E.top;E.right=void 0!==a.right?a.right:E.right;E.bottom=void 0!==a.bottom?a.bottom:E.bottom;E.left=void 0!==a.left?a.left:E.left}},color:{get:function(){return H},set:function(a){H=e.utils.getColor(a);l.color(H)}},interpolate:{get:function(){return c.interpolate()},set:function(a){c.interpolate(a);g.interpolate(a)}},xTickFormat:{get:function(){return u.tickFormat()},set:function(a){u.tickFormat(a);t.tickFormat(a)}},yTickFormat:{get:function(){return q.tickFormat()},set:function(a){q.tickFormat(a);
v.tickFormat(a)}},duration:{get:function(){return J},set:function(a){J=a;q.duration(J);v.duration(J);u.duration(J);t.duration(J)}},x:{get:function(){return c.x()},set:function(a){c.x(a);g.x(a)}},y:{get:function(){return c.y()},set:function(a){c.y(a);g.y(a)}},useInteractiveGuideline:{get:function(){return P},set:function(a){if(P=a)c.interactive(!1),c.useVoronoi(!1)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.multiBar=function(){function a(p){J.reset();p.each(function(a){var p=
g-c.left-c.right,n=u-c.top-c.bottom;l=d3.select(this);e.utils.initSVG(l);var w=0;C&&a.length&&(C=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);if(F){var Z=d3.layout.stack().offset(H).values(function(a){return a.values}).y(B)(!a.length&&C?C:a);Z.forEach(function(c,e){c.nonStackable?(a[e].nonStackableSeries=w++,Z[e]=a[e]):0<e&&Z[e-1].nonStackable&&Z[e].values.map(function(a,c){a.y0-=Z[e-1].values[c].y;a.y1=a.y0+a.y})});a=Z}a.forEach(function(a,c){a.values.forEach(function(e){e.series=
c;e.key=a.key})});F&&a[0].values.map(function(c,e){var g=0,k=0;a.map(function(c,l){if(!a[l].nonStackable){var n=c.values[e];n.size=Math.abs(n.y);0>n.y?(n.y1=k,k-=n.size):(n.y1=n.size+g,g+=n.size)}})});var y=r&&G?[]:a.map(function(a,c){return a.values.map(function(a,e){return{x:A(a,e),y:B(a,e),y0:a.y0,y1:a.y1,idx:c}})});q.domain(r||d3.merge(y).map(function(a){return a.x})).rangeBands(V||[0,p],T);t.domain(G||d3.extent(d3.merge(y).map(function(c){var e=c.y;F&&!a[c.idx].nonStackable&&(e=0<c.y?c.y1:c.y1+
c.y);return e}).concat(K))).range(Q||[n,0]);q.domain()[0]===q.domain()[1]&&(q.domain()[0]?q.domain([q.domain()[0]-.01*q.domain()[0],q.domain()[1]+.01*q.domain()[1]]):q.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+.01*t.domain()[0],t.domain()[1]-.01*t.domain()[1]]):t.domain([-1,1]));k=k||t;var y=l.selectAll("g.nv-wrap.nv-multibar").data([a]),M=y.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),W=M.append("defs"),M=M.append("g"),ja=y.select("g");
M.append("g").attr("class","nv-groups");y.attr("transform","translate("+c.left+","+c.top+")");W.append("clipPath").attr("id","nv-edge-clip-"+v).append("rect");y.select("#nv-edge-clip-"+v+" rect").attr("width",p).attr("height",n);ja.attr("clip-path",E?"url(#nv-edge-clip-"+v+")":"");p=y.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);n=J.transition(p.exit().selectAll("rect.nv-bar"),
"multibarExit",Math.min(100,I)).attr("y",function(c,e,g){e=k(0)||0;F&&a[c.series]&&!a[c.series].nonStackable&&(e=k(c.y0));return e}).attr("height",0).remove();n.delay&&n.delay(function(a,c){return I/(S+1)*c-c});p.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return D(a,c)}).style("stroke",function(a,c){return D(a,c)});p.style("stroke-opacity",1).style("fill-opacity",.75);p=p.selectAll("rect.nv-bar").data(function(c){return C&&
!a.length?C.values:c.values});p.exit().remove();p.enter().append("rect").attr("class",function(a,c){return 0>B(a,c)?"nv-bar negative":"nv-bar positive"}).attr("x",function(c,e,g){return F&&!a[g].nonStackable?0:g*q.rangeBand()/a.length}).attr("y",function(c,e,g){return k(F&&!a[g].nonStackable?c.y0:0)||0}).attr("height",0).attr("width",function(c,e,g){return q.rangeBand()/(F&&!a[g].nonStackable?1:a.length)}).attr("transform",function(a,c){return"translate("+q(A(a,c))+",0)"});p.style("fill",function(a,
c,e){return D(a,e,c)}).style("stroke",function(a,c,e){return D(a,e,c)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);U.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);U.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){U.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){U.elementClick({data:a,
index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){U.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});p.attr("class",function(a,c){return 0>B(a,c)?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,c){return"translate("+q(A(a,c))+",0)"});O&&(P||(P=a.map(function(){return!0})),p.style("fill",function(a,c,e){return d3.rgb(O(a,c)).darker(P.map(function(a,c){return c}).filter(function(a,
c){return!P[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(O(a,c)).darker(P.map(function(a,c){return c}).filter(function(a,c){return!P[c]})[e]).toString()}));p=p.watchTransition(J,"multibar",Math.min(250,I)).delay(function(c,e){return e*I/a[0].values.length});F?p.attr("y",function(c,e,g){return a[g].nonStackable?0>B(c,e)?t(0):-1>t(0)-t(B(c,e))?t(0)-1:t(B(c,e))||0:t(c.y1)}).attr("height",function(c,e,g){return a[g].nonStackable?Math.max(Math.abs(t(B(c,e))-t(0)),1)||0:Math.max(Math.abs(t(c.y+
c.y0)-t(c.y0)),1)}).attr("x",function(c,e,g){e=0;a[g].nonStackable&&(e=c.series*q.rangeBand()/a.length,a.length!==w&&(e=a[g].nonStackableSeries*q.rangeBand()/(2*w)));return e}).attr("width",function(c,e,g){return a[g].nonStackable?(c=q.rangeBand()/w,a.length!==w&&(c=q.rangeBand()/(2*w)),c):q.rangeBand()}):p.attr("x",function(c,e){return c.series*q.rangeBand()/a.length}).attr("width",q.rangeBand()/a.length).attr("y",function(a,c){return 0>B(a,c)?t(0):1>t(0)-t(B(a,c))?t(0)-1:t(B(a,c))||0}).attr("height",
function(a,c){return Math.max(Math.abs(t(B(a,c))-t(0)),1)||0});q.copy();k=t.copy();a[0]&&a[0].values&&(S=a[0].values.length)});J.renderEnd("multibar immediate");return a}var c={top:0,right:0,bottom:0,left:0},g=960,u=500,q=d3.scale.ordinal(),t=d3.scale.linear(),v=Math.floor(1E4*Math.random()),l=null,A=function(a){return a.x},B=function(a){return a.y},K=[0],E=!0,F=!1,H="zero",D=e.utils.defaultColor(),C=!1,O=null,P,I=500,r,G,V,Q,T=.1,U=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover",
"elementMouseout","elementMousemove","renderEnd"),k,J=e.utils.renderWatch(U,I),S=0;a.dispatch=U;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},x:{get:function(){return A},set:function(a){A=a}},y:{get:function(){return B},set:function(a){B=a}},xScale:{get:function(){return q},set:function(a){q=a}},yScale:{get:function(){return t},set:function(a){t=a}},xDomain:{get:function(){return r},
set:function(a){r=a}},yDomain:{get:function(){return G},set:function(a){G=a}},xRange:{get:function(){return V},set:function(a){V=a}},yRange:{get:function(){return Q},set:function(a){Q=a}},forceY:{get:function(){return K},set:function(a){K=a}},stacked:{get:function(){return F},set:function(a){F=a}},stackOffset:{get:function(){return H},set:function(a){H=a}},clipEdge:{get:function(){return E},set:function(a){E=a}},disabled:{get:function(){return P},set:function(a){P=a}},id:{get:function(){return v},
set:function(a){v=a}},hideable:{get:function(){return C},set:function(a){C=a}},groupSpacing:{get:function(){return T},set:function(a){T=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},duration:{get:function(){return I},set:function(a){I=a;J.reset(I)}},color:{get:function(){return D},set:function(a){D=e.utils.getColor(a)}},barColor:{get:function(){return O},
set:function(a){O=a?e.utils.getColor(a):null}}});e.utils.initOptions(a);return a};e.models.multiBarChart=function(){function a(n){S.reset();S.models(c);D&&S.models(g);C&&S.models(u);n.each(function(n){var v=d3.select(this);e.utils.initSVG(v);var y=e.utils.availableWidth(A,v,l),M=e.utils.availableHeight(B,v,l);a.update=function(){0===J?v.call(a):v.transition().duration(J).call(a)};a.container=this;Q.setter(L(n),a.update).getter(w(n)).update();Q.disabled=n.map(function(a){return!!a.disabled});if(!T)for(X in T=
{},Q)T[X]=Q[X]instanceof Array?Q[X].slice(0):Q[X];if(n&&n.length&&n.filter(function(a){return a.values.length}).length)v.selectAll(".nv-noData").remove();else return e.utils.noData(a,v),a;G=c.xScale();V=c.yScale();var W=v.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([n]),S=W.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");var X=W.select("g");S.append("g").attr("class","nv-x nv-axis");S.append("g").attr("class","nv-y nv-axis");S.append("g").attr("class","nv-barsWrap");
S.append("g").attr("class","nv-legendWrap");S.append("g").attr("class","nv-controlsWrap");H&&(q.width(y-(E?180:0)),X.select(".nv-legendWrap").datum(n).call(q),l.top!=q.height()&&(l.top=q.height(),M=e.utils.availableHeight(B,v,l)),X.select(".nv-legendWrap").attr("transform","translate("+(E?180:0)+","+-l.top+")"));if(E){var U=[{key:F.grouped||"Grouped",disabled:c.stacked()},{key:F.stacked||"Stacked",disabled:!c.stacked()}];t.width(E?180:0).color(["#444","#444","#444"]);X.select(".nv-controlsWrap").datum(U).attr("transform",
"translate(0,"+-l.top+")").call(t)}W.attr("transform","translate("+l.left+","+l.top+")");O&&X.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");c.disabled(n.map(function(a){return a.disabled})).width(y).height(M).color(n.map(function(a,c){return a.color||K(a,c)}).filter(function(a,c){return!n[c].disabled}));X.select(".nv-barsWrap").datum(n.filter(function(a){return!a.disabled})).call(c);if(D){g.scale(G)._ticks(e.utils.calcTicksX(y/100,n)).tickSize(-M,0);X.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+V.range()[0]+")");X.select(".nv-x.nv-axis").call(g);W=X.select(".nv-x.nv-axis > g").selectAll("g");W.selectAll("line, text").style("opacity",1);if(I){W.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?5:17)+")"});var ta=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;X.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,c){return"translate(0,"+(0===c||0!==ta%2?17:5)+")"})}P&&W.filter(function(a,c){return 0!==c%Math.ceil(n[0].values.length/
(y/100))}).selectAll("text, line").style("opacity",0);r&&W.selectAll(".tick text").attr("transform","rotate("+r+" 0,0)").style("text-anchor",0<r?"start":"end");X.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}C&&(u.scale(V)._ticks(e.utils.calcTicksY(M/36,n)).tickSize(-y,0),X.select(".nv-y.nv-axis").call(u));q.dispatch.on("stateChange",function(c){for(var e in c)Q[e]=c[e];k.stateChange(Q);a.update()});t.dispatch.on("legendClick",function(e,g){if(e.disabled){U=U.map(function(a){a.disabled=
!0;return a});e.disabled=!1;switch(e.key){case "Grouped":case F.grouped:c.stacked(!1);break;case "Stacked":case F.stacked:c.stacked(!0)}Q.stacked=c.stacked();k.stateChange(Q);a.update()}});k.on("changeState",function(e){"undefined"!==typeof e.disabled&&(n.forEach(function(a,c){a.disabled=e.disabled[c]}),Q.disabled=e.disabled);"undefined"!==typeof e.stacked&&(c.stacked(e.stacked),p=Q.stacked=e.stacked);a.update()})});S.renderEnd("multibarchart immediate");return a}var c=e.models.multiBar(),g=e.models.axis(),
u=e.models.axis(),q=e.models.legend(),t=e.models.legend(),v=e.models.tooltip(),l={top:30,right:20,bottom:50,left:60},A=null,B=null,K=e.utils.defaultColor(),E=!0,F={},H=!0,D=!0,C=!0,O=!1,P=!0,I=!1,r=0,G,V,Q=e.utils.state(),T=null,U=null,k=d3.dispatch("stateChange","changeState","renderEnd"),J=250;Q.stacked=!1;c.stacked(!1);g.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a});u.orient(O?"right":"left").tickFormat(d3.format(",.1f"));v.duration(0).valueFormatter(function(a,
c){return u.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});t.updateState(!1);var S=e.utils.renderWatch(k),p=!1,w=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:p}}},L=function(a){return function(c){void 0!==c.stacked&&(p=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};
v.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){v.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=k;a.multibar=c;a.legend=q;a.controls=t;a.xAxis=g;a.yAxis=u;a.state=Q;a.tooltip=v;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return A},set:function(a){A=a}},height:{get:function(){return B},set:function(a){B=a}},showLegend:{get:function(){return H},
set:function(a){H=a}},showControls:{get:function(){return E},set:function(a){E=a}},controlLabels:{get:function(){return F},set:function(a){F=a}},showXAxis:{get:function(){return D},set:function(a){D=a}},showYAxis:{get:function(){return C},set:function(a){C=a}},defaultState:{get:function(){return T},set:function(a){T=a}},noData:{get:function(){return U},set:function(a){U=a}},reduceXTicks:{get:function(){return P},set:function(a){P=a}},rotateLabels:{get:function(){return r},set:function(a){r=a}},staggerLabels:{get:function(){return I},
set:function(a){I=a}},tooltips:{get:function(){return v.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");v.enabled(!!a)}},tooltipContent:{get:function(){return v.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");v.contentGenerator(a)}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;
l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return J},set:function(a){J=a;c.duration(J);g.duration(J);u.duration(J);S.reset(J)}},color:{get:function(){return K},set:function(a){K=e.utils.getColor(a);q.color(K)}},rightAlignYAxis:{get:function(){return O},set:function(a){O=a;u.orient(O?"right":"left")}},barColor:{get:function(){return c.barColor},set:function(a){c.barColor(a);q.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);
return a};e.models.multiBarHorizontal=function(){function a(p){S.reset();p.each(function(a){var p=g-c.left-c.right,n=u-c.top-c.bottom;t=d3.select(this);e.utils.initSVG(t);C&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(B)(a));a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});C&&a[0].values.map(function(c,e){var g=0,k=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=k-a.size,k-=a.size):(a.y1=g,g+=a.size)})});var w=G&&V?[]:
a.map(function(a){return a.values.map(function(a,c){return{x:A(a,c),y:B(a,c),y0:a.y0,y1:a.y1}})});v.domain(G||d3.merge(w).map(function(a){return a.x})).rangeBands(Q||[0,n],I);l.domain(V||d3.extent(d3.merge(w).map(function(a){return C?0<a.y?a.y1+a.y:a.y1:a.y}).concat(E)));O&&!C?l.range(T||[0>l.domain()[0]?P:0,p-(0<l.domain()[1]?P:0)]):l.range(T||[0,p]);J=J||d3.scale.linear().domain(l.domain()).range([l(0),l(0)]);p=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);n=p.enter().append("g").attr("class",
"nvd3 nv-wrap nv-multibarHorizontal");n.append("defs");n=n.append("g");p.select("g");n.append("g").attr("class","nv-groups");p.attr("transform","translate("+c.left+","+c.top+")");p=p.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);p.exit().watchTransition(S,"multibarhorizontal: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();p.attr("class",function(a,
c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return F(a,c)}).style("stroke",function(a,c){return F(a,c)});p.watchTransition(S,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);p=p.selectAll("g.nv-bar").data(function(a){return a.values});p.exit().remove();n=p.enter().append("g").attr("transform",function(c,e,g){return"translate("+J(C?c.y0:0)+","+(C?0:g*v.rangeBand()/a.length+v(A(c,e)))+")"});n.append("rect").attr("width",
0).attr("height",v.rangeBand()/(C?1:a.length));p.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);k.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);k.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){k.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){k.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",
function(a,c){k.elementClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(a,c){k.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});K(a[0],0)&&(n.append("polyline"),p.select("polyline").attr("fill","none").attr("points",function(c,e){var g=K(c,e),k=.8*v.rangeBand()/(2*(C?1:a.length)),g=g.length?g:[-Math.abs(g),Math.abs(g)],g=g.map(function(a){return l(a)-l(0)});return[[g[0],-k],[g[0],k],[g[0],
0],[g[1],0],[g[1],-k],[g[1],k]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(c,e){var g=v.rangeBand()/(2*(C?1:a.length));return"translate("+(0>B(c,e)?0:l(B(c,e))-l(0))+", "+g+")"}));n.append("text");O&&!C?(p.select("text").attr("text-anchor",function(a,c){return 0>B(a,c)?"end":"start"}).attr("y",v.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,c){var e=r(B(a,c)),g=K(a,c);return void 0===g?e:g.length?e+"+"+r(Math.abs(g[1]))+"-"+r(Math.abs(g[0])):e+"\u00b1"+
r(Math.abs(g))}),p.watchTransition(S,"multibarhorizontal: bars").select("text").attr("x",function(a,c){return 0>B(a,c)?-4:l(B(a,c))-l(0)+4})):p.selectAll("text").text("");p.selectAll("text.nv-bar-label").text("");p.attr("class",function(a,c){return 0>B(a,c)?"nv-bar negative":"nv-bar positive"});H&&(D||(D=a.map(function(){return!0})),p.style("fill",function(a,c,e){return d3.rgb(H(a,c)).darker(D.map(function(a,c){return c}).filter(function(a,c){return!D[c]})[e]).toString()}).style("stroke",function(a,
c,e){return d3.rgb(H(a,c)).darker(D.map(function(a,c){return c}).filter(function(a,c){return!D[c]})[e]).toString()}));C?p.watchTransition(S,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+l(a.y1)+","+v(A(a,c))+")"}).select("rect").attr("width",function(a,c){return Math.abs(l(B(a,c)+a.y0)-l(a.y0))}).attr("height",v.rangeBand()):p.watchTransition(S,"multibarhorizontal: bars").attr("transform",function(c,e){return"translate("+(0>B(c,e)?l(B(c,e)):l(0))+","+(c.series*v.rangeBand()/
a.length+v(A(c,e)))+")"}).select("rect").attr("height",v.rangeBand()/a.length).attr("width",function(a,c){return Math.max(Math.abs(l(B(a,c))-l(0)),1)});v.copy();J=l.copy()});S.renderEnd("multibarHorizontal immediate");return a}var c={top:0,right:0,bottom:0,left:0},g=960,u=500,q=Math.floor(1E4*Math.random()),t=null,v=d3.scale.ordinal(),l=d3.scale.linear(),A=function(a){return a.x},B=function(a){return a.y},K=function(a){return a.yErr},E=[0],F=e.utils.defaultColor(),H=null,D,C=!1,O=!1,P=60,I=.1,r=d3.format(",.2f"),
G,V,Q,T,U=250,k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),J,S=e.utils.renderWatch(k,U);a.dispatch=k;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},x:{get:function(){return A},set:function(a){A=a}},y:{get:function(){return B},set:function(a){B=a}},yErr:{get:function(){return K},set:function(a){K=
a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return G},set:function(a){G=a}},yDomain:{get:function(){return V},set:function(a){V=a}},xRange:{get:function(){return Q},set:function(a){Q=a}},yRange:{get:function(){return T},set:function(a){T=a}},forceY:{get:function(){return E},set:function(a){E=a}},stacked:{get:function(){return C},set:function(a){C=a}},showValues:{get:function(){return O},set:function(a){O=
a}},disabled:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return q},set:function(a){q=a}},valueFormat:{get:function(){return r},set:function(a){r=a}},valuePadding:{get:function(){return P},set:function(a){P=a}},groupSpacing:{get:function(){return I},set:function(a){I=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},
duration:{get:function(){return U},set:function(a){U=a;S.reset(U)}},color:{get:function(){return F},set:function(a){F=e.utils.getColor(a)}},barColor:{get:function(){return H},set:function(a){H=a?e.utils.getColor(a):null}}});e.utils.initOptions(a);return a};e.models.multiBarHorizontalChart=function(){function a(v){J.reset();J.models(c);D&&J.models(g);C&&J.models(u);v.each(function(p){var w=d3.select(this);e.utils.initSVG(w);var v=e.utils.availableWidth(A,w,l),n=e.utils.availableHeight(B,w,l);a.update=
function(){w.transition().duration(T).call(a)};a.container=this;O=c.stacked();r.setter(k(p),a.update).getter(U(p)).update();r.disabled=p.map(function(a){return!!a.disabled});if(!G)for(J in G={},r)G[J]=r[J]instanceof Array?r[J].slice(0):r[J];if(p&&p.length&&p.filter(function(a){return a.values.length}).length)w.selectAll(".nv-noData").remove();else return e.utils.noData(a,w),a;P=c.xScale();I=c.yScale();var J=w.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([p]);var S=J.enter().append("g").attr("class",
"nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),y=J.select("g");S.append("g").attr("class","nv-x nv-axis");S.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");S.append("g").attr("class","nv-barsWrap");S.append("g").attr("class","nv-legendWrap");S.append("g").attr("class","nv-controlsWrap");H&&(q.width(v-(E?180:0)),y.select(".nv-legendWrap").datum(p).call(q),l.top!=q.height()&&(l.top=q.height(),n=e.utils.availableHeight(B,w,l)),y.select(".nv-legendWrap").attr("transform",
"translate("+(E?180:0)+","+-l.top+")"));if(E){var M=[{key:F.grouped||"Grouped",disabled:c.stacked()},{key:F.stacked||"Stacked",disabled:!c.stacked()}];t.width(E?180:0).color(["#444","#444","#444"]);y.select(".nv-controlsWrap").datum(M).attr("transform","translate(0,"+-l.top+")").call(t)}J.attr("transform","translate("+l.left+","+l.top+")");c.disabled(p.map(function(a){return a.disabled})).width(v).height(n).color(p.map(function(a,c){return a.color||K(a,c)}).filter(function(a,c){return!p[c].disabled}));
y.select(".nv-barsWrap").datum(p.filter(function(a){return!a.disabled})).transition().call(c);D&&(g.scale(P)._ticks(e.utils.calcTicksX(n/24,p)).tickSize(-v,0),y.select(".nv-x.nv-axis").call(g),y.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));C&&(u.scale(I)._ticks(e.utils.calcTicksY(v/100,p)).tickSize(-n,0),y.select(".nv-y.nv-axis").attr("transform","translate(0,"+n+")"),y.select(".nv-y.nv-axis").call(u));y.select(".nv-zeroLine line").attr("x1",I(0)).attr("x2",I(0)).attr("y1",0).attr("y2",
-n);q.dispatch.on("stateChange",function(c){for(var e in c)r[e]=c[e];Q.stateChange(r);a.update()});t.dispatch.on("legendClick",function(e,g){if(e.disabled){M=M.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":c.stacked(!1);break;case "Stacked":c.stacked(!0)}r.stacked=c.stacked();Q.stateChange(r);O=c.stacked();a.update()}});Q.on("changeState",function(e){"undefined"!==typeof e.disabled&&(p.forEach(function(a,c){a.disabled=e.disabled[c]}),r.disabled=e.disabled);"undefined"!==
typeof e.stacked&&(c.stacked(e.stacked),O=r.stacked=e.stacked);a.update()})});J.renderEnd("multibar horizontal chart immediate");return a}var c=e.models.multiBarHorizontal(),g=e.models.axis(),u=e.models.axis(),q=e.models.legend().height(30),t=e.models.legend().height(30),v=e.models.tooltip(),l={top:30,right:20,bottom:50,left:60},A=null,B=null,K=e.utils.defaultColor(),E=!0,F={},H=!0,D=!0,C=!0,O=!1,P,I,r=e.utils.state(),G=null,V=null,Q=d3.dispatch("stateChange","changeState","renderEnd"),T=250;r.stacked=
!1;c.stacked(O);g.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a});u.orient("bottom").tickFormat(d3.format(",.1f"));v.duration(0).valueFormatter(function(a,c){return u.tickFormat()(a,c)}).headerFormatter(function(a,c){return g.tickFormat()(a,c)});t.updateState(!1);var U=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:O}}},k=function(a){return function(c){void 0!==c.stacked&&(O=c.stacked);void 0!==c.active&&a.forEach(function(a,
e){a.disabled=!c.active[e]})}},J=e.utils.renderWatch(Q,T);c.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};v.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){v.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=Q;a.multibar=c;a.legend=q;a.controls=t;a.xAxis=g;a.yAxis=u;a.state=r;a.tooltip=v;a.options=e.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return A},set:function(a){A=a}},height:{get:function(){return B},set:function(a){B=a}},showLegend:{get:function(){return H},set:function(a){H=a}},showControls:{get:function(){return E},set:function(a){E=a}},controlLabels:{get:function(){return F},set:function(a){F=a}},showXAxis:{get:function(){return D},set:function(a){D=a}},showYAxis:{get:function(){return C},set:function(a){C=a}},defaultState:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return V},
set:function(a){V=a}},tooltips:{get:function(){return v.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");v.enabled(!!a)}},tooltipContent:{get:function(){return v.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");v.contentGenerator(a)}},margin:{get:function(){return l},set:function(a){l.top=void 0!==a.top?a.top:l.top;l.right=void 0!==a.right?a.right:l.right;l.bottom=void 0!==a.bottom?a.bottom:l.bottom;
l.left=void 0!==a.left?a.left:l.left}},duration:{get:function(){return T},set:function(a){T=a;J.reset(T);c.duration(T);g.duration(T);u.duration(T)}},color:{get:function(){return K},set:function(a){K=e.utils.getColor(a);q.color(K)}},barColor:{get:function(){return c.barColor},set:function(a){c.barColor(a);q.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.multiChart=function(){function a(p){p.each(function(p){function w(a){var c=
2===p[a.seriesIndex].yAxis?U:T;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color};J.duration(100).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).position(a.pos).hidden(!1)}function n(a){var c=2===p[a.seriesIndex].yAxis?U:T;a.point.x=G.x()(a.point);a.point.y=G.y()(a.point);J.duration(100).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).position(a.pos).hidden(!1)}function v(a){var c=2===p[a.data.series].yAxis?U:T;a.value=I.x()(a.data);a.series={value:I.y()(a.data),
color:a.color};J.duration(0).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}var B=d3.select(this);e.utils.initSVG(B);a.update=function(){B.transition().call(a)};a.container=this;var y=e.utils.availableWidth(u,B,c),M=e.utils.availableHeight(q,B,c),F=p.filter(function(a){return"line"==a.type&&1==a.yAxis}),K=p.filter(function(a){return"line"==a.type&&2==a.yAxis}),S=p.filter(function(a){return"bar"==a.type&&1==a.yAxis}),la=p.filter(function(a){return"bar"==a.type&&2==a.yAxis}),
ta=p.filter(function(a){return"area"==a.type&&1==a.yAxis}),fa=p.filter(function(a){return"area"==a.type&&2==a.yAxis});if(p&&p.length&&p.filter(function(a){return a.values.length}).length)B.selectAll(".nv-noData").remove();else return e.utils.noData(a,B),a;var ha=p.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:a.x,y:a.y}})}),oa=p.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:a.x,
y:a.y}})});H.domain(d3.extent(d3.merge(ha.concat(oa)),function(a){return a.x})).range([0,y]);var ga=B.selectAll("g.wrap.multiChart").data([p]),ia=ga.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ia.append("g").attr("class","nv-x nv-axis");ia.append("g").attr("class","nv-y1 nv-axis");ia.append("g").attr("class","nv-y2 nv-axis");ia.append("g").attr("class","lines1Wrap");ia.append("g").attr("class","lines2Wrap");ia.append("g").attr("class","bars1Wrap");ia.append("g").attr("class",
"bars2Wrap");ia.append("g").attr("class","stack1Wrap");ia.append("g").attr("class","stack2Wrap");ia.append("g").attr("class","legendWrap");ga=ga.select("g");ia=p.map(function(a,c){return p[c].color||g(a,c)});if(t){var qa=k.align()?y/2:y,ya=k.align()?qa:0;k.width(qa);k.color(ia);ga.select(".legendWrap").datum(p.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(k);c.top!=k.height()&&(c.top=k.height(),M=e.utils.availableHeight(q,
B,c));ga.select(".legendWrap").attr("transform","translate("+ya+","+-c.top+")")}O.width(y).height(M).interpolate(E).color(ia.filter(function(a,c){return!p[c].disabled&&1==p[c].yAxis&&"line"==p[c].type}));P.width(y).height(M).interpolate(E).color(ia.filter(function(a,c){return!p[c].disabled&&2==p[c].yAxis&&"line"==p[c].type}));I.width(y).height(M).color(ia.filter(function(a,c){return!p[c].disabled&&1==p[c].yAxis&&"bar"==p[c].type}));r.width(y).height(M).color(ia.filter(function(a,c){return!p[c].disabled&&
2==p[c].yAxis&&"bar"==p[c].type}));G.width(y).height(M).color(ia.filter(function(a,c){return!p[c].disabled&&1==p[c].yAxis&&"area"==p[c].type}));V.width(y).height(M).color(ia.filter(function(a,c){return!p[c].disabled&&2==p[c].yAxis&&"area"==p[c].type}));ga.attr("transform","translate("+c.left+","+c.top+")");var ia=ga.select(".lines1Wrap").datum(F.filter(function(a){return!a.disabled})),qa=ga.select(".bars1Wrap").datum(S.filter(function(a){return!a.disabled})),ya=ga.select(".stack1Wrap").datum(ta.filter(function(a){return!a.disabled})),
ma=ga.select(".lines2Wrap").datum(K.filter(function(a){return!a.disabled})),Ia=ga.select(".bars2Wrap").datum(la.filter(function(a){return!a.disabled})),Ja=ga.select(".stack2Wrap").datum(fa.filter(function(a){return!a.disabled})),Ca=ta.length?ta.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[],Ba=fa.length?fa.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,
y:0}]):[];D.domain(l||d3.extent(d3.merge(ha).concat(Ca),function(a){return a.y})).range([0,M]);C.domain(A||d3.extent(d3.merge(oa).concat(Ba),function(a){return a.y})).range([0,M]);O.yDomain(D.domain());I.yDomain(D.domain());G.yDomain(D.domain());P.yDomain(C.domain());r.yDomain(C.domain());V.yDomain(C.domain());ta.length&&d3.transition(ya).call(G);fa.length&&d3.transition(Ja).call(V);S.length&&d3.transition(qa).call(I);la.length&&d3.transition(Ia).call(r);F.length&&d3.transition(ia).call(O);K.length&&
d3.transition(ma).call(P);Q._ticks(e.utils.calcTicksX(y/100,p)).tickSize(-M,0);ga.select(".nv-x.nv-axis").attr("transform","translate(0,"+M+")");d3.transition(ga.select(".nv-x.nv-axis")).call(Q);T._ticks(e.utils.calcTicksY(M/36,p)).tickSize(-y,0);d3.transition(ga.select(".nv-y1.nv-axis")).call(T);U._ticks(e.utils.calcTicksY(M/36,p)).tickSize(-y,0);d3.transition(ga.select(".nv-y2.nv-axis")).call(U);ga.select(".nv-y1.nv-axis").classed("nv-disabled",ha.length?!1:!0).attr("transform","translate("+H.range()[0]+
",0)");ga.select(".nv-y2.nv-axis").classed("nv-disabled",oa.length?!1:!0).attr("transform","translate("+H.range()[1]+",0)");k.dispatch.on("stateChange",function(c){a.update()});O.dispatch.on("elementMouseover.tooltip",w);P.dispatch.on("elementMouseover.tooltip",w);O.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});P.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});G.dispatch.on("elementMouseover.tooltip",n);V.dispatch.on("elementMouseover.tooltip",n);G.dispatch.on("elementMouseout.tooltip",
function(a){J.hidden(!0)});V.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});I.dispatch.on("elementMouseover.tooltip",v);r.dispatch.on("elementMouseover.tooltip",v);I.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});r.dispatch.on("elementMouseout.tooltip",function(a){J.hidden(!0)});I.dispatch.on("elementMousemove.tooltip",function(a){J.position({top:d3.event.pageY,left:d3.event.pageX})()});r.dispatch.on("elementMousemove.tooltip",function(a){J.position({top:d3.event.pageY,
left:d3.event.pageX})()})});return a}var c={top:30,right:20,bottom:50,left:60},g=e.utils.defaultColor(),u=null,q=null,t=!0,v=null,l,A,B=function(a){return a.x},K=function(a){return a.y},E="monotone",F=!0,H=d3.scale.linear(),D=d3.scale.linear(),C=d3.scale.linear(),O=e.models.line().yScale(D),P=e.models.line().yScale(C),I=e.models.multiBar().stacked(!1).yScale(D),r=e.models.multiBar().stacked(!1).yScale(C),G=e.models.stackedArea().yScale(D),V=e.models.stackedArea().yScale(C),Q=e.models.axis().scale(H).orient("bottom").tickPadding(5),
T=e.models.axis().scale(D).orient("left"),U=e.models.axis().scale(C).orient("right"),k=e.models.legend().height(30),J=e.models.tooltip(),S=d3.dispatch();a.dispatch=S;a.lines1=O;a.lines2=P;a.bars1=I;a.bars2=r;a.stack1=G;a.stack2=V;a.xAxis=Q;a.yAxis1=T;a.yAxis2=U;a.tooltip=J;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return q},set:function(a){q=a}},showLegend:{get:function(){return t},set:function(a){t=
a}},yDomain1:{get:function(){return l},set:function(a){l=a}},yDomain2:{get:function(){return A},set:function(a){A=a}},noData:{get:function(){return v},set:function(a){v=a}},interpolate:{get:function(){return E},set:function(a){E=a}},tooltips:{get:function(){return J.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");J.enabled(!!a)}},tooltipContent:{get:function(){return J.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");
J.contentGenerator(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return g},set:function(a){g=e.utils.getColor(a)}},x:{get:function(){return B},set:function(a){B=a;O.x(a);P.x(a);I.x(a);r.x(a);G.x(a);V.x(a)}},y:{get:function(){return K},set:function(a){K=a;O.y(a);P.y(a);G.y(a);V.y(a);I.y(a);r.y(a)}},useVoronoi:{get:function(){return F},
set:function(a){F=a;O.useVoronoi(a);P.useVoronoi(a);G.useVoronoi(a);V.useVoronoi(a)}}});e.utils.initOptions(a);return a};e.models.ohlcBar=function(){function a(k){k.each(function(a){t=d3.select(this);var k=e.utils.availableWidth(g,t,c),r=e.utils.availableHeight(u,t,c);e.utils.initSVG(t);var w=k/a[0].values.length*.9;v.domain(G||d3.extent(a[0].values.map(A).concat(D)));O?v.range(Q||[.5*k/a[0].values.length,k*(a[0].values.length-.5)/a[0].values.length]):v.range(Q||[5+w/2,k-w/2-5]);l.domain(V||[d3.min(a[0].values.map(H).concat(C)),
d3.max(a[0].values.map(F).concat(C))]).range(T||[r,0]);v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));var J=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),n=J.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),X=n.append("defs"),n=n.append("g"),
Z=J.select("g");n.append("g").attr("class","nv-ticks");J.attr("transform","translate("+c.left+","+c.top+")");t.on("click",function(a,c){U.chartClick({data:a,index:c,pos:d3.event,id:q})});X.append("clipPath").attr("id","nv-chart-clip-path-"+q).append("rect");J.select("#nv-chart-clip-path-"+q+" rect").attr("width",k).attr("height",r);Z.attr("clip-path",P?"url(#nv-chart-clip-path-"+q+")":"");r=J.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});r.exit().remove();r.enter().append("path").attr("class",
function(a,c,e){return(K(a,c)>E(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c}).attr("d",function(a,c){return"m0,0l0,"+(l(K(a,c))-l(F(a,c)))+"l"+-w/2+",0l"+w/2+",0l0,"+(l(H(a,c))-l(K(a,c)))+"l0,"+(l(E(a,c))-l(H(a,c)))+"l"+w/2+",0l"+-w/2+",0z"}).attr("transform",function(a,c){return"translate("+v(A(a,c))+","+l(F(a,c))+")"}).attr("fill",function(a,c){return I[0]}).attr("stroke",function(a,c){return I[0]}).attr("x",0).attr("y",function(a,c){return l(Math.max(0,B(a,c)))}).attr("height",
function(a,c){return Math.abs(l(B(a,c))-l(0))});r.attr("class",function(a,c,e){return(K(a,c)>E(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});d3.transition(r).attr("transform",function(a,c){return"translate("+v(A(a,c))+","+l(F(a,c))+")"}).attr("d",function(c,e){var g=k/a[0].values.length*.9;return"m0,0l0,"+(l(K(c,e))-l(F(c,e)))+"l"+-g/2+",0l"+g/2+",0l0,"+(l(H(c,e))-l(K(c,e)))+"l0,"+(l(E(c,e))-l(H(c,e)))+"l"+g/2+",0l"+-g/2+",0z"})});return a}var c={top:0,right:0,bottom:0,left:0},
g=null,u=null,q=Math.floor(1E4*Math.random()),t=null,v=d3.scale.linear(),l=d3.scale.linear(),A=function(a){return a.x},B=function(a){return a.y},K=function(a){return a.open},E=function(a){return a.close},F=function(a){return a.high},H=function(a){return a.low},D=[],C=[],O=!1,P=!0,I=e.utils.defaultColor(),r=!1,G,V,Q,T,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");
a.highlightPoint=function(c,e){a.clearHighlights();t.select(".nv-ohlcBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){t.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)};a.dispatch=U;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return l},set:function(a){l=a}},xDomain:{get:function(){return G},
set:function(a){G=a}},yDomain:{get:function(){return V},set:function(a){V=a}},xRange:{get:function(){return Q},set:function(a){Q=a}},yRange:{get:function(){return T},set:function(a){T=a}},forceX:{get:function(){return D},set:function(a){D=a}},forceY:{get:function(){return C},set:function(a){C=a}},padData:{get:function(){return O},set:function(a){O=a}},clipEdge:{get:function(){return P},set:function(a){P=a}},id:{get:function(){return q},set:function(a){q=a}},interactive:{get:function(){return r},set:function(a){r=
a}},x:{get:function(){return A},set:function(a){A=a}},y:{get:function(){return B},set:function(a){B=a}},open:{get:function(){return K()},set:function(a){K=a}},close:{get:function(){return E()},set:function(a){E=a}},high:{get:function(){return F},set:function(a){F=a}},low:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!=a.top?a.top:c.top;c.right=void 0!=a.right?a.right:c.right;c.bottom=void 0!=a.bottom?a.bottom:c.bottom;c.left=void 0!=a.left?
a.left:c.left}},color:{get:function(){return I},set:function(a){I=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.parallelCoordinates=function(){function a(D){D.each(function(a){function C(a){return U(v.map(function(c){if(isNaN(a[c])||isNaN(parseFloat(a[c]))){var e=t[c].domain(),g=t[c].range(),k=e[0]-(e[1]-e[0])/9;0>S.indexOf(c)&&(e=d3.scale.linear().domain([k,e[1]]).range([V-12,g[1]]),t[c].brush.y(e),S.push(c));return[q(c),t[c](k)]}0<S.length?(w.style("display","inline"),L.style("display",
"inline")):(w.style("display","none"),L.style("display","none"));return[q(c),t[c](a[c])]}))}function D(){var a=v.filter(function(a){return!t[a].brush.empty()}),c=a.map(function(a){return t[a].brush.extent()});B=[];a.forEach(function(a,e){B[e]={dimension:a,extent:c[e]}});K=[];X.style("display",function(e){var g=a.every(function(a,g){return isNaN(e[a])&&c[g][0]==t[a].brush.y().domain()[0]?!0:c[g][0]<=e[a]&&e[a]<=c[g][1]});g&&K.push(e);return g?null:"none"});H.brush({filters:B,active:K})}function I(a){var c=
E[a];return null==c?q(a):c}var r=d3.select(this),G=e.utils.availableWidth(g,r,c),V=e.utils.availableHeight(u,r,c);e.utils.initSVG(r);K=a;q.rangePoints([0,G],1).domain(v);v.forEach(function(c){var e=d3.extent(a,function(a){return+a[c]});void 0===e[0]&&(e[0]=0,e[1]=0);e[0]===e[1]&&(--e[0],e[1]+=1);t[c]=d3.scale.linear().domain(e).range([.9*(V-12),0]);t[c].brush=d3.svg.brush().y(t[c]).on("brush",D);return"name"!=c});var r=r.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]),Q=r.enter().append("g").attr("class",
"nvd3 nv-wrap nv-parallelCoordinates").append("g"),T=r.select("g");Q.append("g").attr("class","nv-parallelCoordinates background");Q.append("g").attr("class","nv-parallelCoordinates foreground");Q.append("g").attr("class","nv-parallelCoordinates missingValuesline");r.attr("transform","translate("+c.left+","+c.top+")");var U=d3.svg.line().interpolate("cardinal").tension(F),k=d3.svg.axis().orient("left"),Q=d3.behavior.drag().on("dragstart",function(a,c){E[a]=this.parentNode.__origin__=q(a);n.attr("visibility",
"hidden")}).on("drag",function(a,c){E[a]=Math.min(G,Math.max(0,this.parentNode.__origin__+=d3.event.x));X.attr("d",C);v.sort(function(a,c){return I(a)-I(c)});q.domain(v);Z.attr("transform",function(a){return"translate("+I(a)+")"})}).on("dragend",function(a,c){delete this.parentNode.__origin__;delete E[a];d3.select(this.parentNode).attr("transform","translate("+q(a)+")");X.attr("d",C);n.attr("d",C).attr("visibility",null)}),J=q.range()[1]-q.range()[0],S=[],p=[0+J/2,V-12,G-J/2,V-12];var w=r.select(".missingValuesline").selectAll("line").data([p]);
w.enter().append("line");w.exit().remove();w.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]});var L=r.select(".missingValuesline").selectAll("text").data(["undefined values"]);L.append("text").data(["undefined values"]);L.enter().append("text");L.exit().remove();L.attr("y",V).attr("x",G-92-J/2).text(function(a){return a});var n=r.select(".background").selectAll("path").data(a);n.enter().append("path");n.exit().remove();
n.attr("d",C);var X=r.select(".foreground").selectAll("path").data(a);X.enter().append("path");X.exit().remove();X.attr("d",C).attr("stroke",A);X.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);H.elementMouseover({label:a.name,data:a.data,index:c,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})});X.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);H.elementMouseout({label:a.name,data:a.data,index:c})});var Z=T.selectAll(".dimension").data(v),r=Z.enter().append("g").attr("class",
"nv-parallelCoordinates dimension");r.append("g").attr("class","nv-parallelCoordinates nv-axis");r.append("g").attr("class","nv-parallelCoordinates-brush");r.append("text").attr("class","nv-parallelCoordinates nv-label");Z.attr("transform",function(a){return"translate("+q(a)+",0)"});Z.exit().remove();Z.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(a,c){H.elementMouseover({dim:a,pos:[d3.mouse(this.parentNode.parentNode)[0],
d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(a,c){H.elementMouseout({dim:a})}).call(Q);Z.select(".nv-axis").each(function(a,c){d3.select(this).call(k.scale(t[a]).tickFormat(d3.format(l[c])))});Z.select(".nv-parallelCoordinates-brush").each(function(a){d3.select(this).call(t[a].brush)}).selectAll("rect").attr("x",-8).attr("width",16)});return a}var c={top:30,right:0,bottom:10,left:0},g=null,u=null,q=d3.scale.ordinal(),t={},v=[],l=[],A=e.utils.defaultColor(),B=[],K=[],E=[],F=
1,H=d3.dispatch("brush","elementMouseover","elementMouseout");a.dispatch=H;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},dimensionNames:{get:function(){return v},set:function(a){v=a}},dimensionFormats:{get:function(){return l},set:function(a){l=a}},lineTension:{get:function(){return F},set:function(a){F=a}},dimensions:{get:function(){return v},set:function(a){e.deprecated("dimensions",
"use dimensionNames instead");v=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return A},set:function(a){A=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.pie=function(){function a(w){p.reset();w.each(function(a){var n=g-c.left-c.right,w=u-c.top-c.bottom,L=Math.min(n,w)/2,y=[],M=[];l=d3.select(this);
if(0===U.length)for(var W=L-L/5,ja=T*L,ea=0;ea<a[0].length;ea++)y.push(W),M.push(ja);else y=U.map(function(a){return(a.outer-a.outer/5)*L}),M=U.map(function(a){return(a.inner-a.inner/5)*L}),T=d3.min(U.map(function(a){return a.inner-a.inner/5}));e.utils.initSVG(l);var W=l.selectAll(".nv-wrap.nv-pie").data(a),ea=W.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+v).append("g"),la=W.select("g"),ja=ea.append("g").attr("class","nv-pie");ea.append("g").attr("class","nv-pieLabels");W.attr("transform",
"translate("+c.left+","+c.top+")");la.select(".nv-pie").attr("transform","translate("+n/2+","+w/2+")");la.select(".nv-pieLabels").attr("transform","translate("+n/2+","+w/2+")");l.on("click",function(a,c){k.chartClick({data:a,index:c,pos:d3.event,id:v})});J=[];S=[];for(ea=0;ea<a[0].length;ea++){var la=d3.svg.arc().outerRadius(y[ea]),ta=d3.svg.arc().outerRadius(y[ea]+5);!1!==r&&(la.startAngle(r),ta.startAngle(r));!1!==V&&(la.endAngle(V),ta.endAngle(V));D&&(la.innerRadius(M[ea]),ta.innerRadius(M[ea]));
la.cornerRadius&&Q&&(la.cornerRadius(Q),ta.cornerRadius(Q));J.push(la);S.push(ta)}M=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:t(a)});M.padAngle&&G&&M.padAngle(G);D&&C&&(ja.append("text").attr("class","nv-pie-title"),W.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return C}).style("font-size",Math.min(n,w)*T*2/(C.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,c){return"translate(0, "+P+")"}));n=W.select(".nv-pie").selectAll(".nv-slice").data(M);
w=W.select(".nv-pieLabels").selectAll(".nv-label").data(M);n.exit().remove();w.exit().remove();M=n.enter().append("g");M.attr("class","nv-slice");M.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);O&&d3.select(this).select("path").transition().duration(70).attr("d",S[c]);k.elementMouseover({data:a.data,index:c,color:d3.select(this).style("fill")})});M.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);O&&d3.select(this).select("path").transition().duration(50).attr("d",
J[c]);k.elementMouseout({data:a.data,index:c})});M.on("mousemove",function(a,c){k.elementMousemove({data:a.data,index:c})});M.on("click",function(a,c){k.elementClick({data:a.data,index:c,color:d3.select(this).style("fill")})});M.on("dblclick",function(a,c){k.elementDblClick({data:a.data,index:c,color:d3.select(this).style("fill")})});n.attr("fill",function(a,c){return A(a.data,c)});n.attr("stroke",function(a,c){return A(a.data,c)});M.append("path").each(function(a){this._current=a});n.select("path").transition().attr("d",
function(a,c){return J[c](a)}).attrTween("d",function(a,c){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;D||(a.innerRadius=0);var e=d3.interpolate(this._current,a);this._current=e(0);return function(a){return J[c](e(a))}});if(K){for(var fa=[],ea=0;ea<a[0].length;ea++)fa.push(J[ea]),E?D&&(fa[ea]=d3.svg.arc().outerRadius(J[ea].outerRadius()),!1!==r&&fa[ea].startAngle(r),!1!==V&&fa[ea].endAngle(V)):D||fa[ea].innerRadius(0);w.enter().append("g").classed("nv-label",
!0).each(function(a,c){var e=d3.select(this);e.attr("transform",function(a,c){if(I){a.outerRadius=y[c]+10;a.innerRadius=y[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+fa[c].centroid(a)+") rotate("+e+")"}a.outerRadius=L+10;a.innerRadius=L+15;return"translate("+fa[c].centroid(a)+")"});e.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);e.append("text").style("text-anchor",I?(a.startAngle+a.endAngle)/
2<Math.PI?"start":"end":"middle").style("fill","#000")});var ha={},oa=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};w.watchTransition(p,"pie labels").attr("transform",function(a,c){if(I){a.outerRadius=y[c]+10;a.innerRadius=y[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI),e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+fa[c].centroid(a)+") rotate("+e+")"}a.outerRadius=L+10;a.innerRadius=L+15;e=fa[c].centroid(a);if(a.value){var g=oa(e);ha[g]&&(e[1]-=
14);ha[oa(e)]=!0}return"translate("+e+")"});w.select(".nv-label text").style("text-anchor",function(a,c){return I?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,c){var e=(a.endAngle-a.startAngle)/(2*Math.PI),g="";if(!a.value||e<H)return"";if("function"===typeof F)g=F(a,c,{key:q(a.data),value:t(a.data),percent:B(e)});else switch(F){case "key":g=q(a.data);break;case "value":g=B(t(a.data));break;case "percent":g=d3.format("%")(e)}return g})}});p.renderEnd("pie immediate");
return a}var c={top:0,right:0,bottom:0,left:0},g=500,u=500,q=function(a){return a.x},t=function(a){return a.y},v=Math.floor(1E4*Math.random()),l=null,A=e.utils.defaultColor(),B=d3.format(",.2f"),K=!0,E=!1,F="key",H=.02,D=!1,C=!1,O=!0,P=0,I=!1,r=!1,G=!1,V=!1,Q=0,T=.5,U=[],k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),J=[],S=[],p=e.utils.renderWatch(k);a.dispatch=k;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},
{arcsRadius:{get:function(){return U},set:function(a){U=a}},width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},showLabels:{get:function(){return K},set:function(a){K=a}},title:{get:function(){return C},set:function(a){C=a}},titleOffset:{get:function(){return P},set:function(a){P=a}},labelThreshold:{get:function(){return H},set:function(a){H=a}},valueFormat:{get:function(){return B},set:function(a){B=a}},x:{get:function(){return q},set:function(a){q=
a}},id:{get:function(){return v},set:function(a){v=a}},endAngle:{get:function(){return V},set:function(a){V=a}},startAngle:{get:function(){return r},set:function(a){r=a}},padAngle:{get:function(){return G},set:function(a){G=a}},cornerRadius:{get:function(){return Q},set:function(a){Q=a}},donutRatio:{get:function(){return T},set:function(a){T=a}},labelsOutside:{get:function(){return E},set:function(a){E=a}},labelSunbeamLayout:{get:function(){return I},set:function(a){I=a}},donut:{get:function(){return D},
set:function(a){D=a}},growOnHover:{get:function(){return O},set:function(a){O=a}},pieLabelsOutside:{get:function(){return E},set:function(a){E=a;e.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return E},set:function(a){E=a;e.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return B},set:function(a){B=a;e.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return c},set:function(a){c.top=
"undefined"!=typeof a.top?a.top:c.top;c.right="undefined"!=typeof a.right?a.right:c.right;c.bottom="undefined"!=typeof a.bottom?a.bottom:c.bottom;c.left="undefined"!=typeof a.left?a.left:c.left}},y:{get:function(){return t},set:function(a){t=d3.functor(a)}},color:{get:function(){return A},set:function(a){A=e.utils.getColor(a)}},labelType:{get:function(){return F},set:function(a){F=a||"key"}}});e.utils.initOptions(a);return a};e.models.pieChart=function(){function a(u){C.reset();C.models(c);u.each(function(r){var u=
d3.select(this);e.utils.initSVG(u);var C=e.utils.availableWidth(t,u,q),B=e.utils.availableHeight(v,u,q);a.update=function(){u.transition().call(a)};a.container=this;K.setter(P(r),a.update).getter(O(r)).update();K.disabled=r.map(function(a){return!!a.disabled});if(!E)for(I in E={},K)E[I]=K[I]instanceof Array?K[I].slice(0):K[I];if(r&&r.length)u.selectAll(".nv-noData").remove();else return e.utils.noData(a,u),a;var I=u.selectAll("g.nv-wrap.nv-pieChart").data([r]);var F=I.enter().append("g").attr("class",
"nvd3 nv-wrap nv-pieChart").append("g"),k=I.select("g");F.append("g").attr("class","nv-pieWrap");F.append("g").attr("class","nv-legendWrap");l&&("top"===A?(g.width(C).key(c.x()),I.select(".nv-legendWrap").datum(r).call(g),q.top!=g.height()&&(q.top=g.height(),B=e.utils.availableHeight(v,u,q)),I.select(".nv-legendWrap").attr("transform","translate(0,"+-q.top+")")):"right"===A&&(F=e.models.legend().width(),C/2<F&&(F=C/2),g.height(B).key(c.x()),g.width(F),C-=g.width(),I.select(".nv-legendWrap").datum(r).call(g).attr("transform",
"translate("+C+",0)")));I.attr("transform","translate("+q.left+","+q.top+")");c.width(C).height(B);C=k.select(".nv-pieWrap").datum([r]);d3.transition(C).call(c);g.dispatch.on("stateChange",function(c){for(var e in c)K[e]=c[e];D.stateChange(K);a.update()});D.on("changeState",function(c){"undefined"!==typeof c.disabled&&(r.forEach(function(a,e){a.disabled=c.disabled[e]}),K.disabled=c.disabled);a.update()})});C.renderEnd("pieChart immediate");return a}var c=e.models.pie(),g=e.models.legend(),u=e.models.tooltip(),
q={top:30,right:20,bottom:20,left:20},t=null,v=null,l=!0,A="top",B=e.utils.defaultColor(),K=e.utils.state(),E=null,F=null,H=250,D=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd");u.headerEnabled(!1).duration(0).valueFormatter(function(a,e){return c.valueFormat()(a,e)});var C=e.utils.renderWatch(D),O=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},P=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=
!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};u.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){u.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){u.position({top:d3.event.pageY,left:d3.event.pageX})()});a.legend=g;a.dispatch=D;a.pie=c;a.tooltip=u;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return t},set:function(a){t=a}},height:{get:function(){return v},
set:function(a){v=a}},noData:{get:function(){return F},set:function(a){F=a}},showLegend:{get:function(){return l},set:function(a){l=a}},legendPosition:{get:function(){return A},set:function(a){A=a}},defaultState:{get:function(){return E},set:function(a){E=a}},tooltips:{get:function(){return u.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");u.enabled(!!a)}},tooltipContent:{get:function(){return u.contentGenerator()},set:function(a){e.deprecated("tooltipContent",
"use chart.tooltip.contentGenerator() instead");u.contentGenerator(a)}},color:{get:function(){return B},set:function(a){B=a;g.color(B);c.color(B)}},duration:{get:function(){return H},set:function(a){H=a;C.reset(H)}},margin:{get:function(){return q},set:function(a){q.top=void 0!==a.top?a.top:q.top;q.right=void 0!==a.right?a.right:q.right;q.bottom=void 0!==a.bottom?a.bottom:q.bottom;q.left=void 0!==a.left?a.left:q.left}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.scatter=
function(){function a(y){la.reset();y.each(function(a){v=d3.select(this);var y=e.utils.availableWidth(g,v,c),fa=e.utils.availableHeight(u,v,c);e.utils.initSVG(v);a.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var ia=k&&J&&w?[]:d3.merge(a.map(function(a){return a.values.map(function(a,c){return{x:K(a,c),y:E(a,c),size:F(a,c)}})}));l.domain(k||d3.extent(ia.map(function(a){return a.x}).concat(D)));r&&a[0]?l.range(S||[(y*G+y)/(2*a[0].values.length),y-y*(1+G)/(2*a[0].values.length)]):
l.range(S||[0,y]);A.domain(J||d3.extent(ia.map(function(a){return a.y}).concat(C))).range(p||[fa,0]);B.domain(w||d3.extent(ia.map(function(a){return a.size}).concat(O))).range(L||ta);n=l.domain()[0]===l.domain()[1]||A.domain()[0]===A.domain()[1];l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1]));A.domain()[0]===A.domain()[1]&&(A.domain()[0]?A.domain([A.domain()[0]-.01*A.domain()[0],A.domain()[1]+.01*A.domain()[1]]):
A.domain([-1,1]));isNaN(l.domain()[0])&&l.domain([-1,1]);isNaN(A.domain()[0])&&A.domain([-1,1]);M=M||l;W=W||A;var qa=v.selectAll("g.nv-wrap.nv-scatter").data([a]),ia=qa.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+t),ha=ia.append("defs"),ma=ia.append("g"),Ia=qa.select("g");qa.classed("nv-single-point",n);ma.append("g").attr("class","nv-groups");ma.append("g").attr("class","nv-point-paths");ia.append("g").attr("class","nv-point-clips");qa.attr("transform","translate("+c.left+
","+c.top+")");ha.append("clipPath").attr("id","nv-edge-clip-"+t).append("rect");qa.select("#nv-edge-clip-"+t+" rect").attr("width",y).attr("height",0<fa?fa:0);Ia.attr("clip-path",V?"url(#nv-edge-clip-"+t+")":"");ea=!0;y=qa.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});y.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);y.exit().remove();y.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});
y.watchTransition(la,"scatter: groups").style("fill",function(a,c){return q(a,c)}).style("stroke",function(a,c){return q(a,c)}).style("stroke-opacity",1).style("fill-opacity",.5);fa=y.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return I(a[0],c)})});fa.enter().append("path").style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",function(a){return"translate("+M(K(a[0],a[1]))+","+W(E(a[0],
a[1]))+")"}).attr("d",e.utils.symbol().type(function(a){return H(a[0])}).size(function(a){return B(F(a[0],a[1]))}));fa.exit().remove();y.exit().selectAll("path.nv-point").watchTransition(la,"scatter exit").attr("transform",function(a){return"translate("+l(K(a[0],a[1]))+","+A(E(a[0],a[1]))+")"}).remove();fa.each(function(a){d3.select(this).classed("nv-point",!0).classed("nv-point-"+a[1],!0).classed("nv-noninteractive",!P).classed("hover",!1)});fa.watchTransition(la,"scatter points").attr("transform",
function(a){return"translate("+l(K(a[0],a[1]))+","+A(E(a[0],a[1]))+")"}).attr("d",e.utils.symbol().type(function(a){return H(a[0])}).size(function(a){return B(F(a[0],a[1]))}));clearTimeout(ja);ja=setTimeout(function(){ea=!1;if(!P)return!1;if(!0===Z){var e=d3.merge(a.map(function(a,c){return a.values.map(function(a,e){var g=K(a,e),k=E(a,e);return[l(g)+1E-4*Math.random(),A(k)+1E-4*Math.random(),c,e,a]}).filter(function(a,c){return I(a[4],c)})}));if(0==e.length)return!1;3>e.length&&(e.push([l.range()[0]-
20,A.range()[0]-20,null,null]),e.push([l.range()[1]+20,A.range()[1]+20,null,null]),e.push([l.range()[0]-20,A.range()[0]+20,null,null]),e.push([l.range()[1]+20,A.range()[1]-20,null,null]));var k=d3.geom.polygon([[-10,-10],[-10,u+10],[g+10,u+10],[g+10,-10]]),n=d3.geom.voronoi(e).map(function(a,c){return{data:k.clip(a),series:e[c][2],point:e[c][3]}});qa.select(".nv-point-paths").selectAll("path").remove();var n=qa.select(".nv-point-paths").selectAll("path").data(n),r=n.enter().append("svg:path").attr("d",
function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,c){return"nv-path-"+c}).attr("clip-path",function(a,c){return"url(#nv-clip-"+c+")"});T&&r.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));Q&&(qa.select(".nv-point-clips").selectAll("clipPath").remove(),qa.select(".nv-point-clips").selectAll("clipPath").data(e).enter().append("svg:clipPath").attr("id",function(a,c){return"nv-clip-"+
c}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",U));var p=function(e,g){if(ea)return 0;var k=a[e.series];if(void 0!==k){var n=k.values[e.point];n.color=q(k,e.series);n.x=K(n);n.y=E(n);var r=v.node().getBoundingClientRect(),p=window.pageYOffset||document.documentElement.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft,r={left:l(K(n,e.point))+r.left+t+c.left+10,top:A(E(n,e.point))+r.top+p+c.top+10};g({point:n,series:k,pos:r,
seriesIndex:e.series,pointIndex:e.point})}};n.on("click",function(a){p(a,X.elementClick)}).on("dblclick",function(a){p(a,X.elementDblClick)}).on("mouseover",function(a){p(a,X.elementMouseover)}).on("mouseout",function(a,c){p(a,X.elementMouseout)})}else qa.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,g){if(ea||!a[e.series])return 0;var k=a[e.series],n=k.values[g];X.elementClick({point:n,series:k,pos:[l(K(n,g))+c.left,A(E(n,g))+c.top],seriesIndex:e.series,
pointIndex:g})}).on("dblclick",function(e,g){if(ea||!a[e.series])return 0;var k=a[e.series],n=k.values[g];X.elementDblClick({point:n,series:k,pos:[l(K(n,g))+c.left,A(E(n,g))+c.top],seriesIndex:e.series,pointIndex:g})}).on("mouseover",function(e,g){if(ea||!a[e.series])return 0;var k=a[e.series],n=k.values[g];X.elementMouseover({point:n,series:k,pos:[l(K(n,g))+c.left,A(E(n,g))+c.top],seriesIndex:e.series,pointIndex:g,color:q(e,g)})}).on("mouseout",function(c,e){if(ea||!a[c.series])return 0;var g=a[c.series];
X.elementMouseout({point:g.values[e],series:g,seriesIndex:c.series,pointIndex:e,color:q(c,e)})})},300);M=l.copy();W=A.copy();B.copy()});la.renderEnd("scatter immediate");return a}var c={top:0,right:0,bottom:0,left:0},g=null,u=null,q=e.utils.defaultColor(),t=Math.floor(1E5*Math.random()),v=null,l=d3.scale.linear(),A=d3.scale.linear(),B=d3.scale.linear(),K=function(a){return a.x},E=function(a){return a.y},F=function(a){return a.size||1},H=function(a){return a.shape||"circle"},D=[],C=[],O=[],P=!0,I=
function(a){return!a.notActive},r=!1,G=.1,V=!1,Q=!0,T=!1,U=function(){return 25},k=null,J=null,S=null,p=null,w=null,L=null,n=!1,X=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),Z=!0,y=250,M,W,ja,ea=!1,la=e.utils.renderWatch(X,y),ta=[16,256];a.dispatch=X;a.options=e.utils.optionsFunc.bind(a);a._calls=new function(){this.clearHighlights=function(){e.dom.write(function(){v.selectAll(".nv-point.hover").classed("hover",!1)});return null};this.highlightPoint=
function(a,c,g){e.dom.write(function(){v.select(" .nv-series-"+a+" .nv-point-"+c).classed("hover",g)})}};X.on("elementMouseover.point",function(c){P&&a._calls.highlightPoint(c.seriesIndex,c.pointIndex,!0)});X.on("elementMouseout.point",function(c){P&&a._calls.highlightPoint(c.seriesIndex,c.pointIndex,!1)});a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},xScale:{get:function(){return l},set:function(a){l=a}},
yScale:{get:function(){return A},set:function(a){A=a}},pointScale:{get:function(){return B},set:function(a){B=a}},xDomain:{get:function(){return k},set:function(a){k=a}},yDomain:{get:function(){return J},set:function(a){J=a}},pointDomain:{get:function(){return w},set:function(a){w=a}},xRange:{get:function(){return S},set:function(a){S=a}},yRange:{get:function(){return p},set:function(a){p=a}},pointRange:{get:function(){return L},set:function(a){L=a}},forceX:{get:function(){return D},set:function(a){D=
a}},forceY:{get:function(){return C},set:function(a){C=a}},forcePoint:{get:function(){return O},set:function(a){O=a}},interactive:{get:function(){return P},set:function(a){P=a}},pointActive:{get:function(){return I},set:function(a){I=a}},padDataOuter:{get:function(){return G},set:function(a){G=a}},padData:{get:function(){return r},set:function(a){r=a}},clipEdge:{get:function(){return V},set:function(a){V=a}},clipVoronoi:{get:function(){return Q},set:function(a){Q=a}},clipRadius:{get:function(){return U},
set:function(a){U=a}},showVoronoi:{get:function(){return T},set:function(a){T=a}},id:{get:function(){return t},set:function(a){t=a}},x:{get:function(){return K},set:function(a){K=d3.functor(a)}},y:{get:function(){return E},set:function(a){E=d3.functor(a)}},pointSize:{get:function(){return F},set:function(a){F=d3.functor(a)}},pointShape:{get:function(){return H},set:function(a){H=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?
a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},duration:{get:function(){return y},set:function(a){y=a;la.reset(y)}},color:{get:function(){return q},set:function(a){q=e.utils.getColor(a)}},useVoronoi:{get:function(){return Z},set:function(a){Z=a;!1===Z&&(Q=!1)}}});e.utils.initOptions(a);return a};e.models.scatterChart=function(){function a(w){J.reset();J.models(c);I&&J.models(g);r&&J.models(u);C&&J.models(t);O&&J.models(v);w.each(function(w){E=d3.select(this);
e.utils.initSVG(E);var n=e.utils.availableWidth(B,E,A),L=e.utils.availableHeight(K,E,A);a.update=function(){0===k?E.call(a):E.transition().duration(k).call(a)};a.container=this;V.setter(p(w),a.update).getter(S(w)).update();V.disabled=w.map(function(a){return!!a.disabled});if(!Q)for(y in Q={},V)Q[y]=V[y]instanceof Array?V[y].slice(0):V[y];if(w&&w.length&&w.filter(function(a){return a.values.length}).length)E.selectAll(".nv-noData").remove();else return e.utils.noData(a,E),J.renderEnd("scatter immediate"),
a;H=c.xScale();D=c.yScale();var U=E.selectAll("g.nv-wrap.nv-scatterChart").data([w]);var y=U.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+c.id()).append("g");var M=U.select("g");y.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis");y.append("g").attr("class","nv-scatterWrap");y.append("g").attr("class","nv-regressionLinesWrap");y.append("g").attr("class",
"nv-distWrap");y.append("g").attr("class","nv-legendWrap");G&&M.select(".nv-y.nv-axis").attr("transform","translate("+n+",0)");P&&(q.width(n),U.select(".nv-legendWrap").datum(w).call(q),A.top!=q.height()&&(A.top=q.height(),L=e.utils.availableHeight(K,E,A)),U.select(".nv-legendWrap").attr("transform","translate(0,"+-A.top+")"));U.attr("transform","translate("+A.left+","+A.top+")");c.width(n).height(L).color(w.map(function(a,c){a.color=a.color||F(a,c);return a.color}).filter(function(a,c){return!w[c].disabled}));
U.select(".nv-scatterWrap").datum(w.filter(function(a){return!a.disabled})).call(c);U.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+c.id()+")");U=U.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});U.enter().append("g").attr("class","nv-regLines");U=U.selectAll(".nv-regLine").data(function(a){return[a]});U.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);U.filter(function(a){return a.intercept&&a.slope}).watchTransition(J,
"scatterPlusLineChart: regline").attr("x1",H.range()[0]).attr("x2",H.range()[1]).attr("y1",function(a,c){return D(H.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,c){return D(H.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,c,e){return F(a,e)}).style("stroke-opacity",function(a,c){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});I&&(g.scale(H)._ticks(e.utils.calcTicksX(n/100,w)).tickSize(-L,0),M.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+D.range()[0]+")").call(g));r&&(u.scale(D)._ticks(e.utils.calcTicksY(L/36,w)).tickSize(-n,0),M.select(".nv-y.nv-axis").call(u));C&&(t.getData(c.x()).scale(H).width(n).color(w.map(function(a,c){return a.color||F(a,c)}).filter(function(a,c){return!w[c].disabled})),y.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),M.select(".nv-distributionX").attr("transform","translate(0,"+D.range()[0]+")").datum(w.filter(function(a){return!a.disabled})).call(t));O&&(v.getData(c.y()).scale(D).width(L).color(w.map(function(a,
c){return a.color||F(a,c)}).filter(function(a,c){return!w[c].disabled})),y.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),M.select(".nv-distributionY").attr("transform","translate("+(G?n:-v.size())+",0)").datum(w.filter(function(a){return!a.disabled})).call(v));q.dispatch.on("stateChange",function(c){for(var e in c)V[e]=c[e];T.stateChange(V);a.update()});T.on("changeState",function(c){"undefined"!==typeof c.disabled&&(w.forEach(function(a,e){a.disabled=c.disabled[e]}),V.disabled=
c.disabled);a.update()});c.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0);E.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);E.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",v.size())});c.dispatch.on("elementMouseover.tooltip",function(a){E.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos.top-L-A.top);E.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",
a.pos.left+t.size()-A.left);l.position(a.pos).data(a).hidden(!1)});H.copy();D.copy()});J.renderEnd("scatter with line immediate");return a}var c=e.models.scatter(),g=e.models.axis(),u=e.models.axis(),q=e.models.legend(),t=e.models.distribution(),v=e.models.distribution(),l=e.models.tooltip(),A={top:30,right:20,bottom:50,left:75},B=null,K=null,E=null,F=e.utils.defaultColor(),H=c.xScale(),D=c.yScale(),C=!1,O=!1,P=!0,I=!0,r=!0,G=!1,V=e.utils.state(),Q=null,T=d3.dispatch("stateChange","changeState","renderEnd"),
U=null,k=250;c.xScale(H).yScale(D);g.orient("bottom").tickPadding(10);u.orient(G?"right":"left").tickPadding(10);t.axis("x");v.axis("y");l.headerFormatter(function(a,c){return g.tickFormat()(a,c)}).valueFormatter(function(a,c){return u.tickFormat()(a,c)});var J=e.utils.renderWatch(T,k),S=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},p=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=T;a.scatter=
c;a.legend=q;a.xAxis=g;a.yAxis=u;a.distX=t;a.distY=v;a.tooltip=l;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return B},set:function(a){B=a}},height:{get:function(){return K},set:function(a){K=a}},container:{get:function(){return E},set:function(a){E=a}},showDistX:{get:function(){return C},set:function(a){C=a}},showDistY:{get:function(){return O},set:function(a){O=a}},showLegend:{get:function(){return P},set:function(a){P=a}},showXAxis:{get:function(){return I},
set:function(a){I=a}},showYAxis:{get:function(){return r},set:function(a){r=a}},defaultState:{get:function(){return Q},set:function(a){Q=a}},noData:{get:function(){return U},set:function(a){U=a}},duration:{get:function(){return k},set:function(a){k=a}},tooltips:{get:function(){return l.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");l.enabled(!!a)}},tooltipContent:{get:function(){return l.contentGenerator()},set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");
l.contentGenerator(a)}},tooltipXContent:{get:function(){return l.contentGenerator()},set:function(a){e.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},tooltipYContent:{get:function(){return l.contentGenerator()},set:function(a){e.deprecated("tooltipContent","This option is removed, put values into main tooltip.")}},margin:{get:function(){return A},set:function(a){A.top=void 0!==a.top?a.top:A.top;A.right=void 0!==a.right?a.right:A.right;A.bottom=void 0!==a.bottom?
a.bottom:A.bottom;A.left=void 0!==a.left?a.left:A.left}},rightAlignYAxis:{get:function(){return G},set:function(a){G=a;u.orient(a?"right":"left")}},color:{get:function(){return F},set:function(a){F=e.utils.getColor(a);q.color(F);t.color(F);v.color(F)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.sparkline=function(){function a(t){t.each(function(a){var t=g-c.left-c.right,C=u-c.top-c.bottom;q=d3.select(this);e.utils.initSVG(q);v.domain(E||d3.extent(a,A)).range(H||[0,t]);
l.domain(F||d3.extent(a,B)).range(D||[C,0]);a=q.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+c.left+","+c.top+")");t=a.selectAll("path").data(function(a){return[a]});t.enter().append("path");t.exit().remove();t.style("stroke",function(a,c){return a.color||K(a,c)}).attr("d",d3.svg.line().x(function(a,c){return v(A(a,c))}).y(function(a,c){return l(B(a,c))}));a=a.selectAll("circle.nv-point").data(function(a){function c(c){if(-1!=
c){var e=a[c];e.pointIndex=c;return e}return null}var e=a.map(function(a,c){return B(a,c)}),g=c(e.lastIndexOf(l.domain()[1])),r=c(e.indexOf(l.domain()[0])),e=c(e.length-1);return[r,g,e].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,c){return v(A(a,a.pointIndex))}).attr("cy",function(a,c){return l(B(a,a.pointIndex))}).attr("r",2).attr("class",function(a,c){return A(a,a.pointIndex)==v.domain()[1]?"nv-point nv-currentValue":B(a,a.pointIndex)==
l.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var c={top:2,right:0,bottom:2,left:0},g=400,u=32,q=null,t=!0,v=d3.scale.linear(),l=d3.scale.linear(),A=function(a){return a.x},B=function(a){return a.y},K=e.utils.getColor(["#000"]),E,F,H,D;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},xDomain:{get:function(){return E},set:function(a){E=a}},yDomain:{get:function(){return F},
set:function(a){F=a}},xRange:{get:function(){return H},set:function(a){H=a}},yRange:{get:function(){return D},set:function(a){D=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return l},set:function(a){l=a}},animate:{get:function(){return t},set:function(a){t=a}},x:{get:function(){return A},set:function(a){A=d3.functor(a)}},y:{get:function(){return B},set:function(a){B=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;
c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return K},set:function(a){K=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.sparklinePlus=function(){function a(C){C.each(function(C){function D(){if(!A){var a=U.selectAll(".nv-hoverValue").data(l),e=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",
0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+t(c.x()(C[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);l.length&&(e.append("line").attr("x1",0).attr("y1",-g.top).attr("x2",0).attr("y2",G),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-g.top).attr("text-anchor","end").attr("dy",".9em"),U.select(".nv-hoverValue .nv-xValue").text(B(c.x()(C[l[0]],l[0]))),e.append("text").attr("class","nv-yValue").attr("x",
6).attr("y",-g.top).attr("text-anchor","start").attr("dy",".9em"),U.select(".nv-hoverValue .nv-yValue").text(K(c.y()(C[l[0]],l[0]))))}}var I=d3.select(this);e.utils.initSVG(I);var r=e.utils.availableWidth(u,I,g),G=e.utils.availableHeight(q,I,g);a.update=function(){I.call(a)};a.container=this;if(C&&C.length)I.selectAll(".nv-noData").remove();else return e.utils.noData(a,I),a;var O=c.y()(C[C.length-1],C.length-1);t=c.xScale();v=c.yScale();var Q=I.selectAll("g.nv-wrap.nv-sparklineplus").data([C]),T=
Q.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),U=Q.select("g");T.append("g").attr("class","nv-sparklineWrap");T.append("g").attr("class","nv-valueWrap");T.append("g").attr("class","nv-hoverArea");Q.attr("transform","translate("+g.left+","+g.top+")");Q=U.select(".nv-sparklineWrap");c.width(r).height(G);Q.call(c);E&&(Q=U.select(".nv-valueWrap").selectAll(".nv-currentValue").data([O]),Q.enter().append("text").attr("class","nv-currentValue").attr("dx",H?-8:8).attr("dy",
".9em").style("text-anchor",H?"end":"start"),Q.attr("x",r+(H?g.right:0)).attr("y",F?function(a){return v(a)}:0).style("fill",c.color()(C[C.length-1],C.length-1)).text(K(O)));T.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!A){for(var a=d3.mouse(this)[0]-g.left,a=Math.round(t.invert(a)),e=Math.abs(c.x()(C[0],0)-a),q=0,p=0;p<C.length;p++)Math.abs(c.x()(C[p],p)-a)<e&&(e=Math.abs(c.x()(C[p],p)-a),q=p);l=[q];D()}}).on("click",function(){A=!A}).on("mouseout",function(){l=[];D()});
U.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-g.left+","+-g.top+")"}).attr("width",r+g.left+g.right).attr("height",G+g.top)});return a}var c=e.models.sparkline(),g={top:15,right:100,bottom:10,left:50},u=null,q=null,t,v,l=[],A=!1,B=d3.format(",r"),K=d3.format(",.2f"),E=!0,F=!0,H=!1,D=null;a.sparkline=c;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return u},set:function(a){u=a}},height:{get:function(){return q},set:function(a){q=
a}},xTickFormat:{get:function(){return B},set:function(a){B=a}},yTickFormat:{get:function(){return K},set:function(a){K=a}},showLastValue:{get:function(){return E},set:function(a){E=a}},alignValue:{get:function(){return F},set:function(a){F=a}},rightAlignValue:{get:function(){return H},set:function(a){H=a}},noData:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return g},set:function(a){g.top=void 0!==a.top?a.top:g.top;g.right=void 0!==a.right?a.right:g.right;g.bottom=void 0!==
a.bottom?a.bottom:g.bottom;g.left=void 0!==a.left?a.left:g.left}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.stackedArea=function(){function a(B){r.reset();r.models(O);B.each(function(B){var G=g-c.left-c.right,P=u-c.top-c.bottom;v=d3.select(this);e.utils.initSVG(v);D=O.xScale();C=O.yScale();var U=B;B.forEach(function(a,c){a.seriesIndex=c;a.values=a.values.map(function(a,e){a.index=e;a.seriesIndex=c;return a})});B=B.filter(function(a){return!a.disabled});B=d3.layout.stack().order(E).offset(K).values(function(a){return a.values}).x(l).y(A).out(function(a,
c,e){a.display={y:e,y0:c}})(B);var k=v.selectAll("g.nv-wrap.nv-stackedarea").data([B]),J=k.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),S=J.append("defs"),J=J.append("g"),p=k.select("g");J.append("g").attr("class","nv-areaWrap");J.append("g").attr("class","nv-scatterWrap");k.attr("transform","translate("+c.left+","+c.top+")");0==O.forceY().length&&O.forceY().push(0);O.width(G).height(P).x(l).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(B.map(function(a,c){return a.color||
q(a,a.seriesIndex)}));p.select(".nv-scatterWrap").datum(B).call(O);S.append("clipPath").attr("id","nv-edge-clip-"+t).append("rect");k.select("#nv-edge-clip-"+t+" rect").attr("width",G).attr("height",P);p.attr("clip-path",H?"url(#nv-edge-clip-"+t+")":"");var w=d3.svg.area().x(function(a,c){return D(l(a,c))}).y0(function(a){return C(a.display.y0)}).y1(function(a){return C(a.display.y+a.display.y0)}).interpolate(F),L=d3.svg.area().x(function(a,c){return D(l(a,c))}).y0(function(a){return C(a.display.y0)}).y1(function(a){return C(a.display.y0)}),
G=p.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});G.enter().append("path").attr("class",function(a,c){return"nv-area nv-area-"+c}).attr("d",function(a,c){return L(a.values,a.seriesIndex)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);I.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);I.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,c){d3.select(this).classed("hover",!1);I.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});G.exit().remove();G.style("fill",function(a,c){return a.color||q(a,a.seriesIndex)}).style("stroke",function(a,c){return a.color||q(a,a.seriesIndex)});G.watchTransition(r,"stackedArea path").attr("d",function(a,c){return w(a.values,c)});O.dispatch.on("elementMouseover.area",function(a){p.select(".nv-chart-"+
t+" .nv-area-"+a.seriesIndex).classed("hover",!0)});O.dispatch.on("elementMouseout.area",function(a){p.select(".nv-chart-"+t+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var c=a.length,e=a[0].length,g,k,l,n=[];for(k=0;k<e;++k){for(l=g=0;g<U.length;g++)l+=A(U[g].values[k]);if(l)for(g=0;g<c;g++)a[g][k][1]/=l;else for(g=0;g<c;g++)a[g][k][1]=0}for(k=0;k<e;++k)n[k]=0;return n}});r.renderEnd("stackedArea immediate");return a}var c={top:0,right:0,bottom:0,
left:0},g=960,u=500,q=e.utils.defaultColor(),t=Math.floor(1E5*Math.random()),v=null,l=function(a){return a.x},A=function(a){return a.y},B="stack",K="zero",E="default",F="linear",H=!1,D,C,O=e.models.scatter(),P=250,I=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");O.pointSize(2.2).pointDomain([2.2,2.2]);var r=e.utils.renderWatch(I,P);a.dispatch=I;a.scatter=O;O.dispatch.on("elementClick",function(){I.elementClick.apply(this,arguments)});
O.dispatch.on("elementMouseover",function(){I.elementMouseover.apply(this,arguments)});O.dispatch.on("elementMouseout",function(){I.elementMouseout.apply(this,arguments)});a.interpolate=function(c){if(!arguments.length)return F;F=c;return a};a.duration=function(c){if(!arguments.length)return P;P=c;r.reset(P);O.duration(P);return a};a.dispatch=I;a.scatter=O;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},
set:function(a){u=a}},clipEdge:{get:function(){return H},set:function(a){H=a}},offset:{get:function(){return K},set:function(a){K=a}},order:{get:function(){return E},set:function(a){E=a}},interpolate:{get:function(){return F},set:function(a){F=a}},x:{get:function(){return l},set:function(a){l=d3.functor(a)}},y:{get:function(){return A},set:function(a){A=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=
void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return q},set:function(a){q=e.utils.getColor(a)}},style:{get:function(){return B},set:function(c){B=c;switch(B){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),
a.order("default")}}},duration:{get:function(){return P},set:function(a){P=a;r.reset(P);O.duration(P)}}});e.utils.inheritOptions(a,O);e.utils.initOptions(a);return a};e.models.stackedAreaChart=function(){function a(l){L.reset();L.models(c);D&&L.models(g);C&&L.models(u);l.each(function(l){var y=d3.select(this),L=this;e.utils.initSVG(y);var M=e.utils.availableWidth(B,y,A),Q=e.utils.availableHeight(K,y,A);a.update=function(){y.transition().duration(S).call(a)};a.container=this;G.setter(X(l),a.update).getter(n(l)).update();
G.disabled=l.map(function(a){return!!a.disabled});if(!V)for(ha in V={},G)V[ha]=G[ha]instanceof Array?G[ha].slice(0):G[ha];if(l&&l.length&&l.filter(function(a){return a.values.length}).length)y.selectAll(".nv-noData").remove();else return e.utils.noData(a,y),a;I=c.xScale();r=c.yScale();var ta=y.selectAll("g.nv-wrap.nv-stackedAreaChart").data([l]),fa=ta.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g");var ha=ta.select("g");fa.append("rect").style("opacity",0);fa.append("g").attr("class",
"nv-x nv-axis");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-stackedWrap");fa.append("g").attr("class","nv-legendWrap");fa.append("g").attr("class","nv-controlsWrap");fa.append("g").attr("class","nv-interactive");ha.select("rect").attr("width",M).attr("height",Q);H&&(fa=F?M-U:M,q.width(fa),ha.select(".nv-legendWrap").datum(l).call(q),A.top!=q.height()&&(A.top=q.height(),Q=e.utils.availableHeight(K,y,A)),ha.select(".nv-legendWrap").attr("transform","translate("+(M-fa)+
","+-A.top+")"));if(F){var oa=[{key:J.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=c.style(),style:"stack"},{key:J.stream||"Stream",metaKey:"Stream",disabled:"stream"!=c.style(),style:"stream"},{key:J.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=c.style(),style:"expand"},{key:J.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=c.style(),style:"stack_percent"}];U=k.length/3*260;oa=oa.filter(function(a){return-1!==k.indexOf(a.metaKey)});t.width(U).color(["#444",
"#444","#444"]);ha.select(".nv-controlsWrap").datum(oa).call(t);A.top!=Math.max(t.height(),q.height())&&(A.top=Math.max(t.height(),q.height()),Q=e.utils.availableHeight(K,y,A));ha.select(".nv-controlsWrap").attr("transform","translate(0,"+-A.top+")")}ta.attr("transform","translate("+A.left+","+A.top+")");O&&ha.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)");P&&(v.width(M).height(Q).margin({left:A.left,top:A.top}).svgContainer(y).xScale(I),ta.select(".nv-interactive").call(v));c.width(M).height(Q);
ha.select(".nv-stackedWrap").datum(l).transition().call(c);D&&(g.scale(I)._ticks(e.utils.calcTicksX(M/100,l)).tickSize(-Q,0),ha.select(".nv-x.nv-axis").attr("transform","translate(0,"+Q+")"),ha.select(".nv-x.nv-axis").transition().duration(0).call(g));C&&(Q="wiggle"===c.offset()?0:e.utils.calcTicksY(Q/36,l),u.scale(r)._ticks(Q).tickSize(-M,0),"expand"===c.style()||"stack_percent"===c.style()?(M=u.tickFormat(),p&&M===Z||(p=M),u.tickFormat(Z)):p&&(u.tickFormat(p),p=null),ha.select(".nv-y.nv-axis").transition().duration(0).call(u));
c.dispatch.on("areaClick.toggle",function(c){1===l.filter(function(a){return!a.disabled}).length?l.forEach(function(a){a.disabled=!1}):l.forEach(function(a,e){a.disabled=e!=c.seriesIndex});G.disabled=l.map(function(a){return!!a.disabled});T.stateChange(G);a.update()});q.dispatch.on("stateChange",function(c){for(var e in c)G[e]=c[e];T.stateChange(G);a.update()});t.dispatch.on("legendClick",function(e,g){e.disabled&&(oa=oa.map(function(a){a.disabled=!0;return a}),e.disabled=!1,c.style(e.style),G.style=
c.style(),T.stateChange(G),a.update())});v.dispatch.on("elementMousemove",function(k){c.clearHighlights();var n,p,q,r=[];l.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(g,l){p=e.interactiveBisect(g.values,k.pointXValue,a.x());var t=g.values[p];null!=a.y()(t,p)&&c.highlightPoint(l,p,!0);if("undefined"!==typeof t){"undefined"===typeof n&&(n=t);"undefined"===typeof q&&(q=a.xScale()(a.x()(t,p)));var u="expand"==c.style()?t.display.y:a.y()(t,p);r.push({key:g.key,value:u,color:E(g,
g.seriesIndex),stackedValue:t.display})}});r.reverse();if(2<r.length){var t=a.yScale().invert(k.mouseY),u=null;r.forEach(function(a,c){t=Math.abs(t);var e=Math.abs(a.stackedValue.y0),g=Math.abs(a.stackedValue.y);t>=e&&t<=g+e&&(u=c)});null!=u&&(r[u].highlight=!0)}var y=g.tickFormat()(a.x()(n,p)),B=v.tooltip.valueFormatter();"expand"===c.style()||"stack_percent"===c.style()?(w||(w=B),B=d3.format(".1%")):w&&(B=w,w=null);v.tooltip.position({left:q+A.left,top:k.mouseY+A.top}).chartContainer(L.parentNode).valueFormatter(B).data({value:y,
series:r})();v.renderGuideLine(q)});v.dispatch.on("elementMouseout",function(a){c.clearHighlights()});T.on("changeState",function(e){"undefined"!==typeof e.disabled&&l.length===e.disabled.length&&(l.forEach(function(a,c){a.disabled=e.disabled[c]}),G.disabled=e.disabled);"undefined"!==typeof e.style&&c.style(e.style);a.update()})});L.renderEnd("stacked Area chart immediate");return a}var c=e.models.stackedArea(),g=e.models.axis(),u=e.models.axis(),q=e.models.legend(),t=e.models.legend(),v=e.interactiveGuideline(),
l=e.models.tooltip(),A={top:30,right:25,bottom:50,left:60},B=null,K=null,E=e.utils.defaultColor(),F=!0,H=!0,D=!0,C=!0,O=!1,P=!1,I,r,G=e.utils.state(),V=null,Q=null,T=d3.dispatch("stateChange","changeState","renderEnd"),U=250,k=["Stacked","Stream","Expanded"],J={},S=250;G.style=c.style();g.orient("bottom").tickPadding(7);u.orient(O?"right":"left");l.headerFormatter(function(a,c){return g.tickFormat()(a,c)}).valueFormatter(function(a,c){return u.tickFormat()(a,c)});v.tooltip.headerFormatter(function(a,
c){return g.tickFormat()(a,c)}).valueFormatter(function(a,c){return u.tickFormat()(a,c)});var p=null,w=null;t.updateState(!1);var L=e.utils.renderWatch(T);c.style();var n=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:c.style()}}},X=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},Z=d3.format("%");c.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=c.x()(a.point);a.point.y=c.y()(a.point);l.data(a).position(a.pos).hidden(!1)});
c.dispatch.on("elementMouseout.tooltip",function(a){l.hidden(!0)});a.dispatch=T;a.stacked=c;a.legend=q;a.controls=t;a.xAxis=g;a.yAxis=u;a.interactiveLayer=v;a.tooltip=l;a.dispatch=T;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return B},set:function(a){B=a}},height:{get:function(){return K},set:function(a){K=a}},showLegend:{get:function(){return H},set:function(a){H=a}},showXAxis:{get:function(){return D},set:function(a){D=a}},showYAxis:{get:function(){return C},
set:function(a){C=a}},defaultState:{get:function(){return V},set:function(a){V=a}},noData:{get:function(){return Q},set:function(a){Q=a}},showControls:{get:function(){return F},set:function(a){F=a}},controlLabels:{get:function(){return J},set:function(a){J=a}},controlOptions:{get:function(){return k},set:function(a){k=a}},tooltips:{get:function(){return l.enabled()},set:function(a){e.deprecated("tooltips","use chart.tooltip.enabled() instead");l.enabled(!!a)}},tooltipContent:{get:function(){return l.contentGenerator()},
set:function(a){e.deprecated("tooltipContent","use chart.tooltip.contentGenerator() instead");l.contentGenerator(a)}},margin:{get:function(){return A},set:function(a){A.top=void 0!==a.top?a.top:A.top;A.right=void 0!==a.right?a.right:A.right;A.bottom=void 0!==a.bottom?a.bottom:A.bottom;A.left=void 0!==a.left?a.left:A.left}},duration:{get:function(){return S},set:function(a){S=a;L.reset(S);c.duration(S);g.duration(S);u.duration(S)}},color:{get:function(){return E},set:function(a){E=e.utils.getColor(a);
q.color(E);c.color(E)}},rightAlignYAxis:{get:function(){return O},set:function(a){O=a;u.orient(O?"right":"left")}},useInteractiveGuideline:{get:function(){return P},set:function(e){P=!!e;a.interactive(!e);a.useVoronoi(!e);c.scatter.interactive(!e)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.sunburst=function(){function a(r){I.reset();r.each(function(a){function r(a){a.x0=a.x;a.dx0=a.dx}function G(a){var c=d3.interpolate(E.domain(),[a.x,a.x+a.dx]),e=d3.interpolate(F.domain(),
[a.y,1]),g=d3.interpolate(F.range(),[a.y?20:0,k]);return function(a,k){return k?function(c){return D(a)}:function(k){E.domain(c(k));F.domain(e(k)).range(g(k));return D(a)}}}l=d3.select(this);var I=e.utils.availableWidth(g,l,c),U=e.utils.availableHeight(u,l,c),k=Math.min(I,U)/2;e.utils.initSVG(l);var J=l.selectAll(".nv-wrap.nv-sunburst").data(a),S=J.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+v).selectAll("nv-sunburst");J.attr("transform","translate("+I/2+","+U/2+")");l.on("click",
function(a,c){K.chartClick({data:a,index:c,pos:d3.event,id:v})});F.range([0,k]);C=C||a;P=a[0];H.value(t[q]||t.count);var p=S.data(H.nodes).enter().append("path").attr("d",D).style("fill",function(a){return A((a.children?a:a.parent).name)}).style("stroke","#FFF").on("click",function(a){O!==C&&C!==a&&(O=C);C=a;p.transition().duration(B).attrTween("d",G(a))}).each(r).on("dblclick",function(a){O.parent==a&&p.transition().duration(B).attrTween("d",G(P))}).each(r).on("mouseover",function(a,c){d3.select(this).classed("hover",
!0).style("opacity",.8);K.elementMouseover({data:a,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("opacity",1);K.elementMouseout({data:a})}).on("mousemove",function(a,c){K.elementMousemove({data:a})})});I.renderEnd("sunburst immediate");return a}var c={top:0,right:0,bottom:0,left:0},g=null,u=null,q="count",t={count:function(a){return 1},size:function(a){return a.size}},v=Math.floor(1E4*Math.random()),l=null,A=e.utils.defaultColor(),B=
500,K=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),E=d3.scale.linear().range([0,2*Math.PI]),F=d3.scale.sqrt(),H=d3.layout.partition().sort(null).value(function(a){return 1}),D=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,E(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,E(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,F(a.y))}).outerRadius(function(a){return Math.max(0,
F(a.y+a.dy))}),C,O,P,I=e.utils.renderWatch(K);a.dispatch=K;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return g},set:function(a){g=a}},height:{get:function(){return u},set:function(a){u=a}},mode:{get:function(){return q},set:function(a){q=a}},id:{get:function(){return v},set:function(a){v=a}},duration:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!=a.top?a.top:c.top;c.right=void 0!=a.right?
a.right:c.right;c.bottom=void 0!=a.bottom?a.bottom:c.bottom;c.left=void 0!=a.left?a.left:c.left}},color:{get:function(){return A},set:function(a){A=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.sunburstChart=function(){function a(g){B.reset();B.models(c);g.each(function(g){var q=d3.select(this);e.utils.initSVG(q);var t=e.utils.availableWidth(null,q,u),v=e.utils.availableHeight(null,q,u);a.update=function(){0===l?q.call(a):q.transition().duration(l).call(a)};a.container=this;if(g&&
g.length)q.selectAll(".nv-noData").remove();else return e.utils.noData(a,q),a;var A=q.selectAll("g.nv-wrap.nv-sunburstChart").data(g),B=A.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),E=A.select("g");B.append("g").attr("class","nv-sunburstWrap");A.attr("transform","translate("+u.left+","+u.top+")");c.width(t).height(v);g=E.select(".nv-sunburstWrap").datum(g);d3.transition(g).call(c)});B.renderEnd("sunburstChart immediate");return a}var c=e.models.sunburst(),g=e.models.tooltip(),
u={top:30,right:20,bottom:20,left:20},q=e.utils.defaultColor(),t=null,v=null,l=250,A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),B=e.utils.renderWatch(A);g.headerEnabled(!1).duration(0).valueFormatter(function(a,c){return a});c.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.data.name,value:a.data.size,color:a.color};g.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){g.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",
function(a){g.position({top:d3.event.pageY,left:d3.event.pageX})()});a.dispatch=A;a.sunburst=c;a.tooltip=g;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return v},set:function(a){v=a}},defaultState:{get:function(){return t},set:function(a){t=a}},color:{get:function(){return q},set:function(a){q=a;c.color(q)}},duration:{get:function(){return l},set:function(a){l=a;B.reset(l);c.duration(l)}},margin:{get:function(){return u},set:function(a){u.top=void 0!==
a.top?a.top:u.top;u.right=void 0!==a.right?a.right:u.right;u.bottom=void 0!==a.bottom?a.bottom:u.bottom;u.left=void 0!==a.left?a.left:u.left}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.version="1.8.1"})();
(function(e,a){var c=0;e.widget("s3.timeplot",{options:{ajaxURL:null,autoSubmit:1E3,burnDown:!1,emptyMessage:"No data available",thousandSeparator:" ",thousandGrouping:"3",precision:null,defaultChartType:"linechart",defaultChartAxis:"totals"},_create:function(){this.id=c;c+=1},_init:function(){var a=e(this.element),c=this.options;this.widget_id=a.attr("id");this.input=a.find('input[type="hidden"][name="tp-data"]').first();this.svg=this.data=null;a=a.find(".tp-chart");this.chart=a.length?a.first():
null;this.currentChart={type:null,chart:null,container:null};c.numberFormatter=function(a){var e=c.precision;if(null===a||"undefined"==typeof a)return"-";e=e||0==e?a.toFixed(e):a.toString();e=e.split(".");a=e[0];e=1<e.length?"."+e[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+c.thousandGrouping+"})+(?!\\d))","g"),c.thousandSeparator);return a+e};this.refresh()},_destroy:function(){var a=this.element;this._unbindEvents();this.svg&&(this.svg.remove(),this.svg=null,a.find(".tp-chart").empty());this.data=
null;e.Widget.prototype.destroy.call(this)},refresh:function(){var a=this.element;this._unbindEvents();this._renderChart();this._renderChartOptions();this.options.autoSubmit?a.find(".tp-submit").hide():a.find(".tp-submit").show();this._bindEvents();a.find(".tp-throbber").hide()},_renderChartOptions:function(){var a=e(this.element),c=a.find(".tp-chart-controls").first().empty();if(!this.data.e){var q=a.attr("id"),a=e('<div class="pt-chart-opts">'),t=q+"-bchart-totals",q=q+"-lchart-totals";e(a).append(e('<span id="'+
q+'" class="tp-chart-icon tp-lchart"/><span class="tp-chart-label">Line Chart</span>'));e(a).append(e('<span id="'+t+'" class="tp-chart-icon tp-bchart"/><span class="tp-chart-label">Bar Chart</span>'));e(c).append(a)}},_renderChart:function(a){var c=this.chart;if(c){var e=this.options,g=this.currentChart,v=null,l=null;a?(v=a.type,l=a.axis):(g&&(v=g.type,l=g.axis),v&&l||(v=e.defaultChartType,l=e.defaultChartAxis));g.type==v&&g.axis==l||this._removeChart();a=this.element;e=a.find(".tp-empty");g=this.data;
null===g&&(g=JSON.parse(this.input.val()));g||(g={e:!0});this.data=g;if(g.e)this._removeChart(),a.find(".tp-empty").show();else switch(e.hide(),c.show(),l){case "totals":switch(v){case "barchart":this._renderBarChart(c,g.f,g.p);break;default:this._renderLineChart(c,g.f,g.p)}}}},_removeChart:function(){var a=this.chart;a&&(a.empty().hide(),a=this.currentChart,a.container=null,a.chart=null,a.type=null,a.axis=null,e(window).off("resize.tp"))},_renderBarChart:function(a,c,q){var g=[];for(c=0;c<q.length;c++){var u=
q[c];g.push({start:(new Date(u.t[0])).getTime(),value:u.v[0]})}q=this.currentChart;if(q.chart){var l=q.container;var A=q.chart;l.datum([{key:"reportChart",values:g}]).transition().duration(500).call(A)}else e(a).closest(".tp-chart-contents").show().css({width:"96%"}),e(a).css({height:"360px"}),l=d3.select(e(a).get(0)).append("svg").attr("class","nv"),A=nv.models.discreteBarChart().x(function(a){return a.start}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).showValues(!0).forceY([0,
1]),A.tooltip.enabled(!1),a=this.options.numberFormatter,A.valueFormat(a),A.yAxis.tickFormat(a),A.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){l.datum([{key:"reportChart",values:g}]).transition().duration(500).call(A);e(window).off("resize.tp").on("resize.tp",function(a){A.update(a)});return A}),q.container=l,q.chart=A,q.type="barchart",q.axis="totals"},_renderLineChart:function(a,c,q){var g=[],u={},l=0,A=1==c.length,B;for(B=0;B<c.length;B++){var K=
c[B][0];u.hasOwnProperty(K)&&(l=u[K]+1);(u[K]=l)&&(K+=" ["+(l+1)+"]");var E={key:K,label:c[B][0],area:A},F=[];for(K=0;K<q.length;K++){var H=q[K];F.push({start:(new Date(H.t[0])).getTime(),value:H.v[B]})}E.values=F;g.push(E)}c=this.currentChart;if(c.chart){var D=c.container;var C=c.chart;D.datum(g).transition().duration(250).call(C)}else e(a).closest(".tp-chart-contents").show().css({width:"96%"}),e(a).css({height:"360px"}),D=d3.select(e(a).get(0)).append("svg").attr("class","nv"),C=nv.models.lineChart().x(function(a){return a.start}).y(function(a){return a.value}).margin({right:50}).duration(250).showLegend(!0).useInteractiveGuideline(!0).forceY([0,
1]),C.yAxis.tickFormat(this.options.numberFormatter),C.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){D.datum(g).transition().duration(500).call(C);e(window).off("resize.tp").on("resize.tp",function(a){C.update(a)});return C}),c.container=D,c.chart=C,c.type="linechart",c.axis="totals"},reload:function(a,c,q){q="undefined"!=typeof q?q:!0;"undefined"==typeof c&&(c=this._getFilters());var g=this,u=!1;e(this.element).find(".tp-throbber").show();if(a||c)u=
this._updateAjaxURL(a,c);u||q?e.ajax({url:this.options.ajaxURL,dataType:"json"}).done(function(a){g.input.val(JSON.stringify(a));g.data=a;g.refresh()}).fail(function(a,c,e){msg="UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText;console.log(msg)}):g.refresh()},_getOptions:function(){var a="#"+e(this.element).attr("id"),c=e(a+"-time").val(),q=a=null,t=null;"custom"!=c&&(c=c.split("|"),3==c.length&&(a=c[0],q=c[1],t=c[2]));return{start:a,end:q,slots:t}},_getFilters:function(){var a=e("#"+this.widget_id+
"-filters");try{return a.length?S3.search.getCurrentFilters(a.first()):null}catch(u){return null}},_updateAjaxURL:function(a,c){var g=this.options.ajaxURL;if(!g)return!1;var t=g.split("?");if(1<t.length){var v=t[1];var l=v.split("&")}else l=[];var u=[],g=!1;if(a)for(var B in a)v=a[B],v=B+"="+v,g||-1!=e.inArray(v,l)||(g=!0),u.push(v);B={};v={};var K;if(c){var E=0;for(K=c.length;E<K;E++){var F=c[E];var H=F[0];F=F[1];null===F?B[H]||(v[H]=!0):(v[H]&&(v[H]=!1),F=H+"="+encodeURIComponent(F),B[H]?B[H].push(F):
B[H]=[F])}}E=0;for(K=l.length;E<K;E++)F=l[E].split("="),1<F.length&&(H=decodeURIComponent(F[0]),F=decodeURIComponent(F[1]),v[H]?g=!0:B[H]?g||-1!=e.inArray(H+"="+F,B[H])||(g=!0):a&&a.hasOwnProperty(H)||u.push(l[E]));for(H in B)for(E=0,K=B[H].length;E<K;E++)g||-1!=e.inArray(B[H][E],l)||(g=!0),u.push(B[H][E]);H=u.join("&");t=t[0];H&&(t=t+"?"+H);this.options.ajaxURL=t;return g},_parseDate:function(a){return d3.time.format("%Y-%m-%dT%H:%M:%S+00:00").parse(a)},_bindEvents:function(){var a=this,c="#"+this.widget_id;
e(c+"-options legend").click(function(){e(this).siblings().toggle();e(this).children().toggle()});e(c+"-filters legend").click(function(){e(this).siblings().toggle();e(this).children().toggle()});e(c+"-time").on("change.autosubmit",function(){e(c+"-tp-form").trigger("optionChanged")});if(this.options.autoSubmit){var q=this.options.autoSubmit;e(c+"-tp-form").on("optionChanged",function(){var c=e(this);if(!c.data("noAutoSubmit")){var g=c.data("autoSubmitTimeout");g&&clearTimeout(g);g=setTimeout(function(){var c=
a._getOptions(),e=a._getFilters();a.reload(c,e,!1)},q);c.data("autoSubmitTimeout",g)}})}else e(c+"-tp-form input.tp-submit").on("click.timeplot",function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)});e(c+"-lchart-totals").click(function(){a._renderChart({type:"linechart",axis:"totals"})});e(c+"-bchart-totals").click(function(){a._renderChart({type:"barchart",axis:"totals"})})},_unbindEvents:function(){var a="#"+this.widget_id;e(window).off("resize.timeplot");e(a+"-tp-form").off("optionChanged");
e(a+"-tp-form input.tp-submit").off("click.timeplot");e(a+"-time").unbind("change.autosubmit");e(a+"-options legend").unbind("click");e(a+"-filters legend").unbind("click");e(a+"-lchart-totals,"+a+"-bchart-totals").unbind("click")}})})(jQuery);
